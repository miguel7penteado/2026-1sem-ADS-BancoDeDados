[["index.html", "ADS - Banco de dados e No-SQL - 2026 - Anotações de aula Sobre estas anotações 0.1 ACESSO AO GITBOOK CELULAR 0.2 Leitores de formato de arquivo EPUB para SmartPhone 0.3 Livros Texto da Disciplina 0.4 Calendário das aulas 0.5 Alunos 2026 - 1o Semestre", " ADS - Banco de dados e No-SQL - 2026 - Anotações de aula Professor Miguél Suares 2026-02-24 Sobre estas anotações ————————————————————————————————————————————— Estas anotações são apenas lembretes das aulas expostas em sala, durante a disciplina de Banco de dados. 0.1 ACESSO AO GITBOOK CELULAR ————————————————————————————————————————————— 0.1.0.1 https://github.com/miguel7penteado/2026-1sem-ADS-BancoDeDados 0.2 Leitores de formato de arquivo EPUB para SmartPhone ————————————————————————————————————————————— 0.2.1 ANDROID 0.2.1.1 Moon+ Reader 0.3 Livros Texto da Disciplina ————————————————————————————————————————————— 0.3.1 “Introdução a sistemas de bancos de dados” do autor “Christopher John Date” Autor(es) Christopher John Date Editora LTC Idioma Português ISBN 978-85-352-8445-4 Formato Capa dura Páginas 1623 Código Biblioteca 0.3.2 “Projeto de bancos de dados” do autor “Carlos Alberto HEUSER” Autor(es) Carlos Alberto HEUSER Editora Bookman Idioma Português ISBN-10 8577803821 Formato Impresso Páginas 282 Código Biblioteca 0.4 Calendário das aulas 0.4.1 Fevereiro de 2026 ————————————————————————————————————————————— Data Dia da Semana Aulas Conteúdo 10/02/2026 Terça-Feira Aula Inaugural Apresentação da disciplina 17/02/2026 Terça-Feira — Carnaval – Não haverá aula 24/02/2026 Terça-Feira Aula 2 Fundamentos de Bancos de Dados 0.4.2 Março de 2026 ————————————————————————————————————————————— Data Dia da Semana Aulas Conteúdo 03/03/2026 Terça-Feira Aula 3 Modelagem de Banco de Dados (I) 10/03/2026 Terça-Feira Aula 4 Modelagem de Banco de Dados (II) 17/03/2026 Terça-Feira Aula 5 Administração e Gerenciamento de Banco de Dados 24/03/2026 Terça-Feira Aula 6 Aplicação CRUD 31/03/2026 Terça-Feira NP1 PROVA 0.4.3 Abril de 2026 ————————————————————————————————————————————— Data Dia da Semana Aulas Conteúdo 07/04/2026 Terça-Feira Aula 7 MySQL 14/04/2026 Terça-Feira Aula 8 PostgreSQL 21/04/2026 Terça-Feira — Dia de Tiradentes – Não haverá aula 28/04/2026 Terça-Feira Aula 9 SGBD Espacial – Python 0.4.4 Maio de 2026 ————————————————————————————————————————————— Data Dia da Semana Aulas Conteúdo 05/05/2026 Terça-Feira Aula 10 SGBD e linguagem R 12/05/2026 Terça-Feira Aula 11 Análise 1 19/05/2026 Terça-Feira NP2 PROVA 26/05/2026 Terça-Feira SUB PROVA SUBSTITUTIVA 0.4.5 Junho de 2026 ————————————————————————————————————————————— Data Dia da Semana Aulas Conteúdo 02/06/2026 Terça-Feira Aula 12 Análise 2 09/06/2026 Terça-Feira EXA EXAME – PROVA SUBSTITUTIVA 16/06/2026 Terça-Feira Aula 13 Análise 3 23/06/2026 Terça-Feira Aula 14 Análise 4 30/06/2026 Terça-Feira Aula 15 Encerramento da disciplina 0.5 Alunos 2026 - 1o Semestre ————————————————————————————————————————————— 0.5.1 Campus Chácara Santo Antônio "],["postgres-zip-version-windows-starting-guide.html", "Slide 1 Postgres (Zip Version) Windows Starting Guide", " Slide 1 Postgres (Zip Version) Windows Starting Guide Download postgresql from https://www.enterprisedb.com/download-postgresql-binaries; Unzip it; Open a cmd; Enter into the ‘bin’ directory; Init the database: initdb.exe -D ../data –username=postgres –auth=trust Start the database: pg_ctl.exe start -D ../data Open another cmd; Enter into the ‘bin’ directory; Log into the database: psql.exe –username=postgres Create a password for your user: ALTER USER postgres WITH PASSWORD ‘VeryVerySecret’; Install adminpack extension: CREATE EXTENSION adminpack; Reference: https://feilerdev.wordpress.com/2017/12/05/installing-postgresql-on-windows-using-zip-archive-without-the-installer/ "],["aula-inaugural.html", "Slide 2 Aula Inaugural 2.1 Disciplina: Banco de Dados 2.2 ‍ Sobre o Professor 2.3  Objetivos da Disciplina 2.4  Calendário da Disciplina 2.5  Ementa Resumida 2.6  Avaliação 2.7 ️ Ferramentas da Disciplina 2.8  Expectativas e Regras 2.9  Dicas para Mandar Bem 2.10  Encerramento 2.11 Estamos prontos?", " Slide 2 Aula Inaugural 2026/10/02 Professor Miguél Suares 2.1 Disciplina: Banco de Dados Curso: Análise e Desenvolvimento de Sistemas (ADS) Período: Noturno Turma: 1º semestre de 2026 Campus: Chácara Santo Antônio “Dados são o novo petróleo.” – Clive Humby! 2.2 ‍ Sobre o Professor Nome: Prof. Miguél Suares Formação: Mestre em Engenharia da Computação e Energia da Agricultura Experiência: +10 anos com bancos de dados relacionais e análise de dados Contato: miguel.penteado@docente.unip.br 2.3  Objetivos da Disciplina Compreender os fundamentos de bancos de dados Modelar dados com diagramas ER Implementar e consultar bases de dados com SQL Utilizar ferramentas como MySQL, PostgreSQL, QGIS e R Desenvolver raciocínio lógico para resolver problemas com dados 2.4  Calendário da Disciplina Data Aula Tema 04/08/2025 Aula 1 Aula Inaugural 11/08/2025 Aula 2 Fundamentos 18/08/2025 Aula 3 Modelagem e Diagramas 25/08/2025 Aula 4 Administração e Gerenciamento 01/09/2025 Aula 5 Aplicação CRUD 08/09/2025 Aula 6 MySQL 15/09/2025 NP1 Prova 22/09/2025 Aula 7 Postgres 29/09/2025 Aula 8 QGIS 06/10/2025 Aula 9 RStudio 13/10/2025 Aula 10 Análise I 20/10/2025 Aula 11 Análise II 27/10/2025 Aula 12 Análise III 03/11/2025 NP2 Prova 2.5  Ementa Resumida Introdução a bancos de dados relacionais (RDBMS) Modelagem de dados (M.E.R.) e diagramas Entidade Relacionamento (D.E.R.) Linguagem SQL: DDL, DML, DCL Ferramentas: MySQL, PostgreSQL Visualização geoespacial (QGIS) Análise e exploração de dados (R e RStudio) 2.6  Avaliação Provas (NP1 + NP2) Prova Substitutiva Exame 2.7 ️ Ferramentas da Disciplina Servidores de Banco de Dados: MySQL, PostgreSQL Servidores de Banco de Dados: pgAdmin, MySQL Workbench, DBeaver\\ Geoprocessamento: QGIS\\ Análise de Dados: R + RStudio\\ Versionamento e Organização: GitHub, Teams 2.8  Expectativas e Regras Pontualidade e entrega de atividades no prazo Trabalhos devem ser originais (sem plágio) Participação ativa nas discussões e práticas Uso responsável das ferramentas Respeito e colaboração entre colegas 2.9  Dicas para Mandar Bem Faça os exercícios logo após a aula Participe das práticas com base real Mantenha o repositório do projeto atualizado Refaça consultas SQL até entender Teste e documente suas soluções 2.10  Encerramento 2.11 Estamos prontos?  Dúvidas? Estou à disposição  Vamos construir conhecimento juntos! "],["fundamentos-de-sistemas-de-bancos-de-dados.html", "Slide 3 Fundamentos de Sistemas de Bancos de Dados 3.1 Parte I — Linha do Tempo dos SGBDs 3.2 Parte II — Fundamentos Matemáticos do Modelo Relacional 3.3 1. Conceito de Relação 3.4 2. Operações Relacionais 3.5 3. Propriedades de Relações 3.6 4. Relação de Equivalência 3.7 5. Dependências Funcionais 3.8 6. Conceito de Fecho 3.9 6. Normalização 3.10 Conexão Final — A Base Matemática do SGBD 3.11 Exercícios", " Slide 3 Fundamentos de Sistemas de Bancos de Dados 24/02/2026 Professor Miguel Suares 3.1 Parte I — Linha do Tempo dos SGBDs 3.1.1 O Início do Modelo Relacional 3.1.2 Edgar F. Codd (1923–2003) Matemático da IBM 1970: Publica o artigo: “A Relational Model of Data for Large Shared Data Banks” (Um modelo relacional de dados para grandes bancos de dados compartilhados) Base matemática do modelo: Teoria dos Conjuntos Lógica de Predicados Álgebra Relacional 3.1.3 System R e SQL 1970–1974: Desenvolvimento do System R 1974: Criação da linguagem SQL 3.1.4 Raymond F. Boyce 3.1.5 Donald D. Chamberlin 3.1.6 Modelo Entidade-Relacionamento 3.1.7 Peter Chen 1976: Modelo ER Ponte entre modelagem conceitual e implementação relacional 3.1.8 Escola de Berkeley 3.1.9 Prof Michael Stonebraker Projeto INGRES Origem do Postgres 3.1.10 Décadas de Consolidação 3.1.10.1 1980 IBM DB2 Oracle Sybase Postgres 3.1.10.2 1990 PostgreSQL MySQL 3.1.11 Anos 2000 — Big Data e NoSQL 3.2 Parte II — Fundamentos Matemáticos do Modelo Relacional Agora entramos na base formal que sustenta os SGBDs. 3.3 1. Conceito de Relação Codd queria utilizar a Matemática, mais específicamente, a teoria de conjuntos para criar um Sistema de Banco de Dados. A Matemática trataria de garantir a consistência dos dados armazenados. Operação Símbolo Descrição União ∪ Elementos que pertencem a A ou B Interseção ∩ Elementos comuns a A e B Diferença − Elementos de A que não pertencem a B Produto Cartesiano × Conjunto de todos os pares ordenados (a,b) Inicialmente a idéia era associar conjuntos de dados e garantir a consistência da informação. Assim nasceu o conceito de RELAÇÃO Sejam dois conjuntos A e B. O produto cartesiano é: A × B = { (a,b) | a ∈ A e b ∈ B } Uma relação R de A em B é qualquer subconjunto de A × B. R ⊆ A × B (lembrando que o simbolo “⊆” significa “está contido em” ou “é subconjunto de”) 3.3.0.1 Exemplo 1. Uma website vende camisetas básicas e camisetas esportivas nos tamanhos pequeno, médio e grande. Usando matemática, coloque as camisetas no conjunto A e os tamanhos no conjunto B. Utilize o produto cartesiano para gerar toda a grade de camisetas e tamanhos na página do website. Figure 3.1: Camisetas X Tamanhos No exemplo anterior, o conjunto C foi criado fazendo produto cartesiano de A x B. O conjunto C é uma Relação. Contudo as operações da teoria dos conjuntos da matemática não eram suficientes para resolver algumas situações: 3.3.0.2 Exemplo 2. Considere uma cadastro de países denominado conjunto A = {Brasil, Argentina, Chile } e um cadastro de capitais chamado conjunto B = {Brasilia, Buenos Aires, Santiago}. Verifique se é possível criar um conjunto C utilizando o produto cartesiano entre A x B, ou seja, uma Relação. Nesta relação C, cada país deve estar associado a sua capital. Figure 3.2: Capital X Países Verificando a operação de produto cartesiano que gerou o conjunto C produziu 9 pares ordenados. Mas para nosso contexto (associar países e suas capitais) dos 9 pares gerados, apenas 3 pares ordenados fazem sentido: C= {(Brasil, Brasilia), (Argentina, Buenos Aires), (Chile, Santiago)} ; os outros 6 pares não fazem sentido na associação de Países e Capitais. Portanto, para este contexto, apenas a operação de produto cartesiano não atendeu os requisitos para gerar um conjunto de dados consistente a partir de dois cadastros (dois conjuntos) fornecidos. 3.3.1 A Solução vem da Matemática: FUNÇÕES como RELACIONAMENTOS: Uma função é uma relação especial entre dois conjuntos. Sejam ( A ) e ( B ) conjuntos. Uma função \\(f: A \\to B\\) é um subconjunto do produto cartesiano \\(f \\subseteq A \\times B\\) em bom português: &gt;&gt; Uma função f(x) é uma regra que associa cada elemento de A a exatamente um elemento de B. As funções f(x) agem como uma filtragem para selecionar do produto cartesiano apenas os pares de elementos que fazem sentido: As funções podem ser vistas como setas mapeando cada ponto de um conjunto no outro. No exemplo da loja de camisetas, temos cada elemento do “conjunto A” mapeando todos os elementos do “conjunto B”. É a representação gráfica do produto cartesiano e seus pares ordenados. Figure 3.3: camisetas X Tamanhos No exemplo dos países e suas capitais, temos um elemento do “conjunto A” mapeando um elemento do “conjunto B”. É um subconjunto do produto cartesiano de A X B, ou seja, uma filtragem aplicada ao produto cartesiano. Na terminologia das funções, é uma função bijetora. Figure 3.4: Países X Capitais Conclusão de Codd: apenas as operações convencionais da teoria de conjuntos não seria suficiente para projetar sistema de banco de dados. Seria necessária a adição de elementos teoria das funções aplicada a teoria das relações. Professor Codd cria as operações de Algebra Relacional associada a Relações. Nasce o conceito de Banco de Dados Relacional e os conceitos que irão criar a linguagem SQL (Structured Query Language). 3.3.2 Relação em Banco de Dados Considere: Terminologia Relacional Banco de Dados Origem Matemática RELAÇÃO TABELA CONJUNTO ou SUBCONJUNTO ATRIBUTO COLUNAS Não aparece explicitamente TUPLA LINHA ELEMENTO DO CONJUNTO OU PAR ORDENADO 3.4 2. Operações Relacionais Baseadas na Álgebra Relacional de Codd. Operação Símbolo Descrição Seleção σ Filtra linhas Projeção π Seleciona colunas União ∪ Combina relações compatíveis Interseção ∩ Elementos comuns Diferença − Subtração Produto Cartesiano × Combinação total Junção ⋈ Produto + Seleção Divisão ÷ Consulta universal Todas as operações Relacionais são operações SQL e serão estudadas na aula 4 (Modelagem parte 2). 3.5 3. Propriedades de Relações Seja R ⊆ A × A. 3.5.1 3.1 Reflexiva “Todo elemento é equivalente a si mesmo” ∀x ∈ A, (x,x) ∈ R 3.5.1.1 Exemplo “Cadastro de Produtos - Popriedade”Reflexiva” da Relação: Em um cadastro de produtos, o produto Teclado tem a mesma categoria que o produto Teclado (ele mesmo). Consequentemente, em uma tabela do Banco de Dados, o valor da coluna “CategoriaID” de um registro é sempre igual ao “CategoriaID” dele mesmo. 3.5.2 3.2 Simétrica “Se o primeiro equivale ao segundo, então o segundo equivale ao primeiro” Se (x,y) ∈ R então (y,x) ∈ R 3.5.2.1 Exemplo: “Cadastro de Produtos - Popriedade”Simétrica” da Relação: Se o Teclado (1) é equivalente ao Mouse (2) (ambos são da categoria Eletrônicos), então o Mouse (2) é equivalente ao Teclado (1). Consequentemente, no Banco de Dados, Teclado.CategoriaID = Mouse.CategoriaID. Essa propriedade é utilizada para fazer “pareamento” entre tabelas. 3.5.3 3.3 Transitiva “Se o primeiro equivale ao segundo, e o segundo equivale ao terceiro”, então primeiro equivale ao terceiro.” Se (x,y) ∈ R e (y,z) ∈ R então (x,z) ∈ R 3.5.3.1 Exemplo: “Cadastro de Produtos - Popriedade”Transitiva” da Relação: Se Teclado (1) é equivalente ao Mouse (2) e Mouse (2) é equivalente ao Monitor (3), então obrigatoriamente Teclado (1) é equivalente ao Monitor (3), pois todos são da categoria “Eletrônicos”. Isso garante que todos os elementos de uma categoria formem um grupo fechado e coeso. 3.5.4 3.4 Antissimétrica “Se o primeiro equivale ao segundo, então o segundo NÃO PODE equivaler ao primeiro” Se (x,y) ∈ R e (y,x) ∈ R então x = y 3.5.4.1 Exemplo: “Cadastro de Funcionários - Popriedade”Anti-Simétrica” da Relação: Se o João é gerente da Maria, a Maria NÃO PODE ser gerente do João. Em uma tabela de funcionários, o Banco de dados garante HIERARQUIA na regra de negócio. 3.6 4. Relação de Equivalência Uma relação é de equivalência se é: Reflexiva Simétrica Transitiva 3.6.0.1 Exemplo: “Cadastro de Produtos -”Teste de Relação e Equivalência”: Tenho uma tabela de produtos. Todos os produtos estão classificados em categorias. Prove nesta tabela que 2 produtos são equivalentes. ID (Elemento) Nome do Produto CategoriaID (Classe) 1 Teclado 1 (Eletrônicos) 2 Mouse 1 (Eletrônicos) 3 Monitor 1 (Eletrônicos) 4 Camisa 2 (Vestuário) 5 Calça 2 (Vestuário) 6 Tênis 2 (Vestuário) 7 Livro SQL 3 (Livraria) 8 Livro Java 3 (Livraria) 9 Livro Redes 3 (Livraria) 10 Cadeira 4 (Móveis) 11 Mesa 4 (Móveis) 12 Sofá 4 (Móveis) 3.6.0.1.1 Resolução: “Dois produtos são equivalentes se pertencerem à mesma categoria.” “Dois produtos não são equivalentes se pertencerem a categorias diferentes.” Para provar isso, é preciso testar as 3 propriedades de relações (Reflexiva, Simétrica e Transitiva) em relação ao ponto comum entre eles, que é no caso “categoria”. Tomarei como exemplo “Cadeira, Mesa, Sofá”. Analisarei segundo a caracteristica comum “categoria”: Reflexiva - Cadeira é da mesma categoria que cadeira ? Sim - OK Simétrica - Cadeira é da mesma categoria que mesa e Mesa é da mesma categoria que Cadeira ? Sim - OK Transitiva - Cadeira é da mesma categoria que mesa; Mesa é da mesma categira que sofá; portanto cadeira é da mesma categoria que sofá ? Sim - OK Considerando que cadeira, mesa e sofá atendem as propriedades “Reflexiva”, “Simétrica” e “Transitiva”, então “Cadeira, Mesa, Sofá” constituem a mesma classe de equivalencia. 3.6.1 Classes de Equivalência Dada relação ~ em A: A classe de equivalência de x é: [x] = { y ∈ A | y ~ x } Exemplo em uma relação de Banco de Dados formada pelo conjunto A Produtos e pelo conjunto B Categorias: R ⊆ A × B : Figure 3.5: Produtos X Categorias Chamamos de Classes de Equivalência todas as relações de equivalência que se formam dentro da Relação. São as “panelinhas” que se formam dentro do conjunto. No nosso exemplo temas as seguintes Classes de Equivalência: Classe Categoria Pares Ordenados 1 Eletrônicos 1. (Teclado, Eletrônicos)2. (Mouse, Eletrônicos)3. (Monitor, Eletrônicos) 2 Vestuário 1. (Camisa, Vestuário)2. (Calça, Vestuário)3. (Tênis, Vestuário) 3 Livraria 1. (Livro SQL, Livraria)2. (Livro Java, Livraria)3. (Livro Redes, Livraria) 4 Móveis 1. (Cadeira, Móveis)2. (Mesa, Móveis)3. (Sofá, Móveis) Observações importantes: 1-As classes são disjuntas; 2-A união das quatro classes é exatamente a relação $ R $; 3-Cada par ordenado pertence a uma única classe; 3.7 5. Dependências Funcionais São os atributos de uma relação (colunas de uma tabela) cujos valores determinam os valores de outras colunas. Exemplo: Imagine a Relação (Tabela) chamada CursoProgramacao. ID_Aluno Nome_Aluno Cod_Curso Nome_Curso ID_Instrutor Nota_Final 10 Alan Turing SQL-01 Banco de Dados 500 9.5 20 Ada Lovelace PY-02 Python Avançado 600 10.0 10 Alan Turing PY-02 Python Avançado 600 8.0 30 Grace Hopper SQL-01 Banco de Dados 500 9.0 40 Linus Torvalds JS-03 JavaScript 700 7.5 Considere as seguintes Regras de Negócio Cada aluno tem apenas um nome oficial. Cada código de curso pertence a apenas um nome de curso. Cada curso é ministrado por apenas um instrutor específico (um instrutor não muda de curso). Um aluno pode fazer vários cursos, e terá uma nota diferente para cada um. Tendo estas informações identifique as DEPENDÊNCIAS FUNCIONAIS dos atributos da tabela. Quais são os atributos da tabela? ID_Aluno Nome_Aluno Cod_Curso Nome_Curso ID_Instrutor Nota_Final Quais destes atributos o valor identificam unicamente o valor de outro atributo? Atributo1 Dependência Funcional Atributo2 Resultado ID_Aluno determina Nome_Aluno ? Cod_Curso determina Nome_Curso ? Cod_Curso determina ID_Instrutor ? ID_Aluno determina Nota_Final ? Qual é a combinação de colunas necessária para determinar a Nota_Final? 3.7.1 Resolução Quais destes atributos o valor identificam unicamente o valor de outro atributo? Atributo1 Dependência Funcional Atributo2 Resultado Comentário ID_Aluno determina Nome_Aluno SIM ID_Aluno valendo “10” determina Nome_Aluno “Alan Turing” Cod_Curso determina Nome_Curso SIM Cod_Curso valendo “SQL-01” determina Nome_Curso “Banco de Dados” Cod_Curso determina ID_Instrutor SIM Pela regra de negócio #3, Cod_Curso determina ID_Instrutor. Aqui temos um caso especial de Dependência Parcial ID_Aluno determina Nota_Final NÃO Olhe o Alan Turing (ID 10). Ele tem nota 9.5 e nota 8.0. ID_Aluno sozinho não determina a nota do aluno. Qual é a combinação de colunas necessária para determinar a Nota_Final? Eu preciso saber QUEM (Aluno) e em QUAL MATÉRIA (Curso) para te dar a nota exata. A combinação dos atributos {ID_Aluno, Cod_Curso} determinam Nota_Final! Esta é um caso de Dependência Total. 3.8 6. Conceito de Fecho Dado conjunto de atributos X e conjunto de dependências funcionais F: O fecho de X (X⁺) é o conjunto de todos os atributos funcionalmente determinados por X. Exemplo: Dependências: A → B B → C Então: A⁺ = {A, B, C} 3.9 6. Normalização Processo de organização de relações para: Eliminar redundância Evitar anomalias Garantir consistência 3.9.1 1ª Forma Normal (1FN) Atributos atômicos Sem grupos repetitivos 3.9.2 2ª Forma Normal (2FN) 1FN Sem dependência parcial de chave composta 3.9.3 3ª Forma Normal (3FN) 2FN Sem dependência transitiva 3.9.4 BCNF Forma mais forte que 3FN: Para toda dependência: X → Y X deve ser superchave. 3.9.5 Relações de Equivalência e Normalização Dependências funcionais induzem partições do conjunto de tuplas. Quando: A → B Significa que valores iguais de A geram classes de equivalência nas tuplas. 3.10 Conexão Final — A Base Matemática do SGBD Conceito Matemático Aplicação em BD Relação Tabela Produto cartesiano Combinação de domínios Relação de equivalência Particionamento por chave Fecho Descoberta de dependências Transitiva Análise de dependências Antissimétrica Ordem parcial Álgebra relacional SQL 3.11 Exercícios "],["modelagem-de-bancos-de-dados-parte-01.html", "Slide 4 Modelagem de Bancos de Dados parte 01 4.1 Introdução: Visitando a teoria de Bancos de Dados 4.2 Modelo Matemático de um Banco de Dados 4.3 Modelo Lógico de Banco de Dados 4.4 Modelo Físico de Banco de Dados 4.5 EXEMPLO: REVENDA DE VEÍCULOS MULTI-MARCAS 4.6 VERBOS: Relacionamentos e Cardinalidade 4.7 Entidade Dominante e Entidade Subordinada 4.8 CARDINALIDADE DO MODELO LÓGICO E A CRIAÇÃO DE CHAVES ESTRANGEIRAS NO MODELO FÍSICO-RELACIONAL 4.9 Normalização em Bancos de Dados Relaionais 4.10 Referências 4.11 Exercícios RESOLVIDOS", " Slide 4 Modelagem de Bancos de Dados parte 01 18/08/2025 Professor Miguél Suares 4.1 Introdução: Visitando a teoria de Bancos de Dados Banco de Dados Um banco de dados é uma coleção compartilhada de dados logicamente relacionados, projetada para atender às necessidades informacionais de uma organização. - DATE, C. J. An Introduction to Database Systems. 8. ed. Boston: Addison-Wesley, 2003. Ou seja, alguns pontos-chave da definição de Date: “Coleção de dados …” → não é um conjunto de arquivos soltos, mas dados organizados. “Compartilhada …” → não pertence a apenas um usuário ou aplicação; é usada por vários. “Dados logicamente relacionados …” → os dados têm um relacionamento semântico, não são apenas agrupamentos arbitrários. “Projetada para atender necessidades …” → o banco existe para suportar os processos de uma organização (consultas, relatórios, controle, tomada de decisão). Banco de Dados Relacional Um banco de dados relacional é um banco de dados baseado em um modelo de dados relacional, no qual os dados são representados como um conjunto de relações (tabelas), e cada relação consiste em tuplas (linhas) e atributos (colunas). - SILBERSCHATZ, Abraham; KORTH, Henry F.; SUDARSHAN, S. Database System Concepts. 6. ed. New York: McGraw-Hill, 2010. Agora, alguns pontos-chave da definição de Abraham Silberschatz : Base no modelo relacional de Codd (1970). Dados representados em tabelas (relações). Cada tabela é composta de tuplas (linhas) e atributos (colunas). Integridade garantida por restrições (chaves, integridade referencial, domínio de atributos). Manipulação feita por linguagens relacionais (álgebra relacional, cálculo relacional, SQL). O Banco de Dados Relacional organiza as informações em tabelas bidiomensionais constituídas de linhas e colunas chamadas e essas tabelas recebem o nome de relações. Cada relação possui um campo-chave que confere identificação exclusiva a cada registro da tabela. 4.2 Modelo Matemático de um Banco de Dados Considere um Banco de Dados para representar, com consistência Matemática os funcionários e Departamentos de uma Empresa. 4.2.1 Podemos representa-lo matemáticamente utilizando a teoria dos conjuntos Figure 4.1: Diagrama de Montadoras, Veículos e Proprietários 4.2.1.1 Edgard F Cood explica em sua obra “A Relational Model of Data for Large Shared Data Banks” como definir uma Banco de Dados compartilhado matemáticamente Um banco de dados relacional é um banco de dados no qual todos os dados são representados por meio de relações (matematicamente, conjuntos de tuplas), e todas as operações sobre os dados são baseadas em operadores formais do cálculo relacional e da álgebra relacional. - A Relational Model of Data for Large Shared Data Banks” (Communications of the ACM, vol. 13, n. 6, pp. 377–387, 1970). 4.2.2 Então para podemos relacionar estes dois conjuntos (Funcionários e Departamentos) utilizando a Teoria das Funções \\[ \\text{Edgard Frank Codd era um matemático tradicional} \\\\ \\text{Considere o conseito de função: } \\\\ f(x) = Y \\\\ \\text{era dessa forma que ele imaginava relacionamento e } \\\\ \\text{ garantia matemática de CONSISTÊNCIA entre } \\\\ \\text{ elementos de 2 conjuntos de dados diferentes } \\] Figure 4.2: Diagrama de Montadoras, Veículos e Proprietários Mas vai ficar faltando como representar os atributos nesse modelo (colunas das tabelas): \\[ \\begin{array}{c| c | c} \\textbf{ Conjunto Funcionários} &amp; \\textbf{ Relacionamento Trabalha} &amp; \\textbf{Conjunto Departamentos)} \\\\ \\hline FULANO &amp; \\quad TRABALHA &amp; \\quad RH \\\\ BELTRANO &amp; \\quad TRABALHA &amp; \\quad FINANCEIRO \\\\ CICLANO &amp; \\quad TRABALHA &amp; \\quad DEIRETORIA \\\\ \\hline \\textbf{Total: 3 ELEMENTOS } &amp; \\textbf{ CONECTADOS } &amp; \\textbf{Total: 3 ELEMENTOS } \\end{array} \\] Ainda, é necessário acrescentar algumas regras de integridade a representação; 4.3 Modelo Lógico de Banco de Dados 4.3.1 Modelo Conceitual “Entidade Relacionamento” de Banco de Dados O Modelo Entidade-Relacionamento (MER), proposto por Peter Chen em 1976, é uma ferramenta fundamental na modelagem de dados. É um modelo de dados de alto nível que descreve a estrutura conceitual de um banco de dados. O Modelo Entidade-Relacionamento (MER) é representado graficamente através de um DER (Diagrama Entidade-Relacionamento). É utilizado para projetar Bancos de Dados Relacionais a partir de entrevistas onde se descreve as informações que se deseja armazenar de forma consistente. Exemplo: “Desenhe um diagrama entidade-relacionamento DER contendo as entidades funcionarios e departamentos. A entidade ”funcionários” possui os atributos ”nome” e ”CPF”. A entidade ”Departamentos” possui os atributos ”Nome” e ”sigla”. O atributo ”CPF” é chave primária da entidade ”Funcionários”. O atributo ”sigla” é chave primária da entidade ”Departamentos”. As entidades ”Funcionários” e ”Departamentos” se relacionam através de um relacionamento chamado ”Pertence”.” Segundo Laudon Diagrama Entidade/Relacionamento (DER) é uma representação esquemática utilizada para entender as relações entre as tabelas de um banco de dados relacional. [[1] - LAUDON, Kenneth C.; LAUDON, Jane P. *Sistemas de informação gerenciais*. 11. ed. São Paulo: Pearson Education do Brasil, 2010. p. 180.] 4.3.2 Composição e Significado do Diagrama Entidade Relacionamento (DER) \\[ \\begin{array}{c| c | c} \\textbf{ NOME DO COMPONENTE} &amp; \\textbf{Representação Gráfica} &amp; \\textbf{ Liguagem Natural (texto)} \\\\ \\hline ENTIDADE &amp; \\quad RETÂNGULO &amp; \\quad SUBSTÃNTIVO \\\\ ATRIBUTO &amp; \\quad ELÍPSE &amp; \\quad ADJETIVO \\\\ RELACIONAMENTO &amp; \\quad LOSÂNGULO &amp; \\quad VERBO \\\\ \\hline \\textbf{Total: 3 ELEMENTOS } &amp; \\textbf{ FORMA GRÁFICA } &amp; \\textbf{ FORMA MOFOLÓGICA GRAMATICAL } \\end{array} \\] Figure 4.3: Diagrama de Montadoras, Veículos e Proprietários 4.4 Modelo Físico de Banco de Dados 4.4.1 Geração do modelo Físico para aplica-lo ao SGBD (Sistema de Gerenciamento de Banco de Dados): Uma vez que o modelo conceitual seja gerado, o analista pode mapea-lo para um “modelo físico”. Aqui, cada entidade irá gerar uma tebela, cada atributo irá originar uma coluna pertinente da tabela em questão e cada relacionamento irá mapear chaves primárias e chaves forasteiras nas tabelas interrelacionadas. \\[ \\begin{array}{c| c | c} \\textbf{Componente Lógico} &amp; \\textbf{ Componente Físico} &amp; \\textbf{Liguagem Natural (texto)} \\\\ \\hline ENTIDADE &amp; \\quad TABELA &amp; \\quad SUBSTÃNTIVO \\\\ ATRIBUTO &amp; \\quad COLUNA &amp; \\quad ADJETIVO \\\\ RELACIONAMENTO &amp; \\quad CHAVE-ESTRANGEIRA &amp; \\quad VERBO \\\\ \\hline \\textbf{Diagrama Lógico DER } &amp; \\textbf{ FORMA FÍSICA - SGBD } &amp; \\textbf{ FORMA MOFOLÓGICA GRAMATICAL ORIGINAL } \\end{array} \\] A ferramenta que irá criar as estruturas Físicas (tabelas, colunas, chaves) dentro do Banco de Dados é o Sistema de Gerenciamento de Banco de Dados através da linguagem SQL. 4.4.2 Interagindo com o Modelo Físico - A linguagem SQL (Structured Query Language) A linguagem SQL foi criada nos laboratórios da IBM em 1974, como interface de manipulação ao Bando de Dados Relacional System-R , atualmente denominado IBM DB2. Os criadores foram engenheiros de sistemas que sucederam o professor Edgard Frank Codd no projeto de Banco de Dados Relacional: Donald Chamberlain e Raymond Boyce. A lingauem SQL é a ponte com o mundo exterior para um Sistema de Gerenciamento de Banco de Dados (SGBD). Os conjunto de comandos da linguagem SQL são divididos em 3 grandes grupos: \\[ \\begin{array}{c| c | c} \\textbf{GRUPO} &amp; \\textbf{ Comandos} &amp; \\textbf{Finalidade} \\\\ \\hline Grupo \\ DDL &amp; \\quad \\ Data \\ Definion \\ Language &amp; \\quad Criar \\ estruturas \\ de \\ dados \\\\ Grupo \\ DML &amp; \\quad \\ Data \\ Manipulation \\ Language &amp; \\quad Manipular \\ dados \\ armazenados \\\\ Grupo \\ DCL &amp; \\quad \\ Data \\ Control \\ Language &amp; \\quad Criar \\ Regras \\ para \\ os \\ dados \\\\ Grupo \\ TCL &amp; \\quad \\ Transaction \\ Control \\ Language &amp; \\quad Criar \\ Transações \\ para \\ os \\ dados \\\\ \\hline \\textbf{Subconjunto SQL } &amp; \\textbf{ Significado } &amp; \\textbf{ Conjunto Completo } \\end{array} \\] Comandos exemplo: \\[ \\begin{array}{c| c } \\textbf{GRUPO} &amp; \\textbf{ Comandos} \\\\ \\hline Grupo \\ DDL &amp; \\quad CREATE, \\quad ALTER,\\quad DROP \\ \\ \\\\ Grupo \\ DML &amp; \\quad SELECT, \\quad INSERT, \\quad UPDATE, \\quad DELETE, \\quad JOIN \\\\ Grupo \\ DCL &amp; \\quad GRANT, \\quad REVOKE \\\\ Grupo \\ TCL &amp; \\quad COMMIT, \\quad ROLLBACK, \\quad SAVEPOINT \\\\ \\hline \\textbf{Subconjunto SQL } &amp; \\textbf{ Significado } \\end{array} \\] O código abaixo escrito em Lingauem SQL padrão transfere para o modelo físico o modelo lógico anterior: Transformando em SQL - EQUIVALENTE: -- Exemplo testado e gerado no SGBD Postgres versão 15 -- Tabela Funcionários CREATE TABLE IF NOT EXISTS &quot;public&quot;.funcionarios ( cpf bigint NOT NULL, nome varchar(200) ); -- Tabela Departamentos CREATE TABLE IF NOT EXISTS &quot;public&quot;.departamentos ( sigla integer NOT NULL, nome varchar(200) ); -- Definindo a coluna &quot;cpf&quot; da tabela &quot;funcionários&quot; como chave primária alter table &quot;public&quot;.funcionarios add constraint &quot;chave_primaria_funcionarios&quot; primary key (cpf); -- Definindo a coluna &quot;sigla&quot;&quot; da tabela &quot;departamentos&quot; como chave primária alter table &quot;public&quot;.departamentos add constraint &quot;chave_primaria_departamentos&quot; primary key (sigla); -- Gerando a integridade referêncial -- Importando a chave primária da tabela &quot;departamentos&quot; como &quot;chave estrangeira&quot; -- na tabela &quot;funcionários&quot; -- primeiro adiciona-se a coluna estrageira &quot;sigla&quot; que é coluna originalmente -- pertencente a tabela departamentos alter table &quot;public&quot;.funcionarios add column sigla integer; -- finalmente conecte a coluna sigla a chave primária da tabela &quot;departamento&quot; -- criando então uma chave estrageira na tabela &quot;funcionários&quot;. alter table &quot;public&quot;.funcionarios add constraint &quot;Chave_estrangeira_Departamento_funcionarios&quot; foreign key (sigla) references &quot;public&quot;.departamentos(sigla); 4.5 EXEMPLO: REVENDA DE VEÍCULOS MULTI-MARCAS Uma revenda de veículos multimarcas deseja informatizar seu negócio e precisa de um banco de dados que registre informações sobre veículos, fabricantes e clientes. Cada veículo deve ter código de identificação, modelo, ano de fabricação, cor, preço e chassi. Todo veículo pertence a um fabricante. O fabricante é identificado por um código e deve ter armazenados seu nome e país de origem. A revenda vende veículos para clientes, e cada venda deve registrar a data, o valor da negociação e a forma de pagamento. Um cliente pode comprar mais de um veículo, mas cada veículo só pode ser vendido uma vez. Cada cliente é identificado por um código e deve ter armazenados seu nome, CPF/CNPJ, telefone e endereço. 4.5.1 Passo 1 - Visualizando matemáticamente os dados: Vejamos como ficaria representar matemáticamente o enunciado acima: Teoria dos Conjuntos - Ajudaria a organizar e agrupar os dados em conjuntos; Teoria das Funções - A idéia era fornecer um mecanismo de consistência aos dados de conjuntos diferentes relacionados. Por exemplo, haveria uma função que mapeasse um um elemento do conjunto veículo a outro elemento do conjunto montadora. 4.5.1.1 Representação Matemática em Conjuntos e seus Elementos : Vamos visualizar gráficamente os conjuntos de Marcas, modelos e proprietários : Figure 4.4: Diagrama de Montadoras, Veículos e Proprietários 4.5.1.2 Gerando os Relacionamentos “Matemáticamente” - (Teoria das Funções, Domínios e Imagens): Vamos visualizar gráficamente os relacionamentos entre os lementos dos conjuntos Marcas, modelos e proprietários : Figure 4.5: Diagrama de Montadoras, Veículos e Proprietários A limitação desta representação gráfica logo fica evidente: por mais que na forma matemática se consiga representar os elementos dos conjuntos e o relacionamento entre eles, a representação não consegue representar os diferentes atributos (características) que os elementos dos conjuntos compartilham. 4.5.2 Modelo Lógico: Modelo Entidade Relacionamento Vamos agora converter a representação matemática para uma representação lógica utilizando o modelo M.E.R. (modelo entidade-relacionamento ) proposto pelo professor Peter Chen 4.5.2.1 Modelo Entidade Relacionamento O modelo Entidade Relacionamento consistem em traduzir elementos morfológicos da gramática da língua portuguesa em um texto para um modelo de Banco de dados utilizando a com a seguinte regra de montagem: Classe morfológica da palavra CORRESPONDÊNCIA NO MODELO MATEMÁTICO CORRESPONDÊNCIA NO MODELO LÓGICO CORRESPONDÊNCIA NO MODELO FÍSICO-RELACIONAL Substantivos CONJUNTOS ENTIDADES TABELAS Adjetivos N/A ATRIBUTO COLUNAS Verbos Idéia de “funções y=f(x)” RELACIONAMENTOS CHAVE ESTRANGEIRA Tomando como exemplo a revenda de carros: Classe morfológica da palavra Substantivos VEÍCULOS, FABRICANTES, CLIENTES Adjetivos Referentes a veículos: Modelo, Ano_Fabricacao, Cor, Preco, Chassi Referentes a fabricante: Nome, Pais_Origem Referentes a cliente: Nome, CPF_CNPJ, Telefone, Endereco Verbos Fabricante - PRODUZ- Veículo clinte - COMPRA/VENDE - Veículo 4.5.2.2 Modelo Entidade Relacionamento - representação gráfica Classe morfológica da palavra REPRESENTAÇÃO GRÁFICA Substantivos RETÂNGULOS Adjetivos ELIPSES Verbos LOSÂNGULOS -- ================================================ -- 1) TRANSFORME AS ENTIDADES E ATRIBUTOS EM -- TABELAS E COLUNAS -- ================================================ CREATE TABLE fabricantes ( codigo_fabricante INTEGER NOT NULL, nome VARCHAR(100) NOT NULL, pais_origem VARCHAR(60) NOT NULL ); CREATE TABLE clientes ( codigo_cliente INTEGER NOT NULL, nome VARCHAR(120) NOT NULL, cpf_cnpj VARCHAR(20) NOT NULL UNIQUE, telefone VARCHAR(30), endereco TEXT ); CREATE TABLE veiculos ( codigo_veiculo INTEGER NOT NULL, modelo VARCHAR(100) NOT NULL, ano_fabricacao INTEGER NOT NULL, cor VARCHAR(40), preco NUMERIC(12,2) NOT NULL, chassi VARCHAR(30) UNIQUE NOT NULL ); CREATE TABLE vendas ( codigo_venda INTEGER NOT NULL, data_venda DATE NOT NULL, valor_negociado NUMERIC(12,2) NOT NULL, forma_pagamento VARCHAR(50) NOT NULL ); -- ================================================ -- 2) TRANSFORME OS ATRIBUTOS CHAVE PRIMÁRIA -- EM CHAVES-PRIMÁRIAS DAS TABELAS -- ================================================ ALTER TABLE fabricantes ADD CONSTRAINT chave-primaria_fabricante PRIMARY KEY (codigo_fabricante); ALTER TABLE clientes ADD CONSTRAINT chave-primaria_cliente PRIMARY KEY (codigo_cliente); ALTER TABLE veiculos ADD CONSTRAINT chave-primaria_veiculo PRIMARY KEY (codigo_veiculo); ALTER TABLE vendas ADD CONSTRAINT chave-primaria_venda PRIMARY KEY (codigo_venda); -- ================================================ -- 3) ADICIONAR NAS TABELAS AS COLUNAS EXTRAS -- QUE VÃO RECEBER AS CHAVES ESTRANGEIRAS -- ================================================ -- adicione uma coluna que irá acomodar a chave primária da tabela fabricantes como chave estrangeira ALTER TABLE veiculos add cloumn codigo_fabricante INTEGER NOT NULL; -- adicione uma coluna que irá acomodar a chave primária da tabela clientes como chave estrangeira ALTER TABLE vendas add cloumn codigo_cliente INTEGER NOT NULL; -- adicione uma coluna que irá acomodar a chave primária da tabela veículos como chave estrangeira ALTER TABLE vendas add cloumn codigo_veiculo INTEGER NOT NULL UNIQUE; -- ================================================ -- 3) CRIE AS CHAVES ESTRANGEIRAS QUE FAZEM A LIGAÇÃO -- DAS TABELAS &quot;LADO N&quot; DO RELACIONAMENTO NO -- DIAGRAMA ENTIDADE-RELACIONAMENTO COM AS -- COLUNAS DO LADO 1 -- ================================================ -- utilizando chave estrangeira, faça esta tabela veículos referenciar a tabela fabricantes ALTER TABLE veiculos ADD CONSTRAINT chave-estrageira_veiculo_fabricante FOREIGN KEY (codigo_fabricante) REFERENCES fabricantes (codigo_fabricante) ON UPDATE CASCADE ON DELETE RESTRICT; -- utilizando chave estrangeira, faça esta tabela vendas referenciar a tabela clientes ALTER TABLE vendas ADD CONSTRAINT chave-estrageira_venda_cliente FOREIGN KEY (codigo_cliente) REFERENCES clientes (codigo_cliente) ON UPDATE CASCADE ON DELETE RESTRICT; -- utilizando chave estrangeira, faça esta tabela vendas referenciar a tabela veículos ALTER TABLE vendas ADD CONSTRAINT chave-estrageira_venda_veiculo FOREIGN KEY (codigo_veiculo) REFERENCES veiculos (codigo_veiculo) ON UPDATE CASCADE ON DELETE RESTRICT; 4.6 VERBOS: Relacionamentos e Cardinalidade A cardinalidade define quantas ocorrências de uma entidade podem estar associadas a ocorrências de outra entidade em um relacionamento. Ela é fundamental para entender as regras de negócio do banco de dados e deve estar sempre representada no Diagrama Entidade-Relacionamento (DER). 4.6.1  Tipos principais de cardinalidade Um para Um (1:1) Um para Muitos (1:N) Muitos para Muitos (N:N) A seguir, vamos detalhar cada caso. 4.6.2 1. Relacionamento 1:1 (Um para Um) Um exemplo clássico: - Cada MARIDO possui uma única ESPOSA. - Cada ESPOSA pertence a um único MARIDO. 4.6.2.1 Representação no DER: 4.6.3 Relacionamento 1:N (Um para Muitos) Exemplo: Um Cliente pode fazer muitos Pedidos. Mas cada Pedido só pode pertencer a um Cliente. 4.6.3.1 Representação no DER: 4.6.4 Relacionamento N:N (Muitos para Muitos) Exemplo: Um Aluno pode se matricular em muitas Disciplinas. Cada Disciplina pode ter muitos Alunos. ( Esse tipo de relacionamento precisa de uma entidade associativa para ser implementado no banco (ex.: Matricula) ) 4.6.4.1 Representação no DER: 4.7 Entidade Dominante e Entidade Subordinada No Modelo Entidade-Relacionamento (MER), algumas entidades só existem dependendo da existência de outra. Nesses casos, usamos os conceitos de Entidade Dominante e Entidade Subordinada. 4.7.1 Definições: Entidade Dominante (ou Forte): É uma entidade que existe por si só, sem depender de nenhuma outra. Ex.: Cliente, Produto, Funcionário. Entidade Subordinada (ou Fraca): É uma entidade que depende de outra para existir. Ela não possui chave primária própria completa e precisa da chave da entidade dominante. Ex.: ItemPedido, Dependente, Parcela. A entidade subordinada é representada por um losango duplo (relacionamento identificador) em algumas notações, ou simplesmente destacada como entidade fraca. Outro Exemplo: 4.8 CARDINALIDADE DO MODELO LÓGICO E A CRIAÇÃO DE CHAVES ESTRANGEIRAS NO MODELO FÍSICO-RELACIONAL Vai ser a cardinalidade que irá ditar em quais tabelas criaremos chaves estrangeiras. 4.9 Normalização em Bancos de Dados Relaionais 4.9.1 Tabela Desnormalizada Considere a tabela Veículos abaixo: Modelo Montadora Strada Fiat Mobi Fiat Pulse Fiat Onix Chevrolet Tracker Chevrolet Onix Plus Chevrolet Polo Volkswagen Nivus Volkswagen T-Cross Volkswagen HB20 Hyundai Creta Hyundai Separamos o conjunto de elemntos Montadoras e Modelos. MontadoraID Montadora 1 Fiat 2 Chevrolet 3 Volkswagen 4 Hyundai ModeloID Modelo 101 Strada 102 Mobi 103 Pulse 201 Onix 202 Tracker 203 Onix Plus 301 Polo 302 Nivus 303 T-Cross 401 HB20 402 Creta O processo de fragmentar agrupamentos complexos de dados e simplifica-los a fim de minimizar redundâncias e economizar espaço no Banco de Dados Relacional é chamado de NORMALIZAÇÃO. [[1] - LAUDON, Kenneth C.; LAUDON, Jane P. *Sistemas de informação gerenciais*. 11. ed. São Paulo: Pearson Education do Brasil, 2010. p. 180.] Mas Como indicar que cada elemento da tabela “Modelo” está associado a um elemento da tabela “Montadora” ? 4.9.2 Tabela Normalizada Considere as tabelas abaixo: MontadoraID Montadora 1 Fiat 2 Chevrolet 3 Volkswagen 4 Hyundai ModeloID Modelo MontadoraID 101 Strada 1 102 Mobi 1 103 Pulse 1 201 Onix 2 202 Tracker 2 203 Onix Plus 2 301 Polo 3 302 Nivus 3 303 T-Cross 3 401 HB20 4 402 Creta 4 Repare que: É possível identificar que não existem montadoras repetidas na tabela “Montadoras”; É possível identificar que não existem modelos repetidos na tabela “Montadoras”; A coluna (atributo) ModeloID é a chave primária da tabela Modelos. A coluna (atributo) MontadoraID é a chave primária da tabela Montadoras. Na tabela Modelos, a coluna MontadoraID, acrescentada a tabela Modelos representa a ligação de cada elemento da tabela Modelos e Montadoras. Essa coluna “importada” da tabela Montadoras para a tabela Modelos se chama chave estrangeira. 4.10 Referências CHEN, Peter (1990). Gerenciando Banco de Dados. A Abordagem Entidade-Relacionamento para Projeto Lógico. São Paulo: McGraw-Hill. 80 páginas. ISBN 0-07-460575-5 DATE, C. J. An Introduction to Database Systems. 8. ed. Boston: Addison-Wesley, 2003. SILBERSCHATZ, Abraham; KORTH, Henry F.; SUDARSHAN, S. Database System Concepts. 6. ed. New York: McGraw-Hill, 2010. CODD, E. F. A Relational Model of Data for Large Shared Data Banks. Communications of the ACM, New York, v. 13, n. 6, p. 377–387, 1970. 4.11 Exercícios RESOLVIDOS Exercício 1 — Universidade Considere uma Universidade que possui vários Cursos. Cada curso tem um nome, uma duração em semestres e um coordenador. A universidade possui Professores, cada um com um nome, título e CPF. Um professor pode ministrar várias disciplinas, e cada disciplina pertence a um único curso. Identifique as entidades Identifique os atributos de cada Entidade Identifique os relacionamentos entre as Entidades Faça o diagrama DEM (Diagrama Entidade Relacionamento) contendo as entidades, atributos e relacionamentos que você mapeou. 4.11.0.1 Passo #1 - Identificar SUBSTANTIVOS no contexto; identificar os ADJETIVOS pertinentes a cada SUBSTANTIVO; identificar os VERBOS de relação entre os substantivos. Identificando SUBSTANTIVOS, ADJETIVOS referentes e VERBOS de relação Substantivos do contexto: leve-os ao plural Adjetivos Verbos UNIVERSIDADE -&gt; UNIVERSIDADES NOME (implícito no enunciado) CNPJ (implícito no enunciado) universidade POSSUI (vários) cursos CURSO -&gt; CURSOS NOME (explícito no enunciado) DURAÇÃO (explícito no enunciado) COORDENADOR (explícito no enunciado) CODIGO_CURSO (implícito no enunciado) cursos são POSSUÍDOS por (vários) universidades PROFESSOR -&gt; PROFESSORES CPF (explícito no enunciado) NOME (explícito no enunciado) TÍTULO (explícito no enunciado) universidade POSSUI (vários) professores professor MINISTRA (várias) disciplinas DISCIPLINA -&gt; DISCIPLINAS NOME (implícito no enunciado) CODIGO_DISCIPLINA (implícito no enunciado) disciplina É MINISTRADA por (vários) professores disciplina PERTENCE a (um único) curso 4.11.0.2 Passo #2 Criar o MODELO ENTIDADE RELACIONAMENTO (M.E.R.) - Converter SUBSTANTIVO em ENTIDADES; converter ADJETIVOS em ATRIBUTOS e converter VERBOS em RELACIONAMENTOS. ENTIDADES identificadas: UNIVERSIDADES, CURSOS, PROFESSORES e DISCIPLINAS ATRIBUTOS identificados: UNIVERSIDADES [ nome,cnpj ] ; CURSOS [ nome, duração, coordenador, codigo_curso] ; PROFESSORES [ cpf, nome e título] ; DISCIPLINAS [nome e codigo_disciplina] RELACIONAMENTOS: [universidade-POSSUI-curso] ; [universidade-POSSUI-professores]; [professor-MINISTRA-disciplina] ; [disciplina-PERTENCE-curso] 4.11.0.3 Passo #3 Criar um DIAGRAMA ENTIDADE-RELACIONAMENTO (D.E.R.) com as informações levantadas: 4.11.0.4 Passo #4 Identificar os Relacionamentos: [universidade-POSSUI-curso] ; [universidade-POSSUI-professores]; [professor-MINISTRA-disciplina] ; [disciplina-PERTENCE-curso] 4.11.0.5 Passo #5 - Crie o código SQL referente ao diagrama que você desenhou: /* ========================================================= Passo 1️- CRIAR TABELAS (somente colunas, sem PK nem FK) ========================================================= */ CREATE TABLE UNIVERSIDADES ( nome VARCHAR(255), CNPJ VARCHAR(14) ); CREATE TABLE CURSOS ( nome VARCHAR(255), duracao INT, coordenador VARCHAR(255), codigo_curso INTEGER ); CREATE TABLE PROFESSORES ( cpf VARCHAR(11), nome VARCHAR(255), titulo VARCHAR(255) ); CREATE TABLE DISCIPLINAS ( nome VARCHAR(255), codigo_disciplina INTEGER ); /* ========================================================= Passo 2- ADICIONAR CHAVES PRIMÁRIAS ========================================================= */ ALTER TABLE UNIVERSIDADES ADD PRIMARY KEY (CNPJ); ALTER TABLE CURSOS ADD PRIMARY KEY (codigo_curso); ALTER TABLE PROFESSORES ADD PRIMARY KEY (cpf); ALTER TABLE DISCIPLINAS ADD PRIMARY KEY (codigo_disciplina); /* ========================================================= Passo 3- CRIAR COLUNAS PARA FUTURAS CHAVES ESTRANGEIRAS -- Sempre no lado N de cada relacionamento ========================================================= */ -- UNIVERSIDADES (1) —— (N) CURSOS → CURSOS precisa de CNPJ ALTER TABLE CURSOS ADD COLUMN CNPJ VARCHAR(14); -- UNIVERSIDADES (1) —— (N) PROFESSORES → PROFESSORES precisa de CNPJ ALTER TABLE PROFESSORES ADD COLUMN CNPJ VARCHAR(14); -- PROFESSORES (1) —— (N) DISCIPLINAS → DISCIPLINAS precisa de cpf ALTER TABLE DISCIPLINAS ADD COLUMN cpf VARCHAR(11); /* ========================================================= Passo 4- CRIAR AS CHAVES ESTRANGEIRAS ========================================================= */ ALTER TABLE CURSOS ADD CONSTRAINT fk_cursos_universidade FOREIGN KEY (CNPJ) REFERENCES UNIVERSIDADES (CNPJ); ALTER TABLE PROFESSORES ADD CONSTRAINT fk_professores_universidade FOREIGN KEY (CNPJ) REFERENCES UNIVERSIDADES (CNPJ); ALTER TABLE DISCIPLINAS ADD CONSTRAINT fk_disciplinas_professor FOREIGN KEY (cpf) REFERENCES PROFESSORES (cpf); Exercício 2 — Um Projeto de e-commerce Um Cliente faz Pedidos em um sistema de e-commerce. Cada cliente tem um nome, endereço e telefone. Os pedidos possuem uma data, um valor total e podem conter vários Produtos. Cada produto tem um nome, uma descrição e um preço. Identifique as entidades Identifique os atributos de cada Entidade Identifique os relacionamentos entre as Entidades Faça o diagrama DEM (Diagrama Entidade Relacionamento) contendo as entidades, atributos e relacionamentos que você mapeou. 4.11.0.6 Passo #1 - Identificar SUBSTANTIVOS no contexto; identificar os ADJETIVOS pertinentes a cada SUBSTANTIVO; identificar os VERBOS de relação entre os substantivos. Identificando SUBSTANTIVOS, ADJETIVOS referentes e VERBOS de relação Substantivos do contexto: leve-os ao plural Adjetivos Verbos CLIENTE -&gt; CLIENTES NOME (explícito no enunciado) ENDERECO (explícito no enunciado) TELEFONE (explícito no enunciado) CPF (implícito no enunciado) (vários) clientes PEDEM (vários) produtos PEDIDO -&gt; PEDIDOS ???? PEDIDO NÃO É SUBSTABNTIVO, MAS SIM O PARTICÍPIO PASSADO DO VERBO PEDIR. (PEDIR É VERBO !!!) DATA (explícito no enunciado) VALOR_TOTAL (explícito no enunciado) (vários) clientes PEDEM (vários) produtos PRODUTO -&gt; PRODUTOS NOME (implícito no enunciado) DESCRICAO (explícito no enunciado) PRECO (explícito no enunciado) COD_PRODUTO (implícito no enunciado) (vários) produtos são PEDidos por (vários) clientes 4.11.0.7 Passo #2 Criar o MODELO ENTIDADE RELACIONAMENTO (M.E.R.) - Converter SUBSTANTIVO em ENTIDADES; converter ADJETIVOS em ATRIBUTOS e converter VERBOS em RELACIONAMENTOS. Normalmente apenas as ENTIDADES levam atributos. Quando aparece um relacionamento N-N entre duas entidades, também podem aparecer atributos atrelados aos relacionamentos (como é o caso de PEDIDO aqui). ENTIDADES identificadas: CLIENTES, PRODUTOS ATRIBUTOS identificados: CLIENTES [ nome, endereco, telefone, cpf] ; PRODUTOS [ nome, descricao, preco, cod_produto] ; PEDIDO[data, valor_total] RELACIONAMENTOS: [cliente-PEDE-produto] ; [produto-PEDIDO-cliente]; 4.11.0.8 Passo #3 Criar um DIAGRAMA ENTIDADE-RELACIONAMENTO (D.E.R.) com as informações levantadas: 4.11.0.9 Passo #5 - Crie o código SQL referente ao diagrama que você desenhou: -- CRIAR AS TABELAS CREATE TABLE Cliente ( id_cliente INT, nome VARCHAR(255) ); CREATE TABLE CPF ( numero_cpf CHAR(11) ); -- ADICIONAR AS CHAVES PRIMÁRIAS ALTER TABLE Cliente ADD PRIMARY KEY (id_cliente); ALTER TABLE CPF ADD PRIMARY KEY (numero_cpf); -- O relacionamento é 1:1. Podemos escolher um dos lados para armazenar a chave. -- Aqui vamos seguir o diagrama, colocando a chave estrangeira de CPF em Cliente. ALTER TABLE Cliente ADD COLUMN numero_cpf CHAR(11); -- CRIAR AS CHAVES ESTRANGEIRAS ALTER TABLE Cliente ADD CONSTRAINT fk_cliente_cpf FOREIGN KEY (numero_cpf) REFERENCES CPF (numero_cpf); Exercício 3 — Hospital Um Hospital registra Pacientes, cada um com nome, idade, endereço e telefone. Os pacientes podem realizar várias Consultas com Médicos. Cada médico possui um CRM, um nome e uma especialidade. Durante a consulta, o médico pode prescrever Receitas, que possuem medicação e dosagem. Identifique as entidades Identifique os atributos de cada Entidade Identifique os relacionamentos entre as Entidades Faça o diagrama DEM (Diagrama Entidade Relacionamento) contendo as entidades, atributos e relacionamentos que você mapeou. 4.11.0.10 Passo #1 - Identificar SUBSTANTIVOS no contexto; identificar os ADJETIVOS pertinentes a cada SUBSTANTIVO; identificar os VERBOS de relação entre os substantivos. Identificando SUBSTANTIVOS, ADJETIVOS referentes e VERBOS de relação Substantivos do contexto: leve-os ao plural Adjetivos Verbos HOSPITAL -&gt; HOSPITAIS NOME (implícito no enunciado) CNPJ (implícito no enunciado) (explícito) hospital REGISTRA (vários) pacientes (implícito) hospital POSSUI medicos PACIENTE -&gt; PACIENTES NOME (explícito no enunciado) IDADE (explícito no enunciado) ENDERECO (explícito no enunciado) TELEFONE (explícito no enunciado) CPF (implícito no enunciado) pacientes são REGISTRADOS em (um) hospital (vários) pacientes CONSULTAM (vários) médicos (vários) pacientes SÃO RECEITADOS por (vários) médicos MÉDICO -&gt; MEDICOS CRM (explícito no enunciado) NOME (explícito no enunciado) ESPECIALIDADE (explícito no enunciado) (vários) médico(s) CONSULTA (vários) pacientes (vários) médico(s) RECEITAM (vários) pacientes RECEITA ?? -&gt; RECEITAR é VERBO MEDICACAO (explícito no enunciado) DOSAGEM(explícito no enunciado) médico RECEITA ao paciente (vários) paciente(s) É(SÃO) RECEITADO(s) por (vários) médico(s) CONSULTA ?? -&gt; CONSULTAR é VERBO DATA (implícito no enunciado) HORA(implícito no enunciado) sala(implícito no enunciado) (vários) pacientes(s) CONSULTA(M) (vários) médico(s) 4.11.0.11 Passo #2 Criar o MODELO ENTIDADE RELACIONAMENTO (M.E.R.) - Converter SUBSTANTIVO em ENTIDADES; converter ADJETIVOS em ATRIBUTOS e converter VERBOS em RELACIONAMENTOS. ENTIDADES identificadas: HOSPITAIS, PACIENTES, MEDICOS ATRIBUTOS identificados: HOSPITAIS [ nome,cnpj ] ; PACIENTES [ nome, idade, endereco, telefone, cpf] ; MEDICOS [ crm, nome e especialidade] ; RELACIONAMENTOS: [medico-consulta-paciente] ; [medico-receita-paciente]; [hospital-registra-paciente] ; [hospital-POSSUI-medicos] 4.11.0.12 Passo #3 Criar um DIAGRAMA ENTIDADE-RELACIONAMENTO (D.E.R.) com as informações levantadas: 4.11.0.13 Passo #5 - Faça o código SQL do diagrama acima /* ========================================================= Passo 1- TABELAS (apenas colunas, sem PK ou FK) ========================================================= */ CREATE TABLE HOSPITAIS ( nome VARCHAR(255), cnpj CHAR(14) ); CREATE TABLE PACIENTES ( nome VARCHAR(255), idade INT, endereco VARCHAR(255), telefone VARCHAR(20), cpf CHAR(11) ); CREATE TABLE MEDICOS ( nome VARCHAR(255), especialidade VARCHAR(255), crm CHAR(15) ); /* As próximas tabelas representam os relacionamentos N:N com atributos próprios (tabelas de junção) */ CREATE TABLE REGISTRAM ( -- sem colunas de FK por enquanto ); CREATE TABLE CONSULTAM ( data_consulta DATE, hora TIME, sala VARCHAR(50) ); CREATE TABLE RECEITAM ( medicacao VARCHAR(255), dosagem VARCHAR(100) ); /* ========================================================= Passo 2- ADICIONAR CHAVES PRIMÁRIAS ========================================================= */ ALTER TABLE HOSPITAIS ADD PRIMARY KEY (cnpj); ALTER TABLE PACIENTES ADD PRIMARY KEY (cpf); ALTER TABLE MEDICOS ADD PRIMARY KEY (crm); /* Para tabelas de relacionamento com atributos, a PK será composta (as FKs a serem criadas formarão a chave primária). Faremos isso depois de adicionar as colunas de FK. */ /* ========================================================= Passo 3- CRIAR COLUNAS PARA FUTURAS CHAVES ESTRANGEIRAS ========================================================= */ -- REGISTRAM: HOSPITAIS (1) —— (N) PACIENTES ALTER TABLE REGISTRAM ADD COLUMN cnpj CHAR(14), ADD COLUMN cpf CHAR(11); -- CONSULTAM: MEDICOS (N) —— (N) PACIENTES ALTER TABLE CONSULTAM ADD COLUMN crm CHAR(15), ADD COLUMN cpf CHAR(11); -- RECEITAM: MEDICOS (N) —— (N) PACIENTES ALTER TABLE RECEITAM ADD COLUMN crm CHAR(15), ADD COLUMN cpf CHAR(11); /* ========================================================= Passo 4- CRIAR CHAVES ESTRANGEIRAS ========================================================= */ ALTER TABLE REGISTRAM ADD CONSTRAINT fk_registram_hospitais FOREIGN KEY (cnpj) REFERENCES HOSPITAIS (cnpj), ADD CONSTRAINT fk_registram_pacientes FOREIGN KEY (cpf) REFERENCES PACIENTES (cpf); ALTER TABLE CONSULTAM ADD CONSTRAINT fk_consultam_medicos FOREIGN KEY (crm) REFERENCES MEDICOS (crm), ADD CONSTRAINT fk_consultam_pacientes FOREIGN KEY (cpf) REFERENCES PACIENTES (cpf); ALTER TABLE RECEITAM ADD CONSTRAINT fk_receitam_medicos FOREIGN KEY (crm) REFERENCES MEDICOS (crm), ADD CONSTRAINT fk_receitam_pacientes FOREIGN KEY (cpf) REFERENCES PACIENTES (cpf); /* Definir chaves primárias compostas para tabelas de relacionamento */ ALTER TABLE REGISTRAM ADD PRIMARY KEY (cnpj, cpf); ALTER TABLE CONSULTAM ADD PRIMARY KEY (crm, cpf, data_consulta, hora); ALTER TABLE RECEITAM ADD PRIMARY KEY (crm, cpf, medicacao); 4.11.1 Exercícios 4.11.2  Lista de Exercícios – Modelo Entidade-Relacionamento (MER) 4.11.2.1 Exercício 1 – Cliente e CPF (1:1) Considere um projeto de Banco de Dados.Faça a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.). Cada Cliente possui exatamente um CPF, e cada CPF só pode estar associado a um único Cliente. - Identifique entidades, atributos e relacionamento. - Represente o MER com cardinalidade 1:1. 4.11.2.2 Exercício 2 – Cliente e Pedidos (1:N) Considere um projeto de Banco de Dados.Faça a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.). Um Cliente pode fazer vários Pedidos, mas cada Pedido pertence a apenas um Cliente. - Liste as entidades e atributos. - Defina o relacionamento e a cardinalidade. - Monte o DER. 4.11.2.3 Exercício 3 – Alunos e Disciplinas (N:N) Considere um projeto de Banco de Dados.Faça a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.). Um Aluno pode se matricular em várias Disciplinas, e cada Disciplina pode ter vários Alunos. - Identifique entidades e atributos. - Qual entidade associativa deve ser criada? - Desenhe o DER com a entidade associativa. 4.11.2.4 Exercício 4 – Funcionário e Dependentes (Entidade Fraca) Considere um projeto de Banco de Dados.Faça a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.). Cada Funcionário pode ter vários Dependentes. Um Dependente não existe sem um Funcionário. - Identifique a entidade forte e a entidade fraca. - Defina atributos e chaves. - Monte o DER indicando a dependência existencial. -- Coloque aqui o código SQL criar as tabelas: 4.11.2.5 Exercício 5 – Pedido e Itens de Pedido (Entidade Associativa + Fraca) Considere um projeto de Banco de Dados.Faça a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.). Um Pedido contém vários Itens, mas cada Item está sempre vinculado a apenas um Pedido. - Qual entidade é dominante e qual é subordinada? - Identifique atributos das duas entidades. - Represente o DER com cardinalidade 1:N. -- Coloque aqui o código SQL criar as tabelas: 4.11.2.6 Exercício 6 – Médicos e Consultas (1:N) Considere um projeto de Banco de Dados.Faça a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.). Um Médico pode realizar várias Consultas, mas cada Consulta está associada a apenas um Médico. - Identifique entidades e atributos. - Desenhe o DER. - Indique as cardinalidades. -- Coloque aqui o código SQL criar as tabelas: 4.11.2.7 Exercício 7 – Professor e Departamento (1:1) Considere um projeto de Banco de Dados.Faça a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.). Cada Professor dirige apenas um Departamento, e cada Departamento tem apenas um Professor responsável. - Identifique entidades, atributos e relacionamento. - Defina cardinalidade 1:1 no DER. -- Coloque aqui o código SQL criar as tabelas: 4.11.2.8 Exercício 8 – Livros e Autores (N:N) Considere um projeto de Banco de Dados.Faça a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.). Um Livro pode ter vários Autores, e cada Autor pode escrever vários Livros. - Identifique as entidades e atributos. - Qual entidade associativa deve ser criada? - Monte o DER em notação conceitual. -- Coloque aqui o código SQL criar as tabelas: 4.11.2.9 Exercício 9 – Biblioteca (Entidades Fortes e Fracas) Considere um projeto de Banco de Dados.Faça a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.). Um Livro pode ter vários Exemplares. Um Exemplar só existe se estiver associado a um Livro. - Identifique entidades fortes e fracas. - Defina atributos (Livro: título, ano; Exemplar: código_exemplar, status). - Monte o DER com a dependência existencial. -- Coloque aqui o código SQL criar as tabelas: 4.11.2.10 Exercício 10 – Empresa, Funcionário e Projeto (Misto 1:N e N:N) Considere um projeto de Banco de Dados.Faça a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.). - Uma Empresa possui vários Funcionários. - Cada Funcionário pode participar de vários Projetos, e cada Projeto pode ter vários Funcionários. - Identifique todas as entidades, atributos e relacionamentos. - Determine cardinalidades corretas (Empresa–Funcionário 1:N, Funcionário–Projeto N:N). - Crie o DER completo. -- Coloque aqui o código SQL criar as tabelas: 4.11.2.11 Tarefas propostas para cada exercício: Identificar entidades e atributos. Definir relacionamentos. Especificar cardinalidades. Indicar entidades fortes e fracas (quando houver). Representar graficamente o DER. 4.11.3 Respostas dos Exercícios: 4.11.3.1 Exercício #1 4.11.3.1.1 Exercício 1 - SQL referênte ao diagrama anterior /* ========================================================= TRANSFORMA AS ENTIDADES EM TABELAS E ATRIBUTOS EM COLUNAS ========================================================= */ CREATE TABLE CLIENTES ( id_cliente INTEGER, nome VARCHAR(255) ); CREATE TABLE CPFS ( numero_cpf CHAR(11) ); /* ========================================================= Definir chaves primárias ========================================================= */ ALTER TABLE CLIENTES ADD PRIMARY KEY (id_cliente); ALTER TABLE CPFS ADD PRIMARY KEY (numero_cpf); /* ========================================================= Criar coluna para futura chave estrangeira ========================================================= */ -- Relacionamento 1:1 (um cliente possui um CPF) -- Vamos colocar a FK na tabela CLIENTES ALTER TABLE CLIENTES ADD COLUMN numero_cpf CHAR(11); /* ========================================================= Criar chave estrangeira ========================================================= */ ALTER TABLE CLIENTES ADD CONSTRAINT fk_clientes_cpfs FOREIGN KEY (numero_cpf) EFERENCES CPFS (numero_cpf); 4.11.3.2 Exercício #2 4.11.3.2.1 Exercício 2 - SQL referênte ao diagrama anterior /* ========================================================= Criar tabelas (sem PK ou FK) ========================================================= */ CREATE TABLE CLIENTES ( cpf CHAR(11), nome VARCHAR(255) ); CREATE TABLE PEDIDOS ( cod_pedido INT, data DATE, valor_total DECIMAL(10,2) ); /* ========================================================= Definir chaves primárias ========================================================= */ ALTER TABLE CLIENTES ADD PRIMARY KEY (cpf); ALTER TABLE PEDIDOS ADD PRIMARY KEY (cod_pedido); /* ========================================================= Criar coluna para futura chave estrangeira ========================================================= */ -- Relacionamento CLIENTES 1:N PEDIDOS ALTER TABLE PEDIDOS ADD COLUMN cpf_cliente CHAR(11); /* ========================================================= Criar chave estrangeira ========================================================= */ ALTER TABLE PEDIDOS ADD CONSTRAINT fk_pedidos_clientes FOREIGN KEY (cpf_cliente) REFERENCES CLIENTES (cpf); 4.11.3.3 Exercício #3 4.11.3.3.1 Exercício 3 - SQL referênte ao diagrama anterior /* ========================================================= Criar tabelas (sem PK ou FK) ========================================================= */ CREATE TABLE ALUNOS ( id_aluno INT, nome VARCHAR(255) ); CREATE TABLE DISCIPLINAS ( id_disciplina INT, nome VARCHAR(255) ); /* Tabela para o relacionamento N:N */ CREATE TABLE MATRICULA ( semestre VARCHAR(10) ); /* ========================================================= Definir chaves primárias ========================================================= */ ALTER TABLE ALUNOS ADD PRIMARY KEY (id_aluno); ALTER TABLE DISCIPLINAS ADD PRIMARY KEY (id_disciplina); /* A PK da tabela MATRICULA será composta pelas FKs */ -- Definiremos depois de criar as colunas de FK /* ========================================================= Criar colunas para futuras chaves estrangeiras (lado N) ========================================================= */ ALTER TABLE MATRICULA ADD COLUMN id_aluno INT, ADD COLUMN id_disciplina INT; /* ========================================================= Criar chaves estrangeiras ========================================================= */ ALTER TABLE MATRICULA ADD CONSTRAINT fk_matricula_aluno FOREIGN KEY (id_aluno) REFERENCES ALUNOS (id_aluno); ALTER TABLE MATRICULA ADD CONSTRAINT fk_matricula_disciplina FOREIGN KEY (id_disciplina) REFERENCES DISCIPLINAS (id_disciplina); /* ========================================================= Definir chave primária composta da tabela MATRICULA ========================================================= */ ALTER TABLE MATRICULA ADD PRIMARY KEY (id_aluno, id_disciplina); 4.11.3.4 Exercício #4 4.11.3.4.1 Exercício 4 - SQL referênte ao diagrama anterior /* ========================================================= Criar tabelas (sem PK ou FK) ========================================================= */ CREATE TABLE FUNCIONARIOS ( id_funcionario INT, nome VARCHAR(255), cargo VARCHAR(100), salario DECIMAL(10,2) ); CREATE TABLE DEPENDENTES ( id_dependente INT, nome VARCHAR(255), parentesco VARCHAR(50), data_nascimento DATE ); /* ========================================================= Definir chaves primárias ========================================================= */ ALTER TABLE FUNCIONARIOS ADD PRIMARY KEY (id_funcionario); ALTER TABLE DEPENDENTES ADD PRIMARY KEY (id_dependente); /* ========================================================= Criar coluna para futura chave estrangeira ========================================================= */ -- Relacionamento FUNCIONARIOS 1:N DEPENDENTES ALTER TABLE DEPENDENTES ADD COLUMN id_funcionario INT; /* ========================================================= Criar chave estrangeira ========================================================= */ ALTER TABLE DEPENDENTES ADD CONSTRAINT fk_dependentes_funcionarios FOREIGN KEY (id_funcionario) REFERENCES FUNCIONARIOS (id_funcionario); 4.11.3.5 Exercício #5 4.11.3.5.1 Exercício 5 - SQL referênte ao diagrama anterior /* ========================================================= Criar tabelas (sem PK ou FK) ========================================================= */ CREATE TABLE PEDIDOS ( id_pedido INT, data_pedido DATE, valor_total DECIMAL(10,2), status VARCHAR(50) ); CREATE TABLE ITENS ( id_item INT, descricao VARCHAR(255), quantidade INT, preco_unitario DECIMAL(10,2) ); /* ========================================================= Definir chaves primárias ========================================================= */ ALTER TABLE PEDIDOS ADD PRIMARY KEY (id_pedido); ALTER TABLE ITENS ADD PRIMARY KEY (id_item); /* ========================================================= Criar coluna para futura chave estrangeira ========================================================= */ -- Relacionamento PEDIDOS 1:N ITENS ALTER TABLE ITENS ADD COLUMN id_pedido INT; /* ========================================================= Criar chave estrangeira ========================================================= */ ALTER TABLE ITENS ADD CONSTRAINT fk_itens_pedidos FOREIGN KEY (id_pedido) REFERENCES PEDIDOS (id_pedido); 4.11.3.6 Exercício #6 4.11.3.6.1 Exercício 6 - SQL referênte ao diagrama anterior /* ========================================================= Criar tabelas (sem PK ou FK) ========================================================= */ CREATE TABLE MEDICOS ( id_medico INT, nome VARCHAR(255), especialidade VARCHAR(100), crm VARCHAR(20) ); CREATE TABLE CONSULTAS ( id_consulta INT, data_consulta DATE, hora TIME, observacoes VARCHAR(255) ); /* ========================================================= Definir chaves primárias ========================================================= */ ALTER TABLE MEDICOS ADD PRIMARY KEY (id_medico); ALTER TABLE CONSULTAS ADD PRIMARY KEY (id_consulta); /* ========================================================= Criar coluna para futura chave estrangeira ========================================================= */ -- Relacionamento MEDICOS 1:N CONSULTAS ALTER TABLE CONSULTAS ADD COLUMN id_medico INT; /* ========================================================= Criar chave estrangeira ========================================================= */ ALTER TABLE CONSULTAS ADD CONSTRAINT fk_consultas_medicos FOREIGN KEY (id_medico) REFERENCES MEDICOS (id_medico); 4.11.3.7 Exercício #7 4.11.3.7.1 Exercício 7 - SQL referênte ao diagrama anterior /* ========================================================= Criar tabelas (sem PK ou FK) ========================================================= */ CREATE TABLE PROFESSORES ( id_professor INT, nome VARCHAR(255), titulacao VARCHAR(100), email VARCHAR(255) ); CREATE TABLE DEPARTAMENTOS ( id_departamento INT, nome VARCHAR(255), localizacao VARCHAR(255), telefone VARCHAR(20) ); /* ========================================================= Definir chaves primárias ========================================================= */ ALTER TABLE PROFESSORES ADD PRIMARY KEY (id_professor); ALTER TABLE DEPARTAMENTOS ADD PRIMARY KEY (id_departamento); /* ========================================================= Criar coluna para futura chave estrangeira ========================================================= */ -- Relacionamento 1:1 entre PROFESSORES e DEPARTAMENTOS -- Aqui vamos colocar a FK em DEPARTAMENTOS, vinculando ao professor responsável ALTER TABLE DEPARTAMENTOS ADD COLUMN id_professor INT; /* ========================================================= Criar chave estrangeira ========================================================= */ ALTER TABLE DEPARTAMENTOS ADD CONSTRAINT fk_departamentos_professores FOREIGN KEY (id_professor) REFERENCES PROFESSORES (id_professor); 4.11.3.8 Exercício #8 4.11.3.8.1 Exercício 8 - SQL referênte ao diagrama anterior /* ========================================================= Criar tabelas (sem PK ou FK) ========================================================= */ CREATE TABLE LIVROS ( id_livro INT, titulo VARCHAR(255), ano_publicacao INT, editora VARCHAR(255) ); CREATE TABLE AUTORES ( id_autor INT, nome VARCHAR(255), nacionalidade VARCHAR(100) ); /* Tabela para relacionamento N:N com atributos */ CREATE TABLE ESCREVEM ( data_participacao DATE, ordem_autoria INT ); /* ========================================================= Definir chaves primárias ========================================================= */ ALTER TABLE LIVROS ADD PRIMARY KEY (id_livro); ALTER TABLE AUTORES ADD PRIMARY KEY (id_autor); /* ========================================================= Criar colunas para futuras chaves estrangeiras ========================================================= */ ALTER TABLE ESCREVEM ADD COLUMN id_livro INT, ADD COLUMN id_autor INT; /* ========================================================= Criar chaves estrangeiras ===================================== ALTER TABLE ESCREVEM ADD CONSTRAINT fk_escrevem_livros FOREIGN KEY (id_livro) REFERENCES LIVROS (id_livro); ALTER TABLE ESCREVEM ADD CONSTRAINT fk_escrevem_autores FOREIGN KEY (id_autor) REFERENCES AUTORES (id_autor); /* ========================================================= Definir chave primária composta da tabela ESCREVEM ========================================================= */ ALTER TABLE ESCREVEM ADD PRIMARY KEY (id_livro, id_autor); 4.11.3.9 Exercício #9 4.11.3.9.1 Exercício 9 - SQL referênte ao diagrama anterior /* ========================================================= Criar tabelas (sem PK ou FK) ========================================================= */ CREATE TABLE LIVROS ( id_livro INT, titulo VARCHAR(255), ano INT ); CREATE TABLE EXEMPLARES ( codigo_exemplar INT, status VARCHAR(50) ); /* ========================================================= Definir chaves primárias ========================================================= */ ALTER TABLE LIVROS ADD PRIMARY KEY (id_livro); /* A chave primária de EXEMPLARES será composta depois, usando FK + codigo_exemplar */ /* ========================================================= Criar coluna para futura chave estrangeira ========================================================= */ -- Relacionamento LIVROS 1:N EXEMPLARES ALTER TABLE EXEMPLARES ADD COLUMN id_livro INT; /* ========================================================= Criar chave estrangeira ========================================================= */ ALTER TABLE EXEMPLARES ADD CONSTRAINT fk_exemplares_livros FOREIGN KEY (id_livro) REFERENCES LIVROS (id_livro); /* ========================================================= Definir chave primária composta da tabela EXEMPLARES ========================================================= */ ALTER TABLE EXEMPLARES ADD PRIMARY KEY (id_livro, codigo_exemplar); 4.11.3.10 Exercício #10 4.11.3.10.1 Exercício 10 - SQL referênte ao diagrama anterior /* ========================================================= Criar tabelas (sem PK ou FK) ========================================================= */ CREATE TABLE EMPRESAS ( id_empresa INT, nome VARCHAR(255), cnpj CHAR(14), endereco VARCHAR(255) ); CREATE TABLE FUNCIONARIOS ( id_funcionario INT, nome VARCHAR(255), cargo VARCHAR(100), salario DECIMAL(10,2) ); CREATE TABLE PROJETOS ( id_projeto INT, nome VARCHAR(255), data_inicio DATE, data_fim DATE, descricao VARCHAR(255) ); CREATE TABLE PARTICIPAM ( data_inicio DATE, data_fim DATE, papel VARCHAR(100) ); /* ========================================================= Definir chaves primárias ========================================================= */ ALTER TABLE EMPRESAS ADD PRIMARY KEY (id_empresa); ALTER TABLE FUNCIONARIOS ADD PRIMARY KEY (id_funcionario); ALTER TABLE PROJETOS ADD PRIMARY KEY (id_projeto); /* A tabela PARTICIPAM terá PK composta, definida depois */ /* ========================================================= Criar colunas para futuras chaves estrangeiras ========================================================= */ -- Relacionamento EMPRESAS 1:N FUNCIONARIOS ALTER TABLE FUNCIONARIOS ADD COLUMN id_empresa INT; -- Relacionamento FUNCIONARIOS N:N PROJETOS ALTER TABLE PARTICIPAM ADD COLUMN id_funcionario INT, ADD COLUMN id_projeto INT; /* ========================================================= Criar chaves estrangeiras ========================================================= */ ALTER TABLE FUNCIONARIOS ADD CONSTRAINT fk_funcionarios_empresas FOREIGN KEY (id_empresa) REFERENCES EMPRESAS (id_empresa); ALTER TABLE PARTICIPAM ADD CONSTRAINT fk_participam_funcionarios FOREIGN KEY (id_funcionario) REFERENCES FUNCIONARIOS (id_funcionario); ALTER TABLE PARTICIPAM ADD CONSTRAINT fk_participam_projetos FOREIGN KEY (id_projeto) REFERENCES PROJETOS (id_projeto); /* ========================================================= Definir chave primária composta da tabela PARTICIPAM ========================================================= */ ALTER TABLE PARTICIPAM ADD PRIMARY KEY (id_funcionario, id_projeto); "],["modelagem-de-bancos-de-dados-parte-02.html", "Slide 5 Modelagem de Bancos de Dados parte 02 5.1 Exercícios RESOLVIDOS", " Slide 5 Modelagem de Bancos de Dados parte 02 5.1 Exercícios RESOLVIDOS "],["administração-e-gerenciamento-de-bancos-de-dados.html", "Slide 6 Administração e Gerenciamento de Bancos de Dados 6.1 Administração e Gerenciamento de Banco de Dados: 6.2 Papel do DBA (Database Administrator) 6.3 Usuários, Grupos e Esquemas de Bancos de Dados 6.4 Fazendo tudo funcionar: Colocando usuários em grupos e concedendo a estes acesso a Esquemas de Banco de Dados: 6.5 Feito", " Slide 6 Administração e Gerenciamento de Bancos de Dados 25/08/2025 Professor Miguél Suares 6.1 Administração e Gerenciamento de Banco de Dados: Por que administração e gerenciamento são fundamentais Integridade e consistência Garantir que as regras de negócio (restrições, chaves, relacionamentos) sejam sempre respeitadas. Evitar dados duplicados ou incoerentes. Disponibilidade e recuperação Planejar backup e restore; criar políticas de alta disponibilidade e contingência para falhas ou desastres. Segurança e controle de acesso Definir quem pode ver, inserir, alterar ou excluir dados. Atender requisitos de LGPD/privacidade e normas corporativas. Desempenho e escalabilidade Monitorar consultas lentas, criar índices adequados, ajustar parâmetros do SGBD para suportar crescimento do volume de dados. Manutenção e evolução Atualizar versões, aplicar patches, revisar modelos de dados à medida que a aplicação muda. 6.2 Papel do DBA (Database Administrator) O DBA é o profissional responsável por orquestrar tudo isso.Principais atribuições: Projeto físico do banco (estrutura de tabelas, índices, partições). Gestão de usuários e permissões – criação de contas, papéis (roles), políticas de segurança. Backup e recuperação – políticas de backup, testes de restauração. Monitoramento de desempenho – tuning de consultas, manutenção de índices, análise de logs. Planejamento de capacidade – prever crescimento, escalabilidade e uso de recursos. Atualizações e patches – manter o SGBD seguro e estável. Sem administração e gerenciamento adequados, um banco de dados vira um “depósito de riscos”: falhas, lentidão, vazamento de informações ou perda definitiva de dados. O DBA atua como guardião da informação, garantindo que ela esteja correta, segura, disponível e performática, sustentando todas as operações da organização. 6.3 Usuários, Grupos e Esquemas de Bancos de Dados 6.3.1 Usuários O que são ? Contas individuais que representam pessoas, aplicações ou serviços que acessam o banco.Cada usuário possui um nome de login e, geralmente, uma senha ou outro método de autenticação. 6.3.1.1 Funções principal Conectar-se ao SGBD. Executar operações de leitura, escrita ou administração conforme os privilégios concedidos. 6.3.1.2 Privilégios: Podem ser específicos (ex.: SELECT em uma tabela) ou globais (ex.: CREATE DATABASE). São a base do controle de acesso. 6.3.2 Esquemas O que são ? Um esquema é um container lógico de objetos do banco de dados. Ele organiza tabelas, views, funções, procedures, índices, triggers etc. 6.3.2.1 Por que usar Facilita a organização (por projeto, por aplicação, por departamento). Permite gestão de permissões mais granular: você pode conceder privilégios em nível de esquema. Evita conflitos de nomes, pois objetos com o mesmo nome podem existir em esquemas diferentes. 6.3.3 Grupos ou Roles O que são ? Papéis coletivos que agrupam permissões e, muitas vezes, usuários. No MySQL: CREATE ROLE … No PostgreSQL: roles podem ser usuários ou grupos. 6.3.3.1 Vantagens Gerenciamento simplificado: conceda privilégios ao grupo e depois apenas adicione/remova usuários. Consistência: garante que todos de uma equipe tenham as mesmas permissões. Escalabilidade: ao entrar um novo membro, basta associá-lo ao role, sem revisar dezenas de tabelas. 6.3.4 Sistema de Gerenciamento de Banco de Dados (S.G.B.D.) O Sistema de Gerenciamento de Banco de Dados cuida não só de como as informações são armazenadas, mas também quem pode acessa-las, sob quais condições. 6.3.5 Criação de usuários no MySQL Podemos criar um novo usuário no SGBD MySQL através do seguinte comando SQL-DCL: CREATE USER &#39;nome_login&#39;@&#39;host&#39; IDENTIFIED BY &#39;senha&#39; COMMENT &#39;descrição&#39;; Parte Função ‘nome_login’ Nome de login do novo usuário. ‘host’ Origem permitida de conexão. IDENTIFIED BY ‘senha’ Define a senha inicial. COMMENT ‘descrição’ (Opcional) Uma anotação de texto para identificar o usuário. Exemplo 1: Crie o usuário do aluno “Bruno Marques”. O usuário deve ser o RA do aluno e a sua senha deve ser unip. CREATE USER &#39;f362bf0&#39;@&#39;%&#39; IDENTIFIED BY &#39;unip&#39; COMMENT &#39;Bruno Antonio Marques&#39;; Exemplo 2: Crie os usuários de todos os alunos da sala. O usuário deve ser o RA do aluno e a sua senha deve ser unip. -- turma TI2P40 -- usuários no MySQL DROP USER IF EXISTS &#39;f362bf0&#39;@&#39;%&#39;; -- apaga o &#39;Bruno Antonio Marques&#39;; DROP USER IF EXISTS &#39;r536fa6&#39;@&#39;%&#39;; -- apaga o &#39;Caio Cesar Balbino Da Silva&#39;; DROP USER IF EXISTS &#39;h756960&#39;@&#39;%&#39;; -- apaga o &#39;Heder Rodrigues Da Silva&#39;; DROP USER IF EXISTS &#39;r8133g7&#39;@&#39;%&#39;; -- apaga o &#39;Ítalo Kevin Rodrigues Da Silva&#39;; DROP USER IF EXISTS &#39;r837aa0&#39;@&#39;%&#39;; -- apaga o &#39;Lucas Souza Rodrigues&#39;; DROP USER IF EXISTS &#39;h714419&#39;@&#39;%&#39;; -- apaga o &#39;Marcos Paulo Cordeiro Goes&#39;; DROP USER IF EXISTS &#39;r854124&#39;@&#39;%&#39;; -- apaga o &#39;Ramon Borges De Holanda&#39;; CREATE USER &#39;f362bf0&#39;@&#39;%&#39; IDENTIFIED BY &#39;unip&#39; COMMENT &#39;Bruno Antonio Marques&#39;; CREATE USER &#39;r536fa6&#39;@&#39;%&#39; IDENTIFIED BY &#39;unip&#39; COMMENT &#39;Caio Cesar Balbino Da Silva&#39;; CREATE USER &#39;h756960&#39;@&#39;%&#39; IDENTIFIED BY &#39;unip&#39; COMMENT &#39;Heder Rodrigues Da Silva&#39;; CREATE USER &#39;r8133g7&#39;@&#39;%&#39; IDENTIFIED BY &#39;unip&#39; COMMENT &#39;Ítalo Kevin Rodrigues Da Silva&#39;; CREATE USER &#39;r837aa0&#39;@&#39;%&#39; IDENTIFIED BY &#39;unip&#39; COMMENT &#39;Lucas Souza Rodrigues&#39;; CREATE USER &#39;h714419&#39;@&#39;%&#39; IDENTIFIED BY &#39;unip&#39; COMMENT &#39;Marcos Paulo Cordeiro Goes&#39;; CREATE USER &#39;r854124&#39;@&#39;%&#39; IDENTIFIED BY &#39;unip&#39; COMMENT &#39;Ramon Borges De Holanda&#39;; -- turma TI1P40 DROP USER IF EXISTS &#39;n0296a6&#39;@&#39;%&#39;; -- apaga o &#39;Bryan Lucena Barbosa Da Silva&#39;; DROP USER IF EXISTS &#39;h788986&#39;@&#39;%&#39;; -- apaga o &#39;Igor Soares Lima Da Cunha&#39;; DROP USER IF EXISTS &#39;h77gii5&#39;@&#39;%&#39;; -- apaga o &#39;Jessica Cristina De S Silva&#39;; DROP USER IF EXISTS &#39;f3648i0&#39;@&#39;%&#39;; -- apaga o &#39;Maysa Kelly Dos Santos Freitas&#39;; CREATE USER &#39;n0296a6&#39;@&#39;%&#39; IDENTIFIED BY &#39;unip&#39; COMMENT &#39;Bryan Lucena Barbosa Da Silva&#39;; CREATE USER &#39;h788986&#39;@&#39;%&#39; IDENTIFIED BY &#39;unip&#39; COMMENT &#39;Igor Soares Lima Da Cunha&#39;; CREATE USER &#39;h77gii5&#39;@&#39;%&#39; IDENTIFIED BY &#39;unip&#39; COMMENT &#39;Jessica Cristina De S Silva&#39;; CREATE USER &#39;f3648i0&#39;@&#39;%&#39; IDENTIFIED BY &#39;unip&#39; COMMENT &#39;Maysa Kelly Dos Santos Freitas&#39;; 6.3.6 Criação de Esquemas de Banco de Dados no MySQL No MySQL, schema e database são sinônimos. É o “contêiner” onde ficam tabelas, views, procedures, usuários com permissões etc. CREATE DATABASE [IF NOT EXISTS] nome_do_schema [OPTIONS]; CREATE DATABASE: cria um novo banco. IF NOT EXISTS: evita erro caso o schema já exista. nome_do_schema: nome do banco. [OPTIONS]: parâmetros opcionais como CHARACTER SET ou COLLATE Exemplo 1: Crie um esquema de Banco de Dados onde chamado 11-rondonia para guardar a tabela “Cidades”; CREATE DATABASE IF NOT EXISTS `11-rondonia`; Exemplo 2: Crie um esquema de Banco de Dados de todas as Unidades da Federação para guardar tabelas “Cidades” dentro de cada uma: -- Script para criar um esquema (database) para cada UF brasileira -- Nome do esquema: &lt;código IBGE&gt;-&lt;nome_uf&gt; -- Ordenado pelo código IBGE -- Compatível com MySQL 8 CREATE DATABASE IF NOT EXISTS `11-rondonia`; CREATE DATABASE IF NOT EXISTS `12-acre`; CREATE DATABASE IF NOT EXISTS `13-amazonas`; CREATE DATABASE IF NOT EXISTS `14-roraima`; CREATE DATABASE IF NOT EXISTS `15-para`; CREATE DATABASE IF NOT EXISTS `16-amapa`; CREATE DATABASE IF NOT EXISTS `17-tocantins`; CREATE DATABASE IF NOT EXISTS `21-maranhao`; CREATE DATABASE IF NOT EXISTS `22-piaui`; CREATE DATABASE IF NOT EXISTS `23-ceara`; CREATE DATABASE IF NOT EXISTS `24-rio_grande_do_norte`; CREATE DATABASE IF NOT EXISTS `25-paraiba`; CREATE DATABASE IF NOT EXISTS `26-pernambuco`; CREATE DATABASE IF NOT EXISTS `27-alagoas`; CREATE DATABASE IF NOT EXISTS `28-sergipe`; CREATE DATABASE IF NOT EXISTS `29-bahia`; CREATE DATABASE IF NOT EXISTS `31-minas_gerais`; CREATE DATABASE IF NOT EXISTS `32-espiritosanto`; CREATE DATABASE IF NOT EXISTS `33-rio_de_janeiro`; CREATE DATABASE IF NOT EXISTS `35-sao_paulo`; CREATE DATABASE IF NOT EXISTS `41-parana`; CREATE DATABASE IF NOT EXISTS `42-santa_catarina`; CREATE DATABASE IF NOT EXISTS `43-rio_grande_do_sul`; CREATE DATABASE IF NOT EXISTS `50-mato_grosso_do_sul`; CREATE DATABASE IF NOT EXISTS `51-mato_grosso`; CREATE DATABASE IF NOT EXISTS `52-goias`; CREATE DATABASE IF NOT EXISTS `53-distrito_federal`; 6.3.7 Criando de Grupos de Permissões no MySQL: No MySQL, roles (funções ou papéis) são grupos de permissões que você define uma vez e pode atribuir a vários usuários. Eles funcionam como “grupos de acesso”, facilitando o gerenciamento de privilégios. Em vez de conceder privilégios individualmente a cada usuário, você define tudo no role. Se precisar incluir um novo privilégio (ex.: UPDATE) para todos que já têm o role, basta atualizar o role uma vez. Como criar uma regra no MySQL utilizando SQL-DCL CREATE ROLE &#39;nome_grupo&#39;; onde, obviamente, nome_grupo é o nome do grupo a ser criado. Exemplo 1: Crie um grupo chamado norte para associar todas as unidades da federação da região norte do Brasil: CREATE ROLE &#39;norte&#39;; Exemplo 2: Crie um grupos para associar todas as unidades da federação de todas as regiões do Brasil: -- =========================================== -- Criação de roles para as 5 regiões do Brasil -- =========================================== CREATE ROLE &#39;norte&#39;; CREATE ROLE &#39;nordeste&#39;; CREATE ROLE &#39;centro_oeste&#39;; CREATE ROLE &#39;sudeste&#39;; CREATE ROLE &#39;sul&#39;; -- =========================================== /* Concedendo privilégios de leitura (SELECT) a cada grupo criado */ -- =========================================== GRANT SELECT ON *.* TO &#39;norte&#39;; GRANT SELECT ON *.* TO &#39;nordeste&#39;; GRANT SELECT ON *.* TO &#39;centro_oeste&#39;; GRANT SELECT ON *.* TO &#39;sudeste&#39;; GRANT SELECT ON *.* TO &#39;sul&#39;; -- =========================================== -- Para atribuir um role a um usuário: -- =========================================== -- GRANT &#39;norte&#39; TO &#39;usuario_exemplo&#39;@&#39;%&#39;; -- SET DEFAULT ROLE &#39;norte&#39; TO &#39;usuario_exemplo&#39;@&#39;%&#39;; 6.4 Fazendo tudo funcionar: Colocando usuários em grupos e concedendo a estes acesso a Esquemas de Banco de Dados: 6.4.1 Associando os esquemas que representam cada estado a cada grupo (que representa cada regição): -- ================================================ -- Associação dos esquemas (databases) aos roles -- Roles criadas previamente: -- norte, nordeste, centro_oeste, sudeste, sul -- ================================================ -- &gt;&gt;&gt;&gt;&gt; REGIÃO NORTE &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; GRANT ALL PRIVILEGES ON `11-rondonia`.* TO &#39;norte&#39;; GRANT ALL PRIVILEGES ON `12-acre`.* TO &#39;norte&#39;; GRANT ALL PRIVILEGES ON `13-amazonas`.* TO &#39;norte&#39;; GRANT ALL PRIVILEGES ON `14-roraima`.* TO &#39;norte&#39;; GRANT ALL PRIVILEGES ON `15-para`.* TO &#39;norte&#39;; GRANT ALL PRIVILEGES ON `16-amapa`.* TO &#39;norte&#39;; GRANT ALL PRIVILEGES ON `17-tocantins`.* TO &#39;norte&#39;; -- &gt;&gt;&gt;&gt;&gt; REGIÃO NORDESTE &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; GRANT ALL PRIVILEGES ON `21-maranhao`.* TO &#39;nordeste&#39;; GRANT ALL PRIVILEGES ON `22-piaui`.* TO &#39;nordeste&#39;; GRANT ALL PRIVILEGES ON `23-ceara`.* TO &#39;nordeste&#39;; GRANT ALL PRIVILEGES ON `24-rio_grande_do_norte`.* TO &#39;nordeste&#39;; GRANT ALL PRIVILEGES ON `25-paraiba`.* TO &#39;nordeste&#39;; GRANT ALL PRIVILEGES ON `26-pernambuco`.* TO &#39;nordeste&#39;; GRANT ALL PRIVILEGES ON `27-alagoas`.* TO &#39;nordeste&#39;; GRANT ALL PRIVILEGES ON `28-sergipe`.* TO &#39;nordeste&#39;; GRANT ALL PRIVILEGES ON `29-bahia`.* TO &#39;nordeste&#39;; -- &gt;&gt;&gt;&gt;&gt; REGIÃO CENTRO_OESTE &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; GRANT ALL PRIVILEGES ON `50-mato_grosso_do_sul`.* TO &#39;centro_oeste&#39;; GRANT ALL PRIVILEGES ON `51-mato_grosso`.* TO &#39;centro_oeste&#39;; GRANT ALL PRIVILEGES ON `52-goias`.* TO &#39;centro_oeste&#39;; GRANT ALL PRIVILEGES ON `53-distrito_federal`.* TO &#39;centro_oeste&#39;; -- &gt;&gt;&gt;&gt;&gt; REGIÃO SUDESTE &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; GRANT ALL PRIVILEGES ON `31-minas_gerais`.* TO &#39;sudeste&#39;; GRANT ALL PRIVILEGES ON `32-espiritosanto`.* TO &#39;sudeste&#39;; GRANT ALL PRIVILEGES ON `33-rio_de_janeiro`.* TO &#39;sudeste&#39;; GRANT ALL PRIVILEGES ON `35-sao_paulo`.* TO &#39;sudeste&#39;; -- &gt;&gt;&gt;&gt;&gt; REGIÃO SUL &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt; GRANT ALL PRIVILEGES ON `41-parana`.* TO &#39;sul&#39;; GRANT ALL PRIVILEGES ON `42-santa_catarina`.* TO &#39;sul&#39;; GRANT ALL PRIVILEGES ON `43-rio_grande_do_sul`.* TO &#39;sul&#39;; 6.4.2 Associando associando alunos a cada grupo (região): Role (grupo) Usuários (login) norte f362bf0, r536fa6 nordeste h756960, r8133g7 centro_oeste r837aa0, h714419 sudeste r854124, n0296a6 sul h788986, h77gii5, f3648i0 6.4.2.1 Região Norte 6.4.2.2 Região Nordeste 6.4.2.3 Região Centro-Oeste 6.4.2.4 Região Sudeste 6.4.2.5 Região Sul 6.4.3 Associando usuários aos grupos -- ========================================= -- Associação de usuários aos roles (grupos) -- ========================================= -- Grupo Norte GRANT &#39;norte&#39; TO &#39;f362bf0&#39;@&#39;%&#39;; GRANT &#39;norte&#39; TO &#39;r536fa6&#39;@&#39;%&#39;; -- Grupo Nordeste GRANT &#39;nordeste&#39; TO &#39;h756960&#39;@&#39;%&#39;; GRANT &#39;nordeste&#39; TO &#39;r8133g7&#39;@&#39;%&#39;; -- Grupo Centro-Oeste GRANT &#39;centro_oeste&#39; TO &#39;r837aa0&#39;@&#39;%&#39;; GRANT &#39;centro_oeste&#39; TO &#39;h714419&#39;@&#39;%&#39;; -- Grupo Sudeste GRANT &#39;sudeste&#39; TO &#39;r854124&#39;@&#39;%&#39;; GRANT &#39;sudeste&#39; TO &#39;n0296a6&#39;@&#39;%&#39;; -- Grupo Sul GRANT &#39;sul&#39; TO &#39;h788986&#39;@&#39;%&#39;; GRANT &#39;sul&#39; TO &#39;h77gii5&#39;@&#39;%&#39;; GRANT &#39;sul&#39; TO &#39;f3648i0&#39;@&#39;%&#39;; -- (Opcional) Definir cada role como padrão para o usuário SET DEFAULT ROLE ALL TO &#39;f362bf0&#39;@&#39;%&#39;, &#39;r536fa6&#39;@&#39;%&#39;, &#39;h756960&#39;@&#39;%&#39;, &#39;r8133g7&#39;@&#39;%&#39;, &#39;r837aa0&#39;@&#39;%&#39;, &#39;h714419&#39;@&#39;%&#39;, &#39;r854124&#39;@&#39;%&#39;, &#39;n0296a6&#39;@&#39;%&#39;, &#39;h788986&#39;@&#39;%&#39;, &#39;h77gii5&#39;@&#39;%&#39;, &#39;f3648i0&#39;@&#39;%&#39;; 6.4.4 Concedendo privilégios aos grupos: -- ============================================ -- NORTE lê os demais grupos (Nordeste, Centro-Oeste, Sudeste, Sul) -- ============================================ GRANT SELECT ON `21-maranhao`.* TO &#39;norte&#39;; GRANT SELECT ON `22-piaui`.* TO &#39;norte&#39;; GRANT SELECT ON `23-ceara`.* TO &#39;norte&#39;; GRANT SELECT ON `24-rio_grande_do_norte`.* TO &#39;norte&#39;; GRANT SELECT ON `25-paraiba`.* TO &#39;norte&#39;; GRANT SELECT ON `26-pernambuco`.* TO &#39;norte&#39;; GRANT SELECT ON `27-alagoas`.* TO &#39;norte&#39;; GRANT SELECT ON `28-sergipe`.* TO &#39;norte&#39;; GRANT SELECT ON `29-bahia`.* TO &#39;norte&#39;; GRANT SELECT ON `50-mato_grosso_do_sul`.* TO &#39;norte&#39;; GRANT SELECT ON `51-mato_grosso`.* TO &#39;norte&#39;; GRANT SELECT ON `52-goias`.* TO &#39;norte&#39;; GRANT SELECT ON `53-distrito_federal`.* TO &#39;norte&#39;; GRANT SELECT ON `31-minas_gerais`.* TO &#39;norte&#39;; GRANT SELECT ON `32-espiritosanto`.* TO &#39;norte&#39;; GRANT SELECT ON `33-rio_de_janeiro`.* TO &#39;norte&#39;; GRANT SELECT ON `35-sao_paulo`.* TO &#39;norte&#39;; GRANT SELECT ON `41-parana`.* TO &#39;norte&#39;; GRANT SELECT ON `42-santa_catarina`.* TO &#39;norte&#39;; GRANT SELECT ON `43-rio_grande_do_sul`.* TO &#39;norte&#39;; -- ============================================ -- NORDESTE lê os demais grupos (Norte, Centro-Oeste, Sudeste, Sul) -- ============================================ GRANT SELECT ON `11-rondonia`.* TO &#39;nordeste&#39;; GRANT SELECT ON `12-acre`.* TO &#39;nordeste&#39;; GRANT SELECT ON `13-amazonas`.* TO &#39;nordeste&#39;; GRANT SELECT ON `14-roraima`.* TO &#39;nordeste&#39;; GRANT SELECT ON `15-para`.* TO &#39;nordeste&#39;; GRANT SELECT ON `16-amapa`.* TO &#39;nordeste&#39;; GRANT SELECT ON `17-tocantins`.* TO &#39;nordeste&#39;; GRANT SELECT ON `50-mato_grosso_do_sul`.* TO &#39;nordeste&#39;; GRANT SELECT ON `51-mato_grosso`.* TO &#39;nordeste&#39;; GRANT SELECT ON `52-goias`.* TO &#39;nordeste&#39;; GRANT SELECT ON `53-distrito_federal`.* TO &#39;nordeste&#39;; GRANT SELECT ON `31-minas_gerais`.* TO &#39;nordeste&#39;; GRANT SELECT ON `32-espiritosanto`.* TO &#39;nordeste&#39;; GRANT SELECT ON `33-rio_de_janeiro`.* TO &#39;nordeste&#39;; GRANT SELECT ON `35-sao_paulo`.* TO &#39;nordeste&#39;; GRANT SELECT ON `41-parana`.* TO &#39;nordeste&#39;; GRANT SELECT ON `42-santa_catarina`.* TO &#39;nordeste&#39;; GRANT SELECT ON `43-rio_grande_do_sul`.* TO &#39;nordeste&#39;; -- ============================================ -- CENTRO-OESTE lê os demais grupos (Norte, Nordeste, Sudeste, Sul) -- ============================================ GRANT SELECT ON `11-rondonia`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `12-acre`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `13-amazonas`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `14-roraima`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `15-para`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `16-amapa`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `17-tocantins`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `21-maranhao`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `22-piaui`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `23-ceara`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `24-rio_grande_do_norte`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `25-paraiba`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `26-pernambuco`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `27-alagoas`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `28-sergipe`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `29-bahia`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `31-minas_gerais`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `32-espiritosanto`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `33-rio_de_janeiro`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `35-sao_paulo`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `41-parana`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `42-santa_catarina`.* TO &#39;centro_oeste&#39;; GRANT SELECT ON `43-rio_grande_do_sul`.* TO &#39;centro_oeste&#39;; -- ============================================ -- SUDESTE lê os demais grupos (Norte, Nordeste, Centro-Oeste, Sul) -- ============================================ GRANT SELECT ON `11-rondonia`.* TO &#39;sudeste&#39;; GRANT SELECT ON `12-acre`.* TO &#39;sudeste&#39;; GRANT SELECT ON `13-amazonas`.* TO &#39;sudeste&#39;; GRANT SELECT ON `14-roraima`.* TO &#39;sudeste&#39;; GRANT SELECT ON `15-para`.* TO &#39;sudeste&#39;; GRANT SELECT ON `16-amapa`.* TO &#39;sudeste&#39;; GRANT SELECT ON `17-tocantins`.* TO &#39;sudeste&#39;; GRANT SELECT ON `21-maranhao`.* TO &#39;sudeste&#39;; GRANT SELECT ON `22-piaui`.* TO &#39;sudeste&#39;; GRANT SELECT ON `23-ceara`.* TO &#39;sudeste&#39;; GRANT SELECT ON `24-rio_grande_do_norte`.* TO &#39;sudeste&#39;; GRANT SELECT ON `25-paraiba`.* TO &#39;sudeste&#39;; GRANT SELECT ON `26-pernambuco`.* TO &#39;sudeste&#39;; GRANT SELECT ON `27-alagoas`.* TO &#39;sudeste&#39;; GRANT SELECT ON `28-sergipe`.* TO &#39;sudeste&#39;; GRANT SELECT ON `29-bahia`.* TO &#39;sudeste&#39;; GRANT SELECT ON `50-mato_grosso_do_sul`.* TO &#39;sudeste&#39;; GRANT SELECT ON `51-mato_grosso`.* TO &#39;sudeste&#39;; GRANT SELECT ON `52-goias`.* TO &#39;sudeste&#39;; GRANT SELECT ON `53-distrito_federal`.* TO &#39;sudeste&#39;; GRANT SELECT ON `41-parana`.* TO &#39;sudeste&#39;; GRANT SELECT ON `42-santa_catarina`.* TO &#39;sudeste&#39;; GRANT SELECT ON `43-rio_grande_do_sul`.* TO &#39;sudeste&#39;; -- ============================================ -- SUL lê os demais grupos (Norte, Nordeste, Centro-Oeste, Sudeste) -- ============================================ GRANT SELECT ON `11-rondonia`.* TO &#39;sul&#39;; GRANT SELECT ON `12-acre`.* TO &#39;sul&#39;; GRANT SELECT ON `13-amazonas`.* TO &#39;sul&#39;; GRANT SELECT ON `14-roraima`.* TO &#39;sul&#39;; GRANT SELECT ON `15-para`.* TO &#39;sul&#39;; GRANT SELECT ON `16-amapa`.* TO &#39;sul&#39;; GRANT SELECT ON `17-tocantins`.* TO &#39;sul&#39;; GRANT SELECT ON `21-maranhao`.* TO &#39;sul&#39;; GRANT SELECT ON `22-piaui`.* TO &#39;sul&#39;; GRANT SELECT ON `23-ceara`.* TO &#39;sul&#39;; GRANT SELECT ON `24-rio_grande_do_norte`.* TO &#39;sul&#39;; GRANT SELECT ON `25-paraiba`.* TO &#39;sul&#39;; GRANT SELECT ON `26-pernambuco`.* TO &#39;sul&#39;; GRANT SELECT ON `27-alagoas`.* TO &#39;sul&#39;; GRANT SELECT ON `28-sergipe`.* TO &#39;sul&#39;; GRANT SELECT ON `29-bahia`.* TO &#39;sul&#39;; GRANT SELECT ON `50-mato_grosso_do_sul`.* TO &#39;sul&#39;; GRANT SELECT ON `51-mato_grosso`.* TO &#39;sul&#39;; GRANT SELECT ON `52-goias`.* TO &#39;sul&#39;; GRANT SELECT ON `53-distrito_federal`.* TO &#39;sul&#39;; GRANT SELECT ON `31-minas_gerais`.* TO &#39;sul&#39;; GRANT SELECT ON `32-espiritosanto`.* TO &#39;sul&#39;; GRANT SELECT ON `33-rio_de_janeiro`.* TO &#39;sul&#39;; GRANT SELECT ON `35-sao_paulo`.* TO &#39;sul&#39;; 6.4.5 Exemplo no MySQL Exemplo 01 Considere o cenário: um administrador de banco de dados irá criar uma tabela chamada clientes com cpf, nome e data_nascimento. Essa tabela deverá ficar no esquema compras e será acessada com todos os privilégios pelo usuário aluno. Considere que nosso SGBD é o MySQL 9. faça passo-a-passo os códigos SQL para que o ambiente descrito seja gerado. 6.4.5.1 Passo 1 - Criar o esquema de Banco de Dados “compras” CREATE DATABASE IF NOT EXISTS compras DEFAULT CHARACTER SET utf8mb4 DEFAULT COLLATE utf8mb4_0900_ai_ci; 6.4.5.2 Passo 2 - Criar o usuário “aluno” -- Apenas local: CREATE USER IF NOT EXISTS &#39;aluno&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;TroqueEstaSenha!2025&#39;; -- (Opcional) Acesso pela rede/WAN: CREATE USER IF NOT EXISTS &#39;aluno&#39;@&#39;%&#39; IDENTIFIED BY &#39;TroqueEstaSenha!2025&#39;; 6.4.5.3 Passo 2 - Conceder ao usuário “aluno” privilégios sobre todas os objetos (tabelas, views, gatilhos, índices) do esquema “compras” -- Para acesso local: GRANT ALL PRIVILEGES ON compras.* TO &#39;aluno&#39;@&#39;localhost&#39;; -- (Opcional) Para acesso via rede: GRANT ALL PRIVILEGES ON compras.* TO &#39;aluno&#39;@&#39;%&#39;; -- Tornar os privilégios efetivos (costume; no MySQL moderno aplica na hora): FLUSH PRIVILEGES; 6.4.5.4 Passo 3 - Criar a tabela “clientes” dentro do esquema “compras” USE compras; CREATE TABLE IF NOT EXISTS clientes ( cpf CHAR(11) NOT NULL, nome VARCHAR(120) NOT NULL, data_nascimento DATE NOT NULL, CONSTRAINT pk_clientes PRIMARY KEY (cpf) ) ENGINE=InnoDB; 6.4.6 Exemplo no PostGreSQL Exemplo 03 Considere o cenário: um administrador de banco de dados irá criar uma tabela chamada clientes com cpf, nome e data_nascimento. Essa tabela deverá ficar no esquema compras e será acessada com todos os privilégios pelo usuário aluno. Considere que nosso SGBD é o Postgresql 15. faça passo-a-passo os códigos SQL para que o ambiente descrito seja gerado. 6.4.6.1 Passo 0 - Crie um Banco de Dados “sistema_compras” CREATE DATABASE sistema_compras WITH OWNER = postgres ENCODING = &#39;UTF8&#39; LC_COLLATE = &#39;pt_BR.UTF-8&#39; LC_CTYPE = &#39;pt_BR.UTF-8&#39; TEMPLATE = template0; 6.4.6.2 Passo 1 - Criar o esquema de Banco de Dados “compras” CREATE SCHEMA IF NOT EXISTS compras AUTHORIZATION postgres; 6.4.6.3 Passo 2 - Criar o usuário “aluno” CREATE ROLE aluno WITH LOGIN PASSWORD &#39;TroqueEstaSenha!2025&#39; NOSUPERUSER NOCREATEDB NOCREATEROLE INHERIT; 6.4.6.4 Passo 3 - Conceder ao usuário “aluno” privilégios sobre todas os objetos (tabelas, views, gatilhos, índices) do esquema “compras” GRANT USAGE ON SCHEMA compras TO aluno; GRANT CREATE ON SCHEMA compras TO aluno; 6.4.6.5 Passo 4 - Criar a tabela “clientes” dentro do esquema “compras” CREATE TABLE compras.clientes ( cpf CHAR(11) PRIMARY KEY, nome VARCHAR(120) NOT NULL, data_nascimento DATE NOT NULL ); 6.4.6.6 Passo 5 - Conceder privilégios da tabela “clientes” do esquema “compras” para o usuário “aluno” GRANT ALL PRIVILEGES ON TABLE compras.clientes TO aluno; 6.5 Feito "],["administração-e-gerenciamento-de-bancos-de-dados-1.html", "Slide 7 Administração e Gerenciamento de Bancos de Dados", " Slide 7 Administração e Gerenciamento de Bancos de Dados 25/08/2025 Professor Miguél Suares "],["banco-de-dados-uma-aplicação-crud.html", "Slide 8 Banco de Dados: Uma Aplicação CRUD 8.1 Feito 8.2 Exercícios", " Slide 8 Banco de Dados: Uma Aplicação CRUD 24/03/2026 Professor Miguél Suares 8.1 Feito 8.2 Exercícios 01/09/2025 Professor Miguél Suares "],["banco-de-dados-mysql-mariadb.html", "Slide 9 Banco de Dados: MySQL (MariaDB)", " Slide 9 Banco de Dados: MySQL (MariaDB) 08/09/2025 Professor Miguél Suares "],["banco-de-dados-mysql-mariadb-1.html", "Slide 10 Banco de Dados: MySQL (MariaDB)", " Slide 10 Banco de Dados: MySQL (MariaDB) 08/09/2025 Professor Miguél Suares "],["banco-de-dados-postgres.html", "Slide 11 Banco de Dados: Postgres", " Slide 11 Banco de Dados: Postgres 22/09/2025 Professor Miguél Suares "],["banco-de-dados-postgres-1.html", "Slide 12 Banco de Dados: Postgres", " Slide 12 Banco de Dados: Postgres 22/09/2025 Professor Miguél Suares "],["banco-de-dados-uma-aplicação-crud-1.html", "Slide 13 Banco de Dados: Uma Aplicação CRUD 13.1 O que é uma Aplicação CRUD? 13.2 Conceito de CRUD 13.3 O padrão de Design de Sistemas MVC (Model View Controller) 13.4 Construindo uma aplicação CRUD para interfacear com a tabela “Pessoa” 13.5 Criação de uma aplicação CRUD 13.6 Feito 13.7 Exercícios 13.8 Exemplo 01 13.9 Exemplo 02 - SERVIDOR DE APLICAÇÃO PYTHON 13.10 Exemplo 03 - SERVIDOR DE APLICAÇÃO PERL 13.11 Exemplo 04 - SERVIDOR DE APLICAÇÃO JAVA 13.12 Exemplo 05 - SERVIDOR DE APLICAÇÃO C++", " Slide 13 Banco de Dados: Uma Aplicação CRUD 21/04/2026 Professor Miguél Suares 13.1 O que é uma Aplicação CRUD? Hoje vamos desenvolver um cadastro web simples e entender o que é o acronimo C.R.U.D. 13.2 Conceito de CRUD CRUD é um acrônimo para quatro operações fundamentais que um sistema realiza sobre dados em um banco de dados: Essas quatro operações compõem a base da maioria das aplicações web que manipulam dados persistidos em um SGBD (Sistema Gerenciador de Banco de Dados). 13.3 O padrão de Design de Sistemas MVC (Model View Controller) Uma aplicação Cliente-Servidor (modelo 2 camadas) geralmente segue o padrão MVC — Model, View, Controller: 13.4 Construindo uma aplicação CRUD para interfacear com a tabela “Pessoa” Considere o Diagrama Entidade-Relacionamento abaixo: Vamos Converte-lo para o Modelo Físico-Relacional em linguagem SQL: 13.4.1 Representação gráfica no modelo Físico-Relacional Vamos agora representa-lo em linguagem SQL: 13.5 Criação de uma aplicação CRUD Vamos criar um microsas (micro Software As A Service) , ou seja, um site para inserir informações dentro da tabela acima. Criando um Esquema de Banco de Dados - CRUD tabela Pessoas Informações de Projeto Tecnologias utilizadas no projeto CRUD Servidor de banco de dados SGBD MySQL 8 Usuário de Banco de Dados pessoas_user De onde pode ser acessado Apenas Máquina Local (localhost) Esquema de Banco de Dados pessoasdb Servidor de Aplicação Python 3 Cliente da Aplicação HTML + Javascript Tecnologia de API RestuFul Biblioteca de Javascript para criar API RestFul Método Fetch (Biblioteca Padrão do JavaScript para API RestFul) Formato de Dados entre Servidor de Aplicação e Cliente de Aplicação JSON 13.5.0.1 Criação de um usuário para Interagir com o Esquema de Banco de Dados -- CRIAR USUÁRIO LOCAL E CONCEDER PERMISSÕES -- Troque &#39;MinhaSenhaForte&#39; por uma senha segura CREATE USER IF NOT EXISTS &#39;pessoas_user&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;MinhaSenhaForte&#39;; GRANT ALL PRIVILEGES ON pessoasdb.* TO &#39;pessoas_user&#39;@&#39;localhost&#39;; FLUSH PRIVILEGES; 13.5.0.2 Criação do Esquema de Banco de Dados no SGBD MySQL Agora vamos criar um esquema de Banco de Dados para abrigar nossa futura tabela: -- 1) CRIAR BANCO (ajuste o nome se quiser) CREATE DATABASE IF NOT EXISTS pessoasdb CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci; USE pessoasdb; 13.5.0.3 Criação da Tabela “pessoas” -- 3) TABELA &#39;pessoas&#39; COMPATÍVEL COM O MODELO SQLAlchemy -- - cpf: chave primária (String(14)) -- - nome, endereco, foto: TEXT -- - data_nascimento: DATE CREATE TABLE IF NOT EXISTS pessoas ( cpf VARCHAR(14) NOT NULL, nome TEXT NOT NULL, endereco TEXT NOT NULL, data_nascimento DATE NOT NULL, foto TEXT NULL, PRIMARY KEY (cpf) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci; -- 4) (OPCIONAL) ÍNDICES PARA BUSCA -- Seu endpoint usa LIKE/ILIKE em nome e cpf; cpf já é PK. -- Para acelerar buscas por nome com LIKE, crie um índice por prefixo. -- OBS: índices em TEXT precisam de comprimento; 128 costuma ser um bom compromisso. CREATE INDEX idx_pessoas_nome_prefix ON pessoas (nome(128)); 13.5.0.4 Uma aplicação Cliente Servidor no formato MVC (Model View Controller) 13.5.0.5 Criação do Servidor de Aplicação em Linguagem Python Vejamos a representação gráfica de nosso servidor utilizando o diagrama de classes da linguagem UML Para utilizar o MySQL como servidor, devemos instalar os drivers de MySQL para a biblioteca SQLAlchemy do Python através da ferramenta de linha de comando PIP do python pip install flask flask-cors sqlalchemy &quot;pymysql&gt;=1.1&quot; # (ou use mysqlclient: pip install mysqlclient e troque o driver para mysql+mysqlclient) Agora vamos escrever o script python que criará o servidor de aplicação para interfacear nosso Cliente no Navegador e nossa tabela pessoas dentro do SGBD MySQL: from flask import Flask, request, jsonify from flask_cors import CORS from sqlalchemy import create_engine, Column, String, Date, Text from sqlalchemy.orm import sessionmaker, declarative_base from datetime import date # ------------------------------ # Flask + CORS # ------------------------------ app = Flask(__name__) CORS(app) # em produção, restrinja as origens # ------------------------------ # Banco de Dados MySQL (localhost) # ------------------------------ # Parâmetros do projeto: # SGBD: MySQL 8 # Host: localhost # Usuário: pessoas_user # DB/Schema: pessoasdb # Tabela: pessoas DATABASE_URL = &quot;mysql+pymysql://pessoas_user:MinhaSenhaForte@localhost:3306/pessoasdb&quot; engine = create_engine( DATABASE_URL, pool_pre_ping=True, # evita &quot;MySQL server has gone away&quot; future=True ) SessionLocal = sessionmaker(bind=engine, autoflush=False, autocommit=False, future=True) Base = declarative_base() # ------------------------------ # Modelo Pessoa # ------------------------------ class Pessoa(Base): __tablename__ = &quot;pessoas&quot; cpf = Column(String(14), primary_key=True) nome = Column(Text, nullable=False) endereco = Column(Text, nullable=False) data_nascimento = Column(Date, nullable=False) foto = Column(Text) # Base64 ou URL # Cria a tabela se não existir (deve existir conforme seu script SQL) Base.metadata.create_all(engine) # ------------------------------ # Helpers # ------------------------------ def to_dict(p: Pessoa): return { &quot;cpf&quot;: p.cpf, &quot;nome&quot;: p.nome, &quot;endereco&quot;: p.endereco, &quot;data_nascimento&quot;: p.data_nascimento.isoformat(), &quot;foto&quot;: p.foto } def parse_date_iso(value): if isinstance(value, date): return value return date.fromisoformat(value) # espera &quot;YYYY-MM-DD&quot; # ------------------------------ # CRUD # ------------------------------ # Listar todas as pessoas ou pesquisar por termo (?q=) @app.route(&#39;/pessoas&#39;, methods=[&#39;GET&#39;]) def listar(): termo = (request.args.get(&#39;q&#39;) or &#39;&#39;).strip() with SessionLocal() as session: query = session.query(Pessoa) if termo: like = f&quot;%{termo}%&quot; # MySQL é case-insensitive com collation *_ci; ilike é traduzido para LIKE query = query.filter((Pessoa.nome.ilike(like)) | (Pessoa.cpf.ilike(like))) pessoas = query.order_by(Pessoa.nome.asc()).all() return jsonify([to_dict(p) for p in pessoas]) # Inserir nova pessoa @app.route(&#39;/pessoas&#39;, methods=[&#39;POST&#39;]) def inserir(): dados = request.get_json(force=True) required = [&#39;cpf&#39;, &#39;nome&#39;, &#39;endereco&#39;, &#39;data_nascimento&#39;] faltantes = [k for k in required if not dados.get(k)] if faltantes: return jsonify({&quot;error&quot;: &quot;Campos obrigatórios faltando&quot;, &quot;fields&quot;: faltantes}), 422 try: dn = parse_date_iso(dados[&#39;data_nascimento&#39;]) except Exception: return jsonify({&quot;error&quot;: &quot;data_nascimento inválida. Use YYYY-MM-DD&quot;}), 422 with SessionLocal() as session: if session.query(Pessoa).filter_by(cpf=dados[&#39;cpf&#39;]).first(): return jsonify({&quot;error&quot;: &quot;CPF já cadastrado&quot;}), 409 pessoa = Pessoa( cpf=dados[&#39;cpf&#39;], nome=dados[&#39;nome&#39;], endereco=dados[&#39;endereco&#39;], data_nascimento=dn, foto=dados.get(&#39;foto&#39;) ) session.add(pessoa) session.commit() session.refresh(pessoa) return jsonify(to_dict(pessoa)), 201 # Alterar pessoa (PUT) @app.route(&#39;/pessoas/&lt;cpf&gt;&#39;, methods=[&#39;PUT&#39;]) def alterar(cpf): dados = request.get_json(force=True) with SessionLocal() as session: pessoa = session.query(Pessoa).filter_by(cpf=cpf).first() if not pessoa: return jsonify({&quot;error&quot;: &quot;CPF não encontrado&quot;}), 404 if &#39;nome&#39; in dados and dados[&#39;nome&#39;] is not None: pessoa.nome = dados[&#39;nome&#39;] if &#39;endereco&#39; in dados and dados[&#39;endereco&#39;] is not None: pessoa.endereco = dados[&#39;endereco&#39;] if &#39;data_nascimento&#39; in dados and dados[&#39;data_nascimento&#39;] is not None: try: pessoa.data_nascimento = parse_date_iso(dados[&#39;data_nascimento&#39;]) except Exception: return jsonify({&quot;error&quot;: &quot;data_nascimento inválida. Use YYYY-MM-DD&quot;}), 422 if &#39;foto&#39; in dados: pessoa.foto = dados[&#39;foto&#39;] session.commit() session.refresh(pessoa) return jsonify(to_dict(pessoa)), 200 # Remover pessoa @app.route(&#39;/pessoas/&lt;cpf&gt;&#39;, methods=[&#39;DELETE&#39;]) def remover(cpf): with SessionLocal() as session: pessoa = session.query(Pessoa).filter_by(cpf=cpf).first() if not pessoa: return jsonify({&quot;error&quot;: &quot;CPF não encontrado&quot;}), 404 session.delete(pessoa) session.commit() return &#39;&#39;, 204 # Buscar pessoa por CPF @app.route(&#39;/pessoas/&lt;cpf&gt;&#39;, methods=[&#39;GET&#39;]) def buscar(cpf): with SessionLocal() as session: pessoa = session.query(Pessoa).filter_by(cpf=cpf).first() if not pessoa: return jsonify({&quot;error&quot;: &quot;CPF não encontrado&quot;}), 404 return jsonify(to_dict(pessoa)) # ------------------------------ # Inicia o servidor # ------------------------------ if __name__ == &#39;__main__&#39;: app.run(debug=True, port=5000) 13.5.0.6 Criação do Cliente de Aplicação em HTML (Parte Gráfica) e Javascript (Programação Executável) Vamos verificar como é o Diagrama de Classes do Cliente que vai conversar com o servidor que vimos anteriormente: Agora vamos verificar o código-fonte. Salve esse código em um arquivo chamado cliente.html, para poder abrir-lo no navegador, juntamente com o servidor rodando: &lt;!DOCTYPE html&gt; &lt;html lang=&quot;pt-BR&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Cadastro de Pessoas - Flask/MySQL&lt;/title&gt; &lt;style&gt; body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; max-width: 980px; margin: 24px auto; } label { display: block; margin-top: 10px; } button { margin-top: 10px; margin-right: 6px; padding: 8px 12px; } table { border-collapse: collapse; width:100%; margin-top:20px; } th, td { border:1px solid #ddd; padding:8px; text-align:left; } img.thumb { width:60px; height:60px; object-fit:cover; border-radius:4px; } .row { display:flex; gap:8px; align-items:center; flex-wrap:wrap; } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;Cadastro de Pessoas (Flask/MySQL)&lt;/h1&gt; &lt;form id=&quot;formPessoa&quot;&gt; &lt;label&gt;CPF (chave primária): &lt;input id=&quot;cpf&quot; required&gt;&lt;/label&gt; &lt;label&gt;Nome: &lt;input id=&quot;nome&quot; required&gt;&lt;/label&gt; &lt;label&gt;Endereço: &lt;input id=&quot;endereco&quot; required&gt;&lt;/label&gt; &lt;label&gt;Data Nasc.: &lt;input type=&quot;date&quot; id=&quot;data_nascimento&quot; required&gt;&lt;/label&gt; &lt;label&gt;Foto: &lt;input type=&quot;file&quot; id=&quot;foto&quot; accept=&quot;image/*&quot;&gt;&lt;/label&gt; &lt;div class=&quot;row&quot;&gt; &lt;button type=&quot;button&quot; id=&quot;btnInserir&quot; onclick=&quot;inserir()&quot;&gt;Inserir&lt;/button&gt; &lt;button type=&quot;button&quot; id=&quot;btnAlterar&quot; onclick=&quot;alterar()&quot;&gt;Alterar&lt;/button&gt; &lt;button type=&quot;button&quot; id=&quot;btnRemover&quot; onclick=&quot;remover()&quot;&gt;Remover&lt;/button&gt; &lt;/div&gt; &lt;/form&gt; &lt;h2&gt;Pesquisar&lt;/h2&gt; &lt;div class=&quot;row&quot;&gt; &lt;input id=&quot;pesquisa&quot; placeholder=&quot;Digite nome ou CPF&quot; style=&quot;flex:1&quot;&gt; &lt;button type=&quot;button&quot; id=&quot;btnPesquisar&quot; onclick=&quot;pesquisar()&quot;&gt;Pesquisar&lt;/button&gt; &lt;button type=&quot;button&quot; onclick=&quot;listar()&quot;&gt;Listar tudo&lt;/button&gt; &lt;/div&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;CPF&lt;/th&gt;&lt;th&gt;Foto&lt;/th&gt;&lt;th&gt;Nome&lt;/th&gt; &lt;th&gt;Endereço&lt;/th&gt;&lt;th&gt;Nascimento&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody id=&quot;tabela&quot;&gt;&lt;/tbody&gt; &lt;/table&gt; &lt;script&gt; const API = &#39;http://localhost:5000/pessoas&#39;; /* ---------- Helpers ---------- */ function setBusy(busy) { for (const id of [&#39;btnInserir&#39;,&#39;btnAlterar&#39;,&#39;btnRemover&#39;,&#39;btnPesquisar&#39;]) { const el = document.getElementById(id); if (el) el.disabled = busy; } } function validaCampos() { const campos = [&#39;cpf&#39;,&#39;nome&#39;,&#39;endereco&#39;,&#39;data_nascimento&#39;]; for (const id of campos) { const valor = document.getElementById(id).value.trim(); if (!valor) { alert(`O campo &quot;${id}&quot; não pode ficar em branco.`); return false; } } return true; } function getFotoBase64() { const file = document.getElementById(&#39;foto&#39;).files[0]; if(!file) return Promise.resolve(&#39;&#39;); return new Promise((resolve,reject)=&gt;{ const reader = new FileReader(); reader.onload = () =&gt; resolve(reader.result); reader.onerror = reject; reader.readAsDataURL(file); }); } function coletaDados(base64Foto){ return { cpf: document.getElementById(&#39;cpf&#39;).value.trim(), nome: document.getElementById(&#39;nome&#39;).value.trim(), endereco: document.getElementById(&#39;endereco&#39;).value.trim(), data_nascimento: document.getElementById(&#39;data_nascimento&#39;).value, // YYYY-MM-DD foto: base64Foto || &#39;&#39; }; } async function readJsonSafe(res) { const ct = res.headers.get(&#39;content-type&#39;) || &#39;&#39;; if (ct.includes(&#39;application/json&#39;)) { try { return await res.json(); } catch { return null; } } return null; } /* ---------- CRUD ---------- */ async function inserir() { if(!validaCampos()) return; setBusy(true); try { const base64 = await getFotoBase64(); const pessoa = coletaDados(base64); const res = await fetch(API, { method: &#39;POST&#39;, headers: {&#39;Content-Type&#39;: &#39;application/json&#39;}, body: JSON.stringify(pessoa) }); const data = await readJsonSafe(res); if(res.ok) { alert(&#39;Inserido com sucesso!&#39;); listar(); document.getElementById(&#39;formPessoa&#39;).reset(); } else { alert(&#39;Erro: &#39; + (data?.error || res.statusText)); } } catch (e) { alert(&#39;Falha ao inserir: &#39; + e.message); } finally { setBusy(false); } } async function alterar() { if(!validaCampos()) return; const cpf = document.getElementById(&#39;cpf&#39;).value.trim(); setBusy(true); try { const base64 = await getFotoBase64(); const novosDados = coletaDados(); if (base64) novosDados.foto = base64; const res = await fetch(`${API}/${encodeURIComponent(cpf)}`, { method: &#39;PUT&#39;, headers: {&#39;Content-Type&#39;: &#39;application/json&#39;}, body: JSON.stringify(novosDados) }); const data = await readJsonSafe(res); if(res.ok) { alert(&#39;Alterado com sucesso!&#39;); listar(); } else { alert(&#39;Erro: &#39; + (data?.error || res.statusText)); } } catch (e) { alert(&#39;Falha ao alterar: &#39; + e.message); } finally { setBusy(false); } } async function remover() { const cpf = document.getElementById(&#39;cpf&#39;).value.trim(); if(!cpf) return alert(&#39;Informe o CPF para remover.&#39;); if(!confirm(&#39;Confirma a exclusão?&#39;)) return; setBusy(true); try { const res = await fetch(`${API}/${encodeURIComponent(cpf)}`, {method:&#39;DELETE&#39;}); // 204 =&gt; sem corpo; não tente parsear JSON aqui if(res.status === 204) { alert(&#39;Removido com sucesso!&#39;); listar(); return; } const data = await readJsonSafe(res); if(res.ok) { alert(&#39;Removido com sucesso!&#39;); listar(); } else { alert(&#39;Erro: &#39; + (data?.error || res.statusText)); } } catch (e) { alert(&#39;Falha ao remover: &#39; + e.message); } finally { setBusy(false); } } async function pesquisar() { const termo = document.getElementById(&#39;pesquisa&#39;).value.trim(); setBusy(true); try { const url = termo ? `${API}?q=${encodeURIComponent(termo)}` : API; const res = await fetch(url); const data = await readJsonSafe(res); if(!res.ok) return alert(&#39;Falha na pesquisa: &#39; + (data?.error || res.statusText)); preencheTabela(Array.isArray(data) ? data : (data?.items ?? [])); } catch (e) { alert(&#39;Falha na pesquisa: &#39; + e.message); } finally { setBusy(false); } } async function listar() { setBusy(true); try { const res = await fetch(API); const data = await readJsonSafe(res); if(!res.ok) return alert(&#39;Falha ao listar: &#39; + (data?.error || res.statusText)); preencheTabela(Array.isArray(data) ? data : (data?.items ?? [])); } catch (e) { alert(&#39;Falha ao listar: &#39; + e.message); } finally { setBusy(false); } } /* ---------- UI ---------- */ function preencheTabela(lista){ const tbody = document.getElementById(&#39;tabela&#39;); tbody.innerHTML = &#39;&#39;; (lista || []).forEach(p=&gt;{ const tr = document.createElement(&#39;tr&#39;); tr.innerHTML = ` &lt;td&gt;${p.cpf}&lt;/td&gt; &lt;td&gt;${p.foto ? `&lt;img class=&quot;thumb&quot; src=&quot;${p.foto}&quot; alt=&quot;foto&quot;&gt;` : &#39;&#39;}&lt;/td&gt; &lt;td&gt;${p.nome}&lt;/td&gt; &lt;td&gt;${p.endereco}&lt;/td&gt; &lt;td&gt;${p.data_nascimento}&lt;/td&gt;`; tr.onclick = () =&gt; { document.getElementById(&#39;cpf&#39;).value = p.cpf; document.getElementById(&#39;nome&#39;).value = p.nome; document.getElementById(&#39;endereco&#39;).value = p.endereco; document.getElementById(&#39;data_nascimento&#39;).value = p.data_nascimento; }; tbody.appendChild(tr); }); } listar(); &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; 13.5.1 Resultado final: 13.5.1.1 Servidor de aplicação Python “Restful” rodando 13.5.1.2 Cliente HTML + Javascript ( página ESTÁTICA ) aberta no navegador 13.5.1.2.1 Passo 1 - Preencher dados no formulário do cliente Vamos inserir dados de exemplo no “cliente WEB” abaixo 13.5.1.2.2 Passo 2 - Pressionar o Botão INSERIR OBS: Na tela do servidor, é possível verificar as operações HTTP Equivalentes ao SQL que foram executadas entre o Servidor e o Cliente 13.5.1.2.3 Passo 3 - Verificar se o “DBGRID” do cliente “espelhando” a linha da tabela “pessoas” no esquema “pessoasdb” do SQBG MySQL 13.5.1.2.4 Passo 4 - Verificar na tabela pessoas a linha que o cliente preencheu através da API da aplicação cliente/servidor 13.6 Feito 13.7 Exercícios 01/09/2025 Professor Miguél Suares 13.7.1 Banco de Dados utilizado nos exemplos de aplicações abaixo Crie o banco de dados abaixo em um servidor mysql 8 ou superior na sua máquina antes de testar os exemplos abaixo: -- 1) CRIAR BANCO (ajuste o nome se quiser) CREATE DATABASE IF NOT EXISTS pessoasdb CHARACTER SET utf8mb4 COLLATE utf8mb4_0900_ai_ci; USE pessoasdb; -- 2) (OPCIONAL) CRIAR USUÁRIO LOCAL E CONCEDER PERMISSÕES -- Troque &#39;MinhaSenhaForte&#39; por uma senha segura CREATE USER IF NOT EXISTS &#39;pessoas_user&#39;@&#39;localhost&#39; IDENTIFIED BY &#39;MinhaSenhaForte&#39;; GRANT ALL PRIVILEGES ON pessoasdb.* TO &#39;pessoas_user&#39;@&#39;localhost&#39;; FLUSH PRIVILEGES; -- 3) TABELA &#39;pessoas&#39; COMPATÍVEL COM O MODELO SQLAlchemy -- - cpf: chave primária (String(14)) -- - nome, endereco, foto: TEXT -- - data_nascimento: DATE CREATE TABLE IF NOT EXISTS pessoas ( cpf VARCHAR(14) NOT NULL, nome TEXT NOT NULL, endereco TEXT NOT NULL, data_nascimento DATE NOT NULL, foto TEXT NULL, PRIMARY KEY (cpf) ) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci; -- 4) (OPCIONAL) ÍNDICES PARA BUSCA -- Seu endpoint usa LIKE/ILIKE em nome e cpf; cpf já é PK. -- Para acelerar buscas por nome com LIKE, crie um índice por prefixo. -- OBS: índices em TEXT precisam de comprimento; 128 costuma ser um bom compromisso. CREATE INDEX idx_pessoas_nome_prefix ON pessoas (nome(128)); 13.8 Exemplo 01 servidor SUPABASE …. a fazer 13.9 Exemplo 02 - SERVIDOR DE APLICAÇÃO PYTHON Neste exemplo, temos uma aplicação cliente feita html e javascript A interface do Cliente é feita em HTML5 A conexão com o servidor é feita pelo javascript incorporado no HTML: CRUD no cliente é feito peloa javascript utilizando metodologia Restful sobre protocolo HTTP 2.0 O servidor Restful é feito em linguagem PYTHON OBS: NÃO TEMOS CONTROLE DE SESSÃO DE CLIENTE IMPLEMENTADO. python -m pip install --user --upgrade flask flask-cors sqlalchemy psycopg2-binary 13.9.1 Servidor python from flask import Flask, request, jsonify from flask_cors import CORS from sqlalchemy import create_engine, Column, String, Date, Text from sqlalchemy.ext.declarative import declarative_base from sqlalchemy.orm import sessionmaker # ------------------------------ # Configuração do Flask e CORS # ------------------------------ app = Flask(__name__) CORS(app) # ------------------------------ # Configuração do banco PostgreSQL # ------------------------------ DATABASE_URL = &quot;postgresql://postgres:MinhaSuperSenha@db.pbbtfwmydxmxdibmtbqq.supabase.co:5432/postgres&quot; engine = create_engine(DATABASE_URL) SessionLocal = sessionmaker(bind=engine) Base = declarative_base() # ------------------------------ # Modelo Pessoa # ------------------------------ class Pessoa(Base): __tablename__ = &quot;pessoas&quot; cpf = Column(String(14), primary_key=True) nome = Column(Text, nullable=False) endereco = Column(Text, nullable=False) data_nascimento = Column(Date, nullable=False) foto = Column(Text) # Base64 ou URL # Cria a tabela se não existir Base.metadata.create_all(engine) # ------------------------------ # CRUD # ------------------------------ # Listar todas as pessoas ou pesquisar por termo @app.route(&#39;/pessoas&#39;, methods=[&#39;GET&#39;]) def listar(): termo = request.args.get(&#39;q&#39;, &#39;&#39;).lower() session = SessionLocal() if termo: pessoas = session.query(Pessoa).filter( (Pessoa.nome.ilike(f&quot;%{termo}%&quot;)) | (Pessoa.cpf.ilike(f&quot;%{termo}%&quot;)) ).all() else: pessoas = session.query(Pessoa).all() session.close() return jsonify([{ &quot;cpf&quot;: p.cpf, &quot;nome&quot;: p.nome, &quot;endereco&quot;: p.endereco, &quot;data_nascimento&quot;: p.data_nascimento.isoformat(), &quot;foto&quot;: p.foto } for p in pessoas]) # Inserir nova pessoa @app.route(&#39;/pessoas&#39;, methods=[&#39;POST&#39;]) def inserir(): dados = request.get_json() session = SessionLocal() if session.query(Pessoa).filter_by(cpf=dados[&#39;cpf&#39;]).first(): session.close() return jsonify({&quot;error&quot;: &quot;CPF já cadastrado&quot;}), 400 pessoa = Pessoa( cpf=dados[&#39;cpf&#39;], nome=dados[&#39;nome&#39;], endereco=dados[&#39;endereco&#39;], data_nascimento=dados[&#39;data_nascimento&#39;], foto=dados.get(&#39;foto&#39;) ) session.add(pessoa) session.commit() session.close() return jsonify({&quot;message&quot;: &quot;Inserido com sucesso&quot;}), 201 # Alterar pessoa @app.route(&#39;/pessoas/&lt;cpf&gt;&#39;, methods=[&#39;PUT&#39;]) def alterar(cpf): dados = request.get_json() session = SessionLocal() pessoa = session.query(Pessoa).filter_by(cpf=cpf).first() if not pessoa: session.close() return jsonify({&quot;error&quot;: &quot;CPF não encontrado&quot;}), 404 pessoa.nome = dados.get(&#39;nome&#39;, pessoa.nome) pessoa.endereco = dados.get(&#39;endereco&#39;, pessoa.endereco) pessoa.data_nascimento = dados.get(&#39;data_nascimento&#39;, pessoa.data_nascimento) pessoa.foto = dados.get(&#39;foto&#39;, pessoa.foto) session.commit() session.close() return jsonify({&quot;message&quot;: &quot;Alterado com sucesso&quot;}) # Remover pessoa @app.route(&#39;/pessoas/&lt;cpf&gt;&#39;, methods=[&#39;DELETE&#39;]) def remover(cpf): session = SessionLocal() pessoa = session.query(Pessoa).filter_by(cpf=cpf).first() if not pessoa: session.close() return jsonify({&quot;error&quot;: &quot;CPF não encontrado&quot;}), 404 session.delete(pessoa) session.commit() session.close() return jsonify({&quot;message&quot;: &quot;Removido com sucesso&quot;}) # Buscar pessoa por CPF @app.route(&#39;/pessoas/&lt;cpf&gt;&#39;, methods=[&#39;GET&#39;]) def buscar(cpf): session = SessionLocal() pessoa = session.query(Pessoa).filter_by(cpf=cpf).first() session.close() if not pessoa: return jsonify({&quot;error&quot;: &quot;CPF não encontrado&quot;}), 404 return jsonify({ &quot;cpf&quot;: pessoa.cpf, &quot;nome&quot;: pessoa.nome, &quot;endereco&quot;: pessoa.endereco, &quot;data_nascimento&quot;: pessoa.data_nascimento.isoformat(), &quot;foto&quot;: pessoa.foto }) # ------------------------------ # Inicia o servidor # ------------------------------ if __name__ == &#39;__main__&#39;: app.run(debug=True, port=5000) servidor estará rodando na porta 5000 e EXPÕE A API de operações na URI http://localhost:5000/pessoas sem senha http://localhost:5000/pessoas 13.9.2 Cliente HTML (conexão Restful) crie o arquivo index.html e abra-o no navegador &lt;!DOCTYPE html&gt; &lt;html lang=&quot;pt-BR&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Cadastro de Pessoas - Flask/MySQL&lt;/title&gt; &lt;style&gt; body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; max-width: 980px; margin: 24px auto; } label { display: block; margin-top: 10px; } button { margin-top: 10px; margin-right: 6px; padding: 8px 12px; } table { border-collapse: collapse; width:100%; margin-top:20px; } th, td { border:1px solid #ddd; padding:8px; text-align:left; } img.thumb { width:60px; height:60px; object-fit:cover; border-radius:4px; } .row { display:flex; gap:8px; align-items:center; flex-wrap:wrap; } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;Cadastro de Pessoas (Flask/MySQL)&lt;/h1&gt; &lt;form id=&quot;formPessoa&quot;&gt; &lt;label&gt;CPF (chave primária): &lt;input id=&quot;cpf&quot; required&gt;&lt;/label&gt; &lt;label&gt;Nome: &lt;input id=&quot;nome&quot; required&gt;&lt;/label&gt; &lt;label&gt;Endereço: &lt;input id=&quot;endereco&quot; required&gt;&lt;/label&gt; &lt;label&gt;Data Nasc.: &lt;input type=&quot;date&quot; id=&quot;data_nascimento&quot; required&gt;&lt;/label&gt; &lt;label&gt;Foto: &lt;input type=&quot;file&quot; id=&quot;foto&quot; accept=&quot;image/*&quot;&gt;&lt;/label&gt; &lt;div class=&quot;row&quot;&gt; &lt;button type=&quot;button&quot; id=&quot;btnInserir&quot; onclick=&quot;inserir()&quot;&gt;Inserir&lt;/button&gt; &lt;button type=&quot;button&quot; id=&quot;btnAlterar&quot; onclick=&quot;alterar()&quot;&gt;Alterar&lt;/button&gt; &lt;button type=&quot;button&quot; id=&quot;btnRemover&quot; onclick=&quot;remover()&quot;&gt;Remover&lt;/button&gt; &lt;/div&gt; &lt;/form&gt; &lt;h2&gt;Pesquisar&lt;/h2&gt; &lt;div class=&quot;row&quot;&gt; &lt;input id=&quot;pesquisa&quot; placeholder=&quot;Digite nome ou CPF&quot; style=&quot;flex:1&quot;&gt; &lt;button type=&quot;button&quot; id=&quot;btnPesquisar&quot; onclick=&quot;pesquisar()&quot;&gt;Pesquisar&lt;/button&gt; &lt;button type=&quot;button&quot; onclick=&quot;listar()&quot;&gt;Listar tudo&lt;/button&gt; &lt;/div&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;CPF&lt;/th&gt;&lt;th&gt;Foto&lt;/th&gt;&lt;th&gt;Nome&lt;/th&gt; &lt;th&gt;Endereço&lt;/th&gt;&lt;th&gt;Nascimento&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody id=&quot;tabela&quot;&gt;&lt;/tbody&gt; &lt;/table&gt; &lt;script&gt; const API = &#39;http://localhost:5000/pessoas&#39;; /* ---------- Helpers ---------- */ function setBusy(busy) { for (const id of [&#39;btnInserir&#39;,&#39;btnAlterar&#39;,&#39;btnRemover&#39;,&#39;btnPesquisar&#39;]) { const el = document.getElementById(id); if (el) el.disabled = busy; } } function validaCampos() { const campos = [&#39;cpf&#39;,&#39;nome&#39;,&#39;endereco&#39;,&#39;data_nascimento&#39;]; for (const id of campos) { const valor = document.getElementById(id).value.trim(); if (!valor) { alert(`O campo &quot;${id}&quot; não pode ficar em branco.`); return false; } } return true; } function getFotoBase64() { const file = document.getElementById(&#39;foto&#39;).files[0]; if(!file) return Promise.resolve(&#39;&#39;); return new Promise((resolve,reject)=&gt;{ const reader = new FileReader(); reader.onload = () =&gt; resolve(reader.result); reader.onerror = reject; reader.readAsDataURL(file); }); } function coletaDados(base64Foto){ return { cpf: document.getElementById(&#39;cpf&#39;).value.trim(), nome: document.getElementById(&#39;nome&#39;).value.trim(), endereco: document.getElementById(&#39;endereco&#39;).value.trim(), data_nascimento: document.getElementById(&#39;data_nascimento&#39;).value, // YYYY-MM-DD foto: base64Foto || &#39;&#39; }; } async function readJsonSafe(res) { const ct = res.headers.get(&#39;content-type&#39;) || &#39;&#39;; if (ct.includes(&#39;application/json&#39;)) { try { return await res.json(); } catch { return null; } } return null; } /* ---------- CRUD ---------- */ async function inserir() { if(!validaCampos()) return; setBusy(true); try { const base64 = await getFotoBase64(); const pessoa = coletaDados(base64); const res = await fetch(API, { method: &#39;POST&#39;, headers: {&#39;Content-Type&#39;: &#39;application/json&#39;}, body: JSON.stringify(pessoa) }); const data = await readJsonSafe(res); if(res.ok) { alert(&#39;Inserido com sucesso!&#39;); listar(); document.getElementById(&#39;formPessoa&#39;).reset(); } else { alert(&#39;Erro: &#39; + (data?.error || res.statusText)); } } catch (e) { alert(&#39;Falha ao inserir: &#39; + e.message); } finally { setBusy(false); } } async function alterar() { if(!validaCampos()) return; const cpf = document.getElementById(&#39;cpf&#39;).value.trim(); setBusy(true); try { const base64 = await getFotoBase64(); const novosDados = coletaDados(); if (base64) novosDados.foto = base64; const res = await fetch(`${API}/${encodeURIComponent(cpf)}`, { method: &#39;PUT&#39;, headers: {&#39;Content-Type&#39;: &#39;application/json&#39;}, body: JSON.stringify(novosDados) }); const data = await readJsonSafe(res); if(res.ok) { alert(&#39;Alterado com sucesso!&#39;); listar(); } else { alert(&#39;Erro: &#39; + (data?.error || res.statusText)); } } catch (e) { alert(&#39;Falha ao alterar: &#39; + e.message); } finally { setBusy(false); } } async function remover() { const cpf = document.getElementById(&#39;cpf&#39;).value.trim(); if(!cpf) return alert(&#39;Informe o CPF para remover.&#39;); if(!confirm(&#39;Confirma a exclusão?&#39;)) return; setBusy(true); try { const res = await fetch(`${API}/${encodeURIComponent(cpf)}`, {method:&#39;DELETE&#39;}); // 204 =&gt; sem corpo; não tente parsear JSON aqui if(res.status === 204) { alert(&#39;Removido com sucesso!&#39;); listar(); return; } const data = await readJsonSafe(res); if(res.ok) { alert(&#39;Removido com sucesso!&#39;); listar(); } else { alert(&#39;Erro: &#39; + (data?.error || res.statusText)); } } catch (e) { alert(&#39;Falha ao remover: &#39; + e.message); } finally { setBusy(false); } } async function pesquisar() { const termo = document.getElementById(&#39;pesquisa&#39;).value.trim(); setBusy(true); try { const url = termo ? `${API}?q=${encodeURIComponent(termo)}` : API; const res = await fetch(url); const data = await readJsonSafe(res); if(!res.ok) return alert(&#39;Falha na pesquisa: &#39; + (data?.error || res.statusText)); preencheTabela(Array.isArray(data) ? data : (data?.items ?? [])); } catch (e) { alert(&#39;Falha na pesquisa: &#39; + e.message); } finally { setBusy(false); } } async function listar() { setBusy(true); try { const res = await fetch(API); const data = await readJsonSafe(res); if(!res.ok) return alert(&#39;Falha ao listar: &#39; + (data?.error || res.statusText)); preencheTabela(Array.isArray(data) ? data : (data?.items ?? [])); } catch (e) { alert(&#39;Falha ao listar: &#39; + e.message); } finally { setBusy(false); } } /* ---------- UI ---------- */ function preencheTabela(lista){ const tbody = document.getElementById(&#39;tabela&#39;); tbody.innerHTML = &#39;&#39;; (lista || []).forEach(p=&gt;{ const tr = document.createElement(&#39;tr&#39;); tr.innerHTML = ` &lt;td&gt;${p.cpf}&lt;/td&gt; &lt;td&gt;${p.foto ? `&lt;img class=&quot;thumb&quot; src=&quot;${p.foto}&quot; alt=&quot;foto&quot;&gt;` : &#39;&#39;}&lt;/td&gt; &lt;td&gt;${p.nome}&lt;/td&gt; &lt;td&gt;${p.endereco}&lt;/td&gt; &lt;td&gt;${p.data_nascimento}&lt;/td&gt;`; tr.onclick = () =&gt; { document.getElementById(&#39;cpf&#39;).value = p.cpf; document.getElementById(&#39;nome&#39;).value = p.nome; document.getElementById(&#39;endereco&#39;).value = p.endereco; document.getElementById(&#39;data_nascimento&#39;).value = p.data_nascimento; }; tbody.appendChild(tr); }); } listar(); &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; 13.10 Exemplo 03 - SERVIDOR DE APLICAÇÃO PERL Neste exemplo, temos uma aplicação cliente feita html e javascript A interface do Cliente é feita em HTML5 A conexão com o servidor é feita pelo javascript incorporado no HTML: CRUD no cliente é feito peloa javascript utilizando metodologia Restful sobre protocolo HTTP 2.0 O servidor Restful é feito em linguagem PERL OBS: NÃO TEMOS CONTROLE DE SESSÃO DE CLIENTE IMPLEMENTADO. cpan Dancer2 DBI DBD::Pg JSON 13.10.1 Servidor Perl #!/usr/bin/perl use strict; use warnings; use Dancer2; use DBI; use JSON; # ----------------------------- # Configurações do banco # ----------------------------- my $dsn = &quot;dbi:Pg:dbname=postgres;host=db.pbbtfwmydxmxdibmtbqq.supabase.co;port=5432&quot;; my $db_user = &quot;postgres&quot;; my $db_pass = &quot;MinhaSuperSenha&quot;; my $dbh = DBI-&gt;connect($dsn, $db_user, $db_pass, { RaiseError =&gt; 1, AutoCommit =&gt; 1 }); # ----------------------------- # Helpers # ----------------------------- sub json_response { content_type &#39;application/json&#39;; return encode_json($_[0]); } # ----------------------------- # Endpoints REST # ----------------------------- # Listar todas ou pesquisar get &#39;/pessoas&#39; =&gt; sub { my $q = query_parameters-&gt;get(&#39;q&#39;) || &#39;&#39;; my $sql = &quot;SELECT * FROM pessoas&quot;; my @params; if ($q ne &#39;&#39;) { $sql .= &quot; WHERE cpf ILIKE ? OR nome ILIKE ?&quot;; @params = (&quot;%$q%&quot;, &quot;%$q%&quot;); } my $sth = $dbh-&gt;prepare($sql); $sth-&gt;execute(@params); my @rows; while (my $row = $sth-&gt;fetchrow_hashref) { push @rows, $row; } return json_response(\\@rows); }; # Buscar por CPF get &#39;/pessoas/:cpf&#39; =&gt; sub { my $cpf = route_parameters-&gt;get(&#39;cpf&#39;); my $sth = $dbh-&gt;prepare(&quot;SELECT * FROM pessoas WHERE cpf = ?&quot;); $sth-&gt;execute($cpf); my $row = $sth-&gt;fetchrow_hashref; return $row ? json_response($row) : status(404)-&gt;json_response({ error =&gt; &quot;CPF não encontrado&quot; }); }; # Inserir post &#39;/pessoas&#39; =&gt; sub { my $data = from_json(request-&gt;body); my $cpf = $data-&gt;{cpf}; # Verifica se existe my $check = $dbh-&gt;prepare(&quot;SELECT cpf FROM pessoas WHERE cpf = ?&quot;); $check-&gt;execute($cpf); if ($check-&gt;fetchrow_array) { status(400); return json_response({ error =&gt; &quot;CPF já cadastrado&quot; }); } my $sth = $dbh-&gt;prepare(&quot;INSERT INTO pessoas (cpf, nome, endereco, data_nascimento, foto) VALUES (?, ?, ?, ?, ?)&quot;); $sth-&gt;execute($cpf, $data-&gt;{nome}, $data-&gt;{endereco}, $data-&gt;{data_nascimento}, $data-&gt;{foto}); status(201); return json_response({ message =&gt; &quot;Inserido com sucesso&quot; }); }; # Alterar put &#39;/pessoas/:cpf&#39; =&gt; sub { my $cpf = route_parameters-&gt;get(&#39;cpf&#39;); my $data = from_json(request-&gt;body); # Verifica se existe my $check = $dbh-&gt;prepare(&quot;SELECT cpf FROM pessoas WHERE cpf = ?&quot;); $check-&gt;execute($cpf); unless ($check-&gt;fetchrow_array) { status(404); return json_response({ error =&gt; &quot;CPF não encontrado&quot; }); } my $sth = $dbh-&gt;prepare(&quot;UPDATE pessoas SET nome=?, endereco=?, data_nascimento=?, foto=? WHERE cpf=?&quot;); $sth-&gt;execute($data-&gt;{nome}, $data-&gt;{endereco}, $data-&gt;{data_nascimento}, $data-&gt;{foto}, $cpf); return json_response({ message =&gt; &quot;Alterado com sucesso&quot; }); }; # Remover del &#39;/pessoas/:cpf&#39; =&gt; sub { my $cpf = route_parameters-&gt;get(&#39;cpf&#39;); my $sth = $dbh-&gt;prepare(&quot;DELETE FROM pessoas WHERE cpf=?&quot;); my $rows = $sth-&gt;execute($cpf); if ($rows) { return json_response({ message =&gt; &quot;Removido com sucesso&quot; }); } else { status(404); return json_response({ error =&gt; &quot;CPF não encontrado&quot; }); } }; # ----------------------------- # Inicializa o servidor # ----------------------------- set port =&gt; 5000; set serializer =&gt; &#39;JSON&#39;; start; servidor estará rodando na porta 5000 e EXPÕE A API de operações na URI http://localhost:5000/pessoas sem senha http://localhost:5000/pessoas 13.10.2 Cliente HTML (conexão Restful) crie o arquivo index.html e abra-o no navegador &lt;!DOCTYPE html&gt; &lt;html lang=&quot;pt-BR&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Cadastro de Pessoas - Perl/PostgreSQL&lt;/title&gt; &lt;style&gt; body { font-family: sans-serif; max-width: 800px; margin: 20px auto; } label { display: block; margin-top: 10px; } button { margin-top: 10px; margin-right: 5px; } table { border-collapse: collapse; width:100%; margin-top:20px; } th, td { border:1px solid #ccc; padding:6px; text-align:left; } img.thumb { width:60px; height:60px; object-fit:cover; border-radius:4px; } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;Cadastro de Pessoas (Perl/PostgreSQL)&lt;/h1&gt; &lt;form id=&quot;formPessoa&quot;&gt; &lt;label&gt;CPF (chave primária): &lt;input id=&quot;cpf&quot; required&gt;&lt;/label&gt; &lt;label&gt;Nome: &lt;input id=&quot;nome&quot; required&gt;&lt;/label&gt; &lt;label&gt;Endereço: &lt;input id=&quot;endereco&quot; required&gt;&lt;/label&gt; &lt;label&gt;Data Nasc.: &lt;input type=&quot;date&quot; id=&quot;data_nascimento&quot; required&gt;&lt;/label&gt; &lt;label&gt;Foto: &lt;input type=&quot;file&quot; id=&quot;foto&quot; accept=&quot;image/*&quot;&gt;&lt;/label&gt; &lt;button type=&quot;button&quot; onclick=&quot;inserir()&quot;&gt;Inserir&lt;/button&gt; &lt;button type=&quot;button&quot; onclick=&quot;alterar()&quot;&gt;Alterar&lt;/button&gt; &lt;button type=&quot;button&quot; onclick=&quot;remover()&quot;&gt;Remover&lt;/button&gt; &lt;/form&gt; &lt;h2&gt;Pesquisar&lt;/h2&gt; &lt;input id=&quot;pesquisa&quot; placeholder=&quot;Digite nome ou CPF&quot;&gt; &lt;button type=&quot;button&quot; onclick=&quot;pesquisar()&quot;&gt;Pesquisar&lt;/button&gt; &lt;table&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;CPF&lt;/th&gt;&lt;th&gt;Foto&lt;/th&gt;&lt;th&gt;Nome&lt;/th&gt; &lt;th&gt;Endereço&lt;/th&gt;&lt;th&gt;Nascimento&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody id=&quot;tabela&quot;&gt;&lt;/tbody&gt; &lt;/table&gt; &lt;script&gt; const API = &#39;http://localhost:5000/pessoas&#39;; /* ---------- Funções utilitárias ---------- */ function validaCampos() { const campos = [&#39;cpf&#39;,&#39;nome&#39;,&#39;endereco&#39;,&#39;data_nascimento&#39;]; for (const id of campos) { const valor = document.getElementById(id).value.trim(); if (!valor) { alert(`O campo &quot;${id}&quot; não pode ficar em branco.`); return false; } } return true; } function getFotoBase64() { const file = document.getElementById(&#39;foto&#39;).files[0]; if(!file) return Promise.resolve(&#39;&#39;); return new Promise((resolve,reject)=&gt;{ const reader = new FileReader(); reader.onload = () =&gt; resolve(reader.result); reader.onerror = reject; reader.readAsDataURL(file); }); } function coletaDados(base64Foto){ return { cpf: document.getElementById(&#39;cpf&#39;).value.trim(), nome: document.getElementById(&#39;nome&#39;).value.trim(), endereco: document.getElementById(&#39;endereco&#39;).value.trim(), data_nascimento: document.getElementById(&#39;data_nascimento&#39;).value, foto: base64Foto || &#39;&#39; }; } /* ---------- CRUD ---------- */ async function inserir() { if(!validaCampos()) return; const base64 = await getFotoBase64(); const pessoa = coletaDados(base64); const res = await fetch(API, { method: &#39;POST&#39;, headers: {&#39;Content-Type&#39;: &#39;application/json&#39;}, body: JSON.stringify(pessoa) }); const data = await res.json(); if(res.ok) alert(&#39;Inserido com sucesso!&#39;); else alert(&#39;Erro: &#39; + (data.error || &#39;&#39;)); listar(); } async function alterar() { if(!validaCampos()) return; const cpf = document.getElementById(&#39;cpf&#39;).value.trim(); const base64 = await getFotoBase64(); const novosDados = coletaDados(); if(base64) novosDados.foto = base64; const res = await fetch(`${API}/${encodeURIComponent(cpf)}`, { method: &#39;PUT&#39;, headers: {&#39;Content-Type&#39;: &#39;application/json&#39;}, body: JSON.stringify(novosDados) }); const data = await res.json(); if(res.ok) alert(&#39;Alterado com sucesso!&#39;); else alert(&#39;Erro: &#39; + (data.error || &#39;&#39;)); listar(); } async function remover() { const cpf = document.getElementById(&#39;cpf&#39;).value.trim(); if(!cpf) return alert(&#39;Informe o CPF para remover.&#39;); if(confirm(&#39;Confirma a exclusão?&#39;)){ const res = await fetch(`${API}/${encodeURIComponent(cpf)}`, {method:&#39;DELETE&#39;}); const data = await res.json(); if(res.ok) alert(&#39;Removido com sucesso!&#39;); else alert(&#39;Erro: &#39; + (data.error || &#39;&#39;)); listar(); } } async function pesquisar() { const termo = document.getElementById(&#39;pesquisa&#39;).value.trim(); if(!termo){ listar(); return; } const res = await fetch(`${API}?q=${encodeURIComponent(termo)}`); const data = await res.json(); preencheTabela(data); } async function listar() { const res = await fetch(API); const data = await res.json(); preencheTabela(data); } /* ---------- UI ---------- */ function preencheTabela(lista){ const tbody = document.getElementById(&#39;tabela&#39;); tbody.innerHTML = &#39;&#39;; lista.forEach(p=&gt;{ const tr = document.createElement(&#39;tr&#39;); tr.innerHTML = ` &lt;td&gt;${p.cpf}&lt;/td&gt; &lt;td&gt;${p.foto ? `&lt;img class=&quot;thumb&quot; src=&quot;${p.foto}&quot; alt=&quot;foto&quot;&gt;` : &#39;&#39;}&lt;/td&gt; &lt;td&gt;${p.nome}&lt;/td&gt; &lt;td&gt;${p.endereco}&lt;/td&gt; &lt;td&gt;${p.data_nascimento}&lt;/td&gt;`; tr.onclick = () =&gt; { document.getElementById(&#39;cpf&#39;).value = p.cpf; document.getElementById(&#39;nome&#39;).value = p.nome; document.getElementById(&#39;endereco&#39;).value = p.endereco; document.getElementById(&#39;data_nascimento&#39;).value = p.data_nascimento; }; tbody.appendChild(tr); }); } listar(); &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; 13.11 Exemplo 04 - SERVIDOR DE APLICAÇÃO JAVA [ Vou refazer estes exemplo ] 13.12 Exemplo 05 - SERVIDOR DE APLICAÇÃO C++ Neste exemplo, temos uma aplicação cliente feita html e javascript A interface do Cliente é feita em HTML5 A conexão com o servidor é feita pelo javascript incorporado no HTML: CRUD no cliente é feito peloa javascript utilizando metodologia Restful sobre protocolo HTTP 2.0 O servidor Restful é feito em linguagem C++ A linguagem C++ precisa ser compilada. PORTANTO O CÓDIGO DO SERVIDOR PRECISARÁ SER COMPILADO. EM C++ VAMOS USAR BIBLIOTECAS EXTERNAS libpqxx e crow OBS: NÃO TEMOS CONTROLE DE SESSÃO DE CLIENTE IMPLEMENTADO. estrutura de diretórios: pessoas-rest-cpp/ ├─ CMakeLists.txt ├─ src/ │ └─ main.cpp └─ include/ └─ crow_all.h ← header único da biblioteca Crow 13.12.1 Criando o arquivo C++ do servidor #include &quot;crow_all.h&quot; #include &lt;pqxx/pqxx&gt; #include &lt;iostream&gt; const std::string CONN_STR = &quot;postgresql://postgres:MinhaSuperSenha@db.pbbtfwmydxmxdibmtbqq.supabase.co:5432/postgres&quot;; int main() { crow::SimpleApp app; // GET /pessoas CROW_ROUTE(app, &quot;/pessoas&quot;).methods(&quot;GET&quot;_method) ([](const crow::request&amp; req){ pqxx::connection c(CONN_STR); pqxx::work w(c); std::string q = req.url_params.get(&quot;q&quot;) ? req.url_params.get(&quot;q&quot;) : &quot;&quot;; pqxx::result r; if(!q.empty()) { r = w.exec_params( &quot;SELECT cpf,nome,endereco,data_nascimento,foto &quot; &quot;FROM pessoas WHERE lower(nome) LIKE lower(&#39;%&#39;||$1||&#39;%&#39;) OR cpf LIKE &#39;%&#39;||$1||&#39;%&#39;&quot;, q); } else { r = w.exec(&quot;SELECT cpf,nome,endereco,data_nascimento,foto FROM pessoas&quot;); } crow::json::wvalue out; size_t i=0; for(auto row : r) { out[i][&quot;cpf&quot;] = row[&quot;cpf&quot;].c_str(); out[i][&quot;nome&quot;] = row[&quot;nome&quot;].c_str(); out[i][&quot;endereco&quot;] = row[&quot;endereco&quot;].c_str(); out[i][&quot;dataNascimento&quot;] = row[&quot;data_nascimento&quot;].c_str(); out[i][&quot;foto&quot;] = row[&quot;foto&quot;].is_null() ? &quot;&quot; : row[&quot;foto&quot;].c_str(); ++i; } return crow::response(out); }); // POST /pessoas CROW_ROUTE(app, &quot;/pessoas&quot;).methods(&quot;POST&quot;_method) ([](const crow::request&amp; req){ auto body = crow::json::load(req.body); if(!body || !body.has(&quot;cpf&quot;)) return crow::response(400, &quot;CPF é obrigatório&quot;); try { pqxx::connection c(CONN_STR); pqxx::work w(c); w.exec_params( &quot;INSERT INTO pessoas (cpf,nome,endereco,data_nascimento,foto) &quot; &quot;VALUES ($1,$2,$3,$4,$5)&quot;, body[&quot;cpf&quot;].s(), body[&quot;nome&quot;].s_or(&quot;&quot;), body[&quot;endereco&quot;].s_or(&quot;&quot;), body[&quot;dataNascimento&quot;].s_or(&quot;&quot;), body[&quot;foto&quot;].s_or(&quot;&quot;) ); w.commit(); return crow::response(201, &quot;Inserido&quot;); } catch(const std::exception &amp;e) { return crow::response(400, e.what()); } }); // PUT /pessoas/&lt;cpf&gt; CROW_ROUTE(app, &quot;/pessoas/&lt;string&gt;&quot;).methods(&quot;PUT&quot;_method) ([](const crow::request&amp; req, std::string cpf){ auto body = crow::json::load(req.body); if(!body) return crow::response(400, &quot;JSON inválido&quot;); try { pqxx::connection c(CONN_STR); pqxx::work w(c); w.exec_params( &quot;UPDATE pessoas SET nome=$1,endereco=$2,data_nascimento=$3,foto=$4 WHERE cpf=$5&quot;, body[&quot;nome&quot;].s_or(&quot;&quot;), body[&quot;endereco&quot;].s_or(&quot;&quot;), body[&quot;dataNascimento&quot;].s_or(&quot;&quot;), body[&quot;foto&quot;].s_or(&quot;&quot;), cpf ); if(w.affected_rows() == 0) return crow::response(404, &quot;CPF não encontrado&quot;); w.commit(); return crow::response(200, &quot;Alterado&quot;); } catch(const std::exception &amp;e) { return crow::response(400, e.what()); } }); // DELETE /pessoas/&lt;cpf&gt; CROW_ROUTE(app, &quot;/pessoas/&lt;string&gt;&quot;).methods(&quot;DELETE&quot;_method) ([](const crow::request&amp;, std::string cpf){ try { pqxx::connection c(CONN_STR); pqxx::work w(c); w.exec_params(&quot;DELETE FROM pessoas WHERE cpf=$1&quot;, cpf); if(w.affected_rows() == 0) return crow::response(404, &quot;CPF não encontrado&quot;); w.commit(); return crow::response(200, &quot;Removido&quot;); } catch(const std::exception &amp;e) { return crow::response(400, e.what()); } }); std::cout &lt;&lt; &quot;Servidor rodando em http://0.0.0.0:8080\\n&quot;; app.port(8080).multithreaded().run(); } 13.12.2 Ferramenta de compilação CMAKE Preparando o arquivo de instruções da ferramenta de projeto CMAKE cmake_minimum_required(VERSION 3.20) project(PessoasRestCpp LANGUAGES CXX) set(CMAKE_CXX_STANDARD 17) set(CMAKE_CXX_STANDARD_REQUIRED ON) # Caminho para os headers (Crow e outros) include_directories(${CMAKE_SOURCE_DIR}/include) # Localização de libpqxx (ajuste se estiver em pasta diferente) find_package(PostgreSQL REQUIRED) find_path(PQXX_INCLUDE_DIR pqxx/pqxx) find_library(PQXX_LIBRARY pqxx) if(NOT PQXX_INCLUDE_DIR OR NOT PQXX_LIBRARY) message(FATAL_ERROR &quot;libpqxx não encontrada. Instale com vcpkg ou aponte manualmente.&quot;) endif() add_executable(pessoas-rest src/main.cpp ) target_include_directories(pessoas-rest PRIVATE ${PQXX_INCLUDE_DIR}) target_link_libraries(pessoas-rest ${PQXX_LIBRARY} PostgreSQL::PostgreSQL ) Adicionando biblioteca extra no compilador C++ do windows vcpkg install libpqxx Gere o projeto do servidor para “Visual Studio 17 2022” E ARQUITETURA x64 cmake -B build -G &quot;Visual Studio 17 2022&quot; -A x64 -DCMAKE_TOOLCHAIN_FILE=C:/path/to/vcpkg/scripts/buildsystems/vcpkg.cmake Compile e linque todo o projeto cmake --build build --config Release execute o servidor build/Release/pessoas-rest.exe servidor estará rodando na porta 8080 e EXPÕE A API de operações na URI http://localhost:8080/pessoas sem senha http://localhost:8080/pessoas 13.12.3 Cliente HTML (conexão Restful) crie o arquivo index.html e abra-o no navegador &lt;!DOCTYPE html&gt; &lt;html lang=&quot;pt-BR&quot;&gt; &lt;head&gt; &lt;meta charset=&quot;UTF-8&quot;&gt; &lt;title&gt;Cadastro de Pessoas&lt;/title&gt; &lt;style&gt; body { font-family: Arial, sans-serif; margin: 20px; } h1 { color: #333; } form { margin-bottom: 20px; } label { display: block; margin-top: 10px; } input[type=text], input[type=date], input[type=file] { width: 300px; padding: 5px; } table { border-collapse: collapse; width: 100%; margin-top: 20px; } th, td { border: 1px solid #aaa; padding: 6px; text-align: left; } img { max-width: 80px; max-height: 80px; } .btn { padding: 4px 8px; cursor: pointer; margin: 0 2px; } &lt;/style&gt; &lt;/head&gt; &lt;body&gt; &lt;h1&gt;Cadastro de Pessoas&lt;/h1&gt; &lt;form id=&quot;pessoaForm&quot;&gt; &lt;label&gt;CPF*: &lt;input type=&quot;text&quot; id=&quot;cpf&quot; required&gt; &lt;/label&gt; &lt;label&gt;Nome: &lt;input type=&quot;text&quot; id=&quot;nome&quot;&gt; &lt;/label&gt; &lt;label&gt;Endereço: &lt;input type=&quot;text&quot; id=&quot;endereco&quot;&gt; &lt;/label&gt; &lt;label&gt;Data de Nascimento: &lt;input type=&quot;date&quot; id=&quot;dataNascimento&quot;&gt; &lt;/label&gt; &lt;label&gt;Foto: &lt;input type=&quot;file&quot; id=&quot;foto&quot;&gt; &lt;/label&gt; &lt;button type=&quot;submit&quot; class=&quot;btn&quot;&gt;Salvar&lt;/button&gt; &lt;/form&gt; &lt;div&gt; &lt;input type=&quot;text&quot; id=&quot;search&quot; placeholder=&quot;Buscar por CPF ou Nome&quot;&gt; &lt;button id=&quot;btnBuscar&quot; class=&quot;btn&quot;&gt;Buscar&lt;/button&gt; &lt;button id=&quot;btnListar&quot; class=&quot;btn&quot;&gt;Listar Todos&lt;/button&gt; &lt;/div&gt; &lt;table id=&quot;tabelaPessoas&quot;&gt; &lt;thead&gt; &lt;tr&gt; &lt;th&gt;CPF&lt;/th&gt;&lt;th&gt;Nome&lt;/th&gt;&lt;th&gt;Endereço&lt;/th&gt;&lt;th&gt;Nascimento&lt;/th&gt;&lt;th&gt;Foto&lt;/th&gt;&lt;th&gt;Ações&lt;/th&gt; &lt;/tr&gt; &lt;/thead&gt; &lt;tbody&gt;&lt;/tbody&gt; &lt;/table&gt; &lt;script&gt; const API_URL = &quot;http://localhost:8080/pessoas&quot;; async function carregarPessoas(query=&quot;&quot;) { const url = query ? `${API_URL}?q=${encodeURIComponent(query)}` : API_URL; const resp = await fetch(url); const data = await resp.json(); const tbody = document.querySelector(&quot;#tabelaPessoas tbody&quot;); tbody.innerHTML = &quot;&quot;; data.forEach(p =&gt; { const tr = document.createElement(&quot;tr&quot;); tr.innerHTML = ` &lt;td&gt;${p.cpf}&lt;/td&gt; &lt;td&gt;${p.nome || &quot;&quot;}&lt;/td&gt; &lt;td&gt;${p.endereco || &quot;&quot;}&lt;/td&gt; &lt;td&gt;${p.dataNascimento || &quot;&quot;}&lt;/td&gt; &lt;td&gt;${p.foto ? `&lt;img src=&quot;${p.foto}&quot; alt=&quot;foto&quot;&gt;` : &quot;&quot;}&lt;/td&gt; &lt;td&gt; &lt;button class=&quot;btn&quot; onclick=&quot;editar(&#39;${p.cpf}&#39;)&quot;&gt;Editar&lt;/button&gt; &lt;button class=&quot;btn&quot; onclick=&quot;excluir(&#39;${p.cpf}&#39;)&quot;&gt;Excluir&lt;/button&gt; &lt;/td&gt; `; tbody.appendChild(tr); }); } async function toBase64(file) { return new Promise((resolve, reject) =&gt; { const reader = new FileReader(); reader.onload = () =&gt; resolve(reader.result); reader.onerror = reject; reader.readAsDataURL(file); }); } document.getElementById(&quot;pessoaForm&quot;).addEventListener(&quot;submit&quot;, async e =&gt; { e.preventDefault(); const cpf = document.getElementById(&quot;cpf&quot;).value.trim(); if (!cpf) { alert(&quot;CPF é obrigatório.&quot;); return; } const nome = document.getElementById(&quot;nome&quot;).value.trim(); const endereco = document.getElementById(&quot;endereco&quot;).value.trim(); const dataNascimento = document.getElementById(&quot;dataNascimento&quot;).value; const fotoFile = document.getElementById(&quot;foto&quot;).files[0]; let fotoBase64 = &quot;&quot;; if (fotoFile) { fotoBase64 = await toBase64(fotoFile); } // Se já existe, usa PUT, senão POST const method = document.getElementById(&quot;cpf&quot;).dataset.editing ? &quot;PUT&quot; : &quot;POST&quot;; const url = method === &quot;PUT&quot; ? `${API_URL}/${cpf}` : API_URL; const resp = await fetch(url, { method, headers: { &quot;Content-Type&quot;: &quot;application/json&quot; }, body: JSON.stringify({ cpf, nome, endereco, dataNascimento, foto: fotoBase64 }) }); if (resp.ok) { alert(&quot;Salvo com sucesso!&quot;); document.getElementById(&quot;pessoaForm&quot;).reset(); document.getElementById(&quot;cpf&quot;).dataset.editing = &quot;&quot;; carregarPessoas(); } else { alert(&quot;Erro: &quot; + await resp.text()); } }); function editar(cpf) { const row = [...document.querySelectorAll(&quot;#tabelaPessoas tbody tr&quot;)] .find(tr =&gt; tr.children[0].textContent === cpf); if (!row) return; document.getElementById(&quot;cpf&quot;).value = cpf; document.getElementById(&quot;nome&quot;).value = row.children[1].textContent; document.getElementById(&quot;endereco&quot;).value = row.children[2].textContent; document.getElementById(&quot;dataNascimento&quot;).value = row.children[3].textContent; document.getElementById(&quot;cpf&quot;).dataset.editing = &quot;true&quot;; window.scrollTo({ top: 0, behavior: &#39;smooth&#39; }); } async function excluir(cpf) { if (!confirm(`Excluir CPF ${cpf}?`)) return; const resp = await fetch(`${API_URL}/${cpf}`, { method: &quot;DELETE&quot; }); if (resp.ok) { carregarPessoas(); } else { alert(&quot;Erro: &quot; + await resp.text()); } } document.getElementById(&quot;btnBuscar&quot;).addEventListener(&quot;click&quot;, () =&gt; { const q = document.getElementById(&quot;search&quot;).value.trim(); carregarPessoas(q); }); document.getElementById(&quot;btnListar&quot;).addEventListener(&quot;click&quot;, () =&gt; { document.getElementById(&quot;search&quot;).value = &quot;&quot;; carregarPessoas(); }); // Carregar lista inicial carregarPessoas(); &lt;/script&gt; &lt;/body&gt; &lt;/html&gt; "],["banco-de-dados-estatístico---cliente-rstudio.html", "Slide 14 Banco de Dados Estatístico - Cliente Rstudio", " Slide 14 Banco de Dados Estatístico - Cliente Rstudio 06/10/2025 Professor Miguél Suares "],["banco-de-dados-estatístico---cliente-rstudio-1.html", "Slide 15 Banco de Dados Estatístico - Cliente Rstudio", " Slide 15 Banco de Dados Estatístico - Cliente Rstudio 06/10/2025 Professor Miguél Suares "],["banco-de-dados---análise-de-dados-parte-01.html", "Slide 16 Banco de Dados - Análise de Dados Parte 01", " Slide 16 Banco de Dados - Análise de Dados Parte 01 13/10/2025 Professor Miguél Suares "],["banco-de-dados---análise-de-dados-parte-01-1.html", "Slide 17 Banco de Dados - Análise de Dados Parte 01", " Slide 17 Banco de Dados - Análise de Dados Parte 01 13/10/2025 Professor Miguél Suares "],["banco-de-dados---análise-de-dados-parte-02.html", "Slide 18 Banco de Dados - Análise de Dados Parte 02", " Slide 18 Banco de Dados - Análise de Dados Parte 02 20/10/2025 Professor Miguél Suares ================================================================================ ================================================================================ Figure 18.1: Diagrama Produtos x categorias "],["banco-de-dados---análise-de-dados-parte-02-1.html", "Slide 19 Banco de Dados - Análise de Dados Parte 02", " Slide 19 Banco de Dados - Análise de Dados Parte 02 20/10/2025 Professor Miguél Suares "],["banco-de-dados---análise-de-dados-parte-03.html", "Slide 20 Banco de Dados - Análise de Dados Parte 03", " Slide 20 Banco de Dados - Análise de Dados Parte 03 27/10/2025 Professor Miguél Suares "],["banco-de-dados---análise-de-dados-parte-03-1.html", "Slide 21 Banco de Dados - Análise de Dados Parte 03", " Slide 21 Banco de Dados - Análise de Dados Parte 03 27/10/2025 Professor Miguél Suares "],["404.html", "Page not found", " Page not found The page you requested cannot be found (perhaps it was moved or renamed). You may want to try searching to find the page's new location, or use the table of contents to find the page you are looking for. "]]
