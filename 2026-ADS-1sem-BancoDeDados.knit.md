---
title: "GTI - Banco de dados - 2025 - Anota√ß√µes de aula"
author: "Professor Migu√©l Suares"
date: "2026-02-07"
site: bookdown::bookdown_site
documentclass: book
bibliography: [book.bib]
url: your book url like https://bookdown.org/yihui/bookdown
cover-image: images/cover.jpg
description: |
  Este livreto re√∫ne anota√ß√µes, reflex√µes e conte√∫dos desenvolvidos ao longo das aulas da  disciplina Banco de Dados, ministrada pelo Professor Migu√©l Suares. Elaborado com base em experi√™ncias pr√°ticas, refer√™ncias acad√™micas e diretrizes atualizadas sobre o tema, o material busca fornecer uma vis√£o cr√≠tica e aplicada sobre an√°lise de dados nas organiza√ß√µes contempor√¢neas.
link-citations: yes
github-repo: miguel7penteado/2025-2sem-GTI-BancoDeDados
---



# Sobre estas anota√ß√µes {.unnumbered}

‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî

Estas anota√ß√µes s√£o apenas lembretes das aulas expostas em sala, durante a disciplina de Banco de dados.

## ACESSO AO GITBOOK CELULAR

‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî

#### <https://miguel7penteado.github.io/2025-2sem-GTI-BancoDeDados>

![](images/qr-code-disciplina.jpg)

## Leitores de formato de arquivo EPUB para SmartPhone

‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî

### ANDROID

#### **Moon+ Reader**

![](images/qrcode/leitor_epub/MoonReaderPlus.jpg){width="340"}

## Livros Texto da Disciplina

‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî

### ["Introdu√ß√£o a sistemas de bancos de dados" do autor "**Christopher John Date**"](https://www.kufunda.net/publicdocs/Introdu%C3%A7%C3%A3o%20a%20Sistemas%20de%20Bancos%20de%20Dados%20(C.%20J.%20Date)%20(z-lib.org).pdf)

![](images/livros/livro1.jpg)

+-----------------------+------------------------------------------------------------------------------------+
| **Autor(es)**         | ### [**Christopher John Date**](https://en.wikipedia.org/wiki/Christopher_J._Date) |
+-----------------------+------------------------------------------------------------------------------------+
| **Editora**           | LTC                                                                                |
+-----------------------+------------------------------------------------------------------------------------+
| **Idioma**            | Portugu√™s                                                                          |
+-----------------------+------------------------------------------------------------------------------------+
| **ISBN**              | 978-85-352-8445-4                                                                  |
+-----------------------+------------------------------------------------------------------------------------+
| **Formato**           | Capa dura                                                                          |
+-----------------------+------------------------------------------------------------------------------------+
| **P√°ginas**           | 1623                                                                               |
+-----------------------+------------------------------------------------------------------------------------+
| **C√≥digo Biblioteca** |                                                                                    |
+-----------------------+------------------------------------------------------------------------------------+

### ["**Projeto de bancos de dados**" do autor "Carlos Alberto HEUSER"](https://drive.google.com/file/d/0B452rmbcudPSVFdCZ09vVkJUUUd2dlpMNS1vaEczUQ/view?pli=1&resourcekey=0-3MTcHlAYjPX6YSvBQGweUQ)

![](images/livros/livro2.jpg)

+-----------------------+-------------------------------------------------------------------------------------------+
| **Autor(es)**         | ### [Carlos Alberto HEUSER](https://www.inf.ufrgs.br/site/docente/carlos-alberto-heuser/) |
+-----------------------+-------------------------------------------------------------------------------------------+
| **Editora**           | Bookman                                                                                   |
+-----------------------+-------------------------------------------------------------------------------------------+
| **Idioma**            | Portugu√™s                                                                                 |
+-----------------------+-------------------------------------------------------------------------------------------+
| **ISBN-10**           | 8577803821                                                                                |
+-----------------------+-------------------------------------------------------------------------------------------+
| **Formato**           | Impresso                                                                                  |
+-----------------------+-------------------------------------------------------------------------------------------+
| **P√°ginas**           | 282                                                                                       |
+-----------------------+-------------------------------------------------------------------------------------------+
| **C√≥digo Biblioteca** |                                                                                           |
+-----------------------+-------------------------------------------------------------------------------------------+

## Calend√°rio das aulas

‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî

##### AGOSTO DE 2025

| Data       | Dia da Semana | Aulas          | Conte√∫do |
|------------|---------------|----------------|----------|
| 04/08/2025 | Segunda-Feira | Aula Inaugural |          |
| 11/08/2025 | Segunda-Feira | Aula 2         |          |
| 18/08/2025 | Segunda-Feira | Aula 3         |          |
| 25/08/2025 | Segunda-Feira | Aula 4         |          |

##### SETEMBRO DE 2025

| Data       | Dia da Semana | Aulas  | Conte√∫do |
|------------|---------------|--------|----------|
| 01/09/2025 | Segunda-Feira | Aula 5 |          |
| 08/09/2025 | Segunda-Feira | Aula 6 |          |
| 15/09/2025 | Segunda-Feira | NP1    | PROVA    |
| 22/09/2025 | Segunda-Feira | Aula 7 |          |
| 29/09/2025 | Segunda-Feira | Aula 8 |          |

##### OUTUBRO DE 2025

| Data       | Dia da Semana | Aulas   | Conte√∫do |
|------------|---------------|---------|----------|
| 06/10/2025 | Segunda-Feira | Aula 9  |          |
| 13/10/2025 | Segunda-Feira | Aula 10 |          |
| 20/10/2025 | Segunda-Feira | Aula 11 |          |
| 27/10/2025 | Segunda-Feira | Aula 12 |          |

##### NOVEMBRO DE 2025

| Data       | Dia da Semana | Aulas | Conte√∫do |
|------------|---------------|-------|----------|
| 03/11/2025 | Segunda-Feira | NP2   | PROVA    |
| 10/11/2025 | Segunda-Feira |       | N/A      |
| 17/11/2025 | Segunda-Feira | SUB   | PROVA    |
| 24/11/2025 | Segunda-Feira |       | N/A      |

##### DEZEMBRO DE 2025

| Data       | Dia da Semana | Aulas | Conte√∫do |
|------------|---------------|-------|----------|
| 01/12/2025 | Segunda-Feira |       | N/A      |
| 08/12/2025 | Segunda-Feira | EXAME | PROVA    |
| 15/12/2025 | Segunda-Feira |       | N/A      |

## Alunos 2025 - 2o Semestre

‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî‚Äî

### Campus Ch√°cara Santo Ant√¥nio

#### Turma TI2P40

| Matr√≠cula |         Nome do aluno          |
|:---------:|:------------------------------:|
|  F362BF0  |     BRUNO ANTONIO MARQUES      |
|  R536FA6  |  CAIO CESAR BALBINO DA SILVA   |
|  H6094I1  | DOUGLAS VINICIUS M DOS SANTOS  |
|  R6607G5  |    GABRIEL ROQUE DOS SANTOS    |
|  R8133G7  | √çTALO KEVIN RODRIGUES DA SILVA |
|  R837AA0  |     LUCAS SOUZA RODRIGUES      |
|  H714419  |   MARCOS PAULO CORDEIRO GOES   |

# Postgres (Zip Version) Windows Starting Guide

Download postgresql from <https://www.enterprisedb.com/download-postgresql-binaries>;

Unzip it;

Open a cmd;

Enter into the ‚Äòbin‚Äô directory;

Init the database:

``` powershell
initdb.exe -D ../data ‚Äìusername=postgres ‚Äìauth=trust
```

Start the database:

``` powershell
pg_ctl.exe start -D ../data
```

Open another cmd;

Enter into the ‚Äòbin‚Äô directory;

Log into the database:

``` powershell
psql.exe ‚Äìusername=postgres
```

Create a password for your user:

``` sql
ALTER USER postgres WITH PASSWORD ‚ÄòVeryVerySecret‚Äô;
```

Install adminpack extension:

``` sql
CREATE EXTENSION adminpack;
```

Reference: <https://feilerdev.wordpress.com/2017/12/05/installing-postgresql-on-windows-using-zip-archive-without-the-installer/>

<!--chapter:end:index.Rmd-->

---
output: 
  html_document: 
    highlight: tango
    theme: cerulean
    df_print: kable
---
# Aula Inaugural

#### 04/08/2025 {.unnumbered}

#### Professor Migu√©l Suares {.unnumbered}

## Disciplina: **Banco de Dados**

-   Curso: Gest√£o em Tecnologia da Informa√ß√£o (GTI)\
-   Per√≠odo: **Noturno**\
-   Turma: **2¬∫ semestre de 2025**
-   Campus: **Ch√°cara Santo Ant√¥nio**

> "Dados s√£o o novo petr√≥leo." ‚Äì Clive Humby!

![](images/2025-08-04/Boas_Vindas.jpg){width="300"}

------------------------------------------------------------------------

## üë®‚Äçüè´ Sobre o Professor

-   Nome: Prof. Migu√©l Suares

-   Forma√ß√£o: Mestre em Engenharia da Computa√ß√£o e Energia da Agricultura

-   Experi√™ncia: +10 anos com bancos de dados relacionais e an√°lise de dados

-   Contato: [miguel.penteado\@docente.unip.br](mailto:miguel.penteado@docente.unip.br)

------------------------------------------------------------------------

## üéØ Objetivos da Disciplina

-   Compreender os fundamentos de bancos de dados

-   Modelar dados com diagramas ER

-   Implementar e consultar bases de dados com SQL

-   Utilizar ferramentas como MySQL, PostgreSQL, QGIS e R

-   Desenvolver racioc√≠nio l√≥gico para resolver problemas com dados

    ![](images/2025-08-04/logos.jpg){width="334"}

------------------------------------------------------------------------

## üìÖ Calend√°rio da Disciplina

| Data       | Aula    | Tema                          |
|------------|---------|-------------------------------|
| 04/08/2025 | Aula 1  | Aula Inaugural                |
| 11/08/2025 | Aula 2  | Fundamentos                   |
| 18/08/2025 | Aula 3  | Modelagem e Diagramas         |
| 25/08/2025 | Aula 4  | Administra√ß√£o e Gerenciamento |
| 01/09/2025 | Aula 5  | Aplica√ß√£o CRUD                |
| 08/09/2025 | Aula 6  | MySQL                         |
| 15/09/2025 | **NP1** | **Prova**                     |
| 22/09/2025 | Aula 7  | Postgres                      |
| 29/09/2025 | Aula 8  | QGIS                          |
| 06/10/2025 | Aula 9  | RStudio                       |
| 13/10/2025 | Aula 10 | An√°lise I                     |
| 20/10/2025 | Aula 11 | An√°lise II                    |
| 27/10/2025 | Aula 12 | An√°lise III                   |
| 03/11/2025 | **NP2** | **Prova**                     |

------------------------------------------------------------------------

## üìö Ementa Resumida

-   Introdu√ß√£o a bancos de dados relacionais (RDBMS)

-   Modelagem de dados (M.E.R.) e diagramas Entidade Relacionamento (D.E.R.)

-   Linguagem SQL: DDL, DML, DCL

-   Ferramentas: MySQL, PostgreSQL

-   Visualiza√ß√£o geoespacial (QGIS)

-   An√°lise e explora√ß√£o de dados (R e RStudio)

    ![](images/2025-08-04/modelagem.jpg){width="331"}

------------------------------------------------------------------------

## üìù Avalia√ß√£o

-   **Provas (NP1 + NP2)**
-   **Prova Substitutiva**
-   **Exame**

------------------------------------------------------------------------

## üõ†Ô∏è Ferramentas da Disciplina

-   **Servidores de Banco de Dados**: MySQL, PostgreSQL
-   **Servidores de Banco de Dados**: pgAdmin, MySQL Workbench, DBeaver\
-   **Geoprocessamento**: QGIS\
-   **An√°lise de Dados**: R + RStudio\
-   **Versionamento e Organiza√ß√£o**: GitHub, Teams

------------------------------------------------------------------------

## üìå Expectativas e Regras

-   Pontualidade e entrega de atividades no prazo
-   Trabalhos devem ser originais (sem pl√°gio)
-   Participa√ß√£o ativa nas discuss√µes e pr√°ticas
-   Uso respons√°vel das ferramentas
-   Respeito e colabora√ß√£o entre colegas

------------------------------------------------------------------------

## üí° Dicas para Mandar Bem

-   Fa√ßa os exerc√≠cios logo ap√≥s a aula
-   Participe das pr√°ticas com base real
-   Mantenha o reposit√≥rio do projeto atualizado
-   Refa√ßa consultas SQL at√© entender
-   Teste e documente suas solu√ß√µes

------------------------------------------------------------------------

## üôå Encerramento

## Estamos prontos?

üìß D√∫vidas? Estou √† disposi√ß√£o\
üìä Vamos construir conhecimento juntos!

> Pr√≥xima aula: **Fundamentos de Banco de Dados** ‚Äì 11/08/2025

<!--chapter:end:01-2026-02-10_Inaugural.Rmd-->

---
output: 
  html_document: 
    highlight: tango
    theme: cerulean
---

# Fundamentos de Sistemas de Bancos de Dados

#### 11/08/2025 {.unnumbered}

#### Professor Migu√©l Suares {.unnumbered}

------------------------------------------------------------------------

## O in√≠cio : Edgar Frank "Ted" Codd (19/08/1923 ‚Äì 18/04/2003)

-   Nome: Professor Codd - Matem√°tico da IBM

    ![](images/2025-08-11/01-codd.jpg){width="134"}

-   1965: Cria modelo relacional nos tempos da IBM/NASA/Projeto Apolo

![](images/2025-08-11/modelagem.jpg){width="334"}

-   1969: Codd n√£o √© levado a s√©rio

-   1970: Publica a teoria relacional nas universidades (Berkley, Calif√≥rnia)

------------------------------------------------------------------------

## Anos 1970: IBM entra no Modelo relacional: SystemR e SEQUEL/SQL

-   1970: IBM entende a import√¢ncia do modelo de Codd

-   1971: Como Codd publica o conhecimento, o projeto vai para *Raymond Francis Boyce*

    ![](images/2025-08-11/05-Boyce.png){width="138"}

-   1974: Donald D. Chamberlin e *Raymond Francis Boyce* criam a SQL na IBM

-   1973: *Raymond Francis Boyce* criam o SystemR (Banco Relacional da IBM)

-   Codd continua publicando artigos sobre modelo relacional

-   1977: Ex-alunos prof Michael StoneBraker fundam a (Relational Inc) ORACLE "copiando" o SystemR da IBM.

    ![](images/2025-08-11/06-oracle.png){width="132"}

------------------------------------------------------------------------

## Anos 1970: Prof Codd inspira Prof StoneBraker: BANCO INGRES

-   1974: Michael StoneBraker come√ßa projeto INGRES na Universidade de Berkley

    ![](images/2025-08-11/07-Michael_StoneBraker.png){width="202"}

-   1976: Nasce o INGRES, pai de muitos Bancos de Dados Modernos.

    ![](images/2025-08-11/03-ingress-1.0.jpg){width="173"}

-   1976: INGRES nasce com linguagem pr√≥rpia, o QUEL, ao inv√©s do SQL

-   INGRESS cria a empresa Relational INC

-   Ex-funcion√°rios (alunos) da Relational Inc fundam a SYBASE.

------------------------------------------------------------------------

## Anos 1980: INGRES (SEMI-LIVRE) vs IBM System R ( pago ) vs ORACLE

-   1982 IBM transforma SystemR em IBM DB2.

-   1984 Ex-funcion√°rios (alunos) da Relational Inc fundam a SYBASE.

    ![](images/2025-08-11/08-sybase.png){width="257"}

-   1985: SoneBraker cria o PostGRES (Banco de Dados Objeto-Relacional)

-   1986: INGRES perde para a ORACLE no mercado de SGBDs

-   1989: SQL vira padr√£o ANSI e padr√£o ISO

------------------------------------------------------------------------

## Anos 1990: MySQL e POSTGRES que vira POSTGRESQL

-   1993: O SYBASE SQL Server √© portado para o Windows NT 4.0

-   1994: Fim do relacionamento entre Microsoft e SYBASE: nasce o MS-SQL Server

-   1994: **Andrew Yu** e **Jolly Chen** Adicionam SQL ao POSTGRES: nasce o **PostgreSQL**

    ![](images/2025-08-11/10-postgresql.png){width="141"}

-   1994: David Axmark, Allan Larsson e Michael "Monty" Widenius criam o MySQL.

    ![](images/2025-08-11/09-mysql.png){width="131"}

-   1997: Nasce o postgreSQL 6.0

-   1998: Carlo Strozzi - Modelo N√£o-SQL (conceito de SGBDs que n√£o usam interface SQL)

------------------------------------------------------------------------

## Anos 2000: Sybase eo No-SQL

-   2003 - Doug Cutting e Mike Cafarella, projeto *Hadoop* baeado no documento *Google File System*

-   2007 - 10gen (MongoDB Inc) inicia o projeto MongoDB (N√£o SQL)

    ![](images/2025-08-11/11-mongodb.png){width="260"}

-   2007 - Avinash Lakshman do facebook disponibiliza o Apache Cassandra (N√£o SQL)

    ![](images/2025-08-11/12-cassandra.png){width="126"}

-   2008 - BIG DATA Lan√ßado o Apache HADOOP e o Apache Hive (emulador SQL)

    ![](images/2025-08-11/13-hadoop.png){width="441"}BIG

    ![](images/2025-08-11/14-Apache_Hive.png){width="139"}

------------------------------------------------------------------------



<!--chapter:end:02-2026-02-24_Fubdamentos_SGBD-aula.Rmd-->

## Exerc√≠cios



<!--chapter:end:02-2026-02-24_Fubdamentos_SGBD-exercicio.Rmd-->

---
output: 
  html_document: 
    highlight: tango
    theme: cerulean
    fig_caption: true
---

# Modelagem de Bancos de Dados

#### 18/08/2025 {.unnumbered}

#### Professor Migu√©l Suares {.unnumbered}

## Introdu√ß√£o: Visitando a teoria de Bancos de Dados

![](images/5-bi/01-banco-de-dados.jpg){width="452"}

> **Banco de Dados** Um banco de dados √© uma cole√ß√£o compartilhada de dados logicamente relacionados, projetada para atender √†s necessidades informacionais de uma organiza√ß√£o. - *DATE, C. J. An Introduction to Database Systems. 8. ed. Boston: Addison-Wesley, 2003*.

Ou seja, alguns pontos-chave da defini√ß√£o de Date:

-   "Cole√ß√£o de dados ..." ‚Üí n√£o √© um conjunto de arquivos soltos, mas dados organizados.

-   "Compartilhada ..." ‚Üí n√£o pertence a apenas um usu√°rio ou aplica√ß√£o; √© usada por v√°rios.

-   "Dados logicamente relacionados ..." ‚Üí os dados t√™m um relacionamento sem√¢ntico, n√£o s√£o apenas agrupamentos arbitr√°rios.

-   "Projetada para atender necessidades ..." ‚Üí o banco existe para suportar os processos de uma organiza√ß√£o (consultas, relat√≥rios, controle, tomada de decis√£o).

![](images/5-bi/07-tabela_relacional.jpg)

> **Banco de Dados Relacional** Um banco de dados relacional √© um banco de dados baseado em um modelo de dados relacional, no qual os dados s√£o representados como um conjunto de rela√ß√µes (tabelas), e cada rela√ß√£o consiste em tuplas (linhas) e atributos (colunas). - *SILBERSCHATZ, Abraham; KORTH, Henry F.; SUDARSHAN, S. Database System Concepts. 6. ed. New York: McGraw-Hill, 2010.*

Agora, alguns pontos-chave da defini√ß√£o de *Abraham Silberschatz* :

-   Base no modelo relacional de Codd (1970).

-   Dados representados em tabelas (rela√ß√µes).

-   Cada tabela √© composta de tuplas (linhas) e atributos (colunas).

-   Integridade garantida por restri√ß√µes (chaves, integridade referencial, dom√≠nio de atributos).

-   Manipula√ß√£o feita por linguagens relacionais (√°lgebra relacional, c√°lculo relacional, SQL).

O Banco de Dados Relacional organiza as informa√ß√µes em **tabelas bidiomensionais** constitu√≠das de **linhas e colunas** chamadas e essas tabelas recebem o nome de **rela√ß√µes**. Cada **rela√ß√£o** possui um **campo-chave** que confere identifica√ß√£o exclusiva a cada registro da tabela.

## Modelo Matem√°tico de um Banco de Dados

Considere um Banco de Dados para representar, com consist√™ncia Matem√°tica os funcion√°rios e Departamentos de uma Empresa.

### Podemos representa-lo matem√°ticamente utilizando a teoria dos conjuntos

<div class="figure">
<img src="2026-ADS-1sem-BancoDeDados_files/figure-html/tikz-diagrama0-1.png" alt="Diagrama de Montadoras, Ve√≠culos e Propriet√°rios" width="672" />
<p class="caption">(\#fig:tikz-diagrama0)Diagrama de Montadoras, Ve√≠culos e Propriet√°rios</p>
</div>

#### Edgard F Cood explica em sua obra "A Relational Model of Data for Large Shared Data Banks" como definir uma Banco de Dados compartilhado *matem√°ticamente*

> Um **banco de dados relacional** √© um banco de dados no qual todos os dados s√£o representados por meio de **rela√ß√µes (matematicamente, conjuntos de tuplas)**, e todas as opera√ß√µes sobre os dados s√£o baseadas em operadores formais do c√°lculo relacional e da √°lgebra relacional. - *A Relational Model of Data for Large Shared Data Banks‚Äù (Communications of the ACM, vol. 13, n. 6, pp. 377‚Äì387, 1970).*

[![Professor Edgar Frank Codd - Universidade do Tenessi](images/2025-08-18/02-Edgard_Frank_Codd.jpg)](https://buttondown.com/jaffray/archive/in-codd-we-trust-or-not/)

### Ent√£o para podemos relacionar estes dois conjuntos (Funcion√°rios e Departamentos) utilizando a Teoria das Fun√ß√µes

$$
\text{Edgard Frank Codd era um matem√°tico tradicional} \\
\text{Considere o conseito de fun√ß√£o: } \\
f(x) = Y \\
\text{era dessa forma que ele imaginava relacionamento e } \\
\text{ garantia matem√°tica de CONSIST√äNCIA entre } \\
\text{ elementos de 2 conjuntos de dados diferentes }
$$

<div class="figure">
<img src="2026-ADS-1sem-BancoDeDados_files/figure-html/tikz-diagrama10-1.png" alt="Diagrama de Montadoras, Ve√≠culos e Propriet√°rios" width="672" />
<p class="caption">(\#fig:tikz-diagrama10)Diagrama de Montadoras, Ve√≠culos e Propriet√°rios</p>
</div>

Mas vai ficar faltando como representar os atributos nesse modelo (colunas das tabelas):

$$
\begin{array}{c| c | c}
\textbf{ Conjunto Funcion√°rios}    & \textbf{ Relacionamento Trabalha} & \textbf{Conjunto Departamentos)} \\ 
\hline 
FULANO                             &  \quad TRABALHA                   & \quad RH \\
BELTRANO                           &  \quad TRABALHA                   & \quad FINANCEIRO \\
CICLANO                            &  \quad TRABALHA                   & \quad DEIRETORIA \\
\hline
\textbf{Total: 3 ELEMENTOS }       & \textbf{ CONECTADOS }             & \textbf{Total: 3 ELEMENTOS }
\end{array}
$$

Ainda, √© necess√°rio acrescentar algumas regras de integridade a representa√ß√£o;

## Modelo L√≥gico de Banco de Dados

### Modelo Conceitual "Entidade Relacionamento" de Banco de Dados

O Modelo Entidade-Relacionamento (MER), proposto por Peter Chen em 1976, √© uma ferramenta fundamental na modelagem de dados. √â um modelo de dados de alto n√≠vel que descreve a estrutura conceitual de um banco de dados. O Modelo Entidade-Relacionamento (MER) √© representado graficamente atrav√©s de um DER (Diagrama Entidade-Relacionamento).

[![Professor Peter Chen - universidade norte-americana de Luisiania](images/2025-08-18/03-Peter_Chen.jpg){width="173"}](https://personalidades-tecnologia.blogspot.com/2011/06/peter-pin-shan-chen-peter-pin-shan-chen.html)

√â utilizado para projetar Bancos de Dados Relacionais a partir de entrevistas onde se descreve as informa√ß√µes que se deseja armazenar de forma consistente. Exemplo:

"*Desenhe um diagrama entidade-relacionamento DER contendo as entidades funcionarios e departamentos. A entidade "funcion√°rios" possui os atributos "nome" e "CPF". A entidade "Departamentos" possui os atributos "Nome" e "sigla". O atributo "CPF" √© chave prim√°ria da entidade "Funcion√°rios". O atributo "sigla" √© chave prim√°ria da entidade "Departamentos". As entidades "Funcion√°rios" e "Departamentos" se relacionam atrav√©s de um relacionamento chamado "Pertence"*."

![](images/Exemplo-01.svg)<!-- -->

Segundo Laudon

> **Diagrama Entidade/Relacionamento (DER)** √© uma representa√ß√£o esquem√°tica utilizada para entender as rela√ß√µes entre as tabelas de um banco de dados relacional. [[1] - LAUDON, Kenneth C.; LAUDON, Jane P. \*Sistemas de informa√ß√£o gerenciais\*. 11. ed. S√£o Paulo: Pearson Education do Brasil, 2010. p. 180.]

### Composi√ß√£o e Significado do Diagrama Entidade Relacionamento (DER)

$$
\begin{array}{c| c | c}
\textbf{ NOME DO COMPONENTE}    & \textbf{Representa√ß√£o Gr√°fica}   & \textbf{ Liguagem Natural (texto)} \\ 
\hline 
ENTIDADE                        &  \quad RET√ÇNGULO                 & \quad SUBST√ÉNTIVO \\
ATRIBUTO                        &  \quad EL√çPSE                    & \quad ADJETIVO \\
RELACIONAMENTO                  &  \quad LOS√ÇNGULO                 & \quad VERBO \\
\hline
\textbf{Total: 3 ELEMENTOS }    & \textbf{ FORMA GR√ÅFICA }         & \textbf{ FORMA MOFOL√ìGICA GRAMATICAL }
\end{array}
$$

<div class="figure">
<img src="2026-ADS-1sem-BancoDeDados_files/figure-html/tikz-diagrama-DER-00-1.png" alt="Diagrama de Montadoras, Ve√≠culos e Propriet√°rios" width="672" />
<p class="caption">(\#fig:tikz-diagrama-DER-00)Diagrama de Montadoras, Ve√≠culos e Propriet√°rios</p>
</div>

## Modelo F√≠sico de Banco de Dados

### Gera√ß√£o do modelo F√≠sico para aplica-lo ao SGBD (Sistema de Gerenciamento de Banco de Dados):

Uma vez que o modelo conceitual seja gerado, o analista pode mapea-lo para um "modelo f√≠sico". Aqui, cada entidade ir√° gerar uma tebela, cada atributo ir√° originar uma coluna pertinente da tabela em quest√£o e cada relacionamento ir√° mapear **chaves prim√°rias** e **chaves forasteiras** nas tabelas interrelacionadas.

$$
\begin{array}{c| c | c}
\textbf{Componente L√≥gico}    & \textbf{ Componente F√≠sico}   & \textbf{Liguagem Natural (texto)} \\ 
\hline 
ENTIDADE                        &  \quad TABELA               & \quad SUBST√ÉNTIVO \\
ATRIBUTO                        &  \quad COLUNA               & \quad ADJETIVO \\
RELACIONAMENTO                  &  \quad CHAVE-ESTRANGEIRA    & \quad VERBO \\
\hline
\textbf{Diagrama L√≥gico DER }    & \textbf{ FORMA F√çSICA - SGBD }    & \textbf{ FORMA MOFOL√ìGICA GRAMATICAL ORIGINAL }
\end{array}
$$

A ferramenta que ir√° criar as estruturas F√≠sicas (tabelas, colunas, chaves) dentro do Banco de Dados √© o Sistema de Gerenciamento de Banco de Dados atrav√©s da linguagem **SQL**.

![](images/5-bi/06-modelo_fisico.jpg)

### Interagindo com o Modelo F√≠sico - A linguagem SQL (Structured Query Language)

A linguagem SQL foi criada nos laborat√≥rios da IBM em 1974, como interface de manipula√ß√£o ao Bando de Dados Relacional System-R , atualmente denominado IBM DB2. Os criadores foram engenheiros de sistemas que sucederam o professor Edgard Frank Codd no projeto de Banco de Dados Relacional: Donald Chamberlain e Raymond Boyce.

|  |  |
|----|----|
| ![**Donald Chamberlain** - Criador da linguagem SQL nos laborat√≥rios da IBM](images/2025-08-18/04-Donald_Chamberlain.jpg){width="358"} | ![**Raymond Boyce** - Criador da linguagem SQL nos laborat√≥rios da IBM](images/2025-08-18/04-Raymond_Boyce.jpg){width="238"} |

A lingauem SQL √© a ponte com o mundo exterior para um Sistema de Gerenciamento de Banco de Dados (SGBD). Os conjunto de comandos da linguagem SQL s√£o divididos em 3 grandes grupos:

$$
\begin{array}{c| c | c}
\textbf{GRUPO}    & \textbf{ Comandos}   & \textbf{Finalidade} \\ 
\hline 
Grupo \ DDL         &  \quad \ Data \ Definion \ Language        & \quad Criar \ estruturas \ de \ dados \\
Grupo \ DML         &  \quad \ Data \ Manipulation \ Language    & \quad Manipular \ dados \ armazenados \\
Grupo \ DCL         &  \quad \ Data \ Control \ Language         & \quad Criar \ Regras \ para \ os \ dados \\
Grupo \ TCL         &  \quad \ Transaction \ Control \ Language  & \quad Criar \ Transa√ß√µes \ para \ os \ dados \\
\hline
\textbf{Subconjunto SQL }    & \textbf{ Significado }    & \textbf{ Conjunto Completo }
\end{array}
$$

Comandos exemplo:

$$
\begin{array}{c| c }
\textbf{GRUPO}    & \textbf{ Comandos}    \\ 
\hline 
Grupo \ DDL         &  \quad  CREATE, \quad ALTER,\quad DROP \ \        \\
Grupo \ DML         &  \quad SELECT, \quad INSERT, \quad UPDATE, \quad DELETE, \quad JOIN    \\
Grupo \ DCL         &  \quad GRANT, \quad REVOKE  \\
Grupo \ TCL         &  \quad COMMIT, \quad ROLLBACK, \quad SAVEPOINT   \\
\hline
\textbf{Subconjunto SQL }    & \textbf{ Significado }     
\end{array}
$$

O c√≥digo abaixo escrito em Lingauem SQL padr√£o transfere para o modelo f√≠sico o modelo l√≥gico anterior:

![](images/Exemplo-01-continua√ß√£o.svg)<!-- -->

Transformando em SQL - EQUIVALENTE:

``` sql
-- Exemplo testado e gerado no SGBD Postgres vers√£o 15

-- Tabela Funcion√°rios
CREATE TABLE IF NOT EXISTS "public".funcionarios
(
    cpf bigint NOT NULL,
    nome varchar(200)
);

-- Tabela Departamentos

CREATE TABLE IF NOT EXISTS "public".departamentos
(
    sigla integer NOT NULL,
    nome varchar(200)
);

-- Definindo a coluna "cpf" da tabela "funcion√°rios" como chave prim√°ria
alter table "public".funcionarios add constraint "chave_primaria_funcionarios" primary key (cpf);

-- Definindo a coluna "sigla"" da tabela "departamentos" como chave prim√°ria
alter table "public".departamentos add constraint "chave_primaria_departamentos" primary key (sigla);

-- Gerando a integridade refer√™ncial 
-- Importando a chave prim√°ria da tabela "departamentos" como "chave estrangeira"
-- na tabela "funcion√°rios"

-- primeiro adiciona-se a coluna estrageira "sigla" que √© coluna originalmente 
-- pertencente a tabela departamentos
alter table "public".funcionarios add column sigla integer;

-- finalmente conecte a coluna sigla a chave prim√°ria da tabela "departamento"
-- criando ent√£o uma chave estrageira na tabela "funcion√°rios".
alter table "public".funcionarios add constraint "Chave_estrangeira_Departamento_funcionarios" foreign key (sigla) references "public".departamentos(sigla);
```

## EXEMPLO: REVENDA DE VE√çCULOS MULTI-MARCAS

Uma revenda de ve√≠culos multimarcas deseja informatizar seu neg√≥cio e precisa de um banco de dados que registre informa√ß√µes sobre ve√≠culos, fabricantes e clientes. Cada ve√≠culo deve ter c√≥digo de identifica√ß√£o, modelo, ano de fabrica√ß√£o, cor, pre√ßo e chassi. Todo ve√≠culo pertence a um fabricante. O fabricante √© identificado por um c√≥digo e deve ter armazenados seu nome e pa√≠s de origem. A revenda vende ve√≠culos para clientes, e cada venda deve registrar a data, o valor da negocia√ß√£o e a forma de pagamento. Um cliente pode comprar mais de um ve√≠culo, mas cada ve√≠culo s√≥ pode ser vendido uma vez. Cada cliente √© identificado por um c√≥digo e deve ter armazenados seu nome, CPF/CNPJ, telefone e endere√ßo.

### Passo 1 - Visualizando matem√°ticamente os dados:

Vejamos como ficaria representar matem√°ticamente o enunciado acima:

-   Teoria dos Conjuntos - Ajudaria a organizar e agrupar os dados em conjuntos;

-   Teoria das Fun√ß√µes - A id√©ia era fornecer um mecanismo de consist√™ncia aos dados de conjuntos diferentes relacionados. Por exemplo, haveria uma fun√ß√£o que mapeasse um um elemento do conjunto `ve√≠culo` a outro elemento do conjunto `montadora`.

#### Representa√ß√£o Matem√°tica em Conjuntos e seus Elementos :

Vamos visualizar gr√°ficamente os conjuntos de `Marcas`, `modelos` e `propriet√°rios` :

<div class="figure">
<img src="2026-ADS-1sem-BancoDeDados_files/figure-html/tikz-diagrama1-1.png" alt="Diagrama de Montadoras, Ve√≠culos e Propriet√°rios" width="672" />
<p class="caption">(\#fig:tikz-diagrama1)Diagrama de Montadoras, Ve√≠culos e Propriet√°rios</p>
</div>

#### Gerando os Relacionamentos "Matem√°ticamente" - (Teoria das Fun√ß√µes, Dom√≠nios e Imagens):

Vamos visualizar gr√°ficamente os relacionamentos entre os lementos dos conjuntos `Marcas`, `modelos` e `propriet√°rios` :

<div class="figure">
<img src="2026-ADS-1sem-BancoDeDados_files/figure-html/tikz-diagrama2-1.png" alt="Diagrama de Montadoras, Ve√≠culos e Propriet√°rios" width="672" />
<p class="caption">(\#fig:tikz-diagrama2)Diagrama de Montadoras, Ve√≠culos e Propriet√°rios</p>
</div>

A limita√ß√£o desta representa√ß√£o gr√°fica logo fica evidente: por mais que na forma matem√°tica se consiga representar os elementos dos conjuntos e o relacionamento entre eles, a representa√ß√£o n√£o consegue representar os diferentes atributos (caracter√≠sticas) que os elementos dos conjuntos compartilham.

### Modelo L√≥gico: Modelo Entidade Relacionamento

Vamos agora converter a representa√ß√£o matem√°tica para uma representa√ß√£o l√≥gica utilizando o modelo M.E.R. (modelo entidade-relacionamento ) proposto pelo professor Peter Chen

#### Modelo Entidade Relacionamento

O modelo Entidade Relacionamento consistem em traduzir elementos morfol√≥gicos da gram√°tica da l√≠ngua portuguesa em um texto para um modelo de Banco de dados utilizando a com a seguinte regra de montagem:

|  |  |  |  |
|----|----|----|----|
| Classe morfol√≥gica da palavra | CORRESPOND√äNCIA NO MODELO MATEM√ÅTICO | CORRESPOND√äNCIA NO MODELO L√ìGICO | CORRESPOND√äNCIA NO MODELO F√çSICO-RELACIONAL |
| `Substantivos` | `CONJUNTOS` | `ENTIDADES` | `TABELAS` |
| **`Adjetivos`** | N/A | **`ATRIBUTO`** | **`COLUNAS`** |
| **`Verbos`** | Id√©ia de "fun√ß√µes y=f(x) " | **`RELACIONAMENTOS`** | **`CHAVE ESTRANGEIRA`** |

Tomando como exemplo a revenda de carros:

+-------------------------------+-----------------------------------------------------------------------------+
| Classe morfol√≥gica da palavra |                                                                             |
+-------------------------------+-----------------------------------------------------------------------------+
| `Substantivos`                | VE√çCULOS, FABRICANTES, CLIENTES                                             |
+-------------------------------+-----------------------------------------------------------------------------+
| **`Adjetivos`**               | Referentes a ve√≠culos: `Modelo`, `Ano_Fabricacao`, `Cor`, `Preco`, `Chassi` |
|                               |                                                                             |
|                               | Referentes a fabricante: `Nome`, `Pais_Origem`                              |
|                               |                                                                             |
|                               | Referentes a cliente: `Nome`, `CPF_CNPJ`, `Telefone`, `Endereco`            |
+-------------------------------+-----------------------------------------------------------------------------+
| **`Verbos`**                  | Fabricante - `PRODUZ`- Ve√≠culo                                              |
|                               |                                                                             |
|                               | clinte - `COMPRA/VENDE` - Ve√≠culo                                           |
+-------------------------------+-----------------------------------------------------------------------------+

#### Modelo Entidade Relacionamento - representa√ß√£o gr√°fica

|                               |                       |
|-------------------------------|-----------------------|
| Classe morfol√≥gica da palavra | REPRESENTA√á√ÉO GR√ÅFICA |
| `Substantivos`                | RET√ÇNGULOS            |
| **`Adjetivos`**               | **ELIPSES**           |
| **`Verbos`**                  | **LOS√ÇNGULOS**        |

![](images/modelo01.svg)<!-- -->

``` sql


-- ================================================
-- 1) TRANSFORME AS ENTIDADES E ATRIBUTOS EM 
--    TABELAS E COLUNAS
-- ================================================
CREATE TABLE fabricantes
(
    codigo_fabricante  INTEGER      NOT NULL,
    nome               VARCHAR(100) NOT NULL,
    pais_origem        VARCHAR(60)  NOT NULL
);

CREATE TABLE clientes
(
    codigo_cliente   INTEGER      NOT NULL,
    nome             VARCHAR(120) NOT NULL,
    cpf_cnpj         VARCHAR(20)  NOT NULL UNIQUE,
    telefone         VARCHAR(30),
    endereco         TEXT
);

CREATE TABLE veiculos 
(
    codigo_veiculo      INTEGER       NOT NULL,
    modelo              VARCHAR(100)  NOT NULL,
    ano_fabricacao      INTEGER       NOT NULL,
    cor                 VARCHAR(40),
    preco               NUMERIC(12,2) NOT NULL,
    chassi              VARCHAR(30)   UNIQUE NOT NULL
);

CREATE TABLE vendas
(
    codigo_venda     INTEGER          NOT NULL,
    data_venda       DATE             NOT NULL,
    valor_negociado  NUMERIC(12,2)    NOT NULL,
    forma_pagamento  VARCHAR(50)      NOT NULL
);

-- ================================================
-- 2) TRANSFORME OS ATRIBUTOS CHAVE PRIM√ÅRIA
-- EM CHAVES-PRIM√ÅRIAS DAS TABELAS
-- ================================================
ALTER TABLE fabricantes ADD CONSTRAINT chave-primaria_fabricante PRIMARY KEY (codigo_fabricante);

ALTER TABLE clientes    ADD CONSTRAINT chave-primaria_cliente PRIMARY KEY (codigo_cliente);

ALTER TABLE veiculos    ADD CONSTRAINT chave-primaria_veiculo PRIMARY KEY (codigo_veiculo);

ALTER TABLE vendas      ADD CONSTRAINT chave-primaria_venda PRIMARY KEY (codigo_venda);

-- ================================================
-- 3) ADICIONAR NAS TABELAS AS COLUNAS EXTRAS
--    QUE V√ÉO RECEBER AS CHAVES ESTRANGEIRAS
-- ================================================

-- adicione uma coluna que ir√° acomodar a chave prim√°ria da tabela fabricantes como chave estrangeira
ALTER TABLE veiculos add cloumn  codigo_fabricante   INTEGER NOT NULL;

-- adicione uma coluna que ir√° acomodar a chave prim√°ria da tabela clientes como chave estrangeira
ALTER TABLE vendas   add cloumn  codigo_cliente      INTEGER NOT NULL;

-- adicione uma coluna que ir√° acomodar a chave prim√°ria da tabela ve√≠culos como chave estrangeira
ALTER TABLE vendas   add cloumn  codigo_veiculo      INTEGER NOT NULL UNIQUE;

-- ================================================
-- 3) CRIE AS CHAVES ESTRANGEIRAS QUE FAZEM A LIGA√á√ÉO
-- DAS TABELAS "LADO N" DO RELACIONAMENTO NO 
-- DIAGRAMA ENTIDADE-RELACIONAMENTO COM AS
-- COLUNAS DO LADO 1
-- ================================================

-- utilizando chave estrangeira, fa√ßa esta tabela ve√≠culos referenciar a tabela fabricantes
ALTER TABLE veiculos
    ADD CONSTRAINT chave-estrageira_veiculo_fabricante
    FOREIGN KEY (codigo_fabricante)
    REFERENCES fabricantes (codigo_fabricante)
    ON UPDATE CASCADE
    ON DELETE RESTRICT;

-- utilizando chave estrangeira, fa√ßa esta tabela vendas referenciar a tabela clientes
ALTER TABLE vendas
    ADD CONSTRAINT chave-estrageira_venda_cliente
    FOREIGN KEY (codigo_cliente)
    REFERENCES clientes (codigo_cliente)
    ON UPDATE CASCADE
    ON DELETE RESTRICT;

-- utilizando chave estrangeira, fa√ßa esta tabela vendas referenciar a tabela ve√≠culos 
ALTER TABLE vendas
    ADD CONSTRAINT chave-estrageira_venda_veiculo
    FOREIGN KEY (codigo_veiculo)
    REFERENCES veiculos (codigo_veiculo)
    ON UPDATE CASCADE
    ON DELETE RESTRICT;
```

## VERBOS: Relacionamentos e Cardinalidade

A **cardinalidade** define **quantas ocorr√™ncias de uma entidade podem estar associadas** a ocorr√™ncias de outra entidade em um relacionamento.

Ela √© fundamental para entender as regras de neg√≥cio do banco de dados e deve estar sempre representada no **Diagrama Entidade-Relacionamento (DER)**.

------------------------------------------------------------------------

### üîπ Tipos principais de cardinalidade

1.  **Um para Um (1:1)**\
2.  **Um para Muitos (1:N)**\
3.  **Muitos para Muitos (N:N)**

A seguir, vamos detalhar cada caso.

------------------------------------------------------------------------

### 1. Relacionamento **1:1 (Um para Um)**

Um exemplo cl√°ssico:\
- Cada MARIDO possui **uma √∫nica ESPOSA**.\
- Cada ESPOSA pertence a **um √∫nico MARIDO**.

#### Representa√ß√£o no DER:

![](images/cardinalidade01.svg)<!-- -->

### Relacionamento **1:N (Um para Muitos)**

Exemplo:

Um **Cliente** pode fazer **muitos Pedidos**.

Mas cada **Pedido** s√≥ pode pertencer a **um Cliente**.

#### Representa√ß√£o no DER:

![](images/cardinalidade02.svg)<!-- -->

### Relacionamento N:N (Muitos para Muitos)

Exemplo:

Um **Aluno** pode se matricular **em muitas Disciplinas**.

Cada **Disciplina** pode ter **muitos Alunos**.

( Esse tipo de relacionamento precisa de uma entidade associativa para ser implementado no banco (ex.: Matricula) )

#### Representa√ß√£o no DER:

![](images/cardinalidade03.svg)<!-- -->

## Entidade Dominante e Entidade Subordinada

No **Modelo Entidade-Relacionamento (MER)**, algumas entidades s√≥ existem **dependendo da exist√™ncia de outra**.\
Nesses casos, usamos os conceitos de **Entidade Dominante** e **Entidade Subordinada**.

------------------------------------------------------------------------

### Defini√ß√µes:

-   **Entidade Dominante (ou Forte):**\
    √â uma entidade que **existe por si s√≥**, sem depender de nenhuma outra.\
    Ex.: Cliente, Produto, Funcion√°rio.

-   **Entidade Subordinada (ou Fraca):**\
    √â uma entidade que **depende de outra** para existir.\
    Ela **n√£o possui chave prim√°ria pr√≥pria** completa e precisa da chave da entidade dominante.\
    Ex.: ItemPedido, Dependente, Parcela.

A entidade subordinada √© representada por um **losango duplo** (relacionamento identificador) em algumas nota√ß√µes, ou simplesmente destacada como **entidade fraca**.

![](images/EntidadeDominante01.svg)<!-- -->

Outro Exemplo:

![](images/EntidadeDominante02.svg)<!-- -->

------------------------------------------------------------------------

## CARDINALIDADE DO MODELO L√ìGICO E A CRIA√á√ÉO DE CHAVES ESTRANGEIRAS NO MODELO F√çSICO-RELACIONAL

Vai ser a cardinalidade que ir√° ditar em quais tabelas criaremos chaves estrangeiras.

## Normaliza√ß√£o em Bancos de Dados Relaionais

### Tabela Desnormalizada

![](images/5-bi/01-montadora.jpg){width="343"}

Considere a tabela Ve√≠culos abaixo:

|  Modelo   | Montadora  |
|:---------:|:----------:|
|  Strada   |    Fiat    |
|   Mobi    |    Fiat    |
|   Pulse   |    Fiat    |
|   Onix    | Chevrolet  |
|  Tracker  | Chevrolet  |
| Onix Plus | Chevrolet  |
|   Polo    | Volkswagen |
|   Nivus   | Volkswagen |
|  T-Cross  | Volkswagen |
|   HB20    |  Hyundai   |
|   Creta   |  Hyundai   |

Separamos o conjunto de elemntos *Montadoras* e *Modelos*.

| MontadoraID | Montadora  |
|:-----------:|:----------:|
|      1      |    Fiat    |
|      2      | Chevrolet  |
|      3      | Volkswagen |
|      4      |  Hyundai   |

| ModeloID |  Modelo   |
|:--------:|:---------:|
|   101    |  Strada   |
|   102    |   Mobi    |
|   103    |   Pulse   |
|   201    |   Onix    |
|   202    |  Tracker  |
|   203    | Onix Plus |
|   301    |   Polo    |
|   302    |   Nivus   |
|   303    |  T-Cross  |
|   401    |   HB20    |
|   402    |   Creta   |

> O processo de fragmentar agrupamentos complexos de dados e simplifica-los a fim de minimizar redund√¢ncias e economizar espa√ßo no Banco de Dados Relacional √© chamado de **NORMALIZA√á√ÉO.** [[1] - LAUDON, Kenneth C.; LAUDON, Jane P. \*Sistemas de informa√ß√£o gerenciais\*. 11. ed. S√£o Paulo: Pearson Education do Brasil, 2010. p. 180.]

Mas Como indicar que cada elemento da tabela "Modelo" est√° associado a um elemento da tabela "Montadora" ?

### Tabela Normalizada

Considere as tabelas abaixo:

| MontadoraID | Montadora  |
|:-----------:|:----------:|
|      1      |    Fiat    |
|      2      | Chevrolet  |
|      3      | Volkswagen |
|      4      |  Hyundai   |

| ModeloID |  Modelo   | MontadoraID |
|:--------:|:---------:|:-----------:|
|   101    |  Strada   |      1      |
|   102    |   Mobi    |      1      |
|   103    |   Pulse   |      1      |
|   201    |   Onix    |      2      |
|   202    |  Tracker  |      2      |
|   203    | Onix Plus |      2      |
|   301    |   Polo    |      3      |
|   302    |   Nivus   |      3      |
|   303    |  T-Cross  |      3      |
|   401    |   HB20    |      4      |
|   402    |   Creta   |      4      |

Repare que:

-   √â poss√≠vel identificar que n√£o existem montadoras repetidas na tabela "Montadoras";

-   √â poss√≠vel identificar que n√£o existem modelos repetidos na tabela "Montadoras";

A coluna (atributo) **ModeloID** √© a **chave prim√°ria** da tabela **Modelos.** A coluna (atributo) **MontadoraID** √© a **chave prim√°ria** da tabela **Montadoras.**

Na tabela **Modelos**, a coluna **MontadoraID**, acrescentada a tabela Modelos representa a liga√ß√£o de cada elemento da tabela Modelos e Montadoras. Essa coluna "importada" da tabela Montadoras para a tabela Modelos se chama **chave estrangeira**.

## Refer√™ncias

**CHEN**, Peter (1990).¬†***Gerenciando Banco de Dados*****. A Abordagem Entidade-Relacionamento para Projeto L√≥gico**. S√£o Paulo: McGraw-Hill. 80¬†p√°ginas.¬†[ISBN](https://pt.wikipedia.org/wiki/International_Standard_Book_Number "International Standard Book Number")¬†[0-07-460575-5](https://pt.wikipedia.org/wiki/Especial:Fontes_de_livros/0-07-460575-5 "Especial:Fontes de livros/0-07-460575-5")

**DATE**, C. J. **An Introduction to Database Systems.** 8. ed. Boston: Addison-Wesley, 2003.

**SILBERSCHATZ**, Abraham; KORTH, Henry F.; SUDARSHAN, S. **Database System Concepts.** 6. ed. New York: McGraw-Hill, 2010.

**CODD**, E. F. **A Relational Model of Data for Large Shared Data Banks.** Communications of the ACM, New York, v. 13, n. 6, p. 377‚Äì387, 1970.

<!--chapter:end:03-2026-03-03_Modelagem_SGBD-aula.Rmd-->

---
output: 
  html_document: 
    highlight: tango
    theme: cerulean
    toc_depth: 4
    number_sections: true
  pdf_document: 
    toc: true
    toc_depth: 4
  word_document: 
    toc: true
    toc_depth: 4
---

## Exerc√≠cios RESOLVIDOS

+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Exerc√≠cio 1 ‚Äî Universidade                                                                                                                                                                                                                                                                 |
+============================================================================================================================================================================================================================================================================================+
| Considere uma Universidade que possui v√°rios Cursos. Cada curso tem um nome, uma dura√ß√£o em semestres e um coordenador. A universidade possui Professores, cada um com um nome, t√≠tulo e CPF. Um professor pode ministrar v√°rias disciplinas, e cada disciplina pertence a um √∫nico curso. |
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| a)  Identifique as entidades                                                                                                                                                                                                                                                               |
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| b)  Identifique os atributos de cada Entidade                                                                                                                                                                                                                                              |
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| c)  Identifique os relacionamentos entre as Entidades                                                                                                                                                                                                                                      |
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| e)  Fa√ßa o diagrama DEM (Diagrama Entidade Relacionamento) contendo as entidades, atributos e relacionamentos que voc√™ mapeou.                                                                                                                                                             |
+--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

#### Passo #1 -

Identificar **SUBSTANTIVOS** no contexto; identificar os **ADJETIVOS** pertinentes a cada SUBSTANTIVO; identificar os **VERBOS** de rela√ß√£o entre os substantivos.

+---------------------------------------------------+----------------------------------------------+----------------------------------------------------+
| `Substantivos` **do contexto**: leve-os ao plural | `Adjetivos`                                  | `Verbos`                                           |
+:==================================================+==============================================+====================================================+
| UNIVERSIDADE -\> **`UNIVERSIDADES`**              | `NOME` (impl√≠cito no enunciado)              | universidade `POSSUI` (v√°rios) cursos              |
|                                                   |                                              |                                                    |
|                                                   | `CNPJ` (impl√≠cito no enunciado)              |                                                    |
+---------------------------------------------------+----------------------------------------------+----------------------------------------------------+
| CURSO -\> **`CURSOS`**                            | `NOME` (expl√≠cito no enunciado)              | cursos s√£o `POSSU√çDOS` por (v√°rios) universidades  |
|                                                   |                                              |                                                    |
|                                                   | `DURA√á√ÉO` (expl√≠cito no enunciado)           |                                                    |
|                                                   |                                              |                                                    |
|                                                   | `COORDENADOR` (expl√≠cito no enunciado)       |                                                    |
|                                                   |                                              |                                                    |
|                                                   | `CODIGO_CURSO` (impl√≠cito no enunciado)      |                                                    |
+---------------------------------------------------+----------------------------------------------+----------------------------------------------------+
| PROFESSOR -\> **`PROFESSORES`**                   | `CPF` (expl√≠cito no enunciado)               | universidade `POSSUI` (v√°rios) professores         |
|                                                   |                                              |                                                    |
|                                                   | `NOME` (expl√≠cito no enunciado)              | professor `MINISTRA` (v√°rias) disciplinas          |
|                                                   |                                              |                                                    |
|                                                   | `T√çTULO` (expl√≠cito no enunciado)            |                                                    |
+---------------------------------------------------+----------------------------------------------+----------------------------------------------------+
| DISCIPLINA -\> **`DISCIPLINAS`**                  | `NOME` (impl√≠cito no enunciado)              | disciplina `√â MINISTRADA` por (v√°rios) professores |
|                                                   |                                              |                                                    |
|                                                   | `CODIGO_DISCIPLINA` (impl√≠cito no enunciado) | disciplina `PERTENCE` a (um √∫nico) curso           |
+---------------------------------------------------+----------------------------------------------+----------------------------------------------------+

: Identificando SUBSTANTIVOS, ADJETIVOS referentes e VERBOS de rela√ß√£o

#### Passo #2

Criar o **`MODELO ENTIDADE RELACIONAMENTO (M.E.R.)`** - Converter SUBSTANTIVO em **`ENTIDADES`**; converter ADJETIVOS em **`ATRIBUTOS`** e converter VERBOS em **`RELACIONAMENTOS`**.

-   ENTIDADES identificadas: **`UNIVERSIDADES`**, **`CURSOS`**, **`PROFESSORES`** e **`DISCIPLINAS`**

-   ATRIBUTOS identificados: UNIVERSIDADES [ nome,cnpj ] ; CURSOS [ nome, dura√ß√£o, coordenador, codigo_curso] ; PROFESSORES [ cpf, nome e t√≠tulo] ; DISCIPLINAS [nome e codigo_disciplina]

-   RELACIONAMENTOS: [universidade-`POSSUI`-curso] ; [universidade-`POSSUI`-professores]; [professor-`MINISTRA`-disciplina] ; [disciplina-`PERTENCE`-curso]

#### Passo #3

Criar um DIAGRAMA ENTIDADE-RELACIONAMENTO (D.E.R.) com as informa√ß√µes levantadas:

![](images/exercicio01-01.svg)<!-- -->

![](images/exercicio01-02.svg)<!-- -->

![](images/exercicio01-03.svg)<!-- -->

![](images/exercicio01-04.svg)<!-- -->

#### Passo #4

Identificar os Relacionamentos:

-   [universidade-`POSSUI`-curso] ; [universidade-`POSSUI`-professores]; [professor-`MINISTRA`-disciplina] ; [disciplina-`PERTENCE`-curso]

![](images/exercicio01-05.svg)<!-- -->


#### Passo  #5 - Crie o c√≥digo SQL referente ao diagrama que voc√™ desenhou:

```SQL
/* =========================================================
   Passo 1Ô∏è- CRIAR TABELAS (somente colunas, sem PK nem FK)
   ========================================================= */
CREATE TABLE UNIVERSIDADES 
(
    nome            VARCHAR(255),
    CNPJ            VARCHAR(14)
);

CREATE TABLE CURSOS 
(
    nome            VARCHAR(255),
    duracao         INT,
    coordenador     VARCHAR(255),
    codigo_curso    INTEGER
);

CREATE TABLE PROFESSORES 
(
    cpf             VARCHAR(11),
    nome            VARCHAR(255),
    titulo          VARCHAR(255)
);

CREATE TABLE DISCIPLINAS 
(
    nome                VARCHAR(255),
    codigo_disciplina   INTEGER
);

/* =========================================================
   Passo 2- ADICIONAR CHAVES PRIM√ÅRIAS
   ========================================================= */
ALTER TABLE UNIVERSIDADES ADD PRIMARY KEY (CNPJ);

ALTER TABLE CURSOS        ADD PRIMARY KEY (codigo_curso);

ALTER TABLE PROFESSORES   ADD PRIMARY KEY (cpf);

ALTER TABLE DISCIPLINAS   ADD PRIMARY KEY (codigo_disciplina);

/* =========================================================
   Passo 3- CRIAR COLUNAS PARA FUTURAS CHAVES ESTRANGEIRAS
   -- Sempre no lado N de cada relacionamento
   ========================================================= */
-- UNIVERSIDADES (1) ‚Äî‚Äî (N) CURSOS  ‚Üí CURSOS precisa de CNPJ
ALTER TABLE CURSOS   ADD COLUMN CNPJ VARCHAR(14);

-- UNIVERSIDADES (1) ‚Äî‚Äî (N) PROFESSORES ‚Üí PROFESSORES precisa de CNPJ
ALTER TABLE PROFESSORES  ADD COLUMN CNPJ VARCHAR(14);

-- PROFESSORES (1) ‚Äî‚Äî (N) DISCIPLINAS ‚Üí DISCIPLINAS precisa de cpf
ALTER TABLE DISCIPLINAS ADD COLUMN cpf VARCHAR(11);

/* =========================================================
   Passo 4- CRIAR AS CHAVES ESTRANGEIRAS
   ========================================================= */
ALTER TABLE CURSOS      ADD CONSTRAINT fk_cursos_universidade      FOREIGN KEY (CNPJ) REFERENCES UNIVERSIDADES (CNPJ);

ALTER TABLE PROFESSORES ADD CONSTRAINT fk_professores_universidade FOREIGN KEY (CNPJ) REFERENCES UNIVERSIDADES (CNPJ);

ALTER TABLE DISCIPLINAS ADD CONSTRAINT fk_disciplinas_professor    FOREIGN KEY (cpf)  REFERENCES PROFESSORES (cpf);

```

------------------------------------------------------------------------

+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Exerc√≠cio 2 ‚Äî Um Projeto de e-commerce                                                                                                                                                                                             |
+====================================================================================================================================================================================================================================+
| Um Cliente faz Pedidos em um sistema de e-commerce. Cada cliente tem um nome, endere√ßo e telefone. Os pedidos possuem uma data, um valor total e podem conter v√°rios Produtos. Cada produto tem um nome, uma descri√ß√£o e um pre√ßo. |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| a)  Identifique as **entidades**                                                                                                                                                                                                   |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| b)  Identifique os **atributos** de cada Entidade                                                                                                                                                                                  |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| c)  Identifique os **relacionamentos** entre as Entidades                                                                                                                                                                          |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| e)  Fa√ßa o **diagrama DEM (Diagrama Entidade Relacionamento)** contendo as entidades, atributos e relacionamentos que voc√™ mapeou.                                                                                                 |
+------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

#### Passo #1 -

Identificar **SUBSTANTIVOS** no contexto; identificar os **ADJETIVOS** pertinentes a cada SUBSTANTIVO; identificar os **VERBOS** de rela√ß√£o entre os substantivos.

+-------------------------------------------------------------------------+----------------------------------------+-------------------------------------------------------+
| `Substantivos` **do contexto**: leve-os ao plural                       | `Adjetivos`                            | `Verbos`                                              |
+:========================================================================+========================================+=======================================================+
| CLIENTE -\> **`CLIENTES`**                                              | `NOME` (expl√≠cito no enunciado)        | (v√°rios) clientes `PEDEM` (v√°rios) produtos           |
|                                                                         |                                        |                                                       |
|                                                                         | `ENDERECO` (expl√≠cito no enunciado)    |                                                       |
|                                                                         |                                        |                                                       |
|                                                                         | `TELEFONE` (expl√≠cito no enunciado)    |                                                       |
|                                                                         |                                        |                                                       |
|                                                                         | `CPF` (impl√≠cito no enunciado)         |                                                       |
+-------------------------------------------------------------------------+----------------------------------------+-------------------------------------------------------+
| PEDIDO -\> **`PEDIDOS ????`**                                           | `DATA` (expl√≠cito no enunciado)        | (v√°rios) clientes `PEDEM` (v√°rios) produtos           |
|                                                                         |                                        |                                                       |
| PEDIDO N√ÉO √â SUBSTABNTIVO, MAS SIM O PARTIC√çPIO PASSADO DO VERBO PEDIR. | `VALOR_TOTAL` (expl√≠cito no enunciado) |                                                       |
|                                                                         |                                        |                                                       |
| (PEDIR √â VERBO !!!)                                                     |                                        |                                                       |
+-------------------------------------------------------------------------+----------------------------------------+-------------------------------------------------------+
| PRODUTO -\> **`PRODUTOS`**                                              | `NOME` (impl√≠cito no enunciado)        | (v√°rios) produtos s√£o `PEDidos` por (v√°rios) clientes |
|                                                                         |                                        |                                                       |
|                                                                         | `DESCRICAO` (expl√≠cito no enunciado)   |                                                       |
|                                                                         |                                        |                                                       |
|                                                                         | `PRECO` (expl√≠cito no enunciado)       |                                                       |
|                                                                         |                                        |                                                       |
|                                                                         | `COD_PRODUTO` (impl√≠cito no enunciado) |                                                       |
+-------------------------------------------------------------------------+----------------------------------------+-------------------------------------------------------+

: Identificando SUBSTANTIVOS, ADJETIVOS referentes e VERBOS de rela√ß√£o

#### Passo #2

Criar o **`MODELO ENTIDADE RELACIONAMENTO (M.E.R.)`** - Converter SUBSTANTIVO em **`ENTIDADES`**; converter ADJETIVOS em **`ATRIBUTOS`** e converter VERBOS em **`RELACIONAMENTOS`**.

Normalmente apenas as ENTIDADES levam atributos. Quando aparece um relacionamento N-N entre duas entidades, tamb√©m podem aparecer atributos atrelados aos relacionamentos (como √© o caso de PEDIDO aqui).

-   ENTIDADES identificadas: **`CLIENTES`**, **`PRODUTOS`**

-   ATRIBUTOS identificados: CLIENTES [ nome, endereco, telefone, cpf] ; PRODUTOS [ nome, descricao, preco, cod_produto] ; PEDIDO[data, valor_total]

-   RELACIONAMENTOS: [cliente-`PEDE`-produto] ; [produto-`PEDIDO`-cliente];

#### Passo #3

Criar um DIAGRAMA ENTIDADE-RELACIONAMENTO (D.E.R.) com as informa√ß√µes levantadas:

![](images/exercicio02-01.svg)<!-- -->

#### Passo  #5 - Crie o c√≥digo SQL referente ao diagrama que voc√™ desenhou:

```SQL

-- CRIAR AS TABELAS

CREATE TABLE Cliente 
(
    id_cliente INT,
    nome VARCHAR(255)
);

CREATE TABLE CPF 
(
    numero_cpf CHAR(11)
);

-- ADICIONAR AS CHAVES PRIM√ÅRIAS

ALTER TABLE Cliente ADD PRIMARY KEY (id_cliente);

ALTER TABLE CPF ADD PRIMARY KEY (numero_cpf);


-- O relacionamento √© 1:1. Podemos escolher um dos lados para armazenar a chave.
-- Aqui vamos seguir o diagrama, colocando a chave estrangeira de CPF em Cliente.

ALTER TABLE Cliente ADD COLUMN numero_cpf CHAR(11);

-- CRIAR AS CHAVES ESTRANGEIRAS

ALTER TABLE Cliente ADD CONSTRAINT fk_cliente_cpf FOREIGN KEY (numero_cpf) REFERENCES CPF (numero_cpf);

```

------------------------------------------------------------------------

+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| Exerc√≠cio 3 ‚Äî Hospital                                                                                                                                                                                                                                                                  |
+=========================================================================================================================================================================================================================================================================================+
| Um Hospital registra Pacientes, cada um com nome, idade, endere√ßo e telefone. Os pacientes podem realizar v√°rias Consultas com M√©dicos. Cada m√©dico possui um CRM, um nome e uma especialidade. Durante a consulta, o m√©dico pode prescrever Receitas, que possuem medica√ß√£o e dosagem. |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| a)  Identifique as **entidades**                                                                                                                                                                                                                                                        |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| b)  Identifique os **atributos** de cada Entidade                                                                                                                                                                                                                                       |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| c)  Identifique os **relacionamentos** entre as Entidades                                                                                                                                                                                                                               |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| e)  Fa√ßa o **diagrama DEM (Diagrama Entidade Relacionamento) contendo as entidades, atributos e relacionamentos** que voc√™ mapeou.                                                                                                                                                      |
+-----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+

#### Passo #1 -

Identificar **SUBSTANTIVOS** no contexto; identificar os **ADJETIVOS** pertinentes a cada SUBSTANTIVO; identificar os **VERBOS** de rela√ß√£o entre os substantivos.

+---------------------------------------------------+------------------------------------------+-------------------------------------------------------------------+
| `Substantivos` **do contexto**: leve-os ao plural | `Adjetivos`                              | `Verbos`                                                          |
+:==================================================+==========================================+===================================================================+
| HOSPITAL -\> **`HOSPITAIS`**                      | `NOME` (impl√≠cito no enunciado)          | (expl√≠cito) hospital `REGISTRA` (v√°rios) pacientes                |
|                                                   |                                          |                                                                   |
|                                                   | `CNPJ` (impl√≠cito no enunciado)          | (impl√≠cito) hospital `POSSUI` medicos                             |
+---------------------------------------------------+------------------------------------------+-------------------------------------------------------------------+
| PACIENTE -\> **`PACIENTES`**                      | `NOME` (expl√≠cito no enunciado)          | pacientes s√£o `REGISTRADOS` em (um) hospital                      |
|                                                   |                                          |                                                                   |
|                                                   | `IDADE` (expl√≠cito no enunciado)         | (v√°rios) pacientes `CONSULTAM` (v√°rios) m√©dicos                   |
|                                                   |                                          |                                                                   |
|                                                   | `ENDERECO` (expl√≠cito no enunciado)      | (v√°rios) pacientes `S√ÉO RECEITADOS` por (v√°rios) m√©dicos          |
|                                                   |                                          |                                                                   |
|                                                   | `TELEFONE` (expl√≠cito no enunciado)      |                                                                   |
|                                                   |                                          |                                                                   |
|                                                   | `CPF` (impl√≠cito no enunciado)           |                                                                   |
+---------------------------------------------------+------------------------------------------+-------------------------------------------------------------------+
| M√âDICO -\> **`MEDICOS`**                          | `CRM` (expl√≠cito no enunciado)           | (v√°rios) m√©dico(s) `CONSULTA` (v√°rios) pacientes                  |
|                                                   |                                          |                                                                   |
|                                                   | `NOME` (expl√≠cito no enunciado)          | (v√°rios) m√©dico(s) `RECEITAM` (v√°rios) pacientes                  |
|                                                   |                                          |                                                                   |
|                                                   | `ESPECIALIDADE` (expl√≠cito no enunciado) |                                                                   |
+---------------------------------------------------+------------------------------------------+-------------------------------------------------------------------+
| RECEITA ?? -\> **`RECEITAR`** √© VERBO             | `MEDICACAO` (expl√≠cito no enunciado)     | m√©dico `RECEITA` ao paciente                                      |
|                                                   |                                          |                                                                   |
|                                                   | `DOSAGEM`(expl√≠cito no enunciado)        | (v√°rios) paciente(s) `√â(S√ÉO) RECEITADO(s)` por (v√°rios) m√©dico(s) |
+---------------------------------------------------+------------------------------------------+-------------------------------------------------------------------+
| CONSULTA ?? -\> **`CONSULTAR`** √© VERBO           | `DATA` (impl√≠cito no enunciado)          | (v√°rios) pacientes(s) `CONSULTA(M)` (v√°rios) m√©dico(s)            |
|                                                   |                                          |                                                                   |
|                                                   | `HORA`(impl√≠cito no enunciado)           |                                                                   |
|                                                   |                                          |                                                                   |
|                                                   | `sala`(impl√≠cito no enunciado)           |                                                                   |
+---------------------------------------------------+------------------------------------------+-------------------------------------------------------------------+

: Identificando SUBSTANTIVOS, ADJETIVOS referentes e VERBOS de rela√ß√£o

#### Passo #2

Criar o **`MODELO ENTIDADE RELACIONAMENTO (M.E.R.)`** - Converter SUBSTANTIVO em **`ENTIDADES`**; converter ADJETIVOS em **`ATRIBUTOS`** e converter VERBOS em **`RELACIONAMENTOS`**.

-   ENTIDADES identificadas: **`HOSPITAIS`**, **`PACIENTES`**, **`MEDICOS`**

-   ATRIBUTOS identificados: HOSPITAIS [ nome,cnpj ] ; PACIENTES [ nome, idade, endereco, telefone, cpf] ; MEDICOS [ crm, nome e especialidade] ;

-   RELACIONAMENTOS: [medico-`consulta`-paciente] ; [medico-`receita`-paciente]; [hospital-registra-paciente] ; [hospital-`POSSUI`-medicos]

#### Passo #3

Criar um DIAGRAMA ENTIDADE-RELACIONAMENTO (D.E.R.) com as informa√ß√µes levantadas:

![](images/exercicio03-01.svg)<!-- -->

#### Passo #5 - Fa√ßa o c√≥digo SQL do diagrama acima

```SQL

/* =========================================================
   Passo 1- TABELAS (apenas colunas, sem PK ou FK)
   ========================================================= */
CREATE TABLE HOSPITAIS 
(
    nome    VARCHAR(255),
    cnpj    CHAR(14)
);

CREATE TABLE PACIENTES 
(
    nome        VARCHAR(255),
    idade       INT,
    endereco    VARCHAR(255),
    telefone    VARCHAR(20),
    cpf         CHAR(11)
);

CREATE TABLE MEDICOS 
(
    nome            VARCHAR(255),
    especialidade   VARCHAR(255),
    crm             CHAR(15)
);

/* As pr√≥ximas tabelas representam os relacionamentos N:N
   com atributos pr√≥prios (tabelas de jun√ß√£o) */
CREATE TABLE REGISTRAM 
(
    -- sem colunas de FK por enquanto
);

CREATE TABLE CONSULTAM 
(
    data_consulta   DATE,
    hora            TIME,
    sala            VARCHAR(50)
);

CREATE TABLE RECEITAM 
(
    medicacao       VARCHAR(255),
    dosagem         VARCHAR(100)
);

/* =========================================================
   Passo 2- ADICIONAR CHAVES PRIM√ÅRIAS
   ========================================================= */
ALTER TABLE HOSPITAIS  ADD PRIMARY KEY (cnpj);

ALTER TABLE PACIENTES  ADD PRIMARY KEY (cpf);

ALTER TABLE MEDICOS    ADD PRIMARY KEY (crm);

/* Para tabelas de relacionamento com atributos, a PK ser√° composta
   (as FKs a serem criadas formar√£o a chave prim√°ria). Faremos isso depois
   de adicionar as colunas de FK. */

/* =========================================================
   Passo 3- CRIAR COLUNAS PARA FUTURAS CHAVES ESTRANGEIRAS
   ========================================================= */
-- REGISTRAM: HOSPITAIS (1) ‚Äî‚Äî (N) PACIENTES
ALTER TABLE REGISTRAM ADD COLUMN cnpj CHAR(14), ADD COLUMN cpf  CHAR(11);

-- CONSULTAM: MEDICOS (N) ‚Äî‚Äî (N) PACIENTES
ALTER TABLE CONSULTAM ADD COLUMN crm  CHAR(15), ADD COLUMN cpf  CHAR(11);

-- RECEITAM: MEDICOS (N) ‚Äî‚Äî (N) PACIENTES
ALTER TABLE RECEITAM  ADD COLUMN crm  CHAR(15), ADD COLUMN cpf  CHAR(11);

/* =========================================================
   Passo 4- CRIAR CHAVES ESTRANGEIRAS
   ========================================================= */
ALTER TABLE REGISTRAM
    ADD CONSTRAINT fk_registram_hospitais
        FOREIGN KEY (cnpj)
        REFERENCES HOSPITAIS (cnpj),
    ADD CONSTRAINT fk_registram_pacientes
        FOREIGN KEY (cpf)
        REFERENCES PACIENTES (cpf);

ALTER TABLE CONSULTAM
    ADD CONSTRAINT fk_consultam_medicos
        FOREIGN KEY (crm)
        REFERENCES MEDICOS (crm),
    ADD CONSTRAINT fk_consultam_pacientes
        FOREIGN KEY (cpf)
        REFERENCES PACIENTES (cpf);

ALTER TABLE RECEITAM
    ADD CONSTRAINT fk_receitam_medicos
        FOREIGN KEY (crm)
        REFERENCES MEDICOS (crm),
    ADD CONSTRAINT fk_receitam_pacientes
        FOREIGN KEY (cpf)
        REFERENCES PACIENTES (cpf);

/* Definir chaves prim√°rias compostas para tabelas de relacionamento */
ALTER TABLE REGISTRAM ADD PRIMARY KEY (cnpj, cpf);

ALTER TABLE CONSULTAM ADD PRIMARY KEY (crm, cpf, data_consulta, hora);

ALTER TABLE RECEITAM  ADD PRIMARY KEY (crm, cpf, medicacao);

```

------------------------------------------------------------------------

### Exerc√≠cios

### üìù Lista de Exerc√≠cios ‚Äì Modelo Entidade-Relacionamento (MER)

#### Exerc√≠cio 1 ‚Äì Cliente e CPF (1:1)
Considere um projeto de Banco de Dados.Fa√ßa a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.). \
Cada **Cliente** possui exatamente **um CPF**, e cada CPF s√≥ pode estar associado a um √∫nico Cliente.\
- Identifique entidades, atributos e relacionamento.\
- Represente o MER com cardinalidade 1:1.

![](images/exercicio-01.svg)<!-- -->

------------------------------------------------------------------------

#### Exerc√≠cio 2 ‚Äì Cliente e Pedidos (1:N)
Considere um projeto de Banco de Dados.Fa√ßa a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.). \
Um **Cliente** pode fazer **v√°rios Pedidos**, mas cada Pedido pertence a apenas um Cliente.\
- Liste as entidades e atributos.\
- Defina o relacionamento e a cardinalidade.\
- Monte o DER.

![](images/exercicio-02.svg)<!-- -->

------------------------------------------------------------------------

#### Exerc√≠cio 3 ‚Äì Alunos e Disciplinas (N:N)
Considere um projeto de Banco de Dados.Fa√ßa a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.). \
Um **Aluno** pode se matricular em v√°rias **Disciplinas**, e cada Disciplina pode ter v√°rios Alunos.\
- Identifique entidades e atributos. - Qual entidade associativa deve ser criada? - Desenhe o DER com a entidade associativa.

![](images/exercicio-03.svg)<!-- -->

------------------------------------------------------------------------

#### Exerc√≠cio 4 ‚Äì Funcion√°rio e Dependentes (Entidade Fraca)
Considere um projeto de Banco de Dados.Fa√ßa a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.). \
Cada **Funcion√°rio** pode ter **v√°rios Dependentes**. Um Dependente n√£o existe sem um Funcion√°rio.\
- Identifique a entidade forte e a entidade fraca.\
- Defina atributos e chaves.\
- Monte o DER indicando a depend√™ncia existencial.

![](images/exercicio-04.svg)<!-- -->

```SQL
-- Coloque aqui o c√≥digo SQL criar as tabelas:



```

------------------------------------------------------------------------

#### Exerc√≠cio 5 ‚Äì Pedido e Itens de Pedido (Entidade Associativa + Fraca)
Considere um projeto de Banco de Dados.Fa√ßa a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.). \
Um **Pedido** cont√©m v√°rios **Itens**, mas cada Item est√° sempre vinculado a apenas um Pedido.\
- Qual entidade √© dominante e qual √© subordinada?\
- Identifique atributos das duas entidades.\
- Represente o DER com cardinalidade 1:N.

![](images/exercicio-05.svg)<!-- -->

```SQL
-- Coloque aqui o c√≥digo SQL criar as tabelas:



```

------------------------------------------------------------------------

#### Exerc√≠cio 6 ‚Äì M√©dicos e Consultas (1:N)
Considere um projeto de Banco de Dados.Fa√ßa a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.). \
Um **M√©dico** pode realizar v√°rias **Consultas**, mas cada Consulta est√° associada a apenas um M√©dico.\
- Identifique entidades e atributos.\
- Desenhe o DER.\
- Indique as cardinalidades.

![](images/exercicio-06.svg)<!-- -->

```SQL
-- Coloque aqui o c√≥digo SQL criar as tabelas:



```


------------------------------------------------------------------------

#### Exerc√≠cio 7 ‚Äì Professor e Departamento (1:1)
Considere um projeto de Banco de Dados.Fa√ßa a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.). \
Cada **Professor** dirige apenas **um Departamento**, e cada Departamento tem apenas um Professor respons√°vel.\
- Identifique entidades, atributos e relacionamento.\
- Defina cardinalidade 1:1 no DER.

![](images/exercicio-07.svg)<!-- -->

```SQL
-- Coloque aqui o c√≥digo SQL criar as tabelas:



```

------------------------------------------------------------------------

#### Exerc√≠cio 8 ‚Äì Livros e Autores (N:N)
Considere um projeto de Banco de Dados.Fa√ßa a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.). \
Um **Livro** pode ter v√°rios **Autores**, e cada Autor pode escrever v√°rios Livros.\
- Identifique as entidades e atributos.\
- Qual entidade associativa deve ser criada?\
- Monte o DER em nota√ß√£o conceitual.

![](images/exercicio-08.svg)<!-- -->

```SQL
-- Coloque aqui o c√≥digo SQL criar as tabelas:



```

------------------------------------------------------------------------

#### Exerc√≠cio 9 ‚Äì Biblioteca (Entidades Fortes e Fracas)
Considere um projeto de Banco de Dados.Fa√ßa a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.). \
Um **Livro** pode ter v√°rios **Exemplares**. Um Exemplar s√≥ existe se estiver associado a um Livro.\
- Identifique entidades fortes e fracas.\
- Defina atributos (Livro: t√≠tulo, ano; Exemplar: c√≥digo_exemplar, status).\
- Monte o DER com a depend√™ncia existencial.


![](images/exercicio-09.svg)<!-- -->

```SQL
-- Coloque aqui o c√≥digo SQL criar as tabelas:



```

------------------------------------------------------------------------

#### Exerc√≠cio 10 ‚Äì Empresa, Funcion√°rio e Projeto (Misto 1:N e N:N)
Considere um projeto de Banco de Dados.Fa√ßa a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.). \
-   Uma **Empresa** possui v√°rios **Funcion√°rios**.\
-   Cada **Funcion√°rio** pode participar de v√°rios **Projetos**, e cada Projeto pode ter v√°rios Funcion√°rios.\
-   Identifique todas as entidades, atributos e relacionamentos.\
-   Determine cardinalidades corretas (Empresa‚ÄìFuncion√°rio 1:N, Funcion√°rio‚ÄìProjeto N:N).\
-   Crie o DER completo.

![](images/exercicio-10.svg)<!-- -->

```SQL
-- Coloque aqui o c√≥digo SQL criar as tabelas:



```

------------------------------------------------------------------------

#### Tarefas propostas para cada exerc√≠cio:

1.  Identificar entidades e atributos.\
2.  Definir relacionamentos.\
3.  Especificar cardinalidades.\
4.  Indicar entidades fortes e fracas (quando houver).\
5.  Representar graficamente o DER.

------------------------------------------------------------------------

### Respostas dos Exerc√≠cios:

#### Exerc√≠cio #1

![](images/exercicio-01-resposta.svg)<!-- -->

##### Exerc√≠cio 1 - SQL refer√™nte ao diagrama anterior

```SQL
/* =========================================================
   TRANSFORMA AS ENTIDADES EM TABELAS E ATRIBUTOS EM COLUNAS
   ========================================================= */
CREATE TABLE CLIENTES 
(
    id_cliente INTEGER,
    nome VARCHAR(255)
);

CREATE TABLE CPFS
(
    numero_cpf CHAR(11)
);

/* =========================================================
   Definir chaves prim√°rias
   ========================================================= */
ALTER TABLE CLIENTES ADD PRIMARY KEY (id_cliente);

ALTER TABLE CPFS ADD PRIMARY KEY (numero_cpf);

/* =========================================================
    Criar coluna para futura chave estrangeira
   ========================================================= */
-- Relacionamento 1:1 (um cliente possui um CPF)
-- Vamos colocar a FK na tabela CLIENTES

ALTER TABLE CLIENTES   ADD COLUMN numero_cpf CHAR(11);

/* =========================================================
    Criar chave estrangeira
   ========================================================= */

ALTER TABLE CLIENTES ADD CONSTRAINT fk_clientes_cpfs FOREIGN KEY (numero_cpf) EFERENCES CPFS (numero_cpf);

```


------------------------------------------------------------------------

#### Exerc√≠cio #2

![](images/exercicio-02-resposta.svg)<!-- -->

##### Exerc√≠cio 2 - SQL refer√™nte ao diagrama anterior

```SQL
/* =========================================================
   Criar tabelas (sem PK ou FK)
   ========================================================= */
CREATE TABLE CLIENTES 
(
    cpf CHAR(11),
    nome VARCHAR(255)
);

CREATE TABLE PEDIDOS 
(
    cod_pedido INT,
    data DATE,
    valor_total DECIMAL(10,2)
);

/* =========================================================
   Definir chaves prim√°rias
   ========================================================= */

ALTER TABLE CLIENTES  ADD PRIMARY KEY (cpf);

ALTER TABLE PEDIDOS   ADD PRIMARY KEY (cod_pedido);

/* =========================================================
   Criar coluna para futura chave estrangeira
   ========================================================= */
-- Relacionamento CLIENTES 1:N PEDIDOS 

ALTER TABLE PEDIDOS ADD COLUMN cpf_cliente CHAR(11);

/* =========================================================
   Criar chave estrangeira
   ========================================================= */

ALTER TABLE PEDIDOS ADD CONSTRAINT fk_pedidos_clientes  FOREIGN KEY (cpf_cliente) REFERENCES CLIENTES (cpf);


```

------------------------------------------------------------------------

#### Exerc√≠cio #3

![](images/exercicio-03-resposta.svg)<!-- -->

##### Exerc√≠cio 3 - SQL refer√™nte ao diagrama anterior

```SQL
/* =========================================================
   Criar tabelas (sem PK ou FK)
   ========================================================= */

CREATE TABLE ALUNOS 
(
    id_aluno INT,
    nome VARCHAR(255)
);

CREATE TABLE DISCIPLINAS 
(
    id_disciplina INT,
    nome VARCHAR(255)
);

/* Tabela para o relacionamento N:N */

CREATE TABLE MATRICULA 
(
    semestre VARCHAR(10)
);

/* =========================================================
   Definir chaves prim√°rias
   ========================================================= */

ALTER TABLE ALUNOS  ADD PRIMARY KEY (id_aluno);

ALTER TABLE DISCIPLINAS ADD PRIMARY KEY (id_disciplina);

/* A PK da tabela MATRICULA ser√° composta pelas FKs */
-- Definiremos depois de criar as colunas de FK

/* =========================================================
   Criar colunas para futuras chaves estrangeiras (lado N)
   ========================================================= */

ALTER TABLE MATRICULA ADD COLUMN id_aluno INT, ADD COLUMN id_disciplina INT;

/* =========================================================
   Criar chaves estrangeiras
   ========================================================= */

ALTER TABLE MATRICULA ADD CONSTRAINT fk_matricula_aluno FOREIGN KEY (id_aluno) REFERENCES ALUNOS (id_aluno);

ALTER TABLE MATRICULA ADD CONSTRAINT fk_matricula_disciplina FOREIGN KEY (id_disciplina) REFERENCES DISCIPLINAS (id_disciplina);

/* =========================================================
   Definir chave prim√°ria composta da tabela MATRICULA
   ========================================================= */

ALTER TABLE MATRICULA ADD PRIMARY KEY (id_aluno, id_disciplina);

```

------------------------------------------------------------------------

#### Exerc√≠cio #4

![](images/exercicio-04-resposta.svg)<!-- -->

##### Exerc√≠cio 4 - SQL refer√™nte ao diagrama anterior

```SQL
/* =========================================================
   Criar tabelas (sem PK ou FK)
   ========================================================= */
CREATE TABLE FUNCIONARIOS 
(
    id_funcionario INT,
    nome VARCHAR(255),
    cargo VARCHAR(100),
    salario DECIMAL(10,2)
);

CREATE TABLE DEPENDENTES 
(
    id_dependente INT,
    nome VARCHAR(255),
    parentesco VARCHAR(50),
    data_nascimento DATE
);

/* =========================================================
   Definir chaves prim√°rias
   ========================================================= */

ALTER TABLE FUNCIONARIOS ADD PRIMARY KEY (id_funcionario);

ALTER TABLE DEPENDENTES ADD PRIMARY KEY (id_dependente);

/* =========================================================
   Criar coluna para futura chave estrangeira
   ========================================================= */

-- Relacionamento FUNCIONARIOS 1:N DEPENDENTES

ALTER TABLE DEPENDENTES ADD COLUMN id_funcionario INT;

/* =========================================================
   Criar chave estrangeira
   ========================================================= */

ALTER TABLE DEPENDENTES ADD CONSTRAINT fk_dependentes_funcionarios FOREIGN KEY (id_funcionario) REFERENCES FUNCIONARIOS  (id_funcionario);


```

------------------------------------------------------------------------

#### Exerc√≠cio #5

![](images/exercicio-05-resposta.svg)<!-- -->

##### Exerc√≠cio 5 - SQL refer√™nte ao diagrama anterior

```SQL
/* =========================================================
   Criar tabelas (sem PK ou FK)
   ========================================================= */
CREATE TABLE PEDIDOS 
(
    id_pedido INT,
    data_pedido DATE,
    valor_total DECIMAL(10,2),
    status VARCHAR(50)
);

CREATE TABLE ITENS 
(
    id_item INT,
    descricao VARCHAR(255),
    quantidade INT,
    preco_unitario DECIMAL(10,2)
);

/* =========================================================
   Definir chaves prim√°rias
   ========================================================= */
ALTER TABLE PEDIDOS ADD PRIMARY KEY (id_pedido);

ALTER TABLE ITENS ADD PRIMARY KEY (id_item);

/* =========================================================
   Criar coluna para futura chave estrangeira
   ========================================================= */

-- Relacionamento PEDIDOS 1:N ITENS

ALTER TABLE ITENS ADD COLUMN id_pedido INT;

/* =========================================================
   Criar chave estrangeira
   ========================================================= */

ALTER TABLE ITENS ADD CONSTRAINT fk_itens_pedidos FOREIGN KEY (id_pedido) REFERENCES PEDIDOS (id_pedido);


```

------------------------------------------------------------------------

#### Exerc√≠cio #6

![](images/exercicio-06-resposta.svg)<!-- -->

##### Exerc√≠cio 6 - SQL refer√™nte ao diagrama anterior

```SQL
/* =========================================================
   Criar tabelas (sem PK ou FK)
   ========================================================= */
CREATE TABLE MEDICOS 
(
    id_medico INT,
    nome VARCHAR(255),
    especialidade VARCHAR(100),
    crm VARCHAR(20)
);

CREATE TABLE CONSULTAS 
(
    id_consulta INT,
    data_consulta DATE,
    hora TIME,
    observacoes VARCHAR(255)
);

/* =========================================================
   Definir chaves prim√°rias
   ========================================================= */

ALTER TABLE MEDICOS ADD PRIMARY KEY (id_medico);

ALTER TABLE CONSULTAS ADD PRIMARY KEY (id_consulta);

/* =========================================================
   Criar coluna para futura chave estrangeira
   ========================================================= */
-- Relacionamento MEDICOS 1:N CONSULTAS

ALTER TABLE CONSULTAS ADD COLUMN id_medico INT;

/* =========================================================
   Criar chave estrangeira
   ========================================================= */

ALTER TABLE CONSULTAS ADD CONSTRAINT fk_consultas_medicos FOREIGN KEY (id_medico) REFERENCES MEDICOS (id_medico);

```

------------------------------------------------------------------------

#### Exerc√≠cio #7

![](images/exercicio-07-resposta.svg)<!-- -->

##### Exerc√≠cio 7 - SQL refer√™nte ao diagrama anterior

```SQL
/* =========================================================
   Criar tabelas (sem PK ou FK)
   ========================================================= */
CREATE TABLE PROFESSORES 
(
    id_professor INT,
    nome VARCHAR(255),
    titulacao VARCHAR(100),
    email VARCHAR(255)
);

CREATE TABLE DEPARTAMENTOS 
(
    id_departamento INT,
    nome VARCHAR(255),
    localizacao VARCHAR(255),
    telefone VARCHAR(20)
);

/* =========================================================
   Definir chaves prim√°rias
   ========================================================= */
ALTER TABLE PROFESSORES ADD PRIMARY KEY (id_professor);

ALTER TABLE DEPARTAMENTOS ADD PRIMARY KEY (id_departamento);

/* =========================================================
   Criar coluna para futura chave estrangeira
   ========================================================= */
-- Relacionamento 1:1 entre PROFESSORES e DEPARTAMENTOS
-- Aqui vamos colocar a FK em DEPARTAMENTOS, vinculando ao professor respons√°vel

ALTER TABLE DEPARTAMENTOS ADD COLUMN id_professor INT;

/* =========================================================
   Criar chave estrangeira
   ========================================================= */

ALTER TABLE DEPARTAMENTOS ADD CONSTRAINT fk_departamentos_professores FOREIGN KEY (id_professor) REFERENCES PROFESSORES (id_professor);

```

------------------------------------------------------------------------

#### Exerc√≠cio #8

![](images/exercicio-08-resposta.svg)<!-- -->

##### Exerc√≠cio 8 - SQL refer√™nte ao diagrama anterior

```SQL

/* =========================================================
   Criar tabelas (sem PK ou FK)
   ========================================================= */
CREATE TABLE LIVROS 
(
    id_livro INT,
    titulo VARCHAR(255),
    ano_publicacao INT,
    editora VARCHAR(255)
);

CREATE TABLE AUTORES 
(
    id_autor INT,
    nome VARCHAR(255),
    nacionalidade VARCHAR(100)
);

/* Tabela para relacionamento N:N com atributos */

CREATE TABLE ESCREVEM 
(
    data_participacao DATE,
    ordem_autoria INT
);

/* =========================================================
   Definir chaves prim√°rias
   ========================================================= */
ALTER TABLE LIVROS ADD PRIMARY KEY (id_livro);

ALTER TABLE AUTORES ADD PRIMARY KEY (id_autor);

/* =========================================================
   Criar colunas para futuras chaves estrangeiras
   ========================================================= */

ALTER TABLE ESCREVEM ADD COLUMN id_livro INT, ADD COLUMN id_autor INT;

/* =========================================================
   Criar chaves estrangeiras
   =====================================

ALTER TABLE ESCREVEM ADD CONSTRAINT fk_escrevem_livros   FOREIGN KEY (id_livro) REFERENCES LIVROS (id_livro);

ALTER TABLE ESCREVEM ADD CONSTRAINT fk_escrevem_autores  FOREIGN KEY (id_autor) REFERENCES AUTORES (id_autor);

/* =========================================================
   Definir chave prim√°ria composta da tabela ESCREVEM
   ========================================================= */

ALTER TABLE ESCREVEM  ADD PRIMARY KEY (id_livro, id_autor);

```

------------------------------------------------------------------------

#### Exerc√≠cio #9

![](images/exercicio-09-resposta.svg)<!-- -->

##### Exerc√≠cio 9 - SQL refer√™nte ao diagrama anterior

```SQL
/* =========================================================
   Criar tabelas (sem PK ou FK)
   ========================================================= */

CREATE TABLE LIVROS 
(
    id_livro INT,
    titulo VARCHAR(255),
    ano INT
);

CREATE TABLE EXEMPLARES 
(
    codigo_exemplar INT,
    status VARCHAR(50)
);

/* =========================================================
   Definir chaves prim√°rias
   ========================================================= */

ALTER TABLE LIVROS ADD PRIMARY KEY (id_livro);

/* A chave prim√°ria de EXEMPLARES ser√° composta depois, usando FK + codigo_exemplar */

/* =========================================================
   Criar coluna para futura chave estrangeira
   ========================================================= */
-- Relacionamento LIVROS 1:N EXEMPLARES

ALTER TABLE EXEMPLARES ADD COLUMN id_livro INT;

/* =========================================================
   Criar chave estrangeira
   ========================================================= */

ALTER TABLE EXEMPLARES ADD CONSTRAINT fk_exemplares_livros FOREIGN KEY (id_livro) REFERENCES LIVROS (id_livro);

/* =========================================================
   Definir chave prim√°ria composta da tabela EXEMPLARES
   ========================================================= */

ALTER TABLE EXEMPLARES ADD PRIMARY KEY (id_livro, codigo_exemplar);


```

------------------------------------------------------------------------

#### Exerc√≠cio #10

![](images/exercicio-10-resposta.svg)<!-- -->

##### Exerc√≠cio 10 - SQL refer√™nte ao diagrama anterior

```SQL
/* =========================================================
   Criar tabelas (sem PK ou FK)
   ========================================================= */
CREATE TABLE EMPRESAS (
    id_empresa INT,
    nome VARCHAR(255),
    cnpj CHAR(14),
    endereco VARCHAR(255)
);

CREATE TABLE FUNCIONARIOS (
    id_funcionario INT,
    nome VARCHAR(255),
    cargo VARCHAR(100),
    salario DECIMAL(10,2)
);

CREATE TABLE PROJETOS (
    id_projeto INT,
    nome VARCHAR(255),
    data_inicio DATE,
    data_fim DATE,
    descricao VARCHAR(255)
);

CREATE TABLE PARTICIPAM (
    data_inicio DATE,
    data_fim DATE,
    papel VARCHAR(100)
);

/* =========================================================
   Definir chaves prim√°rias
   ========================================================= */
ALTER TABLE EMPRESAS ADD PRIMARY KEY (id_empresa);

ALTER TABLE FUNCIONARIOS ADD PRIMARY KEY (id_funcionario);

ALTER TABLE PROJETOS ADD PRIMARY KEY (id_projeto);

/* A tabela PARTICIPAM ter√° PK composta, definida depois */

/* =========================================================
   Criar colunas para futuras chaves estrangeiras
   ========================================================= */
-- Relacionamento EMPRESAS 1:N FUNCIONARIOS

ALTER TABLE FUNCIONARIOS  ADD COLUMN id_empresa INT;

-- Relacionamento FUNCIONARIOS N:N PROJETOS
ALTER TABLE PARTICIPAM ADD COLUMN id_funcionario INT, ADD COLUMN id_projeto INT;

/* =========================================================
   Criar chaves estrangeiras
   ========================================================= */
ALTER TABLE FUNCIONARIOS ADD CONSTRAINT fk_funcionarios_empresas FOREIGN KEY (id_empresa) REFERENCES EMPRESAS (id_empresa);

ALTER TABLE PARTICIPAM ADD CONSTRAINT fk_participam_funcionarios FOREIGN KEY (id_funcionario) REFERENCES FUNCIONARIOS (id_funcionario);

ALTER TABLE PARTICIPAM ADD CONSTRAINT fk_participam_projetos FOREIGN KEY (id_projeto) REFERENCES PROJETOS (id_projeto);

/* =========================================================
   Definir chave prim√°ria composta da tabela PARTICIPAM
   ========================================================= */

ALTER TABLE PARTICIPAM ADD PRIMARY KEY (id_funcionario, id_projeto);


```

------------------------------------------------------------------------





<!--chapter:end:03-2026-03-03_Modelagem_SGBD-exercicio.Rmd-->

# Administra√ß√£o e Gerenciamento de Bancos de Dados

#### 25/08/2025 {.unnumbered}

#### Professor Migu√©l Suares {.unnumbered}

## Administra√ß√£o e Gerenciamento de Banco de Dados:

Por que administra√ß√£o e gerenciamento s√£o fundamentais

-   Integridade e consist√™ncia

-   Garantir que as regras de neg√≥cio (restri√ß√µes, chaves, relacionamentos) sejam sempre respeitadas.

-   Evitar dados duplicados ou incoerentes.

-   Disponibilidade e recupera√ß√£o

-   Planejar backup e restore; criar pol√≠ticas de alta disponibilidade e conting√™ncia para falhas ou desastres.

-   Seguran√ßa e controle de acesso

-   Definir quem pode ver, inserir, alterar ou excluir dados.

-   Atender requisitos de LGPD/privacidade e normas corporativas.

-   Desempenho e escalabilidade

-   Monitorar consultas lentas, criar √≠ndices adequados, ajustar par√¢metros do SGBD para suportar crescimento do volume de dados.

-   Manuten√ß√£o e evolu√ß√£o

-   Atualizar vers√µes, aplicar patches, revisar modelos de dados √† medida que a aplica√ß√£o muda.

## Papel do DBA (Database Administrator)

O DBA √© o profissional respons√°vel por orquestrar tudo isso.Principais atribui√ß√µes:

-   Projeto f√≠sico do banco (estrutura de tabelas, √≠ndices, parti√ß√µes).

-   Gest√£o de usu√°rios e permiss√µes ‚Äì cria√ß√£o de contas, pap√©is (roles), pol√≠ticas de seguran√ßa.

-   Backup e recupera√ß√£o ‚Äì pol√≠ticas de backup, testes de restaura√ß√£o.

-   Monitoramento de desempenho ‚Äì tuning de consultas, manuten√ß√£o de √≠ndices, an√°lise de logs.

-   Planejamento de capacidade ‚Äì prever crescimento, escalabilidade e uso de recursos.

-   Atualiza√ß√µes e patches ‚Äì manter o SGBD seguro e est√°vel.

Sem administra√ß√£o e gerenciamento adequados, um banco de dados vira um ‚Äúdep√≥sito de riscos‚Äù: falhas, lentid√£o, vazamento de informa√ß√µes ou perda definitiva de dados. O DBA atua como guardi√£o da informa√ß√£o, garantindo que ela esteja correta, segura, dispon√≠vel e perform√°tica, sustentando todas as opera√ß√µes da organiza√ß√£o.

## Usu√°rios, Grupos e Esquemas de Bancos de Dados

### Usu√°rios

O que s√£o ? Contas individuais que representam pessoas, aplica√ß√µes ou servi√ßos que acessam o banco.Cada usu√°rio possui um nome de login e, geralmente, uma senha ou outro m√©todo de autentica√ß√£o.

#### Fun√ß√µes principal

-   Conectar-se ao SGBD.

-   Executar opera√ß√µes de leitura, escrita ou administra√ß√£o conforme os privil√©gios concedidos.

#### Privil√©gios:

Podem ser espec√≠ficos (ex.: SELECT em uma tabela) ou globais (ex.: CREATE DATABASE).

S√£o a base do controle de acesso.

### Esquemas

O que s√£o ? Um esquema √© um container l√≥gico de objetos do banco de dados. Ele organiza tabelas, views, fun√ß√µes, procedures, √≠ndices, triggers etc.

#### Por que usar

-   Facilita a organiza√ß√£o (por projeto, por aplica√ß√£o, por departamento).

-   Permite gest√£o de permiss√µes mais granular: voc√™ pode conceder privil√©gios em n√≠vel de esquema.

-   Evita conflitos de nomes, pois objetos com o mesmo nome podem existir em esquemas diferentes.

### Grupos ou Roles

O que s√£o ? Pap√©is coletivos que agrupam permiss√µes e, muitas vezes, usu√°rios.

No MySQL: CREATE ROLE ...

No PostgreSQL: roles podem ser usu√°rios ou grupos.

#### Vantagens

-   Gerenciamento simplificado: conceda privil√©gios ao grupo e depois apenas adicione/remova usu√°rios.

-   Consist√™ncia: garante que todos de uma equipe tenham as mesmas permiss√µes.

-   Escalabilidade: ao entrar um novo membro, basta associ√°-lo ao role, sem revisar dezenas de tabelas.

### Sistema de Gerenciamento de Banco de Dados (S.G.B.D.)

O Sistema de Gerenciamento de Banco de Dados cuida n√£o s√≥ de como as informa√ß√µes s√£o armazenadas, mas tamb√©m quem pode acessa-las, sob quais condi√ß√µes.

![](images/clipboard-497127793.png)

### Cria√ß√£o de usu√°rios no MySQL

Podemos criar um novo usu√°rio no SGBD MySQL atrav√©s do seguinte comando SQL-DCL:

``` sql
CREATE USER 'nome_login'@'host' IDENTIFIED BY 'senha' COMMENT 'descri√ß√£o';
```

| Parte | Fun√ß√£o |
|:--:|:--:|
| 'nome_login' | Nome de login do novo usu√°rio. |
| 'host' | Origem permitida de conex√£o. |
| IDENTIFIED BY 'senha' | Define a senha inicial. |
| COMMENT 'descri√ß√£o' | (Opcional) Uma anota√ß√£o de texto para identificar o usu√°rio. |

Exemplo 1:

Crie o usu√°rio do aluno "Bruno Marques". O usu√°rio deve ser o RA do aluno e a sua senha deve ser *unip*.

``` sql
CREATE USER 'f362bf0'@'%' IDENTIFIED BY 'unip' COMMENT 'Bruno Antonio Marques';
```

Exemplo 2:

Crie os usu√°rios de todos os alunos da sala. O usu√°rio deve ser o RA do aluno e a sua senha deve ser *unip*.

``` sql

-- turma TI2P40

-- usu√°rios no MySQL

DROP USER IF EXISTS 'f362bf0'@'%'; -- apaga o 'Bruno Antonio Marques';
DROP USER IF EXISTS 'r536fa6'@'%'; -- apaga o 'Caio Cesar Balbino Da Silva';
DROP USER IF EXISTS 'h756960'@'%'; -- apaga o 'Heder Rodrigues Da Silva';
DROP USER IF EXISTS 'r8133g7'@'%'; -- apaga o '√çtalo Kevin Rodrigues Da Silva';
DROP USER IF EXISTS 'r837aa0'@'%'; -- apaga o 'Lucas Souza Rodrigues';
DROP USER IF EXISTS 'h714419'@'%'; -- apaga o 'Marcos Paulo Cordeiro Goes';
DROP USER IF EXISTS 'r854124'@'%'; -- apaga o 'Ramon Borges De Holanda';


CREATE USER 'f362bf0'@'%' IDENTIFIED BY 'unip' COMMENT  'Bruno Antonio Marques';
CREATE USER 'r536fa6'@'%' IDENTIFIED BY 'unip' COMMENT  'Caio Cesar Balbino Da Silva';
CREATE USER 'h756960'@'%' IDENTIFIED BY 'unip' COMMENT  'Heder Rodrigues Da Silva';
CREATE USER 'r8133g7'@'%' IDENTIFIED BY 'unip' COMMENT  '√çtalo Kevin Rodrigues Da Silva';
CREATE USER 'r837aa0'@'%' IDENTIFIED BY 'unip' COMMENT  'Lucas Souza Rodrigues';
CREATE USER 'h714419'@'%' IDENTIFIED BY 'unip' COMMENT  'Marcos Paulo Cordeiro Goes';
CREATE USER 'r854124'@'%' IDENTIFIED BY 'unip' COMMENT  'Ramon Borges De Holanda';

-- turma TI1P40

DROP USER IF EXISTS 'n0296a6'@'%'; -- apaga o 'Bryan Lucena Barbosa Da Silva';
DROP USER IF EXISTS 'h788986'@'%'; -- apaga o 'Igor Soares Lima Da Cunha';
DROP USER IF EXISTS 'h77gii5'@'%'; -- apaga o 'Jessica Cristina De S Silva';
DROP USER IF EXISTS 'f3648i0'@'%'; -- apaga o 'Maysa Kelly Dos Santos Freitas';


CREATE USER 'n0296a6'@'%' IDENTIFIED BY 'unip' COMMENT  'Bryan Lucena Barbosa Da Silva';
CREATE USER 'h788986'@'%' IDENTIFIED BY 'unip' COMMENT  'Igor Soares Lima Da Cunha';
CREATE USER 'h77gii5'@'%' IDENTIFIED BY 'unip' COMMENT  'Jessica Cristina De S Silva';
CREATE USER 'f3648i0'@'%' IDENTIFIED BY 'unip' COMMENT  'Maysa Kelly Dos Santos Freitas';
```

### Cria√ß√£o de Esquemas de Banco de Dados no MySQL

No MySQL, schema e database s√£o sin√¥nimos. √â o ‚Äúcont√™iner‚Äù onde ficam tabelas, views, procedures, usu√°rios com permiss√µes etc.

``` sql
CREATE DATABASE [IF NOT EXISTS] nome_do_schema  [OPTIONS];
```

| CREATE DATABASE: cria um novo banco.                          |
|---------------------------------------------------------------|
| IF NOT EXISTS: evita erro caso o schema j√° exista.            |
| nome_do_schema: nome do banco.                                |
| [OPTIONS]: par√¢metros opcionais como CHARACTER SET ou COLLATE |

Exemplo 1:

Crie um esquema de Banco de Dados onde chamado 11-rondonia para guardar a tabela "Cidades";

``` sql
CREATE DATABASE IF NOT EXISTS `11-rondonia`;
```

Exemplo 2:

Crie um esquema de Banco de Dados de todas as Unidades da Federa√ß√£o para guardar tabelas "Cidades" dentro de cada uma:

``` sql
-- Script para criar um esquema (database) para cada UF brasileira
-- Nome do esquema: <c√≥digo IBGE>-<nome_uf>
-- Ordenado pelo c√≥digo IBGE
-- Compat√≠vel com MySQL 8

CREATE DATABASE IF NOT EXISTS `11-rondonia`;
CREATE DATABASE IF NOT EXISTS `12-acre`;
CREATE DATABASE IF NOT EXISTS `13-amazonas`;
CREATE DATABASE IF NOT EXISTS `14-roraima`;
CREATE DATABASE IF NOT EXISTS `15-para`;
CREATE DATABASE IF NOT EXISTS `16-amapa`;
CREATE DATABASE IF NOT EXISTS `17-tocantins`;
CREATE DATABASE IF NOT EXISTS `21-maranhao`;
CREATE DATABASE IF NOT EXISTS `22-piaui`;
CREATE DATABASE IF NOT EXISTS `23-ceara`;
CREATE DATABASE IF NOT EXISTS `24-rio_grande_do_norte`;
CREATE DATABASE IF NOT EXISTS `25-paraiba`;
CREATE DATABASE IF NOT EXISTS `26-pernambuco`;
CREATE DATABASE IF NOT EXISTS `27-alagoas`;
CREATE DATABASE IF NOT EXISTS `28-sergipe`;
CREATE DATABASE IF NOT EXISTS `29-bahia`;
CREATE DATABASE IF NOT EXISTS `31-minas_gerais`;
CREATE DATABASE IF NOT EXISTS `32-espiritosanto`;
CREATE DATABASE IF NOT EXISTS `33-rio_de_janeiro`;
CREATE DATABASE IF NOT EXISTS `35-sao_paulo`;
CREATE DATABASE IF NOT EXISTS `41-parana`;
CREATE DATABASE IF NOT EXISTS `42-santa_catarina`;
CREATE DATABASE IF NOT EXISTS `43-rio_grande_do_sul`;
CREATE DATABASE IF NOT EXISTS `50-mato_grosso_do_sul`;
CREATE DATABASE IF NOT EXISTS `51-mato_grosso`;
CREATE DATABASE IF NOT EXISTS `52-goias`;
CREATE DATABASE IF NOT EXISTS `53-distrito_federal`;
```

### Criando de Grupos de Permiss√µes no MySQL:

No MySQL, roles (fun√ß√µes ou pap√©is) s√£o grupos de permiss√µes que voc√™ define uma vez e pode atribuir a v√°rios usu√°rios. Eles funcionam como ‚Äúgrupos de acesso‚Äù, facilitando o gerenciamento de privil√©gios. Em vez de conceder privil√©gios individualmente a cada usu√°rio, voc√™ define tudo no role. Se precisar incluir um novo privil√©gio (ex.: UPDATE) para todos que j√° t√™m o role, basta atualizar o role uma vez.

Como criar uma regra no MySQL utilizando SQL-DCL

``` sql
CREATE ROLE 'nome_grupo';
```

onde, obviamente, *nome_grupo* √© o nome do grupo a ser criado.

Exemplo 1:

Crie um grupo chamado *norte* para associar todas as unidades da federa√ß√£o da regi√£o norte do Brasil:

``` sql
CREATE ROLE 'norte';
```

Exemplo 2:

Crie um grupos para associar todas as unidades da federa√ß√£o de todas as regi√µes do Brasil:

``` sql
-- ===========================================
-- Cria√ß√£o de roles para as 5 regi√µes do Brasil
-- ===========================================

CREATE ROLE 'norte';
CREATE ROLE 'nordeste';
CREATE ROLE 'centro_oeste';
CREATE ROLE 'sudeste';
CREATE ROLE 'sul';

-- ===========================================
/*
Concedendo privil√©gios de leitura (SELECT) a cada grupo criado
*/
-- ===========================================

GRANT SELECT ON *.* TO 'norte';
GRANT SELECT ON *.* TO 'nordeste';
GRANT SELECT ON *.* TO 'centro_oeste';
GRANT SELECT ON *.* TO 'sudeste';
GRANT SELECT ON *.* TO 'sul';

-- ===========================================
-- Para atribuir um role a um usu√°rio:
-- ===========================================
-- GRANT 'norte' TO 'usuario_exemplo'@'%';
-- SET DEFAULT ROLE 'norte' TO 'usuario_exemplo'@'%';
```

## Fazendo tudo funcionar: Colocando usu√°rios em grupos e concedendo a estes acesso a Esquemas de Banco de Dados:

### Associando os esquemas que representam cada estado a cada grupo (que representa cada regi√ß√£o):

``` sql
-- ================================================
-- Associa√ß√£o dos esquemas (databases) aos roles
-- Roles criadas previamente:
--   norte, nordeste, centro_oeste, sudeste, sul
-- ================================================

-- >>>>> REGI√ÉO NORTE >>>>>>>>>>>>>>

GRANT ALL PRIVILEGES ON `11-rondonia`.*       TO 'norte';
GRANT ALL PRIVILEGES ON `12-acre`.*           TO 'norte';
GRANT ALL PRIVILEGES ON `13-amazonas`.*       TO 'norte';
GRANT ALL PRIVILEGES ON `14-roraima`.*        TO 'norte';
GRANT ALL PRIVILEGES ON `15-para`.*           TO 'norte';
GRANT ALL PRIVILEGES ON `16-amapa`.*          TO 'norte';
GRANT ALL PRIVILEGES ON `17-tocantins`.*      TO 'norte';

-- >>>>> REGI√ÉO NORDESTE >>>>>>>>>>>>>>

GRANT ALL PRIVILEGES ON `21-maranhao`.*            TO 'nordeste';
GRANT ALL PRIVILEGES ON `22-piaui`.*               TO 'nordeste';
GRANT ALL PRIVILEGES ON `23-ceara`.*               TO 'nordeste';
GRANT ALL PRIVILEGES ON `24-rio_grande_do_norte`.* TO 'nordeste';
GRANT ALL PRIVILEGES ON `25-paraiba`.*             TO 'nordeste';
GRANT ALL PRIVILEGES ON `26-pernambuco`.*          TO 'nordeste';
GRANT ALL PRIVILEGES ON `27-alagoas`.*             TO 'nordeste';
GRANT ALL PRIVILEGES ON `28-sergipe`.*             TO 'nordeste';
GRANT ALL PRIVILEGES ON `29-bahia`.*               TO 'nordeste';

-- >>>>> REGI√ÉO CENTRO_OESTE >>>>>>>>>>>>>>

GRANT ALL PRIVILEGES ON `50-mato_grosso_do_sul`.* TO 'centro_oeste';
GRANT ALL PRIVILEGES ON `51-mato_grosso`.*       TO 'centro_oeste';
GRANT ALL PRIVILEGES ON `52-goias`.*             TO 'centro_oeste';
GRANT ALL PRIVILEGES ON `53-distrito_federal`.*  TO 'centro_oeste';

-- >>>>> REGI√ÉO SUDESTE >>>>>>>>>>>>>>

GRANT ALL PRIVILEGES ON `31-minas_gerais`.*   TO 'sudeste';
GRANT ALL PRIVILEGES ON `32-espiritosanto`.*  TO 'sudeste';
GRANT ALL PRIVILEGES ON `33-rio_de_janeiro`.* TO 'sudeste';
GRANT ALL PRIVILEGES ON `35-sao_paulo`.*      TO 'sudeste';

-- >>>>> REGI√ÉO SUL >>>>>>>>>>>>>>

GRANT ALL PRIVILEGES ON `41-parana`.*            TO 'sul';
GRANT ALL PRIVILEGES ON `42-santa_catarina`.*    TO 'sul';
GRANT ALL PRIVILEGES ON `43-rio_grande_do_sul`.* TO 'sul';
```

### Associando associando alunos a cada grupo (regi√£o):

| Role (grupo) |     Usu√°rios (login)      |
|:------------:|:-------------------------:|
|    norte     |     f362bf0, r536fa6      |
|   nordeste   |     h756960, r8133g7      |
| centro_oeste |     r837aa0, h714419      |
|   sudeste    |     r854124, n0296a6      |
|     sul      | h788986, h77gii5, f3648i0 |

#### Regi√£o Norte

![](images/aula_04-Exemplo-01-grupos-01.svg)<!-- -->

![](images/aula_04-Exemplo-01-grupos-02.svg)<!-- -->

![](images/aula_04-Exemplo-01-grupos-03.svg)<!-- -->

![](images/aula_04-Exemplo-01-grupos-04.svg)<!-- -->

#### Regi√£o Nordeste

![](images/aula_04-Exemplo-01-grupos-05.svg)<!-- -->

![](images/aula_04-Exemplo-01-grupos-06.svg)<!-- -->

![](images/aula_04-Exemplo-01-grupos-07.svg)<!-- -->

![](images/aula_04-Exemplo-01-grupos-08.svg)<!-- -->

![](images/aula_04-Exemplo-01-grupos-09.svg)<!-- -->

#### Regi√£o Centro-Oeste

![](images/aula_04-Exemplo-01-grupos-10.svg)<!-- -->

![](images/aula_04-Exemplo-01-grupos-11.svg)<!-- -->

#### Regi√£o Sudeste

![](images/aula_04-Exemplo-01-grupos-12.svg)<!-- -->

![](images/aula_04-Exemplo-01-grupos-13.svg)<!-- -->

#### Regi√£o Sul

![](images/aula_04-Exemplo-01-grupos-15.svg)<!-- -->

![](images/aula_04-Exemplo-01-grupos-16.svg)<!-- -->

### Associando usu√°rios aos grupos

``` sql
-- =========================================
-- Associa√ß√£o de usu√°rios aos roles (grupos)
-- =========================================

-- Grupo Norte
GRANT 'norte' TO 'f362bf0'@'%';
GRANT 'norte' TO 'r536fa6'@'%';

-- Grupo Nordeste
GRANT 'nordeste' TO 'h756960'@'%';
GRANT 'nordeste' TO 'r8133g7'@'%';

-- Grupo Centro-Oeste
GRANT 'centro_oeste' TO 'r837aa0'@'%';
GRANT 'centro_oeste' TO 'h714419'@'%';

-- Grupo Sudeste
GRANT 'sudeste' TO 'r854124'@'%';
GRANT 'sudeste' TO 'n0296a6'@'%';

-- Grupo Sul
GRANT 'sul' TO 'h788986'@'%';
GRANT 'sul' TO 'h77gii5'@'%';
GRANT 'sul' TO 'f3648i0'@'%';

-- (Opcional) Definir cada role como padr√£o para o usu√°rio
SET DEFAULT ROLE ALL TO
    'f362bf0'@'%',
    'r536fa6'@'%',
    'h756960'@'%',
    'r8133g7'@'%',
    'r837aa0'@'%',
    'h714419'@'%',
    'r854124'@'%',
    'n0296a6'@'%',
    'h788986'@'%',
    'h77gii5'@'%',
    'f3648i0'@'%';
```

### Concedendo privil√©gios aos grupos:

``` sql
-- ============================================
-- NORTE l√™ os demais grupos (Nordeste, Centro-Oeste, Sudeste, Sul)
-- ============================================
GRANT SELECT ON `21-maranhao`.*            TO 'norte';
GRANT SELECT ON `22-piaui`.*               TO 'norte';
GRANT SELECT ON `23-ceara`.*               TO 'norte';
GRANT SELECT ON `24-rio_grande_do_norte`.* TO 'norte';
GRANT SELECT ON `25-paraiba`.*             TO 'norte';
GRANT SELECT ON `26-pernambuco`.*          TO 'norte';
GRANT SELECT ON `27-alagoas`.*             TO 'norte';
GRANT SELECT ON `28-sergipe`.*             TO 'norte';
GRANT SELECT ON `29-bahia`.*               TO 'norte';
GRANT SELECT ON `50-mato_grosso_do_sul`.*  TO 'norte';
GRANT SELECT ON `51-mato_grosso`.*        TO 'norte';
GRANT SELECT ON `52-goias`.*              TO 'norte';
GRANT SELECT ON `53-distrito_federal`.*   TO 'norte';
GRANT SELECT ON `31-minas_gerais`.*       TO 'norte';
GRANT SELECT ON `32-espiritosanto`.*      TO 'norte';
GRANT SELECT ON `33-rio_de_janeiro`.*     TO 'norte';
GRANT SELECT ON `35-sao_paulo`.*          TO 'norte';
GRANT SELECT ON `41-parana`.*             TO 'norte';
GRANT SELECT ON `42-santa_catarina`.*     TO 'norte';
GRANT SELECT ON `43-rio_grande_do_sul`.*  TO 'norte';

-- ============================================
-- NORDESTE l√™ os demais grupos (Norte, Centro-Oeste, Sudeste, Sul)
-- ============================================
GRANT SELECT ON `11-rondonia`.*           TO 'nordeste';
GRANT SELECT ON `12-acre`.*               TO 'nordeste';
GRANT SELECT ON `13-amazonas`.*           TO 'nordeste';
GRANT SELECT ON `14-roraima`.*            TO 'nordeste';
GRANT SELECT ON `15-para`.*               TO 'nordeste';
GRANT SELECT ON `16-amapa`.*              TO 'nordeste';
GRANT SELECT ON `17-tocantins`.*          TO 'nordeste';
GRANT SELECT ON `50-mato_grosso_do_sul`.* TO 'nordeste';
GRANT SELECT ON `51-mato_grosso`.*       TO 'nordeste';
GRANT SELECT ON `52-goias`.*             TO 'nordeste';
GRANT SELECT ON `53-distrito_federal`.*  TO 'nordeste';
GRANT SELECT ON `31-minas_gerais`.*      TO 'nordeste';
GRANT SELECT ON `32-espiritosanto`.*     TO 'nordeste';
GRANT SELECT ON `33-rio_de_janeiro`.*    TO 'nordeste';
GRANT SELECT ON `35-sao_paulo`.*         TO 'nordeste';
GRANT SELECT ON `41-parana`.*            TO 'nordeste';
GRANT SELECT ON `42-santa_catarina`.*    TO 'nordeste';
GRANT SELECT ON `43-rio_grande_do_sul`.* TO 'nordeste';

-- ============================================
-- CENTRO-OESTE l√™ os demais grupos (Norte, Nordeste, Sudeste, Sul)
-- ============================================
GRANT SELECT ON `11-rondonia`.*           TO 'centro_oeste';
GRANT SELECT ON `12-acre`.*               TO 'centro_oeste';
GRANT SELECT ON `13-amazonas`.*           TO 'centro_oeste';
GRANT SELECT ON `14-roraima`.*            TO 'centro_oeste';
GRANT SELECT ON `15-para`.*               TO 'centro_oeste';
GRANT SELECT ON `16-amapa`.*              TO 'centro_oeste';
GRANT SELECT ON `17-tocantins`.*          TO 'centro_oeste';
GRANT SELECT ON `21-maranhao`.*           TO 'centro_oeste';
GRANT SELECT ON `22-piaui`.*              TO 'centro_oeste';
GRANT SELECT ON `23-ceara`.*              TO 'centro_oeste';
GRANT SELECT ON `24-rio_grande_do_norte`.* TO 'centro_oeste';
GRANT SELECT ON `25-paraiba`.*            TO 'centro_oeste';
GRANT SELECT ON `26-pernambuco`.*         TO 'centro_oeste';
GRANT SELECT ON `27-alagoas`.*            TO 'centro_oeste';
GRANT SELECT ON `28-sergipe`.*            TO 'centro_oeste';
GRANT SELECT ON `29-bahia`.*              TO 'centro_oeste';
GRANT SELECT ON `31-minas_gerais`.*       TO 'centro_oeste';
GRANT SELECT ON `32-espiritosanto`.*      TO 'centro_oeste';
GRANT SELECT ON `33-rio_de_janeiro`.*     TO 'centro_oeste';
GRANT SELECT ON `35-sao_paulo`.*          TO 'centro_oeste';
GRANT SELECT ON `41-parana`.*             TO 'centro_oeste';
GRANT SELECT ON `42-santa_catarina`.*     TO 'centro_oeste';
GRANT SELECT ON `43-rio_grande_do_sul`.*  TO 'centro_oeste';

-- ============================================
-- SUDESTE l√™ os demais grupos (Norte, Nordeste, Centro-Oeste, Sul)
-- ============================================
GRANT SELECT ON `11-rondonia`.*           TO 'sudeste';
GRANT SELECT ON `12-acre`.*               TO 'sudeste';
GRANT SELECT ON `13-amazonas`.*           TO 'sudeste';
GRANT SELECT ON `14-roraima`.*            TO 'sudeste';
GRANT SELECT ON `15-para`.*               TO 'sudeste';
GRANT SELECT ON `16-amapa`.*              TO 'sudeste';
GRANT SELECT ON `17-tocantins`.*          TO 'sudeste';
GRANT SELECT ON `21-maranhao`.*           TO 'sudeste';
GRANT SELECT ON `22-piaui`.*              TO 'sudeste';
GRANT SELECT ON `23-ceara`.*              TO 'sudeste';
GRANT SELECT ON `24-rio_grande_do_norte`.* TO 'sudeste';
GRANT SELECT ON `25-paraiba`.*            TO 'sudeste';
GRANT SELECT ON `26-pernambuco`.*         TO 'sudeste';
GRANT SELECT ON `27-alagoas`.*            TO 'sudeste';
GRANT SELECT ON `28-sergipe`.*            TO 'sudeste';
GRANT SELECT ON `29-bahia`.*              TO 'sudeste';
GRANT SELECT ON `50-mato_grosso_do_sul`.* TO 'sudeste';
GRANT SELECT ON `51-mato_grosso`.*       TO 'sudeste';
GRANT SELECT ON `52-goias`.*             TO 'sudeste';
GRANT SELECT ON `53-distrito_federal`.*  TO 'sudeste';
GRANT SELECT ON `41-parana`.*            TO 'sudeste';
GRANT SELECT ON `42-santa_catarina`.*    TO 'sudeste';
GRANT SELECT ON `43-rio_grande_do_sul`.* TO 'sudeste';

-- ============================================
-- SUL l√™ os demais grupos (Norte, Nordeste, Centro-Oeste, Sudeste)
-- ============================================
GRANT SELECT ON `11-rondonia`.*           TO 'sul';
GRANT SELECT ON `12-acre`.*               TO 'sul';
GRANT SELECT ON `13-amazonas`.*           TO 'sul';
GRANT SELECT ON `14-roraima`.*            TO 'sul';
GRANT SELECT ON `15-para`.*               TO 'sul';
GRANT SELECT ON `16-amapa`.*              TO 'sul';
GRANT SELECT ON `17-tocantins`.*          TO 'sul';
GRANT SELECT ON `21-maranhao`.*           TO 'sul';
GRANT SELECT ON `22-piaui`.*              TO 'sul';
GRANT SELECT ON `23-ceara`.*              TO 'sul';
GRANT SELECT ON `24-rio_grande_do_norte`.* TO 'sul';
GRANT SELECT ON `25-paraiba`.*            TO 'sul';
GRANT SELECT ON `26-pernambuco`.*         TO 'sul';
GRANT SELECT ON `27-alagoas`.*            TO 'sul';
GRANT SELECT ON `28-sergipe`.*            TO 'sul';
GRANT SELECT ON `29-bahia`.*              TO 'sul';
GRANT SELECT ON `50-mato_grosso_do_sul`.* TO 'sul';
GRANT SELECT ON `51-mato_grosso`.*       TO 'sul';
GRANT SELECT ON `52-goias`.*             TO 'sul';
GRANT SELECT ON `53-distrito_federal`.*  TO 'sul';
GRANT SELECT ON `31-minas_gerais`.*      TO 'sul';
GRANT SELECT ON `32-espiritosanto`.*     TO 'sul';
GRANT SELECT ON `33-rio_de_janeiro`.*    TO 'sul';
GRANT SELECT ON `35-sao_paulo`.*         TO 'sul';
```

### Exemplo no MySQL

Exemplo 01

Considere o cen√°rio: um administrador de banco de dados ir√° criar uma tabela chamada **clientes** com cpf, nome e data_nascimento. Essa tabela dever√° ficar no esquema **compras** e ser√° acessada com **todos os privil√©gios** pelo usu√°rio **aluno**. Considere que nosso SGBD √© o MySQL 9. fa√ßa passo-a-passo os c√≥digos SQL para que o ambiente descrito seja gerado.

#### Passo 1 - Criar o esquema de Banco de Dados "compras"

``` sql
CREATE DATABASE IF NOT EXISTS compras
  DEFAULT CHARACTER SET utf8mb4
  DEFAULT COLLATE utf8mb4_0900_ai_ci;
```

#### Passo 2 - Criar o usu√°rio "aluno"

``` sql
-- Apenas local:
CREATE USER IF NOT EXISTS 'aluno'@'localhost' IDENTIFIED BY 'TroqueEstaSenha!2025';

-- (Opcional) Acesso pela rede/WAN:
CREATE USER IF NOT EXISTS 'aluno'@'%' IDENTIFIED BY 'TroqueEstaSenha!2025';
```

#### Passo 2 - Conceder ao usu√°rio "aluno" privil√©gios sobre todas os objetos (tabelas, views, gatilhos, √≠ndices) do esquema "compras"

``` sql
-- Para acesso local:
GRANT ALL PRIVILEGES ON compras.* TO 'aluno'@'localhost';

-- (Opcional) Para acesso via rede:
GRANT ALL PRIVILEGES ON compras.* TO 'aluno'@'%';

-- Tornar os privil√©gios efetivos (costume; no MySQL moderno aplica na hora):
FLUSH PRIVILEGES;
```

#### Passo 3 - Criar a tabela "clientes" dentro do esquema "compras"

``` sql
USE compras;

CREATE TABLE IF NOT EXISTS clientes (
  cpf            CHAR(11)     NOT NULL,
  nome           VARCHAR(120) NOT NULL,
  data_nascimento DATE        NOT NULL,
  CONSTRAINT pk_clientes PRIMARY KEY (cpf)
) ENGINE=InnoDB;
```

### Exemplo no PostGreSQL

Exemplo 03

Considere o cen√°rio: um administrador de banco de dados ir√° criar uma tabela chamada **clientes** com cpf, nome e data_nascimento. Essa tabela dever√° ficar no esquema **compras** e ser√° acessada com **todos os privil√©gios** pelo usu√°rio **aluno**. Considere que nosso SGBD √© o Postgresql 15. fa√ßa passo-a-passo os c√≥digos SQL para que o ambiente descrito seja gerado.

#### Passo 0 - Crie um Banco de Dados "sistema_compras"

``` sql
CREATE DATABASE sistema_compras
    WITH OWNER = postgres
    ENCODING = 'UTF8'
    LC_COLLATE = 'pt_BR.UTF-8'
    LC_CTYPE = 'pt_BR.UTF-8'
    TEMPLATE = template0;
```

#### Passo 1 - Criar o esquema de Banco de Dados "compras"

``` sql
CREATE SCHEMA IF NOT EXISTS compras AUTHORIZATION postgres;
```

#### Passo 2 - Criar o usu√°rio "aluno"

``` sql
CREATE ROLE aluno WITH
    LOGIN
    PASSWORD 'TroqueEstaSenha!2025'
    NOSUPERUSER
    NOCREATEDB
    NOCREATEROLE
    INHERIT;
```

#### Passo 3 - Conceder ao usu√°rio "aluno" privil√©gios sobre todas os objetos (tabelas, views, gatilhos, √≠ndices) do esquema "compras"

``` sql
GRANT USAGE ON SCHEMA compras TO aluno;
GRANT CREATE ON SCHEMA compras TO aluno;
```

#### Passo 4 - Criar a tabela "clientes" dentro do esquema "compras"

``` sql
CREATE TABLE compras.clientes (
    cpf            CHAR(11)     PRIMARY KEY,
    nome           VARCHAR(120) NOT NULL,
    data_nascimento DATE        NOT NULL
);
```

#### Passo 5 - Conceder privil√©gios da tabela "clientes" do esquema "compras" para o usu√°rio "aluno"

``` sql
GRANT ALL PRIVILEGES ON TABLE compras.clientes TO aluno;
```

## Feito



<!--chapter:end:04-2026-03-10_Administracao_Gerenciamento-aula.Rmd-->

# Administra√ß√£o e Gerenciamento de Bancos de Dados
#### 25/08/2025 {.unnumbered}
#### Professor Migu√©l Suares {.unnumbered}


![](images/Exemplo-02-continua√ß√£o.svg)<!-- -->

<!--chapter:end:04-2026-03-10_Administracao_Gerenciamento-exercicio.Rmd-->

# Banco de Dados: Uma Aplica√ß√£o CRUD

#### 01/09/2025 {.unnumbered}

#### Professor Migu√©l Suares {.unnumbered}

## O que √© uma Aplica√ß√£o CRUD?

Hoje vamos desenvolver um cadastro web simples e entender o que √© o acronimo C.R.U.D.

## Conceito de CRUD

**CRUD** √© um acr√¥nimo para quatro opera√ß√µes fundamentais que um sistema realiza sobre dados em um banco de dados:

![](images/2025-09-01/01-CRUD.jpg)

Essas quatro opera√ß√µes comp√µem a base da maioria das **aplica√ß√µes web** que manipulam dados persistidos em um **SGBD** (Sistema Gerenciador de Banco de Dados).

------------------------------------------------------------------------

## O padr√£o de Design de Sistemas MVC (Model View Controller)

Uma aplica√ß√£o Cliente-Servidor (modelo 2 camadas) geralmente segue o **padr√£o MVC** ‚Äî **Model, View, Controller**:

![](images/2025-09-01/03-MVC.jpg)

## Construindo uma aplica√ß√£o CRUD para interfacear com a tabela "Pessoa"

Considere o Diagrama Entidade-Relacionamento abaixo:

![](images/aula-05-Exemplo-01-continua√ß√£o.svg)<!-- -->

Vamos Converte-lo para o Modelo F√≠sico-Relacional em linguagem SQL:

### Representa√ß√£o gr√°fica no modelo F√≠sico-Relacional

Vamos agora representa-lo em linguagem SQL:

![](images/2025-09-01/02-TabelaPessoas.jpg)

## Cria√ß√£o de uma aplica√ß√£o CRUD

Vamos criar um **microsas** (micro Software As A Service) , ou seja, um site para inserir informa√ß√µes dentro da tabela acima.

![](images/2025-09-01/04-Aplicacao.jpg)

| Informa√ß√µes de Projeto | Tecnologias utilizadas no projeto CRUD |
|----|----|
| Servidor de banco de dados SGBD | MySQL 8 |
| Usu√°rio de Banco de Dados | **pessoas_user** |
| De onde pode ser acessado | Apenas M√°quina Local (localhost) |
| Esquema de Banco de Dados | **pessoasdb** |
| Servidor de Aplica√ß√£o | Python 3 |
| Cliente da Aplica√ß√£o | HTML + Javascript |
| Tecnologia de API | RestuFul |
| **Biblioteca de Javascript** para criar API **RestFul** | M√©todo **Fetch** (Biblioteca Padr√£o do JavaScript para API RestFul) |
| Formato de Dados entre Servidor de Aplica√ß√£o e Cliente de Aplica√ß√£o | **JSON** |

: Criando um Esquema de Banco de Dados - CRUD tabela Pessoas

#### Cria√ß√£o de um usu√°rio para Interagir com o Esquema de Banco de Dados

![](images/2025-09-01/05-Usuario.jpg)

``` sql

-- CRIAR USU√ÅRIO LOCAL E CONCEDER PERMISS√ïES
-- Troque 'MinhaSenhaForte' por uma senha segura


CREATE USER IF NOT EXISTS 'pessoas_user'@'localhost' IDENTIFIED BY 'MinhaSenhaForte';

GRANT ALL PRIVILEGES ON pessoasdb.* TO 'pessoas_user'@'localhost';

FLUSH PRIVILEGES;
```

#### Cria√ß√£o do Esquema de Banco de Dados no SGBD MySQL

Agora vamos criar um esquema de Banco de Dados para abrigar nossa futura tabela:

![](images/2025-09-01/06-Esquema.jpg)

``` sql
-- 1) CRIAR BANCO (ajuste o nome se quiser)

CREATE DATABASE IF NOT EXISTS pessoasdb
  CHARACTER SET utf8mb4
  COLLATE utf8mb4_0900_ai_ci;

USE pessoasdb;
```

#### Cria√ß√£o da Tabela "pessoas"

![](images/2025-09-01/07-Tabela_Pessoas.jpg)

``` sql

-- 3) TABELA 'pessoas' COMPAT√çVEL COM O MODELO SQLAlchemy
--    - cpf: chave prim√°ria (String(14))
--    - nome, endereco, foto: TEXT
--    - data_nascimento: DATE

CREATE TABLE IF NOT EXISTS pessoas 
(
  cpf             VARCHAR(14)  NOT NULL,
  nome            TEXT         NOT NULL,
  endereco        TEXT         NOT NULL,
  data_nascimento DATE         NOT NULL,
  foto            TEXT         NULL,
  PRIMARY KEY (cpf)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;


-- 4) (OPCIONAL) √çNDICES PARA BUSCA
-- Seu endpoint usa LIKE/ILIKE em nome e cpf; cpf j√° √© PK.
-- Para acelerar buscas por nome com LIKE, crie um √≠ndice por prefixo.
-- OBS: √≠ndices em TEXT precisam de comprimento; 128 costuma ser um bom compromisso.

CREATE INDEX idx_pessoas_nome_prefix ON pessoas (nome(128));
```

#### Uma aplica√ß√£o Cliente Servidor no formato MVC (Model View Controller)

![](images/Aplicacao-MVC-CRUD-Pessoas-01.svg)<!-- -->

#### Cria√ß√£o do Servidor de Aplica√ß√£o em Linguagem Python

Vejamos a representa√ß√£o gr√°fica de nosso servidor utilizando o diagrama de classes da linguagem UML

![](images/Servidor-CRUD-Pessoas-01.svg)<!-- -->

Para utilizar o MySQL como servidor, devemos instalar os drivers de MySQL para a biblioteca SQLAlchemy do Python atrav√©s da ferramenta de linha de comando PIP do python

``` cmd
pip install flask flask-cors sqlalchemy "pymysql>=1.1"
# (ou use mysqlclient: pip install mysqlclient e troque o driver para mysql+mysqlclient)
```

Agora vamos escrever o script python que criar√° o servidor de aplica√ß√£o para interfacear nosso Cliente no Navegador e nossa tabela pessoas dentro do SGBD MySQL:

``` python
from flask import Flask, request, jsonify
from flask_cors import CORS
from sqlalchemy import create_engine, Column, String, Date, Text
from sqlalchemy.orm import sessionmaker, declarative_base
from datetime import date

# ------------------------------
# Flask + CORS
# ------------------------------
app = Flask(__name__)
CORS(app)  # em produ√ß√£o, restrinja as origens

# ------------------------------
# Banco de Dados MySQL (localhost)
# ------------------------------
# Par√¢metros do projeto:
#   SGBD: MySQL 8
#   Host: localhost
#   Usu√°rio: pessoas_user
#   DB/Schema: pessoasdb
#   Tabela: pessoas
DATABASE_URL = "mysql+pymysql://pessoas_user:MinhaSenhaForte@localhost:3306/pessoasdb"

engine = create_engine(
    DATABASE_URL,
    pool_pre_ping=True,        # evita "MySQL server has gone away"
    future=True
)
SessionLocal = sessionmaker(bind=engine, autoflush=False, autocommit=False, future=True)
Base = declarative_base()

# ------------------------------
# Modelo Pessoa
# ------------------------------
class Pessoa(Base):
    __tablename__ = "pessoas"
    cpf = Column(String(14), primary_key=True)
    nome = Column(Text, nullable=False)
    endereco = Column(Text, nullable=False)
    data_nascimento = Column(Date, nullable=False)
    foto = Column(Text)  # Base64 ou URL

# Cria a tabela se n√£o existir (deve existir conforme seu script SQL)
Base.metadata.create_all(engine)

# ------------------------------
# Helpers
# ------------------------------
def to_dict(p: Pessoa):
    return {
        "cpf": p.cpf,
        "nome": p.nome,
        "endereco": p.endereco,
        "data_nascimento": p.data_nascimento.isoformat(),
        "foto": p.foto
    }

def parse_date_iso(value):
    if isinstance(value, date):
        return value
    return date.fromisoformat(value)  # espera "YYYY-MM-DD"

# ------------------------------
# CRUD
# ------------------------------

# Listar todas as pessoas ou pesquisar por termo (?q=)
@app.route('/pessoas', methods=['GET'])
def listar():
    termo = (request.args.get('q') or '').strip()
    with SessionLocal() as session:
        query = session.query(Pessoa)
        if termo:
            like = f"%{termo}%"
            # MySQL √© case-insensitive com collation *_ci; ilike √© traduzido para LIKE
            query = query.filter((Pessoa.nome.ilike(like)) | (Pessoa.cpf.ilike(like)))
        pessoas = query.order_by(Pessoa.nome.asc()).all()
        return jsonify([to_dict(p) for p in pessoas])

# Inserir nova pessoa
@app.route('/pessoas', methods=['POST'])
def inserir():
    dados = request.get_json(force=True)
    required = ['cpf', 'nome', 'endereco', 'data_nascimento']
    faltantes = [k for k in required if not dados.get(k)]
    if faltantes:
        return jsonify({"error": "Campos obrigat√≥rios faltando", "fields": faltantes}), 422

    try:
        dn = parse_date_iso(dados['data_nascimento'])
    except Exception:
        return jsonify({"error": "data_nascimento inv√°lida. Use YYYY-MM-DD"}), 422

    with SessionLocal() as session:
        if session.query(Pessoa).filter_by(cpf=dados['cpf']).first():
            return jsonify({"error": "CPF j√° cadastrado"}), 409
        pessoa = Pessoa(
            cpf=dados['cpf'],
            nome=dados['nome'],
            endereco=dados['endereco'],
            data_nascimento=dn,
            foto=dados.get('foto')
        )
        session.add(pessoa)
        session.commit()
        session.refresh(pessoa)
        return jsonify(to_dict(pessoa)), 201

# Alterar pessoa (PUT)
@app.route('/pessoas/<cpf>', methods=['PUT'])
def alterar(cpf):
    dados = request.get_json(force=True)
    with SessionLocal() as session:
        pessoa = session.query(Pessoa).filter_by(cpf=cpf).first()
        if not pessoa:
            return jsonify({"error": "CPF n√£o encontrado"}), 404

        if 'nome' in dados and dados['nome'] is not None:
            pessoa.nome = dados['nome']
        if 'endereco' in dados and dados['endereco'] is not None:
            pessoa.endereco = dados['endereco']
        if 'data_nascimento' in dados and dados['data_nascimento'] is not None:
            try:
                pessoa.data_nascimento = parse_date_iso(dados['data_nascimento'])
            except Exception:
                return jsonify({"error": "data_nascimento inv√°lida. Use YYYY-MM-DD"}), 422
        if 'foto' in dados:
            pessoa.foto = dados['foto']

        session.commit()
        session.refresh(pessoa)
        return jsonify(to_dict(pessoa)), 200

# Remover pessoa
@app.route('/pessoas/<cpf>', methods=['DELETE'])
def remover(cpf):
    with SessionLocal() as session:
        pessoa = session.query(Pessoa).filter_by(cpf=cpf).first()
        if not pessoa:
            return jsonify({"error": "CPF n√£o encontrado"}), 404
        session.delete(pessoa)
        session.commit()
        return '', 204

# Buscar pessoa por CPF
@app.route('/pessoas/<cpf>', methods=['GET'])
def buscar(cpf):
    with SessionLocal() as session:
        pessoa = session.query(Pessoa).filter_by(cpf=cpf).first()
        if not pessoa:
            return jsonify({"error": "CPF n√£o encontrado"}), 404
        return jsonify(to_dict(pessoa))

# ------------------------------
# Inicia o servidor
# ------------------------------
if __name__ == '__main__':
    app.run(debug=True, port=5000)
```

#### Cria√ß√£o do Cliente de Aplica√ß√£o em HTML (Parte Gr√°fica) e Javascript (Programa√ß√£o Execut√°vel)

Vamos verificar como √© o Diagrama de Classes do Cliente que vai conversar com o servidor que vimos anteriormente:

![](images/2025-09-01/09-cliente.jpg)

Agora vamos verificar o c√≥digo-fonte.

Salve esse c√≥digo em um arquivo chamado **cliente.html**, para poder abrir-lo no navegador, juntamente com o servidor rodando:

``` html
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Cadastro de Pessoas - Flask/MySQL</title>
<style>
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; max-width: 980px; margin: 24px auto; }
  label { display: block; margin-top: 10px; }
  button { margin-top: 10px; margin-right: 6px; padding: 8px 12px; }
  table { border-collapse: collapse; width:100%; margin-top:20px; }
  th, td { border:1px solid #ddd; padding:8px; text-align:left; }
  img.thumb { width:60px; height:60px; object-fit:cover; border-radius:4px; }
  .row { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
</style>
</head>
<body>
<h1>Cadastro de Pessoas (Flask/MySQL)</h1>

<form id="formPessoa">
  <label>CPF (chave prim√°ria): <input id="cpf" required></label>
  <label>Nome: <input id="nome" required></label>
  <label>Endere√ßo: <input id="endereco" required></label>
  <label>Data Nasc.: <input type="date" id="data_nascimento" required></label>
  <label>Foto: <input type="file" id="foto" accept="image/*"></label>

  <div class="row">
    <button type="button" id="btnInserir" onclick="inserir()">Inserir</button>
    <button type="button" id="btnAlterar" onclick="alterar()">Alterar</button>
    <button type="button" id="btnRemover" onclick="remover()">Remover</button>
  </div>
</form>

<h2>Pesquisar</h2>
<div class="row">
  <input id="pesquisa" placeholder="Digite nome ou CPF" style="flex:1">
  <button type="button" id="btnPesquisar" onclick="pesquisar()">Pesquisar</button>
  <button type="button" onclick="listar()">Listar tudo</button>
</div>

<table>
  <thead>
    <tr>
      <th>CPF</th><th>Foto</th><th>Nome</th>
      <th>Endere√ßo</th><th>Nascimento</th>
    </tr>
  </thead>
  <tbody id="tabela"></tbody>
</table>

<script>
const API = 'http://localhost:5000/pessoas';

/* ---------- Helpers ---------- */
function setBusy(busy) {
  for (const id of ['btnInserir','btnAlterar','btnRemover','btnPesquisar']) {
    const el = document.getElementById(id);
    if (el) el.disabled = busy;
  }
}

function validaCampos() {
  const campos = ['cpf','nome','endereco','data_nascimento'];
  for (const id of campos) {
    const valor = document.getElementById(id).value.trim();
    if (!valor) {
      alert(`O campo "${id}" n√£o pode ficar em branco.`);
      return false;
    }
  }
  return true;
}

function getFotoBase64() {
  const file = document.getElementById('foto').files[0];
  if(!file) return Promise.resolve('');
  return new Promise((resolve,reject)=>{
    const reader = new FileReader();
    reader.onload = () => resolve(reader.result);
    reader.onerror = reject;
    reader.readAsDataURL(file);
  });
}

function coletaDados(base64Foto){
  return {
    cpf: document.getElementById('cpf').value.trim(),
    nome: document.getElementById('nome').value.trim(),
    endereco: document.getElementById('endereco').value.trim(),
    data_nascimento: document.getElementById('data_nascimento').value, // YYYY-MM-DD
    foto: base64Foto || ''
  };
}

async function readJsonSafe(res) {
  const ct = res.headers.get('content-type') || '';
  if (ct.includes('application/json')) {
    try { return await res.json(); } catch { return null; }
  }
  return null;
}

/* ---------- CRUD ---------- */
async function inserir() {
  if(!validaCampos()) return;
  setBusy(true);
  try {
    const base64 = await getFotoBase64();
    const pessoa = coletaDados(base64);

    const res = await fetch(API, {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify(pessoa)
    });
    const data = await readJsonSafe(res);
    if(res.ok) {
      alert('Inserido com sucesso!');
      listar();
      document.getElementById('formPessoa').reset();
    } else {
      alert('Erro: ' + (data?.error || res.statusText));
    }
  } catch (e) {
    alert('Falha ao inserir: ' + e.message);
  } finally {
    setBusy(false);
  }
}

async function alterar() {
  if(!validaCampos()) return;
  const cpf = document.getElementById('cpf').value.trim();
  setBusy(true);
  try {
    const base64 = await getFotoBase64();
    const novosDados = coletaDados();
    if (base64) novosDados.foto = base64;

    const res = await fetch(`${API}/${encodeURIComponent(cpf)}`, {
      method: 'PUT',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify(novosDados)
    });
    const data = await readJsonSafe(res);
    if(res.ok) {
      alert('Alterado com sucesso!');
      listar();
    } else {
      alert('Erro: ' + (data?.error || res.statusText));
    }
  } catch (e) {
    alert('Falha ao alterar: ' + e.message);
  } finally {
    setBusy(false);
  }
}

async function remover() {
  const cpf = document.getElementById('cpf').value.trim();
  if(!cpf) return alert('Informe o CPF para remover.');
  if(!confirm('Confirma a exclus√£o?')) return;

  setBusy(true);
  try {
    const res = await fetch(`${API}/${encodeURIComponent(cpf)}`, {method:'DELETE'});
    // 204 => sem corpo; n√£o tente parsear JSON aqui
    if(res.status === 204) {
      alert('Removido com sucesso!');
      listar();
      return;
    }
    const data = await readJsonSafe(res);
    if(res.ok) {
      alert('Removido com sucesso!');
      listar();
    } else {
      alert('Erro: ' + (data?.error || res.statusText));
    }
  } catch (e) {
    alert('Falha ao remover: ' + e.message);
  } finally {
    setBusy(false);
  }
}

async function pesquisar() {
  const termo = document.getElementById('pesquisa').value.trim();
  setBusy(true);
  try {
    const url = termo ? `${API}?q=${encodeURIComponent(termo)}` : API;
    const res = await fetch(url);
    const data = await readJsonSafe(res);
    if(!res.ok) return alert('Falha na pesquisa: ' + (data?.error || res.statusText));
    preencheTabela(Array.isArray(data) ? data : (data?.items ?? []));
  } catch (e) {
    alert('Falha na pesquisa: ' + e.message);
  } finally {
    setBusy(false);
  }
}

async function listar() {
  setBusy(true);
  try {
    const res = await fetch(API);
    const data = await readJsonSafe(res);
    if(!res.ok) return alert('Falha ao listar: ' + (data?.error || res.statusText));
    preencheTabela(Array.isArray(data) ? data : (data?.items ?? []));
  } catch (e) {
    alert('Falha ao listar: ' + e.message);
  } finally {
    setBusy(false);
  }
}

/* ---------- UI ---------- */
function preencheTabela(lista){
  const tbody = document.getElementById('tabela');
  tbody.innerHTML = '';
  (lista || []).forEach(p=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${p.cpf}</td>
      <td>${p.foto ? `<img class="thumb" src="${p.foto}" alt="foto">` : ''}</td>
      <td>${p.nome}</td>
      <td>${p.endereco}</td>
      <td>${p.data_nascimento}</td>`;
    tr.onclick = () => {
      document.getElementById('cpf').value = p.cpf;
      document.getElementById('nome').value = p.nome;
      document.getElementById('endereco').value = p.endereco;
      document.getElementById('data_nascimento').value = p.data_nascimento;
    };
    tbody.appendChild(tr);
  });
}

listar();
</script>
</body>
</html>
```

### Resultado final:

#### Servidor de aplica√ß√£o Python "Restful" rodando

![](images/2025-09-01/10-servidor_rodando.jpg)

#### Cliente HTML + Javascript ( p√°gina EST√ÅTICA ) aberta no navegador

##### Passo 1 - Preencher dados no formul√°rio do cliente

Vamos inserir dados de exemplo no "cliente WEB" abaixo

![](images/2025-09-01/11-Cliente_Vazio.jpg)

##### Passo 2 - Pressionar o Bot√£o INSERIR

![](images/2025-09-01/11-Cliente_Vazio-02.jpg)

OBS: Na tela do servidor, √© poss√≠vel verificar as opera√ß√µes HTTP Equivalentes ao SQL que foram executadas entre o Servidor e o Cliente

![](images/2025-09-01/10-servidor_rodando-01.jpg)

##### Passo 3 - Verificar se o "DBGRID" do cliente "espelhando" a linha da tabela "pessoas" no esquema "pessoasdb" do SQBG MySQL

![](images/2025-09-01/11-Cliente_03-Preenchido.jpg)

##### Passo 4 - Verificar na tabela pessoas a linha que o cliente preencheu atrav√©s da API da aplica√ß√£o cliente/servidor

![](images/2025-09-01/12-Dados_no_SGBD.jpg)

## Feito



<!--chapter:end:05-2026-03-17_Aplicacao_CRUD-aula.Rmd-->

## Exerc√≠cios

#### 01/09/2025 {.unnumbered}

#### Professor Migu√©l Suares {.unnumbered}

### Banco de Dados utilizado nos exemplos de aplica√ß√µes abaixo

Crie o banco de dados abaixo em um servidor mysql 8 ou superior na sua m√°quina antes de testar os exemplos abaixo:

``` SQL
-- 1) CRIAR BANCO (ajuste o nome se quiser)
CREATE DATABASE IF NOT EXISTS pessoasdb
  CHARACTER SET utf8mb4
  COLLATE utf8mb4_0900_ai_ci;

USE pessoasdb;

-- 2) (OPCIONAL) CRIAR USU√ÅRIO LOCAL E CONCEDER PERMISS√ïES
--    Troque 'MinhaSenhaForte' por uma senha segura
CREATE USER IF NOT EXISTS 'pessoas_user'@'localhost' IDENTIFIED BY 'MinhaSenhaForte';
GRANT ALL PRIVILEGES ON pessoasdb.* TO 'pessoas_user'@'localhost';
FLUSH PRIVILEGES;

-- 3) TABELA 'pessoas' COMPAT√çVEL COM O MODELO SQLAlchemy
--    - cpf: chave prim√°ria (String(14))
--    - nome, endereco, foto: TEXT
--    - data_nascimento: DATE
CREATE TABLE IF NOT EXISTS pessoas (
  cpf             VARCHAR(14)  NOT NULL,
  nome            TEXT         NOT NULL,
  endereco        TEXT         NOT NULL,
  data_nascimento DATE         NOT NULL,
  foto            TEXT         NULL,
  PRIMARY KEY (cpf)
) ENGINE=InnoDB DEFAULT CHARSET=utf8mb4 COLLATE=utf8mb4_0900_ai_ci;

-- 4) (OPCIONAL) √çNDICES PARA BUSCA
-- Seu endpoint usa LIKE/ILIKE em nome e cpf; cpf j√° √© PK.
-- Para acelerar buscas por nome com LIKE, crie um √≠ndice por prefixo.
-- OBS: √≠ndices em TEXT precisam de comprimento; 128 costuma ser um bom compromisso.
CREATE INDEX idx_pessoas_nome_prefix ON pessoas (nome(128));
```

## Exemplo 01

servidor SUPABASE .... a fazer

## Exemplo 02 - SERVIDOR DE APLICA√á√ÉO PYTHON

![](images/clipboard-3666283714.png)

Neste exemplo, temos uma aplica√ß√£o cliente feita html e javascript

A interface do Cliente √© feita em HTML5

A conex√£o com o servidor √© feita pelo javascript incorporado no HTML:

CRUD no cliente √© feito peloa javascript utilizando metodologia Restful sobre protocolo HTTP 2.0

O servidor Restful √© feito em linguagem PYTHON

OBS: N√ÉO TEMOS CONTROLE DE SESS√ÉO DE CLIENTE IMPLEMENTADO.

``` cmd
python -m pip install --user --upgrade flask flask-cors sqlalchemy psycopg2-binary
```

### Servidor python

``` python
from flask import Flask, request, jsonify
from flask_cors import CORS
from sqlalchemy import create_engine, Column, String, Date, Text
from sqlalchemy.ext.declarative import declarative_base
from sqlalchemy.orm import sessionmaker

# ------------------------------
# Configura√ß√£o do Flask e CORS
# ------------------------------
app = Flask(__name__)
CORS(app)

# ------------------------------
# Configura√ß√£o do banco PostgreSQL
# ------------------------------
DATABASE_URL = "postgresql://postgres:MinhaSuperSenha@db.pbbtfwmydxmxdibmtbqq.supabase.co:5432/postgres"

engine = create_engine(DATABASE_URL)
SessionLocal = sessionmaker(bind=engine)
Base = declarative_base()

# ------------------------------
# Modelo Pessoa
# ------------------------------
class Pessoa(Base):
    __tablename__ = "pessoas"
    cpf = Column(String(14), primary_key=True)
    nome = Column(Text, nullable=False)
    endereco = Column(Text, nullable=False)
    data_nascimento = Column(Date, nullable=False)
    foto = Column(Text)  # Base64 ou URL

# Cria a tabela se n√£o existir
Base.metadata.create_all(engine)

# ------------------------------
# CRUD
# ------------------------------

# Listar todas as pessoas ou pesquisar por termo
@app.route('/pessoas', methods=['GET'])
def listar():
    termo = request.args.get('q', '').lower()
    session = SessionLocal()
    if termo:
        pessoas = session.query(Pessoa).filter(
            (Pessoa.nome.ilike(f"%{termo}%")) | (Pessoa.cpf.ilike(f"%{termo}%"))
        ).all()
    else:
        pessoas = session.query(Pessoa).all()
    session.close()
    return jsonify([{
        "cpf": p.cpf,
        "nome": p.nome,
        "endereco": p.endereco,
        "data_nascimento": p.data_nascimento.isoformat(),
        "foto": p.foto
    } for p in pessoas])

# Inserir nova pessoa
@app.route('/pessoas', methods=['POST'])
def inserir():
    dados = request.get_json()
    session = SessionLocal()
    if session.query(Pessoa).filter_by(cpf=dados['cpf']).first():
        session.close()
        return jsonify({"error": "CPF j√° cadastrado"}), 400
    pessoa = Pessoa(
        cpf=dados['cpf'],
        nome=dados['nome'],
        endereco=dados['endereco'],
        data_nascimento=dados['data_nascimento'],
        foto=dados.get('foto')
    )
    session.add(pessoa)
    session.commit()
    session.close()
    return jsonify({"message": "Inserido com sucesso"}), 201

# Alterar pessoa
@app.route('/pessoas/<cpf>', methods=['PUT'])
def alterar(cpf):
    dados = request.get_json()
    session = SessionLocal()
    pessoa = session.query(Pessoa).filter_by(cpf=cpf).first()
    if not pessoa:
        session.close()
        return jsonify({"error": "CPF n√£o encontrado"}), 404
    pessoa.nome = dados.get('nome', pessoa.nome)
    pessoa.endereco = dados.get('endereco', pessoa.endereco)
    pessoa.data_nascimento = dados.get('data_nascimento', pessoa.data_nascimento)
    pessoa.foto = dados.get('foto', pessoa.foto)
    session.commit()
    session.close()
    return jsonify({"message": "Alterado com sucesso"})

# Remover pessoa
@app.route('/pessoas/<cpf>', methods=['DELETE'])
def remover(cpf):
    session = SessionLocal()
    pessoa = session.query(Pessoa).filter_by(cpf=cpf).first()
    if not pessoa:
        session.close()
        return jsonify({"error": "CPF n√£o encontrado"}), 404
    session.delete(pessoa)
    session.commit()
    session.close()
    return jsonify({"message": "Removido com sucesso"})

# Buscar pessoa por CPF
@app.route('/pessoas/<cpf>', methods=['GET'])
def buscar(cpf):
    session = SessionLocal()
    pessoa = session.query(Pessoa).filter_by(cpf=cpf).first()
    session.close()
    if not pessoa:
        return jsonify({"error": "CPF n√£o encontrado"}), 404
    return jsonify({
        "cpf": pessoa.cpf,
        "nome": pessoa.nome,
        "endereco": pessoa.endereco,
        "data_nascimento": pessoa.data_nascimento.isoformat(),
        "foto": pessoa.foto
    })

# ------------------------------
# Inicia o servidor
# ------------------------------
if __name__ == '__main__':
    app.run(debug=True, port=5000)
```

servidor estar√° rodando na porta 5000 e EXP√ïE A API de opera√ß√µes na URI <http://localhost:5000/pessoas> sem senha

``` css
http://localhost:5000/pessoas
```

### Cliente HTML (conex√£o Restful)

crie o arquivo index.html e abra-o no navegador

``` html
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Cadastro de Pessoas - Flask/MySQL</title>
<style>
  body { font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial; max-width: 980px; margin: 24px auto; }
  label { display: block; margin-top: 10px; }
  button { margin-top: 10px; margin-right: 6px; padding: 8px 12px; }
  table { border-collapse: collapse; width:100%; margin-top:20px; }
  th, td { border:1px solid #ddd; padding:8px; text-align:left; }
  img.thumb { width:60px; height:60px; object-fit:cover; border-radius:4px; }
  .row { display:flex; gap:8px; align-items:center; flex-wrap:wrap; }
</style>
</head>
<body>
<h1>Cadastro de Pessoas (Flask/MySQL)</h1>

<form id="formPessoa">
  <label>CPF (chave prim√°ria): <input id="cpf" required></label>
  <label>Nome: <input id="nome" required></label>
  <label>Endere√ßo: <input id="endereco" required></label>
  <label>Data Nasc.: <input type="date" id="data_nascimento" required></label>
  <label>Foto: <input type="file" id="foto" accept="image/*"></label>

  <div class="row">
    <button type="button" id="btnInserir" onclick="inserir()">Inserir</button>
    <button type="button" id="btnAlterar" onclick="alterar()">Alterar</button>
    <button type="button" id="btnRemover" onclick="remover()">Remover</button>
  </div>
</form>

<h2>Pesquisar</h2>
<div class="row">
  <input id="pesquisa" placeholder="Digite nome ou CPF" style="flex:1">
  <button type="button" id="btnPesquisar" onclick="pesquisar()">Pesquisar</button>
  <button type="button" onclick="listar()">Listar tudo</button>
</div>

<table>
  <thead>
    <tr>
      <th>CPF</th><th>Foto</th><th>Nome</th>
      <th>Endere√ßo</th><th>Nascimento</th>
    </tr>
  </thead>
  <tbody id="tabela"></tbody>
</table>

<script>
const API = 'http://localhost:5000/pessoas';

/* ---------- Helpers ---------- */
function setBusy(busy) {
  for (const id of ['btnInserir','btnAlterar','btnRemover','btnPesquisar']) {
    const el = document.getElementById(id);
    if (el) el.disabled = busy;
  }
}

function validaCampos() {
  const campos = ['cpf','nome','endereco','data_nascimento'];
  for (const id of campos) {
    const valor = document.getElementById(id).value.trim();
    if (!valor) {
      alert(`O campo "${id}" n√£o pode ficar em branco.`);
      return false;
    }
  }
  return true;
}

function getFotoBase64() {
  const file = document.getElementById('foto').files[0];
  if(!file) return Promise.resolve('');
  return new Promise((resolve,reject)=>{
    const reader = new FileReader();
    reader.onload = () => resolve(reader.result);
    reader.onerror = reject;
    reader.readAsDataURL(file);
  });
}

function coletaDados(base64Foto){
  return {
    cpf: document.getElementById('cpf').value.trim(),
    nome: document.getElementById('nome').value.trim(),
    endereco: document.getElementById('endereco').value.trim(),
    data_nascimento: document.getElementById('data_nascimento').value, // YYYY-MM-DD
    foto: base64Foto || ''
  };
}

async function readJsonSafe(res) {
  const ct = res.headers.get('content-type') || '';
  if (ct.includes('application/json')) {
    try { return await res.json(); } catch { return null; }
  }
  return null;
}

/* ---------- CRUD ---------- */
async function inserir() {
  if(!validaCampos()) return;
  setBusy(true);
  try {
    const base64 = await getFotoBase64();
    const pessoa = coletaDados(base64);

    const res = await fetch(API, {
      method: 'POST',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify(pessoa)
    });
    const data = await readJsonSafe(res);
    if(res.ok) {
      alert('Inserido com sucesso!');
      listar();
      document.getElementById('formPessoa').reset();
    } else {
      alert('Erro: ' + (data?.error || res.statusText));
    }
  } catch (e) {
    alert('Falha ao inserir: ' + e.message);
  } finally {
    setBusy(false);
  }
}

async function alterar() {
  if(!validaCampos()) return;
  const cpf = document.getElementById('cpf').value.trim();
  setBusy(true);
  try {
    const base64 = await getFotoBase64();
    const novosDados = coletaDados();
    if (base64) novosDados.foto = base64;

    const res = await fetch(`${API}/${encodeURIComponent(cpf)}`, {
      method: 'PUT',
      headers: {'Content-Type': 'application/json'},
      body: JSON.stringify(novosDados)
    });
    const data = await readJsonSafe(res);
    if(res.ok) {
      alert('Alterado com sucesso!');
      listar();
    } else {
      alert('Erro: ' + (data?.error || res.statusText));
    }
  } catch (e) {
    alert('Falha ao alterar: ' + e.message);
  } finally {
    setBusy(false);
  }
}

async function remover() {
  const cpf = document.getElementById('cpf').value.trim();
  if(!cpf) return alert('Informe o CPF para remover.');
  if(!confirm('Confirma a exclus√£o?')) return;

  setBusy(true);
  try {
    const res = await fetch(`${API}/${encodeURIComponent(cpf)}`, {method:'DELETE'});
    // 204 => sem corpo; n√£o tente parsear JSON aqui
    if(res.status === 204) {
      alert('Removido com sucesso!');
      listar();
      return;
    }
    const data = await readJsonSafe(res);
    if(res.ok) {
      alert('Removido com sucesso!');
      listar();
    } else {
      alert('Erro: ' + (data?.error || res.statusText));
    }
  } catch (e) {
    alert('Falha ao remover: ' + e.message);
  } finally {
    setBusy(false);
  }
}

async function pesquisar() {
  const termo = document.getElementById('pesquisa').value.trim();
  setBusy(true);
  try {
    const url = termo ? `${API}?q=${encodeURIComponent(termo)}` : API;
    const res = await fetch(url);
    const data = await readJsonSafe(res);
    if(!res.ok) return alert('Falha na pesquisa: ' + (data?.error || res.statusText));
    preencheTabela(Array.isArray(data) ? data : (data?.items ?? []));
  } catch (e) {
    alert('Falha na pesquisa: ' + e.message);
  } finally {
    setBusy(false);
  }
}

async function listar() {
  setBusy(true);
  try {
    const res = await fetch(API);
    const data = await readJsonSafe(res);
    if(!res.ok) return alert('Falha ao listar: ' + (data?.error || res.statusText));
    preencheTabela(Array.isArray(data) ? data : (data?.items ?? []));
  } catch (e) {
    alert('Falha ao listar: ' + e.message);
  } finally {
    setBusy(false);
  }
}

/* ---------- UI ---------- */
function preencheTabela(lista){
  const tbody = document.getElementById('tabela');
  tbody.innerHTML = '';
  (lista || []).forEach(p=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${p.cpf}</td>
      <td>${p.foto ? `<img class="thumb" src="${p.foto}" alt="foto">` : ''}</td>
      <td>${p.nome}</td>
      <td>${p.endereco}</td>
      <td>${p.data_nascimento}</td>`;
    tr.onclick = () => {
      document.getElementById('cpf').value = p.cpf;
      document.getElementById('nome').value = p.nome;
      document.getElementById('endereco').value = p.endereco;
      document.getElementById('data_nascimento').value = p.data_nascimento;
    };
    tbody.appendChild(tr);
  });
}

listar();
</script>
</body>
</html>
```

------------------------------------------------------------------------

## Exemplo 03 - SERVIDOR DE APLICA√á√ÉO PERL

![](images/clipboard-2372699820.png)

Neste exemplo, temos uma aplica√ß√£o cliente feita html e javascript

A interface do Cliente √© feita em HTML5

A conex√£o com o servidor √© feita pelo javascript incorporado no HTML:

CRUD no cliente √© feito peloa javascript utilizando metodologia Restful sobre protocolo HTTP 2.0

O servidor Restful √© feito em linguagem PERL

OBS: N√ÉO TEMOS CONTROLE DE SESS√ÉO DE CLIENTE IMPLEMENTADO.

``` cmd
cpan Dancer2 DBI DBD::Pg JSON
```

### Servidor Perl

``` perl
#!/usr/bin/perl
use strict;
use warnings;
use Dancer2;
use DBI;
use JSON;

# -----------------------------
# Configura√ß√µes do banco
# -----------------------------
my $dsn = "dbi:Pg:dbname=postgres;host=db.pbbtfwmydxmxdibmtbqq.supabase.co;port=5432";
my $db_user = "postgres";
my $db_pass = "MinhaSuperSenha";

my $dbh = DBI->connect($dsn, $db_user, $db_pass, { RaiseError => 1, AutoCommit => 1 });

# -----------------------------
# Helpers
# -----------------------------
sub json_response {
    content_type 'application/json';
    return encode_json($_[0]);
}

# -----------------------------
# Endpoints REST
# -----------------------------

# Listar todas ou pesquisar
get '/pessoas' => sub {
    my $q = query_parameters->get('q') || '';
    my $sql = "SELECT * FROM pessoas";
    my @params;
    if ($q ne '') {
        $sql .= " WHERE cpf ILIKE ? OR nome ILIKE ?";
        @params = ("%$q%", "%$q%");
    }
    my $sth = $dbh->prepare($sql);
    $sth->execute(@params);
    my @rows;
    while (my $row = $sth->fetchrow_hashref) {
        push @rows, $row;
    }
    return json_response(\@rows);
};

# Buscar por CPF
get '/pessoas/:cpf' => sub {
    my $cpf = route_parameters->get('cpf');
    my $sth = $dbh->prepare("SELECT * FROM pessoas WHERE cpf = ?");
    $sth->execute($cpf);
    my $row = $sth->fetchrow_hashref;
    return $row ? json_response($row) : status(404)->json_response({ error => "CPF n√£o encontrado" });
};

# Inserir
post '/pessoas' => sub {
    my $data = from_json(request->body);
    my $cpf = $data->{cpf};
    # Verifica se existe
    my $check = $dbh->prepare("SELECT cpf FROM pessoas WHERE cpf = ?");
    $check->execute($cpf);
    if ($check->fetchrow_array) {
        status(400);
        return json_response({ error => "CPF j√° cadastrado" });
    }
    my $sth = $dbh->prepare("INSERT INTO pessoas (cpf, nome, endereco, data_nascimento, foto) VALUES (?, ?, ?, ?, ?)");
    $sth->execute($cpf, $data->{nome}, $data->{endereco}, $data->{data_nascimento}, $data->{foto});
    status(201);
    return json_response({ message => "Inserido com sucesso" });
};

# Alterar
put '/pessoas/:cpf' => sub {
    my $cpf = route_parameters->get('cpf');
    my $data = from_json(request->body);
    # Verifica se existe
    my $check = $dbh->prepare("SELECT cpf FROM pessoas WHERE cpf = ?");
    $check->execute($cpf);
    unless ($check->fetchrow_array) {
        status(404);
        return json_response({ error => "CPF n√£o encontrado" });
    }
    my $sth = $dbh->prepare("UPDATE pessoas SET nome=?, endereco=?, data_nascimento=?, foto=? WHERE cpf=?");
    $sth->execute($data->{nome}, $data->{endereco}, $data->{data_nascimento}, $data->{foto}, $cpf);
    return json_response({ message => "Alterado com sucesso" });
};

# Remover
del '/pessoas/:cpf' => sub {
    my $cpf = route_parameters->get('cpf');
    my $sth = $dbh->prepare("DELETE FROM pessoas WHERE cpf=?");
    my $rows = $sth->execute($cpf);
    if ($rows) {
        return json_response({ message => "Removido com sucesso" });
    } else {
        status(404);
        return json_response({ error => "CPF n√£o encontrado" });
    }
};

# -----------------------------
# Inicializa o servidor
# -----------------------------
set port => 5000;
set serializer => 'JSON';

start;
```

servidor estar√° rodando na porta 5000 e EXP√ïE A API de opera√ß√µes na URI <http://localhost:5000/pessoas> sem senha

``` css
http://localhost:5000/pessoas
```

### Cliente HTML (conex√£o Restful)

crie o arquivo index.html e abra-o no navegador

``` html
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Cadastro de Pessoas - Perl/PostgreSQL</title>
<style>
  body { font-family: sans-serif; max-width: 800px; margin: 20px auto; }
  label { display: block; margin-top: 10px; }
  button { margin-top: 10px; margin-right: 5px; }
  table { border-collapse: collapse; width:100%; margin-top:20px; }
  th, td { border:1px solid #ccc; padding:6px; text-align:left; }
  img.thumb { width:60px; height:60px; object-fit:cover; border-radius:4px; }
</style>
</head>
<body>
<h1>Cadastro de Pessoas (Perl/PostgreSQL)</h1>

<form id="formPessoa">
  <label>CPF (chave prim√°ria): <input id="cpf" required></label>
  <label>Nome: <input id="nome" required></label>
  <label>Endere√ßo: <input id="endereco" required></label>
  <label>Data Nasc.: <input type="date" id="data_nascimento" required></label>
  <label>Foto: <input type="file" id="foto" accept="image/*"></label>

  <button type="button" onclick="inserir()">Inserir</button>
  <button type="button" onclick="alterar()">Alterar</button>
  <button type="button" onclick="remover()">Remover</button>
</form>

<h2>Pesquisar</h2>
<input id="pesquisa" placeholder="Digite nome ou CPF">
<button type="button" onclick="pesquisar()">Pesquisar</button>

<table>
  <thead>
    <tr>
      <th>CPF</th><th>Foto</th><th>Nome</th>
      <th>Endere√ßo</th><th>Nascimento</th>
    </tr>
  </thead>
  <tbody id="tabela"></tbody>
</table>

<script>
const API = 'http://localhost:5000/pessoas';

/* ---------- Fun√ß√µes utilit√°rias ---------- */
function validaCampos() {
  const campos = ['cpf','nome','endereco','data_nascimento'];
  for (const id of campos) {
    const valor = document.getElementById(id).value.trim();
    if (!valor) {
      alert(`O campo "${id}" n√£o pode ficar em branco.`);
      return false;
    }
  }
  return true;
}

function getFotoBase64() {
  const file = document.getElementById('foto').files[0];
  if(!file) return Promise.resolve('');
  return new Promise((resolve,reject)=>{
    const reader = new FileReader();
    reader.onload = () => resolve(reader.result);
    reader.onerror = reject;
    reader.readAsDataURL(file);
  });
}

function coletaDados(base64Foto){
  return {
    cpf: document.getElementById('cpf').value.trim(),
    nome: document.getElementById('nome').value.trim(),
    endereco: document.getElementById('endereco').value.trim(),
    data_nascimento: document.getElementById('data_nascimento').value,
    foto: base64Foto || ''
  };
}

/* ---------- CRUD ---------- */
async function inserir() {
  if(!validaCampos()) return;
  const base64 = await getFotoBase64();
  const pessoa = coletaDados(base64);

  const res = await fetch(API, {
    method: 'POST',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify(pessoa)
  });
  const data = await res.json();
  if(res.ok) alert('Inserido com sucesso!');
  else alert('Erro: ' + (data.error || ''));
  listar();
}

async function alterar() {
  if(!validaCampos()) return;
  const cpf = document.getElementById('cpf').value.trim();
  const base64 = await getFotoBase64();
  const novosDados = coletaDados();
  if(base64) novosDados.foto = base64;

  const res = await fetch(`${API}/${encodeURIComponent(cpf)}`, {
    method: 'PUT',
    headers: {'Content-Type': 'application/json'},
    body: JSON.stringify(novosDados)
  });
  const data = await res.json();
  if(res.ok) alert('Alterado com sucesso!');
  else alert('Erro: ' + (data.error || ''));
  listar();
}

async function remover() {
  const cpf = document.getElementById('cpf').value.trim();
  if(!cpf) return alert('Informe o CPF para remover.');
  if(confirm('Confirma a exclus√£o?')){
    const res = await fetch(`${API}/${encodeURIComponent(cpf)}`, {method:'DELETE'});
    const data = await res.json();
    if(res.ok) alert('Removido com sucesso!');
    else alert('Erro: ' + (data.error || ''));
    listar();
  }
}

async function pesquisar() {
  const termo = document.getElementById('pesquisa').value.trim();
  if(!termo){ listar(); return; }
  const res = await fetch(`${API}?q=${encodeURIComponent(termo)}`);
  const data = await res.json();
  preencheTabela(data);
}

async function listar() {
  const res = await fetch(API);
  const data = await res.json();
  preencheTabela(data);
}

/* ---------- UI ---------- */
function preencheTabela(lista){
  const tbody = document.getElementById('tabela');
  tbody.innerHTML = '';
  lista.forEach(p=>{
    const tr = document.createElement('tr');
    tr.innerHTML = `
      <td>${p.cpf}</td>
      <td>${p.foto ? `<img class="thumb" src="${p.foto}" alt="foto">` : ''}</td>
      <td>${p.nome}</td>
      <td>${p.endereco}</td>
      <td>${p.data_nascimento}</td>`;
    tr.onclick = () => {
      document.getElementById('cpf').value = p.cpf;
      document.getElementById('nome').value = p.nome;
      document.getElementById('endereco').value = p.endereco;
      document.getElementById('data_nascimento').value = p.data_nascimento;
    };
    tbody.appendChild(tr);
  });
}

listar();
</script>
</body>
</html>
```

## Exemplo 04 - SERVIDOR DE APLICA√á√ÉO JAVA

![](images/clipboard-3162947411.png)

[ Vou refazer estes exemplo ]

## Exemplo 05 - SERVIDOR DE APLICA√á√ÉO C++

![](images/clipboard-2416235942.png)

Neste exemplo, temos uma aplica√ß√£o cliente feita html e javascript

A interface do Cliente √© feita em HTML5

A conex√£o com o servidor √© feita pelo javascript incorporado no HTML:

CRUD no cliente √© feito peloa javascript utilizando metodologia Restful sobre protocolo HTTP 2.0

O servidor Restful √© feito em linguagem C++

A linguagem C++ precisa ser compilada.

PORTANTO O C√ìDIGO DO SERVIDOR PRECISAR√Å SER COMPILADO.

EM C++ VAMOS USAR BIBLIOTECAS EXTERNAS libpqxx e crow

OBS: N√ÉO TEMOS CONTROLE DE SESS√ÉO DE CLIENTE IMPLEMENTADO.

estrutura de diret√≥rios:

``` css
pessoas-rest-cpp/
‚îú‚îÄ CMakeLists.txt
‚îú‚îÄ src/
‚îÇ   ‚îî‚îÄ main.cpp
‚îî‚îÄ include/
    ‚îî‚îÄ crow_all.h        ‚Üê header √∫nico da biblioteca Crow
```

### Criando o arquivo C++ do servidor

``` cpp
#include "crow_all.h"
#include <pqxx/pqxx>
#include <iostream>

const std::string CONN_STR =
    "postgresql://postgres:MinhaSuperSenha@db.pbbtfwmydxmxdibmtbqq.supabase.co:5432/postgres";

int main() {
    crow::SimpleApp app;

    // GET /pessoas
    CROW_ROUTE(app, "/pessoas").methods("GET"_method)
    ([](const crow::request& req){
        pqxx::connection c(CONN_STR);
        pqxx::work w(c);
        std::string q = req.url_params.get("q") ? req.url_params.get("q") : "";
        pqxx::result r;
        if(!q.empty()) {
            r = w.exec_params(
                "SELECT cpf,nome,endereco,data_nascimento,foto "
                "FROM pessoas WHERE lower(nome) LIKE lower('%'||$1||'%') OR cpf LIKE '%'||$1||'%'",
                q);
        } else {
            r = w.exec("SELECT cpf,nome,endereco,data_nascimento,foto FROM pessoas");
        }
        crow::json::wvalue out;
        size_t i=0;
        for(auto row : r) {
            out[i]["cpf"] = row["cpf"].c_str();
            out[i]["nome"] = row["nome"].c_str();
            out[i]["endereco"] = row["endereco"].c_str();
            out[i]["dataNascimento"] = row["data_nascimento"].c_str();
            out[i]["foto"] = row["foto"].is_null() ? "" : row["foto"].c_str();
            ++i;
        }
        return crow::response(out);
    });

    // POST /pessoas
    CROW_ROUTE(app, "/pessoas").methods("POST"_method)
    ([](const crow::request& req){
        auto body = crow::json::load(req.body);
        if(!body || !body.has("cpf"))
            return crow::response(400, "CPF √© obrigat√≥rio");

        try {
            pqxx::connection c(CONN_STR);
            pqxx::work w(c);
            w.exec_params(
                "INSERT INTO pessoas (cpf,nome,endereco,data_nascimento,foto) "
                "VALUES ($1,$2,$3,$4,$5)",
                body["cpf"].s(),
                body["nome"].s_or(""),
                body["endereco"].s_or(""),
                body["dataNascimento"].s_or(""),
                body["foto"].s_or("")
            );
            w.commit();
            return crow::response(201, "Inserido");
        } catch(const std::exception &e) {
            return crow::response(400, e.what());
        }
    });

    // PUT /pessoas/<cpf>
    CROW_ROUTE(app, "/pessoas/<string>").methods("PUT"_method)
    ([](const crow::request& req, std::string cpf){
        auto body = crow::json::load(req.body);
        if(!body)
            return crow::response(400, "JSON inv√°lido");
        try {
            pqxx::connection c(CONN_STR);
            pqxx::work w(c);
            w.exec_params(
                "UPDATE pessoas SET nome=$1,endereco=$2,data_nascimento=$3,foto=$4 WHERE cpf=$5",
                body["nome"].s_or(""),
                body["endereco"].s_or(""),
                body["dataNascimento"].s_or(""),
                body["foto"].s_or(""),
                cpf
            );
            if(w.affected_rows() == 0) return crow::response(404, "CPF n√£o encontrado");
            w.commit();
            return crow::response(200, "Alterado");
        } catch(const std::exception &e) {
            return crow::response(400, e.what());
        }
    });

    // DELETE /pessoas/<cpf>
    CROW_ROUTE(app, "/pessoas/<string>").methods("DELETE"_method)
    ([](const crow::request&, std::string cpf){
        try {
            pqxx::connection c(CONN_STR);
            pqxx::work w(c);
            w.exec_params("DELETE FROM pessoas WHERE cpf=$1", cpf);
            if(w.affected_rows() == 0) return crow::response(404, "CPF n√£o encontrado");
            w.commit();
            return crow::response(200, "Removido");
        } catch(const std::exception &e) {
            return crow::response(400, e.what());
        }
    });

    std::cout << "Servidor rodando em http://0.0.0.0:8080\n";
    app.port(8080).multithreaded().run();
}
```

### Ferramenta de compila√ß√£o CMAKE

Preparando o arquivo de instru√ß√µes da ferramenta de projeto CMAKE

``` txt
cmake_minimum_required(VERSION 3.20)
project(PessoasRestCpp LANGUAGES CXX)

set(CMAKE_CXX_STANDARD 17)
set(CMAKE_CXX_STANDARD_REQUIRED ON)

# Caminho para os headers (Crow e outros)
include_directories(${CMAKE_SOURCE_DIR}/include)

# Localiza√ß√£o de libpqxx (ajuste se estiver em pasta diferente)
find_package(PostgreSQL REQUIRED)
find_path(PQXX_INCLUDE_DIR pqxx/pqxx)
find_library(PQXX_LIBRARY pqxx)

if(NOT PQXX_INCLUDE_DIR OR NOT PQXX_LIBRARY)
    message(FATAL_ERROR "libpqxx n√£o encontrada. Instale com vcpkg ou aponte manualmente.")
endif()

add_executable(pessoas-rest
    src/main.cpp
)

target_include_directories(pessoas-rest PRIVATE ${PQXX_INCLUDE_DIR})
target_link_libraries(pessoas-rest
    ${PQXX_LIBRARY}
    PostgreSQL::PostgreSQL
)
```

Adicionando biblioteca extra no compilador C++ do windows

``` cmd
vcpkg install libpqxx
```

Gere o projeto do servidor para "Visual Studio 17 2022" E ARQUITETURA x64

``` cmd
cmake -B build -G "Visual Studio 17 2022" -A x64  -DCMAKE_TOOLCHAIN_FILE=C:/path/to/vcpkg/scripts/buildsystems/vcpkg.cmake
```

Compile e linque todo o projeto

``` cmd
cmake --build build --config Release
```

execute o servidor

``` cmd
build/Release/pessoas-rest.exe
```

servidor estar√° rodando na porta 8080 e EXP√ïE A API de opera√ß√µes na URI <http://localhost:8080/pessoas> sem senha

``` css
http://localhost:8080/pessoas
```

### Cliente HTML (conex√£o Restful)

crie o arquivo index.html e abra-o no navegador

``` html
<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Cadastro de Pessoas</title>
<style>
  body { font-family: Arial, sans-serif; margin: 20px; }
  h1 { color: #333; }
  form { margin-bottom: 20px; }
  label { display: block; margin-top: 10px; }
  input[type=text], input[type=date], input[type=file] {
    width: 300px; padding: 5px;
  }
  table { border-collapse: collapse; width: 100%; margin-top: 20px; }
  th, td { border: 1px solid #aaa; padding: 6px; text-align: left; }
  img { max-width: 80px; max-height: 80px; }
  .btn { padding: 4px 8px; cursor: pointer; margin: 0 2px; }
</style>
</head>
<body>

<h1>Cadastro de Pessoas</h1>

<form id="pessoaForm">
  <label>CPF*:
    <input type="text" id="cpf" required>
  </label>
  <label>Nome:
    <input type="text" id="nome">
  </label>
  <label>Endere√ßo:
    <input type="text" id="endereco">
  </label>
  <label>Data de Nascimento:
    <input type="date" id="dataNascimento">
  </label>
  <label>Foto:
    <input type="file" id="foto">
  </label>
  <button type="submit" class="btn">Salvar</button>
</form>

<div>
  <input type="text" id="search" placeholder="Buscar por CPF ou Nome">
  <button id="btnBuscar" class="btn">Buscar</button>
  <button id="btnListar" class="btn">Listar Todos</button>
</div>

<table id="tabelaPessoas">
  <thead>
    <tr>
      <th>CPF</th><th>Nome</th><th>Endere√ßo</th><th>Nascimento</th><th>Foto</th><th>A√ß√µes</th>
    </tr>
  </thead>
  <tbody></tbody>
</table>

<script>
const API_URL = "http://localhost:8080/pessoas";

async function carregarPessoas(query="") {
  const url = query ? `${API_URL}?q=${encodeURIComponent(query)}` : API_URL;
  const resp = await fetch(url);
  const data = await resp.json();
  const tbody = document.querySelector("#tabelaPessoas tbody");
  tbody.innerHTML = "";
  data.forEach(p => {
    const tr = document.createElement("tr");
    tr.innerHTML = `
      <td>${p.cpf}</td>
      <td>${p.nome || ""}</td>
      <td>${p.endereco || ""}</td>
      <td>${p.dataNascimento || ""}</td>
      <td>${p.foto ? `<img src="${p.foto}" alt="foto">` : ""}</td>
      <td>
        <button class="btn" onclick="editar('${p.cpf}')">Editar</button>
        <button class="btn" onclick="excluir('${p.cpf}')">Excluir</button>
      </td>
    `;
    tbody.appendChild(tr);
  });
}

async function toBase64(file) {
  return new Promise((resolve, reject) => {
    const reader = new FileReader();
    reader.onload = () => resolve(reader.result);
    reader.onerror = reject;
    reader.readAsDataURL(file);
  });
}

document.getElementById("pessoaForm").addEventListener("submit", async e => {
  e.preventDefault();
  const cpf = document.getElementById("cpf").value.trim();
  if (!cpf) { alert("CPF √© obrigat√≥rio."); return; }

  const nome = document.getElementById("nome").value.trim();
  const endereco = document.getElementById("endereco").value.trim();
  const dataNascimento = document.getElementById("dataNascimento").value;
  const fotoFile = document.getElementById("foto").files[0];
  let fotoBase64 = "";
  if (fotoFile) {
    fotoBase64 = await toBase64(fotoFile);
  }

  // Se j√° existe, usa PUT, sen√£o POST
  const method = document.getElementById("cpf").dataset.editing ? "PUT" : "POST";
  const url = method === "PUT" ? `${API_URL}/${cpf}` : API_URL;

  const resp = await fetch(url, {
    method,
    headers: { "Content-Type": "application/json" },
    body: JSON.stringify({ cpf, nome, endereco, dataNascimento, foto: fotoBase64 })
  });

  if (resp.ok) {
    alert("Salvo com sucesso!");
    document.getElementById("pessoaForm").reset();
    document.getElementById("cpf").dataset.editing = "";
    carregarPessoas();
  } else {
    alert("Erro: " + await resp.text());
  }
});

function editar(cpf) {
  const row = [...document.querySelectorAll("#tabelaPessoas tbody tr")]
    .find(tr => tr.children[0].textContent === cpf);
  if (!row) return;
  document.getElementById("cpf").value = cpf;
  document.getElementById("nome").value = row.children[1].textContent;
  document.getElementById("endereco").value = row.children[2].textContent;
  document.getElementById("dataNascimento").value = row.children[3].textContent;
  document.getElementById("cpf").dataset.editing = "true";
  window.scrollTo({ top: 0, behavior: 'smooth' });
}

async function excluir(cpf) {
  if (!confirm(`Excluir CPF ${cpf}?`)) return;
  const resp = await fetch(`${API_URL}/${cpf}`, { method: "DELETE" });
  if (resp.ok) {
    carregarPessoas();
  } else {
    alert("Erro: " + await resp.text());
  }
}

document.getElementById("btnBuscar").addEventListener("click", () => {
  const q = document.getElementById("search").value.trim();
  carregarPessoas(q);
});

document.getElementById("btnListar").addEventListener("click", () => {
  document.getElementById("search").value = "";
  carregarPessoas();
});

// Carregar lista inicial
carregarPessoas();
</script>
</body>
</html>
```

<!--chapter:end:05-2026-03-17_Aplicacao_CRUD-exercicio.Rmd-->

# Banco de Dados: MySQL (MariaDB)
#### 08/09/2025 {.unnumbered}
#### Professor Migu√©l Suares {.unnumbered}

<!--chapter:end:06-2026-03-24_MySQL-aula.Rmd-->

# Banco de Dados: MySQL (MariaDB)
#### 08/09/2025 {.unnumbered}
#### Professor Migu√©l Suares {.unnumbered}

<!--chapter:end:06-2026-03-24_MySQL-exercicio.Rmd-->

# Banco de Dados: Postgres
#### 22/09/2025 {.unnumbered}
#### Professor Migu√©l Suares {.unnumbered}

<!--chapter:end:07-2026-04-07_Postgres-aula.Rmd-->

# Banco de Dados: Postgres
#### 22/09/2025 {.unnumbered}
#### Professor Migu√©l Suares {.unnumbered}

<!--chapter:end:07-2026-04-07_Postgres-exercicio.Rmd-->

# Banco de Dados Espaciais - Cliente QGIS
#### 29/09/2025 {.unnumbered}
#### Professor Migu√©l Suares {.unnumbered}

<!--chapter:end:08-2026-04-14_QGIS-aula.Rmd-->

# Banco de Dados Espaciais - Cliente QGIS
#### 29/09/2025 {.unnumbered}
#### Professor Migu√©l Suares {.unnumbered}

<!--chapter:end:08-2026-04-14_QGIS-exercicio.Rmd-->

# Banco de Dados Estat√≠stico - Cliente Rstudio
#### 06/10/2025 {.unnumbered}
#### Professor Migu√©l Suares {.unnumbered}

<!--chapter:end:09-2026-04-21_Rstudio-aula.Rmd-->

# Banco de Dados Estat√≠stico - Cliente Rstudio
#### 06/10/2025 {.unnumbered}
#### Professor Migu√©l Suares {.unnumbered}

<!--chapter:end:09-2026-04-21_Rstudio-exercicio.Rmd-->

# Banco de Dados - An√°lise de Dados Parte 01
#### 13/10/2025 {.unnumbered}
#### Professor Migu√©l Suares {.unnumbered}

<!--chapter:end:10-2026-04-28_Analise_01-aula.Rmd-->

# Banco de Dados - An√°lise de Dados Parte 01
#### 13/10/2025 {.unnumbered}
#### Professor Migu√©l Suares {.unnumbered}

<!--chapter:end:10-2026-04-28_Analise_01-exercicio.Rmd-->

# Banco de Dados - An√°lise de Dados Parte 02
#### 20/10/2025 {.unnumbered}
#### Professor Migu√©l Suares {.unnumbered}

<!--chapter:end:11-2026-05-05_Analise_02-aula.Rmd-->

# Banco de Dados - An√°lise de Dados Parte 02
#### 20/10/2025 {.unnumbered}
#### Professor Migu√©l Suares {.unnumbered}

<!--chapter:end:11-2026-05-05_Analise_02-exercicio.Rmd-->

# Banco de Dados - An√°lise de Dados Parte 03
#### 27/10/2025 {.unnumbered}
#### Professor Migu√©l Suares {.unnumbered}

<!--chapter:end:12-2026-05-12_Analise_03-aula.Rmd-->

# Banco de Dados - An√°lise de Dados Parte 03

#### 27/10/2025 {.unnumbered}

#### Professor Migu√©l Suares {.unnumbered}


<!--chapter:end:12-2026-05-12_Analise_03-exercicio.Rmd-->

