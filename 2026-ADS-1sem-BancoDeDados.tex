% Options for packages loaded elsewhere
\PassOptionsToPackage{unicode}{hyperref}
\PassOptionsToPackage{hyphens}{url}
\documentclass[
]{book}
\usepackage{xcolor}
\usepackage{amsmath,amssymb}
\setcounter{secnumdepth}{5}
\usepackage{iftex}
\ifPDFTeX
  \usepackage[T1]{fontenc}
  \usepackage[utf8]{inputenc}
  \usepackage{textcomp} % provide euro and other symbols
\else % if luatex or xetex
  \usepackage{unicode-math} % this also loads fontspec
  \defaultfontfeatures{Scale=MatchLowercase}
  \defaultfontfeatures[\rmfamily]{Ligatures=TeX,Scale=1}
\fi
\usepackage{lmodern}
\ifPDFTeX\else
  % xetex/luatex font selection
\fi
% Use upquote if available, for straight quotes in verbatim environments
\IfFileExists{upquote.sty}{\usepackage{upquote}}{}
\IfFileExists{microtype.sty}{% use microtype if available
  \usepackage[]{microtype}
  \UseMicrotypeSet[protrusion]{basicmath} % disable protrusion for tt fonts
}{}
\makeatletter
\@ifundefined{KOMAClassName}{% if non-KOMA class
  \IfFileExists{parskip.sty}{%
    \usepackage{parskip}
  }{% else
    \setlength{\parindent}{0pt}
    \setlength{\parskip}{6pt plus 2pt minus 1pt}}
}{% if KOMA class
  \KOMAoptions{parskip=half}}
\makeatother
\usepackage{color}
\usepackage{fancyvrb}
\newcommand{\VerbBar}{|}
\newcommand{\VERB}{\Verb[commandchars=\\\{\}]}
\DefineVerbatimEnvironment{Highlighting}{Verbatim}{commandchars=\\\{\}}
% Add ',fontsize=\small' for more characters per line
\usepackage{framed}
\definecolor{shadecolor}{RGB}{248,248,248}
\newenvironment{Shaded}{\begin{snugshade}}{\end{snugshade}}
\newcommand{\AlertTok}[1]{\textcolor[rgb]{0.94,0.16,0.16}{#1}}
\newcommand{\AnnotationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\AttributeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\BaseNTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\BuiltInTok}[1]{#1}
\newcommand{\CharTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\CommentTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\CommentVarTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ConstantTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\ControlFlowTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\DataTypeTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{#1}}
\newcommand{\DecValTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\DocumentationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\ErrorTok}[1]{\textcolor[rgb]{0.64,0.00,0.00}{\textbf{#1}}}
\newcommand{\ExtensionTok}[1]{#1}
\newcommand{\FloatTok}[1]{\textcolor[rgb]{0.00,0.00,0.81}{#1}}
\newcommand{\FunctionTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\ImportTok}[1]{#1}
\newcommand{\InformationTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\newcommand{\KeywordTok}[1]{\textcolor[rgb]{0.13,0.29,0.53}{\textbf{#1}}}
\newcommand{\NormalTok}[1]{#1}
\newcommand{\OperatorTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\OtherTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{#1}}
\newcommand{\PreprocessorTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textit{#1}}}
\newcommand{\RegionMarkerTok}[1]{#1}
\newcommand{\SpecialCharTok}[1]{\textcolor[rgb]{0.81,0.36,0.00}{\textbf{#1}}}
\newcommand{\SpecialStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\StringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\VariableTok}[1]{\textcolor[rgb]{0.00,0.00,0.00}{#1}}
\newcommand{\VerbatimStringTok}[1]{\textcolor[rgb]{0.31,0.60,0.02}{#1}}
\newcommand{\WarningTok}[1]{\textcolor[rgb]{0.56,0.35,0.01}{\textbf{\textit{#1}}}}
\usepackage{longtable,booktabs,array}
\usepackage{calc} % for calculating minipage widths
% Correct order of tables after \paragraph or \subparagraph
\usepackage{etoolbox}
\makeatletter
\patchcmd\longtable{\par}{\if@noskipsec\mbox{}\fi\par}{}{}
\makeatother
% Allow footnotes in longtable head/foot
\IfFileExists{footnotehyper.sty}{\usepackage{footnotehyper}}{\usepackage{footnote}}
\makesavenoteenv{longtable}
\usepackage{graphicx}
\makeatletter
\newsavebox\pandoc@box
\newcommand*\pandocbounded[1]{% scales image to fit in text height/width
  \sbox\pandoc@box{#1}%
  \Gscale@div\@tempa{\textheight}{\dimexpr\ht\pandoc@box+\dp\pandoc@box\relax}%
  \Gscale@div\@tempb{\linewidth}{\wd\pandoc@box}%
  \ifdim\@tempb\p@<\@tempa\p@\let\@tempa\@tempb\fi% select the smaller of both
  \ifdim\@tempa\p@<\p@\scalebox{\@tempa}{\usebox\pandoc@box}%
  \else\usebox{\pandoc@box}%
  \fi%
}
% Set default figure placement to htbp
\def\fps@figure{htbp}
\makeatother
\usepackage{svg}
\setlength{\emergencystretch}{3em} % prevent overfull lines
\providecommand{\tightlist}{%
  \setlength{\itemsep}{0pt}\setlength{\parskip}{0pt}}
\usepackage[]{natbib}
\bibliographystyle{plainnat}
\usepackage{booktabs}
\usepackage{bookmark}
\IfFileExists{xurl.sty}{\usepackage{xurl}}{} % add URL line breaks if available
\urlstyle{same}
\hypersetup{
  pdftitle={ADS - Banco de dados e No-SQL - 2026 - Anota√ß√µes de aula},
  pdfauthor={Professor Migu√©l Suares},
  hidelinks,
  pdfcreator={LaTeX via pandoc}}

\title{ADS - Banco de dados e No-SQL - 2026 - Anota√ß√µes de aula}
\author{Professor Migu√©l Suares}
\date{2026-02-20}

\begin{document}
\maketitle

{
\setcounter{tocdepth}{1}
\tableofcontents
}
\chapter*{Sobre estas anota√ß√µes}\label{sobre-estas-anotauxe7uxf5es}
\addcontentsline{toc}{chapter}{Sobre estas anota√ß√µes}

---------------------------------------------------------------------------------------------------------------------------------------

Estas anota√ß√µes s√£o apenas lembretes das aulas expostas em sala, durante a disciplina de Banco de dados.

\section{ACESSO AO GITBOOK CELULAR}\label{acesso-ao-gitbook-celular}

---------------------------------------------------------------------------------------------------------------------------------------

\subsubsection{\texorpdfstring{\url{https://github.com/miguel7penteado/2026-1sem-ADS-BancoDeDados}}{https://github.com/miguel7penteado/2026-1sem-ADS-BancoDeDados}}\label{httpsgithub.commiguel7penteado2026-1sem-ads-bancodedados}

\pandocbounded{\includegraphics[keepaspectratio]{images/qr-code-disciplina.jpg}}

\section{Leitores de formato de arquivo EPUB para SmartPhone}\label{leitores-de-formato-de-arquivo-epub-para-smartphone}

---------------------------------------------------------------------------------------------------------------------------------------

\subsection{ANDROID}\label{android}

\subsubsection{\texorpdfstring{\textbf{Moon+ Reader}}{Moon+ Reader}}\label{moon-reader}

\includegraphics[width=3.54167in,height=\textheight,keepaspectratio]{images/qrcode/leitor_epub/MoonReaderPlus.jpg}

\section{Livros Texto da Disciplina}\label{livros-texto-da-disciplina}

---------------------------------------------------------------------------------------------------------------------------------------

\subsection{\texorpdfstring{\href{https://www.kufunda.net/publicdocs/Introdu\%C3\%A7\%C3\%A3o\%20a\%20Sistemas\%20de\%20Bancos\%20de\%20Dados\%20(C.\%20J.\%20Date)\%20(z-lib.org).pdf}{``Introdu√ß√£o a sistemas de bancos de dados'' do autor ``\textbf{Christopher John Date}''}}{``Introdu√ß√£o a sistemas de bancos de dados'' do autor ``Christopher John Date''}}\label{introduuxe7uxe3o-a-sistemas-de-bancos-de-dados-do-autor-christopher-john-date}

\pandocbounded{\includegraphics[keepaspectratio]{images/livros/livro1.jpg}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 2\tabcolsep) * \real{0.2202}}
  >{\raggedright\arraybackslash}p{(\linewidth - 2\tabcolsep) * \real{0.7798}}@{}}
\toprule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{Autor(es)} & \begin{minipage}[t]{\linewidth}\raggedright
\subsection{\texorpdfstring{\href{https://en.wikipedia.org/wiki/Christopher_J._Date}{\textbf{Christopher John Date}}}{Christopher John Date}}\label{christopher-john-date}
\end{minipage} \\
\textbf{Editora} & LTC \\
\textbf{Idioma} & Portugu√™s \\
\textbf{ISBN} & 978-85-352-8445-4 \\
\textbf{Formato} & Capa dura \\
\textbf{P√°ginas} & 1623 \\
\textbf{C√≥digo Biblioteca} & \\
\end{longtable}

\subsection{\texorpdfstring{\href{https://drive.google.com/file/d/0B452rmbcudPSVFdCZ09vVkJUUUd2dlpMNS1vaEczUQ/view?pli=1&resourcekey=0-3MTcHlAYjPX6YSvBQGweUQ}{``\textbf{Projeto de bancos de dados}'' do autor ``Carlos Alberto HEUSER''}}{``Projeto de bancos de dados'' do autor ``Carlos Alberto HEUSER''}}\label{projeto-de-bancos-de-dados-do-autor-carlos-alberto-heuser}

\pandocbounded{\includegraphics[keepaspectratio]{images/livros/livro2.jpg}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 2\tabcolsep) * \real{0.2069}}
  >{\raggedright\arraybackslash}p{(\linewidth - 2\tabcolsep) * \real{0.7931}}@{}}
\toprule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\textbf{Autor(es)} & \begin{minipage}[t]{\linewidth}\raggedright
\subsection{\texorpdfstring{\href{https://www.inf.ufrgs.br/site/docente/carlos-alberto-heuser/}{Carlos Alberto HEUSER}}{Carlos Alberto HEUSER}}\label{carlos-alberto-heuser}
\end{minipage} \\
\textbf{Editora} & Bookman \\
\textbf{Idioma} & Portugu√™s \\
\textbf{ISBN-10} & 8577803821 \\
\textbf{Formato} & Impresso \\
\textbf{P√°ginas} & 282 \\
\textbf{C√≥digo Biblioteca} & \\
\end{longtable}

\section{Calend√°rio das aulas}\label{calenduxe1rio-das-aulas}

\subsection{Fevereiro de 2026}\label{fevereiro-de-2026}

---------------------------------------------------------------------------------------------------------------------------------------

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.1408}}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.1831}}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.1972}}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.4789}}@{}}
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Data
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Dia da Semana
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Aulas
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Conte√∫do
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
10/02/2026 & Ter√ßa-Feira & Aula Inaugural & Apresenta√ß√£o da disciplina \\
17/02/2026 & Ter√ßa-Feira & --- & \textbf{Carnaval -- N√£o haver√° aula} \\
24/02/2026 & Ter√ßa-Feira & Aula 2 & \textbf{Fundamentos de Bancos de Dados} \\
\end{longtable}

\subsection{Mar√ßo de 2026}\label{maruxe7o-de-2026}

---------------------------------------------------------------------------------------------------------------------------------------

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.1250}}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.1625}}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.0750}}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.6375}}@{}}
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Data
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Dia da Semana
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Aulas
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Conte√∫do
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
03/03/2026 & Ter√ßa-Feira & Aula 3 & \textbf{Modelagem de Banco de Dados (I)} \\
10/03/2026 & Ter√ßa-Feira & Aula 4 & \textbf{Modelagem de Banco de Dados (II)} \\
17/03/2026 & Ter√ßa-Feira & Aula 5 & \textbf{Administra√ß√£o e Gerenciamento de Banco de Dados} \\
24/03/2026 & Ter√ßa-Feira & Aula 6 & \textbf{Aplica√ß√£o CRUD} \\
31/03/2026 & Ter√ßa-Feira & NP1 & \textbf{PROVA} \\
\end{longtable}

\subsection{Abril de 2026}\label{abril-de-2026}

---------------------------------------------------------------------------------------------------------------------------------------

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.1471}}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.1912}}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.0882}}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.5735}}@{}}
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Data
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Dia da Semana
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Aulas
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Conte√∫do
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
07/04/2026 & Ter√ßa-Feira & Aula 7 & \textbf{MySQL} \\
14/04/2026 & Ter√ßa-Feira & Aula 8 & \textbf{PostgreSQL} \\
21/04/2026 & Ter√ßa-Feira & --- & \textbf{Dia de Tiradentes -- N√£o haver√° aula} \\
28/04/2026 & Ter√ßa-Feira & Aula 9 & \textbf{SGBD Espacial -- Python} \\
\end{longtable}

\subsection{Maio de 2026}\label{maio-de-2026}

---------------------------------------------------------------------------------------------------------------------------------------

\begin{longtable}[]{@{}llll@{}}
\toprule\noalign{}
Data & Dia da Semana & Aulas & Conte√∫do \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
05/05/2026 & Ter√ßa-Feira & Aula 10 & \textbf{SGBD e linguagem R} \\
12/05/2026 & Ter√ßa-Feira & Aula 11 & \textbf{An√°lise 1} \\
19/05/2026 & Ter√ßa-Feira & NP2 & \textbf{PROVA} \\
26/05/2026 & Ter√ßa-Feira & SUB & \textbf{PROVA SUBSTITUTIVA} \\
\end{longtable}

\subsection{Junho de 2026}\label{junho-de-2026}

---------------------------------------------------------------------------------------------------------------------------------------

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.1667}}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.2167}}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.1167}}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.5000}}@{}}
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Data
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Dia da Semana
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Aulas
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Conte√∫do
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
02/06/2026 & Ter√ßa-Feira & Aula 12 & \textbf{An√°lise 2} \\
09/06/2026 & Ter√ßa-Feira & EXA & \textbf{EXAME -- PROVA SUBSTITUTIVA} \\
16/06/2026 & Ter√ßa-Feira & Aula 13 & \textbf{An√°lise 3} \\
23/06/2026 & Ter√ßa-Feira & Aula 14 & \textbf{An√°lise 4} \\
30/06/2026 & Ter√ßa-Feira & Aula 15 & Encerramento da disciplina \\
\end{longtable}

\section{Alunos 2026 - 1o Semestre}\label{alunos-2026---1o-semestre}

---------------------------------------------------------------------------------------------------------------------------------------

\subsection{Campus Ch√°cara Santo Ant√¥nio}\label{campus-chuxe1cara-santo-antuxf4nio}

\chapter{Postgres (Zip Version) Windows Starting Guide}\label{postgres-zip-version-windows-starting-guide}

Download postgresql from \url{https://www.enterprisedb.com/download-postgresql-binaries};

Unzip it;

Open a cmd;

Enter into the `bin' directory;

Init the database:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{initdb}\OperatorTok{.}\FunctionTok{exe} \OperatorTok{{-}}\NormalTok{D }\OperatorTok{../}\KeywordTok{data}\NormalTok{ ‚Äìusername}\OperatorTok{=}\NormalTok{postgres ‚Äìauth}\OperatorTok{=}\NormalTok{trust}
\end{Highlighting}
\end{Shaded}

Start the database:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{pg\_ctl}\OperatorTok{.}\FunctionTok{exe} \FunctionTok{start} \OperatorTok{{-}}\NormalTok{D }\OperatorTok{../}\KeywordTok{data}
\end{Highlighting}
\end{Shaded}

Open another cmd;

Enter into the `bin' directory;

Log into the database:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{psql.exe ‚Äìusername=postgres}
\end{Highlighting}
\end{Shaded}

Create a password for your user:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{ALTER} \FunctionTok{USER}\NormalTok{ postgres }\KeywordTok{WITH} \KeywordTok{PASSWORD}\NormalTok{ ‚ÄòVeryVerySecret‚Äô;}
\end{Highlighting}
\end{Shaded}

Install adminpack extension:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{CREATE}\NormalTok{ EXTENSION adminpack;}
\end{Highlighting}
\end{Shaded}

Reference: \url{https://feilerdev.wordpress.com/2017/12/05/installing-postgresql-on-windows-using-zip-archive-without-the-installer/}

\chapter{\texorpdfstring{\textbf{Aula Inaugural}}{Aula Inaugural}}\label{aula-inaugural}

\subsubsection*{\texorpdfstring{\textbf{2026/10/02}}{2026/10/02}}\label{section}
\addcontentsline{toc}{subsubsection}{\textbf{2026/10/02}}

\subsubsection*{\texorpdfstring{Professor \textbf{Migu√©l Suares}}{Professor Migu√©l Suares}}\label{professor-miguuxe9l-suares}
\addcontentsline{toc}{subsubsection}{Professor \textbf{Migu√©l Suares}}

\section{\texorpdfstring{Disciplina: \textbf{Banco de Dados}}{Disciplina: Banco de Dados}}\label{disciplina-banco-de-dados}

\begin{itemize}
\tightlist
\item
  Curso: An√°lise e Desenvolvimento de Sistemas (ADS)
\item
  Per√≠odo: \textbf{Noturno}
\item
  Turma: \textbf{1¬∫ semestre de 2026}
\item
  Campus: \textbf{Ch√°cara Santo Ant√¥nio}
\end{itemize}

\begin{quote}
``Dados s√£o o novo petr√≥leo.'' -- Clive Humby!
\end{quote}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{üë®‚Äçüè´ Sobre o Professor}\label{sobre-o-professor}

\begin{itemize}
\tightlist
\item
  Nome: Prof.~Migu√©l Suares
\item
  Forma√ß√£o: Mestre em Engenharia da Computa√ß√£o e Energia da Agricultura
\item
  Experi√™ncia: +10 anos com bancos de dados relacionais e an√°lise de dados
\item
  Contato: \href{mailto:miguel.penteado@docente.unip.br}{\nolinkurl{miguel.penteado@docente.unip.br}}
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{üéØ Objetivos da Disciplina}\label{objetivos-da-disciplina}

\begin{itemize}
\item
  Compreender os fundamentos de bancos de dados
\item
  Modelar dados com diagramas ER
\item
  Implementar e consultar bases de dados com SQL
\item
  Utilizar ferramentas como MySQL, PostgreSQL, QGIS e R
\item
  Desenvolver racioc√≠nio l√≥gico para resolver problemas com dados

  \pandocbounded{\includegraphics[keepaspectratio]{media/logos.jpg}}
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{üìÖ Calend√°rio da Disciplina}\label{calenduxe1rio-da-disciplina}

\begin{longtable}[]{@{}lll@{}}
\toprule\noalign{}
Data & Aula & Tema \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
04/08/2025 & Aula 1 & Aula Inaugural \\
11/08/2025 & Aula 2 & Fundamentos \\
18/08/2025 & Aula 3 & Modelagem e Diagramas \\
25/08/2025 & Aula 4 & Administra√ß√£o e Gerenciamento \\
01/09/2025 & Aula 5 & Aplica√ß√£o CRUD \\
08/09/2025 & Aula 6 & MySQL \\
15/09/2025 & \textbf{NP1} & \textbf{Prova} \\
22/09/2025 & Aula 7 & Postgres \\
29/09/2025 & Aula 8 & QGIS \\
06/10/2025 & Aula 9 & RStudio \\
13/10/2025 & Aula 10 & An√°lise I \\
20/10/2025 & Aula 11 & An√°lise II \\
27/10/2025 & Aula 12 & An√°lise III \\
03/11/2025 & \textbf{NP2} & \textbf{Prova} \\
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{üìö Ementa Resumida}\label{ementa-resumida}

\begin{itemize}
\item
  Introdu√ß√£o a bancos de dados relacionais (RDBMS)
\item
  Modelagem de dados (M.E.R.) e diagramas Entidade Relacionamento (D.E.R.)
\item
  Linguagem SQL: DDL, DML, DCL
\item
  Ferramentas: MySQL, PostgreSQL
\item
  Visualiza√ß√£o geoespacial (QGIS)
\item
  An√°lise e explora√ß√£o de dados (R e RStudio)

  \includegraphics[width=3.44792in,height=\textheight,keepaspectratio]{media/modelagem.jpg}
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{üìù Avalia√ß√£o}\label{avaliauxe7uxe3o}

\begin{itemize}
\tightlist
\item
  \textbf{Provas (NP1 + NP2)}
\item
  \textbf{Prova Substitutiva}
\item
  \textbf{Exame}
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{üõ†Ô∏è Ferramentas da Disciplina}\label{ferramentas-da-disciplina}

\begin{itemize}
\tightlist
\item
  \textbf{Servidores de Banco de Dados}: MySQL, PostgreSQL
\item
  \textbf{Servidores de Banco de Dados}: pgAdmin, MySQL Workbench, DBeaver\textbackslash{}
\item
  \textbf{Geoprocessamento}: QGIS\textbackslash{}
\item
  \textbf{An√°lise de Dados}: R + RStudio\textbackslash{}
\item
  \textbf{Versionamento e Organiza√ß√£o}: GitHub, Teams
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{üìå Expectativas e Regras}\label{expectativas-e-regras}

\begin{itemize}
\tightlist
\item
  Pontualidade e entrega de atividades no prazo
\item
  Trabalhos devem ser originais (sem pl√°gio)
\item
  Participa√ß√£o ativa nas discuss√µes e pr√°ticas
\item
  Uso respons√°vel das ferramentas
\item
  Respeito e colabora√ß√£o entre colegas
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{üí° Dicas para Mandar Bem}\label{dicas-para-mandar-bem}

\begin{itemize}
\tightlist
\item
  Fa√ßa os exerc√≠cios logo ap√≥s a aula
\item
  Participe das pr√°ticas com base real
\item
  Mantenha o reposit√≥rio do projeto atualizado
\item
  Refa√ßa consultas SQL at√© entender
\item
  Teste e documente suas solu√ß√µes
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{üôå Encerramento}\label{encerramento}

\section{Estamos prontos?}\label{estamos-prontos}

üìß D√∫vidas? Estou √† disposi√ß√£o\\
üìä Vamos construir conhecimento juntos!

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\chapter{Fundamentos de Sistemas de Bancos de Dados}\label{fundamentos-de-sistemas-de-bancos-de-dados}

\subsubsection*{24/02/2026}\label{section-1}
\addcontentsline{toc}{subsubsection}{24/02/2026}

\subsubsection*{Professor Miguel Suares}\label{professor-miguel-suares}
\addcontentsline{toc}{subsubsection}{Professor Miguel Suares}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{Parte I --- Linha do Tempo dos SGBDs}\label{parte-i-linha-do-tempo-dos-sgbds}

\subsection{O In√≠cio do Modelo Relacional}\label{o-inuxedcio-do-modelo-relacional}

\subsection{Edgar F. Codd (1923--2003)}\label{edgar-f.-codd-19232003}

\includegraphics[width=3.64583in,height=\textheight,keepaspectratio]{media/01-codd.jpg}

\begin{itemize}
\tightlist
\item
  Matem√°tico da IBM
\item
  1970: Publica o artigo:
\end{itemize}

\begin{quote}
\textbf{``A Relational Model of Data for Large Shared Data Banks''} (Um modelo relacional de dados para grandes bancos de dados compartilhados)
\end{quote}

Base matem√°tica do modelo:

\begin{itemize}
\tightlist
\item
  Teoria dos Conjuntos
\item
  L√≥gica de Predicados
\item
  √Ålgebra Relacional
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{System R e SQL}\label{system-r-e-sql}

\begin{itemize}
\tightlist
\item
  1970--1974: Desenvolvimento do \textbf{System R}
\item
  1974: Cria√ß√£o da linguagem \textbf{SQL}
\end{itemize}

\subsection{Raymond F. Boyce}\label{raymond-f.-boyce}

\includegraphics[width=3.125in,height=\textheight,keepaspectratio]{media/05-Boyce.jpg}

\subsection{Donald D. Chamberlin}\label{donald-d.-chamberlin}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{Modelo Entidade-Relacionamento}\label{modelo-entidade-relacionamento}

\subsection{Peter Chen}\label{peter-chen}

\includegraphics[width=4.16667in,height=\textheight,keepaspectratio]{media/modelagem.jpg}

\begin{itemize}
\tightlist
\item
  1976: Modelo ER
\item
  Ponte entre modelagem conceitual e implementa√ß√£o relacional
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{Escola de Berkeley}\label{escola-de-berkeley}

\subsection{Prof Michael Stonebraker}\label{prof-michael-stonebraker}

\includegraphics[width=3.64583in,height=\textheight,keepaspectratio]{media/07-Michael_StoneBraker.jpg}

\begin{itemize}
\tightlist
\item
  Projeto INGRES
\item
  Origem do Postgres
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{D√©cadas de Consolida√ß√£o}\label{duxe9cadas-de-consolidauxe7uxe3o}

\subsubsection{1980}\label{section-2}

\begin{itemize}
\tightlist
\item
  IBM DB2
\item
  Oracle
\item
  Sybase
\item
  Postgres
\end{itemize}

\subsubsection{1990}\label{section-3}

\begin{itemize}
\tightlist
\item
  PostgreSQL
\item
  MySQL
\end{itemize}

\includegraphics[width=3.64583in,height=\textheight,keepaspectratio]{media/09-mysql.jpg} \includegraphics[width=3.64583in,height=\textheight,keepaspectratio]{media/10-postgresql.jpg}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{Anos 2000 --- Big Data e NoSQL}\label{anos-2000-big-data-e-nosql}

\includegraphics[width=3.64583in,height=\textheight,keepaspectratio]{media/11-mongodb.jpg} \includegraphics[width=3.64583in,height=\textheight,keepaspectratio]{media/12-cassandra.jpg} \includegraphics[width=3.64583in,height=\textheight,keepaspectratio]{media/13-hadoop.jpg}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{Parte II --- Fundamentos Matem√°ticos do Modelo Relacional}\label{parte-ii-fundamentos-matemuxe1ticos-do-modelo-relacional}

Agora entramos na base formal que sustenta os SGBDs.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{1. Conceito de Rela√ß√£o}\label{conceito-de-relauxe7uxe3o}

Em Matem√°tica:

Sejam dois conjuntos A e B.

O \textbf{produto cartesiano} √©:

\begin{verbatim}
A √ó B = { (a,b) | a ‚àà A e b ‚àà B }
\end{verbatim}

Uma \textbf{rela√ß√£o R de A em B} √© qualquer subconjunto de A √ó B.

\begin{verbatim}
R ‚äÜ A √ó B
\end{verbatim}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{Rela√ß√£o em Banco de Dados}\label{relauxe7uxe3o-em-banco-de-dados}

No modelo relacional:

\begin{itemize}
\tightlist
\item
  Conjunto ‚Üí Dom√≠nio
\item
  Produto cartesiano ‚Üí Combina√ß√£o de atributos
\item
  Rela√ß√£o ‚Üí Tabela
\item
  Tupla ‚Üí Linha
\end{itemize}

Formalmente:

Uma tabela √© um subconjunto do produto cartesiano dos dom√≠nios dos atributos.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{2. Opera√ß√µes Relacionais}\label{operauxe7uxf5es-relacionais}

Baseadas na √Ålgebra Relacional de Codd.

\begin{longtable}[]{@{}lll@{}}
\toprule\noalign{}
Opera√ß√£o & S√≠mbolo & Descri√ß√£o \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Sele√ß√£o & œÉ & Filtra linhas \\
Proje√ß√£o & œÄ & Seleciona colunas \\
Uni√£o & ‚à™ & Combina rela√ß√µes compat√≠veis \\
Interse√ß√£o & ‚à© & Elementos comuns \\
Diferen√ßa & ‚àí & Subtra√ß√£o \\
Produto Cartesiano & √ó & Combina√ß√£o total \\
Jun√ß√£o & ‚ãà & Produto + Sele√ß√£o \\
Divis√£o & √∑ & Consulta universal \\
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{3. Propriedades de Rela√ß√µes}\label{propriedades-de-relauxe7uxf5es}

Seja R ‚äÜ A √ó A.

\subsection{3.1 Reflexiva}\label{reflexiva}

\begin{verbatim}
‚àÄx ‚àà A, (x,x) ‚àà R
\end{verbatim}

Exemplo: Rela√ß√£o ``‚â•'' nos n√∫meros reais.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{3.2 Sim√©trica}\label{simuxe9trica}

\begin{verbatim}
Se (x,y) ‚àà R ent√£o (y,x) ‚àà R
\end{verbatim}

Exemplo: Rela√ß√£o ``√© irm√£o de''.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{3.3 Transitiva}\label{transitiva}

\begin{verbatim}
Se (x,y) ‚àà R e (y,z) ‚àà R ent√£o (x,z) ‚àà R
\end{verbatim}

Exemplo: Rela√ß√£o ``‚â§''.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{3.4 Antissim√©trica}\label{antissimuxe9trica}

\begin{verbatim}
Se (x,y) ‚àà R e (y,x) ‚àà R ent√£o x = y
\end{verbatim}

Exemplo: Rela√ß√£o ``‚â§''.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{4. Rela√ß√£o de Equival√™ncia}\label{relauxe7uxe3o-de-equivaluxeancia}

Uma rela√ß√£o √© de equival√™ncia se √©:

\begin{itemize}
\tightlist
\item
  Reflexiva
\item
  Sim√©trica
\item
  Transitiva
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{Classes de Equival√™ncia}\label{classes-de-equivaluxeancia}

Dada rela√ß√£o \textasciitilde{} em A:

A classe de equival√™ncia de x √©:

\begin{verbatim}
[x] = { y ‚àà A | y ~ x }
\end{verbatim}

Exemplo em Banco de Dados:

Rela√ß√£o:

\begin{verbatim}
x ~ y  ‚ü∫  x mod 3 = y mod 3
\end{verbatim}

Classes:

\begin{itemize}
\tightlist
\item
  {[}0{]} = \{0,3,6,9,\ldots\}
\item
  {[}1{]} = \{1,4,7,\ldots\}
\item
  {[}2{]} = \{2,5,8,\ldots\}
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{Rela√ß√µes de Equival√™ncia e Normaliza√ß√£o}\label{relauxe7uxf5es-de-equivaluxeancia-e-normalizauxe7uxe3o}

Depend√™ncias funcionais induzem parti√ß√µes do conjunto de tuplas.

Quando:

\begin{verbatim}
A ‚Üí B
\end{verbatim}

Significa que valores iguais de A geram classes de equival√™ncia nas tuplas.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{5. Conceito de Fecho}\label{conceito-de-fecho}

Dado conjunto de atributos X e conjunto de depend√™ncias funcionais F:

O \textbf{fecho de X} (X‚Å∫) √© o conjunto de todos os atributos funcionalmente determinados por X.

Exemplo:

Depend√™ncias:

\begin{verbatim}
A ‚Üí B
B ‚Üí C
\end{verbatim}

Ent√£o:

\begin{verbatim}
A‚Å∫ = {A, B, C}
\end{verbatim}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{6. Normaliza√ß√£o}\label{normalizauxe7uxe3o}

Processo de organiza√ß√£o de rela√ß√µes para:

\begin{itemize}
\tightlist
\item
  Eliminar redund√¢ncia
\item
  Evitar anomalias
\item
  Garantir consist√™ncia
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{1¬™ Forma Normal (1FN)}\label{uxaa-forma-normal-1fn}

\begin{itemize}
\tightlist
\item
  Atributos at√¥micos
\item
  Sem grupos repetitivos
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{2¬™ Forma Normal (2FN)}\label{uxaa-forma-normal-2fn}

\begin{itemize}
\tightlist
\item
  1FN
\item
  Sem depend√™ncia parcial de chave composta
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{3¬™ Forma Normal (3FN)}\label{uxaa-forma-normal-3fn}

\begin{itemize}
\tightlist
\item
  2FN
\item
  Sem depend√™ncia transitiva
\end{itemize}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{BCNF}\label{bcnf}

Forma mais forte que 3FN:

Para toda depend√™ncia:

\begin{verbatim}
X ‚Üí Y
\end{verbatim}

X deve ser superchave.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{Conex√£o Final --- A Base Matem√°tica do SGBD}\label{conexuxe3o-final-a-base-matemuxe1tica-do-sgbd}

\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
Conceito Matem√°tico & Aplica√ß√£o em BD \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Rela√ß√£o & Tabela \\
Produto cartesiano & Combina√ß√£o de dom√≠nios \\
Rela√ß√£o de equival√™ncia & Particionamento por chave \\
Fecho & Descoberta de depend√™ncias \\
Transitiva & An√°lise de depend√™ncias \\
Antissim√©trica & Ordem parcial \\
√Ålgebra relacional & SQL \\
\end{longtable}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{Exerc√≠cios}\label{exercuxedcios}

\chapter{Modelagem de Bancos de Dados parte 01}\label{modelagem-de-bancos-de-dados-parte-01}

\subsubsection*{18/08/2025}\label{section-4}
\addcontentsline{toc}{subsubsection}{18/08/2025}

\subsubsection*{Professor Migu√©l Suares}\label{professor-miguuxe9l-suares-1}
\addcontentsline{toc}{subsubsection}{Professor Migu√©l Suares}

\section{Introdu√ß√£o: Visitando a teoria de Bancos de Dados}\label{introduuxe7uxe3o-visitando-a-teoria-de-bancos-de-dados}

\pandocbounded{\includegraphics[keepaspectratio]{media/01-banco-de-dados.jpg}}

\begin{quote}
\textbf{Banco de Dados} Um banco de dados √© uma cole√ß√£o compartilhada de dados logicamente relacionados, projetada para atender √†s necessidades informacionais de uma organiza√ß√£o. - \emph{DATE, C. J. An Introduction to Database Systems. 8. ed.~Boston: Addison-Wesley, 2003}.
\end{quote}

Ou seja, alguns pontos-chave da defini√ß√£o de Date:

\begin{itemize}
\item
  ``Cole√ß√£o de dados \ldots{}'' ‚Üí n√£o √© um conjunto de arquivos soltos, mas dados organizados.
\item
  ``Compartilhada \ldots{}'' ‚Üí n√£o pertence a apenas um usu√°rio ou aplica√ß√£o; √© usada por v√°rios.
\item
  ``Dados logicamente relacionados \ldots{}'' ‚Üí os dados t√™m um relacionamento sem√¢ntico, n√£o s√£o apenas agrupamentos arbitr√°rios.
\item
  ``Projetada para atender necessidades \ldots{}'' ‚Üí o banco existe para suportar os processos de uma organiza√ß√£o (consultas, relat√≥rios, controle, tomada de decis√£o).
\end{itemize}

\pandocbounded{\includegraphics[keepaspectratio]{media/07-tabela_relacional.jpg}}

\begin{quote}
\textbf{Banco de Dados Relacional} Um banco de dados relacional √© um banco de dados baseado em um modelo de dados relacional, no qual os dados s√£o representados como um conjunto de rela√ß√µes (tabelas), e cada rela√ß√£o consiste em tuplas (linhas) e atributos (colunas). - \emph{SILBERSCHATZ, Abraham; KORTH, Henry F.; SUDARSHAN, S. Database System Concepts. 6. ed.~New York: McGraw-Hill, 2010.}
\end{quote}

Agora, alguns pontos-chave da defini√ß√£o de \emph{Abraham Silberschatz} :

\begin{itemize}
\item
  Base no modelo relacional de Codd (1970).
\item
  Dados representados em tabelas (rela√ß√µes).
\item
  Cada tabela √© composta de tuplas (linhas) e atributos (colunas).
\item
  Integridade garantida por restri√ß√µes (chaves, integridade referencial, dom√≠nio de atributos).
\item
  Manipula√ß√£o feita por linguagens relacionais (√°lgebra relacional, c√°lculo relacional, SQL).
\end{itemize}

O Banco de Dados Relacional organiza as informa√ß√µes em \textbf{tabelas bidiomensionais} constitu√≠das de \textbf{linhas e colunas} chamadas e essas tabelas recebem o nome de \textbf{rela√ß√µes}. Cada \textbf{rela√ß√£o} possui um \textbf{campo-chave} que confere identifica√ß√£o exclusiva a cada registro da tabela.

\section{Modelo Matem√°tico de um Banco de Dados}\label{modelo-matemuxe1tico-de-um-banco-de-dados}

Considere um Banco de Dados para representar, com consist√™ncia Matem√°tica os funcion√°rios e Departamentos de uma Empresa.

\subsection{Podemos representa-lo matem√°ticamente utilizando a teoria dos conjuntos}\label{podemos-representa-lo-matemuxe1ticamente-utilizando-a-teoria-dos-conjuntos}

\begin{figure}
\centering
\pandocbounded{\includegraphics[keepaspectratio]{2026-ADS-1sem-BancoDeDados_files/figure-latex/tikz-diagrama0-1.pdf}}
\caption{\label{fig:tikz-diagrama0}Diagrama de Montadoras, Ve√≠culos e Propriet√°rios}
\end{figure}

\subsubsection{\texorpdfstring{Edgard F Cood explica em sua obra ``A Relational Model of Data for Large Shared Data Banks'' como definir uma Banco de Dados compartilhado \emph{matem√°ticamente}}{Edgard F Cood explica em sua obra ``A Relational Model of Data for Large Shared Data Banks'' como definir uma Banco de Dados compartilhado matem√°ticamente}}\label{edgard-f-cood-explica-em-sua-obra-a-relational-model-of-data-for-large-shared-data-banks-como-definir-uma-banco-de-dados-compartilhado-matemuxe1ticamente}

\begin{quote}
Um \textbf{banco de dados relacional} √© um banco de dados no qual todos os dados s√£o representados por meio de \textbf{rela√ß√µes (matematicamente, conjuntos de tuplas)}, e todas as opera√ß√µes sobre os dados s√£o baseadas em operadores formais do c√°lculo relacional e da √°lgebra relacional. - \emph{A Relational Model of Data for Large Shared Data Banks'' (Communications of the ACM, vol.~13, n.~6, pp.~377--387, 1970).}
\end{quote}

\href{https://buttondown.com/jaffray/archive/in-codd-we-trust-or-not/}{\includegraphics[width=3.66667in,height=\textheight,keepaspectratio]{media/01-codd.jpg}}

\subsection{Ent√£o para podemos relacionar estes dois conjuntos (Funcion√°rios e Departamentos) utilizando a Teoria das Fun√ß√µes}\label{entuxe3o-para-podemos-relacionar-estes-dois-conjuntos-funcionuxe1rios-e-departamentos-utilizando-a-teoria-das-funuxe7uxf5es}

\[
\text{Edgard Frank Codd era um matem√°tico tradicional} \\
\text{Considere o conseito de fun√ß√£o: } \\
f(x) = Y \\
\text{era dessa forma que ele imaginava relacionamento e } \\
\text{ garantia matem√°tica de CONSIST√äNCIA entre } \\
\text{ elementos de 2 conjuntos de dados diferentes }
\]

\begin{figure}
\centering
\pandocbounded{\includegraphics[keepaspectratio]{2026-ADS-1sem-BancoDeDados_files/figure-latex/tikz-diagrama10-1.pdf}}
\caption{\label{fig:tikz-diagrama10}Diagrama de Montadoras, Ve√≠culos e Propriet√°rios}
\end{figure}

Mas vai ficar faltando como representar os atributos nesse modelo (colunas das tabelas):

\[
\begin{array}{c| c | c}
\textbf{ Conjunto Funcion√°rios}    & \textbf{ Relacionamento Trabalha} & \textbf{Conjunto Departamentos)} \\ 
\hline 
FULANO                             &  \quad TRABALHA                   & \quad RH \\
BELTRANO                           &  \quad TRABALHA                   & \quad FINANCEIRO \\
CICLANO                            &  \quad TRABALHA                   & \quad DEIRETORIA \\
\hline
\textbf{Total: 3 ELEMENTOS }       & \textbf{ CONECTADOS }             & \textbf{Total: 3 ELEMENTOS }
\end{array}
\]

Ainda, √© necess√°rio acrescentar algumas regras de integridade a representa√ß√£o;

\section{Modelo L√≥gico de Banco de Dados}\label{modelo-luxf3gico-de-banco-de-dados}

\subsection{Modelo Conceitual ``Entidade Relacionamento'' de Banco de Dados}\label{modelo-conceitual-entidade-relacionamento-de-banco-de-dados}

O Modelo Entidade-Relacionamento (MER), proposto por Peter Chen em 1976, √© uma ferramenta fundamental na modelagem de dados. √â um modelo de dados de alto n√≠vel que descreve a estrutura conceitual de um banco de dados. O Modelo Entidade-Relacionamento (MER) √© representado graficamente atrav√©s de um DER (Diagrama Entidade-Relacionamento).

\href{https://personalidades-tecnologia.blogspot.com/2011/06/peter-pin-shan-chen-peter-pin-shan-chen.html}{\pandocbounded{\includegraphics[keepaspectratio]{media/03-Peter_Chen.jpg}}}

√â utilizado para projetar Bancos de Dados Relacionais a partir de entrevistas onde se descreve as informa√ß√µes que se deseja armazenar de forma consistente. Exemplo:

``\emph{Desenhe um diagrama entidade-relacionamento DER contendo as entidades funcionarios e departamentos. A entidade ''funcion√°rios'' possui os atributos ''nome'' e ''CPF''. A entidade ''Departamentos'' possui os atributos ''Nome'' e ''sigla''. O atributo ''CPF'' √© chave prim√°ria da entidade ''Funcion√°rios''. O atributo ''sigla'' √© chave prim√°ria da entidade ''Departamentos''. As entidades ''Funcion√°rios'' e ''Departamentos'' se relacionam atrav√©s de um relacionamento chamado ''Pertence''}.''

\pandocbounded{\includesvg[keepaspectratio]{images/Exemplo-01.svg}}

Segundo Laudon

\begin{quote}
\textbf{Diagrama Entidade/Relacionamento (DER)} √© uma representa√ß√£o esquem√°tica utilizada para entender as rela√ß√µes entre as tabelas de um banco de dados relacional. {[}{[}1{]} - LAUDON, Kenneth C.; LAUDON, Jane P. *Sistemas de informa√ß√£o gerenciais*. 11. ed.~S√£o Paulo: Pearson Education do Brasil, 2010. p.~180.{]}
\end{quote}

\subsection{Composi√ß√£o e Significado do Diagrama Entidade Relacionamento (DER)}\label{composiuxe7uxe3o-e-significado-do-diagrama-entidade-relacionamento-der}

\[
\begin{array}{c| c | c}
\textbf{ NOME DO COMPONENTE}    & \textbf{Representa√ß√£o Gr√°fica}   & \textbf{ Liguagem Natural (texto)} \\ 
\hline 
ENTIDADE                        &  \quad RET√ÇNGULO                 & \quad SUBST√ÉNTIVO \\
ATRIBUTO                        &  \quad EL√çPSE                    & \quad ADJETIVO \\
RELACIONAMENTO                  &  \quad LOS√ÇNGULO                 & \quad VERBO \\
\hline
\textbf{Total: 3 ELEMENTOS }    & \textbf{ FORMA GR√ÅFICA }         & \textbf{ FORMA MOFOL√ìGICA GRAMATICAL }
\end{array}
\]

\begin{figure}
\centering
\pandocbounded{\includegraphics[keepaspectratio]{2026-ADS-1sem-BancoDeDados_files/figure-latex/tikz-diagrama-DER-00-1.pdf}}
\caption{\label{fig:tikz-diagrama-DER-00}Diagrama de Montadoras, Ve√≠culos e Propriet√°rios}
\end{figure}

\section{Modelo F√≠sico de Banco de Dados}\label{modelo-fuxedsico-de-banco-de-dados}

\subsection{Gera√ß√£o do modelo F√≠sico para aplica-lo ao SGBD (Sistema de Gerenciamento de Banco de Dados):}\label{gerauxe7uxe3o-do-modelo-fuxedsico-para-aplica-lo-ao-sgbd-sistema-de-gerenciamento-de-banco-de-dados}

Uma vez que o modelo conceitual seja gerado, o analista pode mapea-lo para um ``modelo f√≠sico''. Aqui, cada entidade ir√° gerar uma tebela, cada atributo ir√° originar uma coluna pertinente da tabela em quest√£o e cada relacionamento ir√° mapear \textbf{chaves prim√°rias} e \textbf{chaves forasteiras} nas tabelas interrelacionadas.

\[
\begin{array}{c| c | c}
\textbf{Componente L√≥gico}    & \textbf{ Componente F√≠sico}   & \textbf{Liguagem Natural (texto)} \\ 
\hline 
ENTIDADE                        &  \quad TABELA               & \quad SUBST√ÉNTIVO \\
ATRIBUTO                        &  \quad COLUNA               & \quad ADJETIVO \\
RELACIONAMENTO                  &  \quad CHAVE-ESTRANGEIRA    & \quad VERBO \\
\hline
\textbf{Diagrama L√≥gico DER }    & \textbf{ FORMA F√çSICA - SGBD }    & \textbf{ FORMA MOFOL√ìGICA GRAMATICAL ORIGINAL }
\end{array}
\]

A ferramenta que ir√° criar as estruturas F√≠sicas (tabelas, colunas, chaves) dentro do Banco de Dados √© o Sistema de Gerenciamento de Banco de Dados atrav√©s da linguagem \textbf{SQL}.

\pandocbounded{\includegraphics[keepaspectratio]{media/06-modelo_fisico.jpg}}

\subsection{Interagindo com o Modelo F√≠sico - A linguagem SQL (Structured Query Language)}\label{interagindo-com-o-modelo-fuxedsico---a-linguagem-sql-structured-query-language}

A linguagem SQL foi criada nos laborat√≥rios da IBM em 1974, como interface de manipula√ß√£o ao Bando de Dados Relacional System-R , atualmente denominado IBM DB2. Os criadores foram engenheiros de sistemas que sucederam o professor Edgard Frank Codd no projeto de Banco de Dados Relacional: \textbf{Donald Chamberlain} e \textbf{Raymond Boyce}.

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 2\tabcolsep) * \real{0.5000}}
  >{\raggedright\arraybackslash}p{(\linewidth - 2\tabcolsep) * \real{0.5000}}@{}}
\toprule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
\pandocbounded{\includegraphics[keepaspectratio]{media/04-Donald_Chamberlain.jpg}} & \includegraphics[width=2.48958in,height=\textheight,keepaspectratio]{media/04-Raymond_Boyce.jpg} \\
\end{longtable}

A lingauem SQL √© a ponte com o mundo exterior para um Sistema de Gerenciamento de Banco de Dados (SGBD). Os conjunto de comandos da linguagem SQL s√£o divididos em 3 grandes grupos:

\[
\begin{array}{c| c | c}
\textbf{GRUPO}    & \textbf{ Comandos}   & \textbf{Finalidade} \\ 
\hline 
Grupo \ DDL         &  \quad \ Data \ Definion \ Language        & \quad Criar \ estruturas \ de \ dados \\
Grupo \ DML         &  \quad \ Data \ Manipulation \ Language    & \quad Manipular \ dados \ armazenados \\
Grupo \ DCL         &  \quad \ Data \ Control \ Language         & \quad Criar \ Regras \ para \ os \ dados \\
Grupo \ TCL         &  \quad \ Transaction \ Control \ Language  & \quad Criar \ Transa√ß√µes \ para \ os \ dados \\
\hline
\textbf{Subconjunto SQL }    & \textbf{ Significado }    & \textbf{ Conjunto Completo }
\end{array}
\]

Comandos exemplo:

\[
\begin{array}{c| c }
\textbf{GRUPO}    & \textbf{ Comandos}    \\ 
\hline 
Grupo \ DDL         &  \quad  CREATE, \quad ALTER,\quad DROP \ \        \\
Grupo \ DML         &  \quad SELECT, \quad INSERT, \quad UPDATE, \quad DELETE, \quad JOIN    \\
Grupo \ DCL         &  \quad GRANT, \quad REVOKE  \\
Grupo \ TCL         &  \quad COMMIT, \quad ROLLBACK, \quad SAVEPOINT   \\
\hline
\textbf{Subconjunto SQL }    & \textbf{ Significado }     
\end{array}
\]

O c√≥digo abaixo escrito em Lingauem SQL padr√£o transfere para o modelo f√≠sico o modelo l√≥gico anterior:

\pandocbounded{\includesvg[keepaspectratio]{images/Exemplo-01-continua√ß√£o.svg}}

Transformando em SQL - EQUIVALENTE:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{{-}{-} Exemplo testado e gerado no SGBD Postgres vers√£o 15}

\CommentTok{{-}{-} Tabela Funcion√°rios}
\KeywordTok{CREATE} \KeywordTok{TABLE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS} \OtherTok{"public"}\NormalTok{.funcionarios}
\NormalTok{(}
\NormalTok{    cpf bigint }\KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{    nome }\DataTypeTok{varchar}\NormalTok{(}\DecValTok{200}\NormalTok{)}
\NormalTok{);}

\CommentTok{{-}{-} Tabela Departamentos}

\KeywordTok{CREATE} \KeywordTok{TABLE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS} \OtherTok{"public"}\NormalTok{.departamentos}
\NormalTok{(}
\NormalTok{    sigla }\DataTypeTok{integer} \KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{    nome }\DataTypeTok{varchar}\NormalTok{(}\DecValTok{200}\NormalTok{)}
\NormalTok{);}

\CommentTok{{-}{-} Definindo a coluna "cpf" da tabela "funcion√°rios" como chave prim√°ria}
\KeywordTok{alter} \KeywordTok{table} \OtherTok{"public"}\NormalTok{.funcionarios }\KeywordTok{add} \KeywordTok{constraint} \OtherTok{"chave\_primaria\_funcionarios"} \KeywordTok{primary} \KeywordTok{key}\NormalTok{ (cpf);}

\CommentTok{{-}{-} Definindo a coluna "sigla"" da tabela "departamentos" como chave prim√°ria}
\KeywordTok{alter} \KeywordTok{table} \OtherTok{"public"}\NormalTok{.departamentos }\KeywordTok{add} \KeywordTok{constraint} \OtherTok{"chave\_primaria\_departamentos"} \KeywordTok{primary} \KeywordTok{key}\NormalTok{ (sigla);}

\CommentTok{{-}{-} Gerando a integridade refer√™ncial }
\CommentTok{{-}{-} Importando a chave prim√°ria da tabela "departamentos" como "chave estrangeira"}
\CommentTok{{-}{-} na tabela "funcion√°rios"}

\CommentTok{{-}{-} primeiro adiciona{-}se a coluna estrageira "sigla" que √© coluna originalmente }
\CommentTok{{-}{-} pertencente a tabela departamentos}
\KeywordTok{alter} \KeywordTok{table} \OtherTok{"public"}\NormalTok{.funcionarios }\KeywordTok{add} \KeywordTok{column}\NormalTok{ sigla }\DataTypeTok{integer}\NormalTok{;}

\CommentTok{{-}{-} finalmente conecte a coluna sigla a chave prim√°ria da tabela "departamento"}
\CommentTok{{-}{-} criando ent√£o uma chave estrageira na tabela "funcion√°rios".}
\KeywordTok{alter} \KeywordTok{table} \OtherTok{"public"}\NormalTok{.funcionarios }\KeywordTok{add} \KeywordTok{constraint} \OtherTok{"Chave\_estrangeira\_Departamento\_funcionarios"} \KeywordTok{foreign} \KeywordTok{key}\NormalTok{ (sigla) }\KeywordTok{references} \OtherTok{"public"}\NormalTok{.departamentos(sigla);}
\end{Highlighting}
\end{Shaded}

\section{EXEMPLO: REVENDA DE VE√çCULOS MULTI-MARCAS}\label{exemplo-revenda-de-veuxedculos-multi-marcas}

Uma revenda de ve√≠culos multimarcas deseja informatizar seu neg√≥cio e precisa de um banco de dados que registre informa√ß√µes sobre ve√≠culos, fabricantes e clientes. Cada ve√≠culo deve ter c√≥digo de identifica√ß√£o, modelo, ano de fabrica√ß√£o, cor, pre√ßo e chassi. Todo ve√≠culo pertence a um fabricante. O fabricante √© identificado por um c√≥digo e deve ter armazenados seu nome e pa√≠s de origem. A revenda vende ve√≠culos para clientes, e cada venda deve registrar a data, o valor da negocia√ß√£o e a forma de pagamento. Um cliente pode comprar mais de um ve√≠culo, mas cada ve√≠culo s√≥ pode ser vendido uma vez. Cada cliente √© identificado por um c√≥digo e deve ter armazenados seu nome, CPF/CNPJ, telefone e endere√ßo.

\subsection{Passo 1 - Visualizando matem√°ticamente os dados:}\label{passo-1---visualizando-matemuxe1ticamente-os-dados}

Vejamos como ficaria representar matem√°ticamente o enunciado acima:

\begin{itemize}
\item
  Teoria dos Conjuntos - Ajudaria a organizar e agrupar os dados em conjuntos;
\item
  Teoria das Fun√ß√µes - A id√©ia era fornecer um mecanismo de consist√™ncia aos dados de conjuntos diferentes relacionados. Por exemplo, haveria uma fun√ß√£o que mapeasse um um elemento do conjunto \texttt{ve√≠culo} a outro elemento do conjunto \texttt{montadora}.
\end{itemize}

\subsubsection{Representa√ß√£o Matem√°tica em Conjuntos e seus Elementos :}\label{representauxe7uxe3o-matemuxe1tica-em-conjuntos-e-seus-elementos}

Vamos visualizar gr√°ficamente os conjuntos de \texttt{Marcas}, \texttt{modelos} e \texttt{propriet√°rios} :

\begin{figure}
\centering
\pandocbounded{\includegraphics[keepaspectratio]{2026-ADS-1sem-BancoDeDados_files/figure-latex/tikz-diagrama1-1.pdf}}
\caption{\label{fig:tikz-diagrama1}Diagrama de Montadoras, Ve√≠culos e Propriet√°rios}
\end{figure}

\subsubsection{Gerando os Relacionamentos ``Matem√°ticamente'' - (Teoria das Fun√ß√µes, Dom√≠nios e Imagens):}\label{gerando-os-relacionamentos-matemuxe1ticamente---teoria-das-funuxe7uxf5es-domuxednios-e-imagens}

Vamos visualizar gr√°ficamente os relacionamentos entre os lementos dos conjuntos \texttt{Marcas}, \texttt{modelos} e \texttt{propriet√°rios} :

\begin{figure}
\centering
\pandocbounded{\includegraphics[keepaspectratio]{2026-ADS-1sem-BancoDeDados_files/figure-latex/tikz-diagrama2-1.pdf}}
\caption{\label{fig:tikz-diagrama2}Diagrama de Montadoras, Ve√≠culos e Propriet√°rios}
\end{figure}

A limita√ß√£o desta representa√ß√£o gr√°fica logo fica evidente: por mais que na forma matem√°tica se consiga representar os elementos dos conjuntos e o relacionamento entre eles, a representa√ß√£o n√£o consegue representar os diferentes atributos (caracter√≠sticas) que os elementos dos conjuntos compartilham.

\subsection{Modelo L√≥gico: Modelo Entidade Relacionamento}\label{modelo-luxf3gico-modelo-entidade-relacionamento}

Vamos agora converter a representa√ß√£o matem√°tica para uma representa√ß√£o l√≥gica utilizando o modelo M.E.R. (modelo entidade-relacionamento ) proposto pelo professor Peter Chen

\subsubsection{Modelo Entidade Relacionamento}\label{modelo-entidade-relacionamento-1}

O modelo Entidade Relacionamento consistem em traduzir elementos morfol√≥gicos da gram√°tica da l√≠ngua portuguesa em um texto para um modelo de Banco de dados utilizando a com a seguinte regra de montagem:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.2500}}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.2500}}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.2500}}
  >{\raggedright\arraybackslash}p{(\linewidth - 6\tabcolsep) * \real{0.2500}}@{}}
\toprule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Classe morfol√≥gica da palavra & CORRESPOND√äNCIA NO MODELO MATEM√ÅTICO & CORRESPOND√äNCIA NO MODELO L√ìGICO & CORRESPOND√äNCIA NO MODELO F√çSICO-RELACIONAL \\
\texttt{Substantivos} & \texttt{CONJUNTOS} & \texttt{ENTIDADES} & \texttt{TABELAS} \\
\textbf{\texttt{Adjetivos}} & N/A & \textbf{\texttt{ATRIBUTO}} & \textbf{\texttt{COLUNAS}} \\
\textbf{\texttt{Verbos}} & Id√©ia de ``fun√ß√µes y=f(x)'' & \textbf{\texttt{RELACIONAMENTOS}} & \textbf{\texttt{CHAVE\ ESTRANGEIRA}} \\
\end{longtable}

Tomando como exemplo a revenda de carros:

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 2\tabcolsep) * \real{0.2909}}
  >{\raggedright\arraybackslash}p{(\linewidth - 2\tabcolsep) * \real{0.7091}}@{}}
\toprule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Classe morfol√≥gica da palavra & \\
\texttt{Substantivos} & VE√çCULOS, FABRICANTES, CLIENTES \\
\textbf{\texttt{Adjetivos}} & Referentes a ve√≠culos: \texttt{Modelo}, \texttt{Ano\_Fabricacao}, \texttt{Cor}, \texttt{Preco}, \texttt{Chassi}

Referentes a fabricante: \texttt{Nome}, \texttt{Pais\_Origem}

Referentes a cliente: \texttt{Nome}, \texttt{CPF\_CNPJ}, \texttt{Telefone}, \texttt{Endereco} \\
\textbf{\texttt{Verbos}} & Fabricante - \texttt{PRODUZ}- Ve√≠culo

clinte - \texttt{COMPRA/VENDE} - Ve√≠culo \\
\end{longtable}

\subsubsection{Modelo Entidade Relacionamento - representa√ß√£o gr√°fica}\label{modelo-entidade-relacionamento---representauxe7uxe3o-gruxe1fica}

\begin{longtable}[]{@{}ll@{}}
\toprule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Classe morfol√≥gica da palavra & REPRESENTA√á√ÉO GR√ÅFICA \\
\texttt{Substantivos} & RET√ÇNGULOS \\
\textbf{\texttt{Adjetivos}} & \textbf{ELIPSES} \\
\textbf{\texttt{Verbos}} & \textbf{LOS√ÇNGULOS} \\
\end{longtable}

\pandocbounded{\includesvg[keepaspectratio]{images/modelo01.svg}}

\begin{Shaded}
\begin{Highlighting}[]


\CommentTok{{-}{-} ================================================}
\CommentTok{{-}{-} 1) TRANSFORME AS ENTIDADES E ATRIBUTOS EM }
\CommentTok{{-}{-}    TABELAS E COLUNAS}
\CommentTok{{-}{-} ================================================}
\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ fabricantes}
\NormalTok{(}
\NormalTok{    codigo\_fabricante  }\DataTypeTok{INTEGER}      \KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{    nome               }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{100}\NormalTok{) }\KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{    pais\_origem        }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{60}\NormalTok{)  }\KeywordTok{NOT} \KeywordTok{NULL}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ clientes}
\NormalTok{(}
\NormalTok{    codigo\_cliente   }\DataTypeTok{INTEGER}      \KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{    nome             }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{120}\NormalTok{) }\KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{    cpf\_cnpj         }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{20}\NormalTok{)  }\KeywordTok{NOT} \KeywordTok{NULL} \KeywordTok{UNIQUE}\NormalTok{,}
\NormalTok{    telefone         }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{30}\NormalTok{),}
\NormalTok{    endereco         TEXT}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ veiculos }
\NormalTok{(}
\NormalTok{    codigo\_veiculo      }\DataTypeTok{INTEGER}       \KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{    modelo              }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{100}\NormalTok{)  }\KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{    ano\_fabricacao      }\DataTypeTok{INTEGER}       \KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{    cor                 }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{40}\NormalTok{),}
\NormalTok{    preco               }\DataTypeTok{NUMERIC}\NormalTok{(}\DecValTok{12}\NormalTok{,}\DecValTok{2}\NormalTok{) }\KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{    chassi              }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{30}\NormalTok{)   }\KeywordTok{UNIQUE} \KeywordTok{NOT} \KeywordTok{NULL}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ vendas}
\NormalTok{(}
\NormalTok{    codigo\_venda     }\DataTypeTok{INTEGER}          \KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{    data\_venda       }\DataTypeTok{DATE}             \KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{    valor\_negociado  }\DataTypeTok{NUMERIC}\NormalTok{(}\DecValTok{12}\NormalTok{,}\DecValTok{2}\NormalTok{)    }\KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{    forma\_pagamento  }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{50}\NormalTok{)      }\KeywordTok{NOT} \KeywordTok{NULL}
\NormalTok{);}

\CommentTok{{-}{-} ================================================}
\CommentTok{{-}{-} 2) TRANSFORME OS ATRIBUTOS CHAVE PRIM√ÅRIA}
\CommentTok{{-}{-} EM CHAVES{-}PRIM√ÅRIAS DAS TABELAS}
\CommentTok{{-}{-} ================================================}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ fabricantes }\KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ chave}\OperatorTok{{-}}\NormalTok{primaria\_fabricante }\KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (codigo\_fabricante);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ clientes    }\KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ chave}\OperatorTok{{-}}\NormalTok{primaria\_cliente }\KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (codigo\_cliente);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ veiculos    }\KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ chave}\OperatorTok{{-}}\NormalTok{primaria\_veiculo }\KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (codigo\_veiculo);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ vendas      }\KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ chave}\OperatorTok{{-}}\NormalTok{primaria\_venda }\KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (codigo\_venda);}

\CommentTok{{-}{-} ================================================}
\CommentTok{{-}{-} 3) ADICIONAR NAS TABELAS AS COLUNAS EXTRAS}
\CommentTok{{-}{-}    QUE V√ÉO RECEBER AS CHAVES ESTRANGEIRAS}
\CommentTok{{-}{-} ================================================}

\CommentTok{{-}{-} adicione uma coluna que ir√° acomodar a chave prim√°ria da tabela fabricantes como chave estrangeira}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ veiculos }\KeywordTok{add}\NormalTok{ cloumn  codigo\_fabricante   }\DataTypeTok{INTEGER} \KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{;}

\CommentTok{{-}{-} adicione uma coluna que ir√° acomodar a chave prim√°ria da tabela clientes como chave estrangeira}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ vendas   }\KeywordTok{add}\NormalTok{ cloumn  codigo\_cliente      }\DataTypeTok{INTEGER} \KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{;}

\CommentTok{{-}{-} adicione uma coluna que ir√° acomodar a chave prim√°ria da tabela ve√≠culos como chave estrangeira}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ vendas   }\KeywordTok{add}\NormalTok{ cloumn  codigo\_veiculo      }\DataTypeTok{INTEGER} \KeywordTok{NOT} \KeywordTok{NULL} \KeywordTok{UNIQUE}\NormalTok{;}

\CommentTok{{-}{-} ================================================}
\CommentTok{{-}{-} 3) CRIE AS CHAVES ESTRANGEIRAS QUE FAZEM A LIGA√á√ÉO}
\CommentTok{{-}{-} DAS TABELAS "LADO N" DO RELACIONAMENTO NO }
\CommentTok{{-}{-} DIAGRAMA ENTIDADE{-}RELACIONAMENTO COM AS}
\CommentTok{{-}{-} COLUNAS DO LADO 1}
\CommentTok{{-}{-} ================================================}

\CommentTok{{-}{-} utilizando chave estrangeira, fa√ßa esta tabela ve√≠culos referenciar a tabela fabricantes}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ veiculos}
    \KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ chave}\OperatorTok{{-}}\NormalTok{estrageira\_veiculo\_fabricante}
    \KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (codigo\_fabricante)}
    \KeywordTok{REFERENCES}\NormalTok{ fabricantes (codigo\_fabricante)}
    \KeywordTok{ON} \KeywordTok{UPDATE} \KeywordTok{CASCADE}
    \KeywordTok{ON} \KeywordTok{DELETE} \KeywordTok{RESTRICT}\NormalTok{;}

\CommentTok{{-}{-} utilizando chave estrangeira, fa√ßa esta tabela vendas referenciar a tabela clientes}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ vendas}
    \KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ chave}\OperatorTok{{-}}\NormalTok{estrageira\_venda\_cliente}
    \KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (codigo\_cliente)}
    \KeywordTok{REFERENCES}\NormalTok{ clientes (codigo\_cliente)}
    \KeywordTok{ON} \KeywordTok{UPDATE} \KeywordTok{CASCADE}
    \KeywordTok{ON} \KeywordTok{DELETE} \KeywordTok{RESTRICT}\NormalTok{;}

\CommentTok{{-}{-} utilizando chave estrangeira, fa√ßa esta tabela vendas referenciar a tabela ve√≠culos }
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ vendas}
    \KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ chave}\OperatorTok{{-}}\NormalTok{estrageira\_venda\_veiculo}
    \KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (codigo\_veiculo)}
    \KeywordTok{REFERENCES}\NormalTok{ veiculos (codigo\_veiculo)}
    \KeywordTok{ON} \KeywordTok{UPDATE} \KeywordTok{CASCADE}
    \KeywordTok{ON} \KeywordTok{DELETE} \KeywordTok{RESTRICT}\NormalTok{;}
\end{Highlighting}
\end{Shaded}

\section{VERBOS: Relacionamentos e Cardinalidade}\label{verbos-relacionamentos-e-cardinalidade}

A \textbf{cardinalidade} define \textbf{quantas ocorr√™ncias de uma entidade podem estar associadas} a ocorr√™ncias de outra entidade em um relacionamento.

Ela √© fundamental para entender as regras de neg√≥cio do banco de dados e deve estar sempre representada no \textbf{Diagrama Entidade-Relacionamento (DER)}.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{üîπ Tipos principais de cardinalidade}\label{tipos-principais-de-cardinalidade}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  \textbf{Um para Um (1:1)}\\
\item
  \textbf{Um para Muitos (1:N)}\\
\item
  \textbf{Muitos para Muitos (N:N)}
\end{enumerate}

A seguir, vamos detalhar cada caso.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{\texorpdfstring{1. Relacionamento \textbf{1:1 (Um para Um)}}{1. Relacionamento 1:1 (Um para Um)}}\label{relacionamento-11-um-para-um}

Um exemplo cl√°ssico:\\
- Cada MARIDO possui \textbf{uma √∫nica ESPOSA}.\\
- Cada ESPOSA pertence a \textbf{um √∫nico MARIDO}.

\subsubsection{Representa√ß√£o no DER:}\label{representauxe7uxe3o-no-der}

\pandocbounded{\includesvg[keepaspectratio]{images/cardinalidade01.svg}}

\subsection{\texorpdfstring{Relacionamento \textbf{1:N (Um para Muitos)}}{Relacionamento 1:N (Um para Muitos)}}\label{relacionamento-1n-um-para-muitos}

Exemplo:

Um \textbf{Cliente} pode fazer \textbf{muitos Pedidos}.

Mas cada \textbf{Pedido} s√≥ pode pertencer a \textbf{um Cliente}.

\subsubsection{Representa√ß√£o no DER:}\label{representauxe7uxe3o-no-der-1}

\pandocbounded{\includesvg[keepaspectratio]{images/cardinalidade02.svg}}

\subsection{Relacionamento N:N (Muitos para Muitos)}\label{relacionamento-nn-muitos-para-muitos}

Exemplo:

Um \textbf{Aluno} pode se matricular \textbf{em muitas Disciplinas}.

Cada \textbf{Disciplina} pode ter \textbf{muitos Alunos}.

( Esse tipo de relacionamento precisa de uma entidade associativa para ser implementado no banco (ex.: Matricula) )

\subsubsection{Representa√ß√£o no DER:}\label{representauxe7uxe3o-no-der-2}

\pandocbounded{\includesvg[keepaspectratio]{images/cardinalidade03.svg}}

\section{Entidade Dominante e Entidade Subordinada}\label{entidade-dominante-e-entidade-subordinada}

No \textbf{Modelo Entidade-Relacionamento (MER)}, algumas entidades s√≥ existem \textbf{dependendo da exist√™ncia de outra}.\\
Nesses casos, usamos os conceitos de \textbf{Entidade Dominante} e \textbf{Entidade Subordinada}.

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{Defini√ß√µes:}\label{definiuxe7uxf5es}

\begin{itemize}
\item
  \textbf{Entidade Dominante (ou Forte):}\\
  √â uma entidade que \textbf{existe por si s√≥}, sem depender de nenhuma outra.\\
  Ex.: Cliente, Produto, Funcion√°rio.
\item
  \textbf{Entidade Subordinada (ou Fraca):}\\
  √â uma entidade que \textbf{depende de outra} para existir.\\
  Ela \textbf{n√£o possui chave prim√°ria pr√≥pria} completa e precisa da chave da entidade dominante.\\
  Ex.: ItemPedido, Dependente, Parcela.
\end{itemize}

A entidade subordinada √© representada por um \textbf{losango duplo} (relacionamento identificador) em algumas nota√ß√µes, ou simplesmente destacada como \textbf{entidade fraca}.

\pandocbounded{\includesvg[keepaspectratio]{images/EntidadeDominante01.svg}}

Outro Exemplo:

\pandocbounded{\includesvg[keepaspectratio]{images/EntidadeDominante02.svg}}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{CARDINALIDADE DO MODELO L√ìGICO E A CRIA√á√ÉO DE CHAVES ESTRANGEIRAS NO MODELO F√çSICO-RELACIONAL}\label{cardinalidade-do-modelo-luxf3gico-e-a-criauxe7uxe3o-de-chaves-estrangeiras-no-modelo-fuxedsico-relacional}

Vai ser a cardinalidade que ir√° ditar em quais tabelas criaremos chaves estrangeiras.

\section{Normaliza√ß√£o em Bancos de Dados Relaionais}\label{normalizauxe7uxe3o-em-bancos-de-dados-relaionais}

\subsection{Tabela Desnormalizada}\label{tabela-desnormalizada}

\includegraphics[width=3.57292in,height=\textheight,keepaspectratio]{images/5-bi/01-montadora.jpg}

Considere a tabela Ve√≠culos abaixo:

\begin{longtable}[]{@{}cc@{}}
\toprule\noalign{}
Modelo & Montadora \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Strada & Fiat \\
Mobi & Fiat \\
Pulse & Fiat \\
Onix & Chevrolet \\
Tracker & Chevrolet \\
Onix Plus & Chevrolet \\
Polo & Volkswagen \\
Nivus & Volkswagen \\
T-Cross & Volkswagen \\
HB20 & Hyundai \\
Creta & Hyundai \\
\end{longtable}

Separamos o conjunto de elemntos \emph{Montadoras} e \emph{Modelos}.

\begin{longtable}[]{@{}cc@{}}
\toprule\noalign{}
MontadoraID & Montadora \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
1 & Fiat \\
2 & Chevrolet \\
3 & Volkswagen \\
4 & Hyundai \\
\end{longtable}

\begin{longtable}[]{@{}cc@{}}
\toprule\noalign{}
ModeloID & Modelo \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
101 & Strada \\
102 & Mobi \\
103 & Pulse \\
201 & Onix \\
202 & Tracker \\
203 & Onix Plus \\
301 & Polo \\
302 & Nivus \\
303 & T-Cross \\
401 & HB20 \\
402 & Creta \\
\end{longtable}

\begin{quote}
O processo de fragmentar agrupamentos complexos de dados e simplifica-los a fim de minimizar redund√¢ncias e economizar espa√ßo no Banco de Dados Relacional √© chamado de \textbf{NORMALIZA√á√ÉO.} {[}{[}1{]} - LAUDON, Kenneth C.; LAUDON, Jane P. *Sistemas de informa√ß√£o gerenciais*. 11. ed.~S√£o Paulo: Pearson Education do Brasil, 2010. p.~180.{]}
\end{quote}

Mas Como indicar que cada elemento da tabela ``Modelo'' est√° associado a um elemento da tabela ``Montadora'' ?

\subsection{Tabela Normalizada}\label{tabela-normalizada}

Considere as tabelas abaixo:

\begin{longtable}[]{@{}cc@{}}
\toprule\noalign{}
MontadoraID & Montadora \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
1 & Fiat \\
2 & Chevrolet \\
3 & Volkswagen \\
4 & Hyundai \\
\end{longtable}

\begin{longtable}[]{@{}ccc@{}}
\toprule\noalign{}
ModeloID & Modelo & MontadoraID \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
101 & Strada & 1 \\
102 & Mobi & 1 \\
103 & Pulse & 1 \\
201 & Onix & 2 \\
202 & Tracker & 2 \\
203 & Onix Plus & 2 \\
301 & Polo & 3 \\
302 & Nivus & 3 \\
303 & T-Cross & 3 \\
401 & HB20 & 4 \\
402 & Creta & 4 \\
\end{longtable}

Repare que:

\begin{itemize}
\item
  √â poss√≠vel identificar que n√£o existem montadoras repetidas na tabela ``Montadoras'';
\item
  √â poss√≠vel identificar que n√£o existem modelos repetidos na tabela ``Montadoras'';
\end{itemize}

A coluna (atributo) \textbf{ModeloID} √© a \textbf{chave prim√°ria} da tabela \textbf{Modelos.} A coluna (atributo) \textbf{MontadoraID} √© a \textbf{chave prim√°ria} da tabela \textbf{Montadoras.}

Na tabela \textbf{Modelos}, a coluna \textbf{MontadoraID}, acrescentada a tabela Modelos representa a liga√ß√£o de cada elemento da tabela Modelos e Montadoras. Essa coluna ``importada'' da tabela Montadoras para a tabela Modelos se chama \textbf{chave estrangeira}.

\section{Refer√™ncias}\label{referuxeancias}

\textbf{CHEN}, Peter (1990).~\textbf{\emph{Gerenciando Banco de Dados}. A Abordagem Entidade-Relacionamento para Projeto L√≥gico}. S√£o Paulo: McGraw-Hill. 80~p√°ginas.~\href{https://pt.wikipedia.org/wiki/International_Standard_Book_Number}{ISBN}~\href{https://pt.wikipedia.org/wiki/Especial:Fontes_de_livros/0-07-460575-5}{0-07-460575-5}

\textbf{DATE}, C. J. \textbf{An Introduction to Database Systems.} 8. ed.~Boston: Addison-Wesley, 2003.

\textbf{SILBERSCHATZ}, Abraham; KORTH, Henry F.; SUDARSHAN, S. \textbf{Database System Concepts.} 6. ed.~New York: McGraw-Hill, 2010.

\textbf{CODD}, E. F. \textbf{A Relational Model of Data for Large Shared Data Banks.} Communications of the ACM, New York, v. 13, n.~6, p.~377--387, 1970.

\section{Exerc√≠cios RESOLVIDOS}\label{exercuxedcios-resolvidos}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 0\tabcolsep) * \real{1.0035}}@{}}
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Exerc√≠cio 1 --- Universidade
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Considere uma Universidade que possui v√°rios Cursos. Cada curso tem um nome, uma dura√ß√£o em semestres e um coordenador. A universidade possui Professores, cada um com um nome, t√≠tulo e CPF. Um professor pode ministrar v√°rias disciplinas, e cada disciplina pertence a um √∫nico curso. \\
\begin{minipage}[t]{\linewidth}\raggedright
\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\tightlist
\item
  Identifique as entidades
\end{enumerate}
\end{minipage} \\
\begin{minipage}[t]{\linewidth}\raggedright
\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\setcounter{enumi}{1}
\tightlist
\item
  Identifique os atributos de cada Entidade
\end{enumerate}
\end{minipage} \\
\begin{minipage}[t]{\linewidth}\raggedright
\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\setcounter{enumi}{2}
\tightlist
\item
  Identifique os relacionamentos entre as Entidades
\end{enumerate}
\end{minipage} \\
\begin{minipage}[t]{\linewidth}\raggedright
\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\setcounter{enumi}{4}
\tightlist
\item
  Fa√ßa o diagrama DEM (Diagrama Entidade Relacionamento) contendo as entidades, atributos e relacionamentos que voc√™ mapeou.
\end{enumerate}
\end{minipage} \\
\end{longtable}

\subsubsection{Passo \#1 -}\label{passo-1--}

Identificar \textbf{SUBSTANTIVOS} no contexto; identificar os \textbf{ADJETIVOS} pertinentes a cada SUBSTANTIVO; identificar os \textbf{VERBOS} de rela√ß√£o entre os substantivos.

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 4\tabcolsep) * \real{0.3399}}
  >{\raggedright\arraybackslash}p{(\linewidth - 4\tabcolsep) * \real{0.3072}}
  >{\raggedright\arraybackslash}p{(\linewidth - 4\tabcolsep) * \real{0.3464}}@{}}
\caption{Identificando SUBSTANTIVOS, ADJETIVOS referentes e VERBOS de rela√ß√£o}\tabularnewline
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
\texttt{Substantivos} \textbf{do contexto}: leve-os ao plural
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
\texttt{Adjetivos}
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
\texttt{Verbos}
\end{minipage} \\
\midrule\noalign{}
\endfirsthead
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
\texttt{Substantivos} \textbf{do contexto}: leve-os ao plural
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
\texttt{Adjetivos}
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
\texttt{Verbos}
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
UNIVERSIDADE -\textgreater{} \textbf{\texttt{UNIVERSIDADES}} & \texttt{NOME} (impl√≠cito no enunciado)

\texttt{CNPJ} (impl√≠cito no enunciado) & universidade \texttt{POSSUI} (v√°rios) cursos \\
CURSO -\textgreater{} \textbf{\texttt{CURSOS}} & \texttt{NOME} (expl√≠cito no enunciado)

\texttt{DURA√á√ÉO} (expl√≠cito no enunciado)

\texttt{COORDENADOR} (expl√≠cito no enunciado)

\texttt{CODIGO\_CURSO} (impl√≠cito no enunciado) & cursos s√£o \texttt{POSSU√çDOS} por (v√°rios) universidades \\
PROFESSOR -\textgreater{} \textbf{\texttt{PROFESSORES}} & \texttt{CPF} (expl√≠cito no enunciado)

\texttt{NOME} (expl√≠cito no enunciado)

\texttt{T√çTULO} (expl√≠cito no enunciado) & universidade \texttt{POSSUI} (v√°rios) professores

professor \texttt{MINISTRA} (v√°rias) disciplinas \\
DISCIPLINA -\textgreater{} \textbf{\texttt{DISCIPLINAS}} & \texttt{NOME} (impl√≠cito no enunciado)

\texttt{CODIGO\_DISCIPLINA} (impl√≠cito no enunciado) & disciplina \texttt{√â\ MINISTRADA} por (v√°rios) professores

disciplina \texttt{PERTENCE} a (um √∫nico) curso \\
\end{longtable}

\subsubsection{Passo \#2}\label{passo-2}

Criar o \textbf{\texttt{MODELO\ ENTIDADE\ RELACIONAMENTO\ (M.E.R.)}} - Converter SUBSTANTIVO em \textbf{\texttt{ENTIDADES}}; converter ADJETIVOS em \textbf{\texttt{ATRIBUTOS}} e converter VERBOS em \textbf{\texttt{RELACIONAMENTOS}}.

\begin{itemize}
\item
  ENTIDADES identificadas: \textbf{\texttt{UNIVERSIDADES}}, \textbf{\texttt{CURSOS}}, \textbf{\texttt{PROFESSORES}} e \textbf{\texttt{DISCIPLINAS}}
\item
  ATRIBUTOS identificados: UNIVERSIDADES {[} nome,cnpj {]} ; CURSOS {[} nome, dura√ß√£o, coordenador, codigo\_curso{]} ; PROFESSORES {[} cpf, nome e t√≠tulo{]} ; DISCIPLINAS {[}nome e codigo\_disciplina{]}
\item
  RELACIONAMENTOS: {[}universidade-\texttt{POSSUI}-curso{]} ; {[}universidade-\texttt{POSSUI}-professores{]}; {[}professor-\texttt{MINISTRA}-disciplina{]} ; {[}disciplina-\texttt{PERTENCE}-curso{]}
\end{itemize}

\subsubsection{Passo \#3}\label{passo-3}

Criar um DIAGRAMA ENTIDADE-RELACIONAMENTO (D.E.R.) com as informa√ß√µes levantadas:

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio01-01.svg}}

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio01-02.svg}}

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio01-03.svg}}

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio01-04.svg}}

\subsubsection{Passo \#4}\label{passo-4}

Identificar os Relacionamentos:

\begin{itemize}
\tightlist
\item
  {[}universidade-\texttt{POSSUI}-curso{]} ; {[}universidade-\texttt{POSSUI}-professores{]}; {[}professor-\texttt{MINISTRA}-disciplina{]} ; {[}disciplina-\texttt{PERTENCE}-curso{]}
\end{itemize}

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio01-05.svg}}

\subsubsection{Passo \#5 - Crie o c√≥digo SQL referente ao diagrama que voc√™ desenhou:}\label{passo-5---crie-o-cuxf3digo-sql-referente-ao-diagrama-que-vocuxea-desenhou}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{/* =========================================================}
\CommentTok{   Passo 1Ô∏è{-} CRIAR TABELAS (somente colunas, sem PK nem FK)}
\CommentTok{   ========================================================= */}
\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ UNIVERSIDADES }
\NormalTok{(}
\NormalTok{    nome            }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    CNPJ            }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{14}\NormalTok{)}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ CURSOS }
\NormalTok{(}
\NormalTok{    nome            }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    duracao         }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    coordenador     }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    codigo\_curso    }\DataTypeTok{INTEGER}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ PROFESSORES }
\NormalTok{(}
\NormalTok{    cpf             }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{11}\NormalTok{),}
\NormalTok{    nome            }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    titulo          }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{)}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ DISCIPLINAS }
\NormalTok{(}
\NormalTok{    nome                }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    codigo\_disciplina   }\DataTypeTok{INTEGER}
\NormalTok{);}

\CommentTok{/* =========================================================}
\CommentTok{   Passo 2{-} ADICIONAR CHAVES PRIM√ÅRIAS}
\CommentTok{   ========================================================= */}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ UNIVERSIDADES }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (CNPJ);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ CURSOS        }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (codigo\_curso);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ PROFESSORES   }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (cpf);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ DISCIPLINAS   }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (codigo\_disciplina);}

\CommentTok{/* =========================================================}
\CommentTok{   Passo 3{-} CRIAR COLUNAS PARA FUTURAS CHAVES ESTRANGEIRAS}
\CommentTok{   {-}{-} Sempre no lado N de cada relacionamento}
\CommentTok{   ========================================================= */}
\CommentTok{{-}{-} UNIVERSIDADES (1) ‚Äî‚Äî (N) CURSOS  ‚Üí CURSOS precisa de CNPJ}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ CURSOS   }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ CNPJ }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{14}\NormalTok{);}

\CommentTok{{-}{-} UNIVERSIDADES (1) ‚Äî‚Äî (N) PROFESSORES ‚Üí PROFESSORES precisa de CNPJ}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ PROFESSORES  }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ CNPJ }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{14}\NormalTok{);}

\CommentTok{{-}{-} PROFESSORES (1) ‚Äî‚Äî (N) DISCIPLINAS ‚Üí DISCIPLINAS precisa de cpf}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ DISCIPLINAS }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ cpf }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{11}\NormalTok{);}

\CommentTok{/* =========================================================}
\CommentTok{   Passo 4{-} CRIAR AS CHAVES ESTRANGEIRAS}
\CommentTok{   ========================================================= */}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ CURSOS      }\KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_cursos\_universidade      }\KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (CNPJ) }\KeywordTok{REFERENCES}\NormalTok{ UNIVERSIDADES (CNPJ);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ PROFESSORES }\KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_professores\_universidade }\KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (CNPJ) }\KeywordTok{REFERENCES}\NormalTok{ UNIVERSIDADES (CNPJ);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ DISCIPLINAS }\KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_disciplinas\_professor    }\KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (cpf)  }\KeywordTok{REFERENCES}\NormalTok{ PROFESSORES (cpf);}
\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 0\tabcolsep) * \real{1.0044}}@{}}
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Exerc√≠cio 2 --- Um Projeto de e-commerce
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Um Cliente faz Pedidos em um sistema de e-commerce. Cada cliente tem um nome, endere√ßo e telefone. Os pedidos possuem uma data, um valor total e podem conter v√°rios Produtos. Cada produto tem um nome, uma descri√ß√£o e um pre√ßo. \\
\begin{minipage}[t]{\linewidth}\raggedright
\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\tightlist
\item
  Identifique as \textbf{entidades}
\end{enumerate}
\end{minipage} \\
\begin{minipage}[t]{\linewidth}\raggedright
\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\setcounter{enumi}{1}
\tightlist
\item
  Identifique os \textbf{atributos} de cada Entidade
\end{enumerate}
\end{minipage} \\
\begin{minipage}[t]{\linewidth}\raggedright
\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\setcounter{enumi}{2}
\tightlist
\item
  Identifique os \textbf{relacionamentos} entre as Entidades
\end{enumerate}
\end{minipage} \\
\begin{minipage}[t]{\linewidth}\raggedright
\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\setcounter{enumi}{4}
\tightlist
\item
  Fa√ßa o \textbf{diagrama DEM (Diagrama Entidade Relacionamento)} contendo as entidades, atributos e relacionamentos que voc√™ mapeou.
\end{enumerate}
\end{minipage} \\
\end{longtable}

\subsubsection{Passo \#1 -}\label{passo-1---1}

Identificar \textbf{SUBSTANTIVOS} no contexto; identificar os \textbf{ADJETIVOS} pertinentes a cada SUBSTANTIVO; identificar os \textbf{VERBOS} de rela√ß√£o entre os substantivos.

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 4\tabcolsep) * \real{0.4302}}
  >{\raggedright\arraybackslash}p{(\linewidth - 4\tabcolsep) * \real{0.2384}}
  >{\raggedright\arraybackslash}p{(\linewidth - 4\tabcolsep) * \real{0.3256}}@{}}
\caption{Identificando SUBSTANTIVOS, ADJETIVOS referentes e VERBOS de rela√ß√£o}\tabularnewline
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
\texttt{Substantivos} \textbf{do contexto}: leve-os ao plural
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
\texttt{Adjetivos}
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
\texttt{Verbos}
\end{minipage} \\
\midrule\noalign{}
\endfirsthead
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
\texttt{Substantivos} \textbf{do contexto}: leve-os ao plural
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
\texttt{Adjetivos}
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
\texttt{Verbos}
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
CLIENTE -\textgreater{} \textbf{\texttt{CLIENTES}} & \texttt{NOME} (expl√≠cito no enunciado)

\texttt{ENDERECO} (expl√≠cito no enunciado)

\texttt{TELEFONE} (expl√≠cito no enunciado)

\texttt{CPF} (impl√≠cito no enunciado) & (v√°rios) clientes \texttt{PEDEM} (v√°rios) produtos \\
PEDIDO -\textgreater{} \textbf{\texttt{PEDIDOS\ ????}}

PEDIDO N√ÉO √â SUBSTABNTIVO, MAS SIM O PARTIC√çPIO PASSADO DO VERBO PEDIR.

(PEDIR √â VERBO !!!) & \texttt{DATA} (expl√≠cito no enunciado)

\texttt{VALOR\_TOTAL} (expl√≠cito no enunciado) & (v√°rios) clientes \texttt{PEDEM} (v√°rios) produtos \\
PRODUTO -\textgreater{} \textbf{\texttt{PRODUTOS}} & \texttt{NOME} (impl√≠cito no enunciado)

\texttt{DESCRICAO} (expl√≠cito no enunciado)

\texttt{PRECO} (expl√≠cito no enunciado)

\texttt{COD\_PRODUTO} (impl√≠cito no enunciado) & (v√°rios) produtos s√£o \texttt{PEDidos} por (v√°rios) clientes \\
\end{longtable}

\subsubsection{Passo \#2}\label{passo-2-1}

Criar o \textbf{\texttt{MODELO\ ENTIDADE\ RELACIONAMENTO\ (M.E.R.)}} - Converter SUBSTANTIVO em \textbf{\texttt{ENTIDADES}}; converter ADJETIVOS em \textbf{\texttt{ATRIBUTOS}} e converter VERBOS em \textbf{\texttt{RELACIONAMENTOS}}.

Normalmente apenas as ENTIDADES levam atributos. Quando aparece um relacionamento N-N entre duas entidades, tamb√©m podem aparecer atributos atrelados aos relacionamentos (como √© o caso de PEDIDO aqui).

\begin{itemize}
\item
  ENTIDADES identificadas: \textbf{\texttt{CLIENTES}}, \textbf{\texttt{PRODUTOS}}
\item
  ATRIBUTOS identificados: CLIENTES {[} nome, endereco, telefone, cpf{]} ; PRODUTOS {[} nome, descricao, preco, cod\_produto{]} ; PEDIDO{[}data, valor\_total{]}
\item
  RELACIONAMENTOS: {[}cliente-\texttt{PEDE}-produto{]} ; {[}produto-\texttt{PEDIDO}-cliente{]};
\end{itemize}

\subsubsection{Passo \#3}\label{passo-3-1}

Criar um DIAGRAMA ENTIDADE-RELACIONAMENTO (D.E.R.) com as informa√ß√µes levantadas:

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio02-01.svg}}

\subsubsection{Passo \#5 - Crie o c√≥digo SQL referente ao diagrama que voc√™ desenhou:}\label{passo-5---crie-o-cuxf3digo-sql-referente-ao-diagrama-que-vocuxea-desenhou-1}

\begin{Shaded}
\begin{Highlighting}[]

\CommentTok{{-}{-} CRIAR AS TABELAS}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ Cliente }
\NormalTok{(}
\NormalTok{    id\_cliente }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    nome }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{)}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ CPF }
\NormalTok{(}
\NormalTok{    numero\_cpf }\DataTypeTok{CHAR}\NormalTok{(}\DecValTok{11}\NormalTok{)}
\NormalTok{);}

\CommentTok{{-}{-} ADICIONAR AS CHAVES PRIM√ÅRIAS}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ Cliente }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (id\_cliente);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ CPF }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (numero\_cpf);}


\CommentTok{{-}{-} O relacionamento √© 1:1. Podemos escolher um dos lados para armazenar a chave.}
\CommentTok{{-}{-} Aqui vamos seguir o diagrama, colocando a chave estrangeira de CPF em Cliente.}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ Cliente }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ numero\_cpf }\DataTypeTok{CHAR}\NormalTok{(}\DecValTok{11}\NormalTok{);}

\CommentTok{{-}{-} CRIAR AS CHAVES ESTRANGEIRAS}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ Cliente }\KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_cliente\_cpf }\KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (numero\_cpf) }\KeywordTok{REFERENCES}\NormalTok{ CPF (numero\_cpf);}
\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 0\tabcolsep) * \real{1.0036}}@{}}
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Exerc√≠cio 3 --- Hospital
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Um Hospital registra Pacientes, cada um com nome, idade, endere√ßo e telefone. Os pacientes podem realizar v√°rias Consultas com M√©dicos. Cada m√©dico possui um CRM, um nome e uma especialidade. Durante a consulta, o m√©dico pode prescrever Receitas, que possuem medica√ß√£o e dosagem. \\
\begin{minipage}[t]{\linewidth}\raggedright
\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\tightlist
\item
  Identifique as \textbf{entidades}
\end{enumerate}
\end{minipage} \\
\begin{minipage}[t]{\linewidth}\raggedright
\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\setcounter{enumi}{1}
\tightlist
\item
  Identifique os \textbf{atributos} de cada Entidade
\end{enumerate}
\end{minipage} \\
\begin{minipage}[t]{\linewidth}\raggedright
\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\setcounter{enumi}{2}
\tightlist
\item
  Identifique os \textbf{relacionamentos} entre as Entidades
\end{enumerate}
\end{minipage} \\
\begin{minipage}[t]{\linewidth}\raggedright
\begin{enumerate}
\def\labelenumi{\alph{enumi})}
\setcounter{enumi}{4}
\tightlist
\item
  Fa√ßa o \textbf{diagrama DEM (Diagrama Entidade Relacionamento) contendo as entidades, atributos e relacionamentos} que voc√™ mapeou.
\end{enumerate}
\end{minipage} \\
\end{longtable}

\subsubsection{Passo \#1 -}\label{passo-1---2}

Identificar \textbf{SUBSTANTIVOS} no contexto; identificar os \textbf{ADJETIVOS} pertinentes a cada SUBSTANTIVO; identificar os \textbf{VERBOS} de rela√ß√£o entre os substantivos.

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 4\tabcolsep) * \real{0.3171}}
  >{\raggedright\arraybackslash}p{(\linewidth - 4\tabcolsep) * \real{0.2622}}
  >{\raggedright\arraybackslash}p{(\linewidth - 4\tabcolsep) * \real{0.4146}}@{}}
\caption{Identificando SUBSTANTIVOS, ADJETIVOS referentes e VERBOS de rela√ß√£o}\tabularnewline
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
\texttt{Substantivos} \textbf{do contexto}: leve-os ao plural
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
\texttt{Adjetivos}
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
\texttt{Verbos}
\end{minipage} \\
\midrule\noalign{}
\endfirsthead
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
\texttt{Substantivos} \textbf{do contexto}: leve-os ao plural
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
\texttt{Adjetivos}
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
\texttt{Verbos}
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
HOSPITAL -\textgreater{} \textbf{\texttt{HOSPITAIS}} & \texttt{NOME} (impl√≠cito no enunciado)

\texttt{CNPJ} (impl√≠cito no enunciado) & (expl√≠cito) hospital \texttt{REGISTRA} (v√°rios) pacientes

(impl√≠cito) hospital \texttt{POSSUI} medicos \\
PACIENTE -\textgreater{} \textbf{\texttt{PACIENTES}} & \texttt{NOME} (expl√≠cito no enunciado)

\texttt{IDADE} (expl√≠cito no enunciado)

\texttt{ENDERECO} (expl√≠cito no enunciado)

\texttt{TELEFONE} (expl√≠cito no enunciado)

\texttt{CPF} (impl√≠cito no enunciado) & pacientes s√£o \texttt{REGISTRADOS} em (um) hospital

(v√°rios) pacientes \texttt{CONSULTAM} (v√°rios) m√©dicos

(v√°rios) pacientes \texttt{S√ÉO\ RECEITADOS} por (v√°rios) m√©dicos \\
M√âDICO -\textgreater{} \textbf{\texttt{MEDICOS}} & \texttt{CRM} (expl√≠cito no enunciado)

\texttt{NOME} (expl√≠cito no enunciado)

\texttt{ESPECIALIDADE} (expl√≠cito no enunciado) & (v√°rios) m√©dico(s) \texttt{CONSULTA} (v√°rios) pacientes

(v√°rios) m√©dico(s) \texttt{RECEITAM} (v√°rios) pacientes \\
RECEITA ?? -\textgreater{} \textbf{\texttt{RECEITAR}} √© VERBO & \texttt{MEDICACAO} (expl√≠cito no enunciado)

\texttt{DOSAGEM}(expl√≠cito no enunciado) & m√©dico \texttt{RECEITA} ao paciente

(v√°rios) paciente(s) \texttt{√â(S√ÉO)\ RECEITADO(s)} por (v√°rios) m√©dico(s) \\
CONSULTA ?? -\textgreater{} \textbf{\texttt{CONSULTAR}} √© VERBO & \texttt{DATA} (impl√≠cito no enunciado)

\texttt{HORA}(impl√≠cito no enunciado)

\texttt{sala}(impl√≠cito no enunciado) & (v√°rios) pacientes(s) \texttt{CONSULTA(M)} (v√°rios) m√©dico(s) \\
\end{longtable}

\subsubsection{Passo \#2}\label{passo-2-2}

Criar o \textbf{\texttt{MODELO\ ENTIDADE\ RELACIONAMENTO\ (M.E.R.)}} - Converter SUBSTANTIVO em \textbf{\texttt{ENTIDADES}}; converter ADJETIVOS em \textbf{\texttt{ATRIBUTOS}} e converter VERBOS em \textbf{\texttt{RELACIONAMENTOS}}.

\begin{itemize}
\item
  ENTIDADES identificadas: \textbf{\texttt{HOSPITAIS}}, \textbf{\texttt{PACIENTES}}, \textbf{\texttt{MEDICOS}}
\item
  ATRIBUTOS identificados: HOSPITAIS {[} nome,cnpj {]} ; PACIENTES {[} nome, idade, endereco, telefone, cpf{]} ; MEDICOS {[} crm, nome e especialidade{]} ;
\item
  RELACIONAMENTOS: {[}medico-\texttt{consulta}-paciente{]} ; {[}medico-\texttt{receita}-paciente{]}; {[}hospital-registra-paciente{]} ; {[}hospital-\texttt{POSSUI}-medicos{]}
\end{itemize}

\subsubsection{Passo \#3}\label{passo-3-2}

Criar um DIAGRAMA ENTIDADE-RELACIONAMENTO (D.E.R.) com as informa√ß√µes levantadas:

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio03-01.svg}}

\subsubsection{Passo \#5 - Fa√ßa o c√≥digo SQL do diagrama acima}\label{passo-5---fauxe7a-o-cuxf3digo-sql-do-diagrama-acima}

\begin{Shaded}
\begin{Highlighting}[]

\CommentTok{/* =========================================================}
\CommentTok{   Passo 1{-} TABELAS (apenas colunas, sem PK ou FK)}
\CommentTok{   ========================================================= */}
\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ HOSPITAIS }
\NormalTok{(}
\NormalTok{    nome    }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    cnpj    }\DataTypeTok{CHAR}\NormalTok{(}\DecValTok{14}\NormalTok{)}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ PACIENTES }
\NormalTok{(}
\NormalTok{    nome        }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    idade       }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    endereco    }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    telefone    }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{20}\NormalTok{),}
\NormalTok{    cpf         }\DataTypeTok{CHAR}\NormalTok{(}\DecValTok{11}\NormalTok{)}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ MEDICOS }
\NormalTok{(}
\NormalTok{    nome            }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    especialidade   }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    crm             }\DataTypeTok{CHAR}\NormalTok{(}\DecValTok{15}\NormalTok{)}
\NormalTok{);}

\CommentTok{/* As pr√≥ximas tabelas representam os relacionamentos N:N}
\CommentTok{   com atributos pr√≥prios (tabelas de jun√ß√£o) */}
\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ REGISTRAM }
\NormalTok{(}
    \CommentTok{{-}{-} sem colunas de FK por enquanto}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ CONSULTAM }
\NormalTok{(}
\NormalTok{    data\_consulta   }\DataTypeTok{DATE}\NormalTok{,}
\NormalTok{    hora            }\DataTypeTok{TIME}\NormalTok{,}
\NormalTok{    sala            }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{50}\NormalTok{)}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ RECEITAM }
\NormalTok{(}
\NormalTok{    medicacao       }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    dosagem         }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{100}\NormalTok{)}
\NormalTok{);}

\CommentTok{/* =========================================================}
\CommentTok{   Passo 2{-} ADICIONAR CHAVES PRIM√ÅRIAS}
\CommentTok{   ========================================================= */}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ HOSPITAIS  }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (cnpj);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ PACIENTES  }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (cpf);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ MEDICOS    }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (crm);}

\CommentTok{/* Para tabelas de relacionamento com atributos, a PK ser√° composta}
\CommentTok{   (as FKs a serem criadas formar√£o a chave prim√°ria). Faremos isso depois}
\CommentTok{   de adicionar as colunas de FK. */}

\CommentTok{/* =========================================================}
\CommentTok{   Passo 3{-} CRIAR COLUNAS PARA FUTURAS CHAVES ESTRANGEIRAS}
\CommentTok{   ========================================================= */}
\CommentTok{{-}{-} REGISTRAM: HOSPITAIS (1) ‚Äî‚Äî (N) PACIENTES}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ REGISTRAM }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ cnpj }\DataTypeTok{CHAR}\NormalTok{(}\DecValTok{14}\NormalTok{), }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ cpf  }\DataTypeTok{CHAR}\NormalTok{(}\DecValTok{11}\NormalTok{);}

\CommentTok{{-}{-} CONSULTAM: MEDICOS (N) ‚Äî‚Äî (N) PACIENTES}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ CONSULTAM }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ crm  }\DataTypeTok{CHAR}\NormalTok{(}\DecValTok{15}\NormalTok{), }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ cpf  }\DataTypeTok{CHAR}\NormalTok{(}\DecValTok{11}\NormalTok{);}

\CommentTok{{-}{-} RECEITAM: MEDICOS (N) ‚Äî‚Äî (N) PACIENTES}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ RECEITAM  }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ crm  }\DataTypeTok{CHAR}\NormalTok{(}\DecValTok{15}\NormalTok{), }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ cpf  }\DataTypeTok{CHAR}\NormalTok{(}\DecValTok{11}\NormalTok{);}

\CommentTok{/* =========================================================}
\CommentTok{   Passo 4{-} CRIAR CHAVES ESTRANGEIRAS}
\CommentTok{   ========================================================= */}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ REGISTRAM}
    \KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_registram\_hospitais}
        \KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (cnpj)}
        \KeywordTok{REFERENCES}\NormalTok{ HOSPITAIS (cnpj),}
    \KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_registram\_pacientes}
        \KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (cpf)}
        \KeywordTok{REFERENCES}\NormalTok{ PACIENTES (cpf);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ CONSULTAM}
    \KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_consultam\_medicos}
        \KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (crm)}
        \KeywordTok{REFERENCES}\NormalTok{ MEDICOS (crm),}
    \KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_consultam\_pacientes}
        \KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (cpf)}
        \KeywordTok{REFERENCES}\NormalTok{ PACIENTES (cpf);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ RECEITAM}
    \KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_receitam\_medicos}
        \KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (crm)}
        \KeywordTok{REFERENCES}\NormalTok{ MEDICOS (crm),}
    \KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_receitam\_pacientes}
        \KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (cpf)}
        \KeywordTok{REFERENCES}\NormalTok{ PACIENTES (cpf);}

\CommentTok{/* Definir chaves prim√°rias compostas para tabelas de relacionamento */}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ REGISTRAM }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (cnpj, cpf);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ CONSULTAM }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (crm, cpf, data\_consulta, hora);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ RECEITAM  }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (crm, cpf, medicacao);}
\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{Exerc√≠cios}\label{exercuxedcios-1}

\subsection{üìù Lista de Exerc√≠cios -- Modelo Entidade-Relacionamento (MER)}\label{lista-de-exercuxedcios-modelo-entidade-relacionamento-mer}

\subsubsection{Exerc√≠cio 1 -- Cliente e CPF (1:1)}\label{exercuxedcio-1-cliente-e-cpf-11}

Considere um projeto de Banco de Dados.Fa√ßa a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.).\\
Cada \textbf{Cliente} possui exatamente \textbf{um CPF}, e cada CPF s√≥ pode estar associado a um √∫nico Cliente.\\
- Identifique entidades, atributos e relacionamento.\\
- Represente o MER com cardinalidade 1:1.

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio-01.svg}}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsubsection{Exerc√≠cio 2 -- Cliente e Pedidos (1:N)}\label{exercuxedcio-2-cliente-e-pedidos-1n}

Considere um projeto de Banco de Dados.Fa√ßa a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.).\\
Um \textbf{Cliente} pode fazer \textbf{v√°rios Pedidos}, mas cada Pedido pertence a apenas um Cliente.\\
- Liste as entidades e atributos.\\
- Defina o relacionamento e a cardinalidade.\\
- Monte o DER.

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio-02.svg}}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsubsection{Exerc√≠cio 3 -- Alunos e Disciplinas (N:N)}\label{exercuxedcio-3-alunos-e-disciplinas-nn}

Considere um projeto de Banco de Dados.Fa√ßa a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.).\\
Um \textbf{Aluno} pode se matricular em v√°rias \textbf{Disciplinas}, e cada Disciplina pode ter v√°rios Alunos.\\
- Identifique entidades e atributos. - Qual entidade associativa deve ser criada? - Desenhe o DER com a entidade associativa.

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio-03.svg}}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsubsection{Exerc√≠cio 4 -- Funcion√°rio e Dependentes (Entidade Fraca)}\label{exercuxedcio-4-funcionuxe1rio-e-dependentes-entidade-fraca}

Considere um projeto de Banco de Dados.Fa√ßa a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.).\\
Cada \textbf{Funcion√°rio} pode ter \textbf{v√°rios Dependentes}. Um Dependente n√£o existe sem um Funcion√°rio.\\
- Identifique a entidade forte e a entidade fraca.\\
- Defina atributos e chaves.\\
- Monte o DER indicando a depend√™ncia existencial.

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio-04.svg}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{{-}{-} Coloque aqui o c√≥digo SQL criar as tabelas:}


\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsubsection{Exerc√≠cio 5 -- Pedido e Itens de Pedido (Entidade Associativa + Fraca)}\label{exercuxedcio-5-pedido-e-itens-de-pedido-entidade-associativa-fraca}

Considere um projeto de Banco de Dados.Fa√ßa a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.).\\
Um \textbf{Pedido} cont√©m v√°rios \textbf{Itens}, mas cada Item est√° sempre vinculado a apenas um Pedido.\\
- Qual entidade √© dominante e qual √© subordinada?\\
- Identifique atributos das duas entidades.\\
- Represente o DER com cardinalidade 1:N.

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio-05.svg}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{{-}{-} Coloque aqui o c√≥digo SQL criar as tabelas:}


\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsubsection{Exerc√≠cio 6 -- M√©dicos e Consultas (1:N)}\label{exercuxedcio-6-muxe9dicos-e-consultas-1n}

Considere um projeto de Banco de Dados.Fa√ßa a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.).\\
Um \textbf{M√©dico} pode realizar v√°rias \textbf{Consultas}, mas cada Consulta est√° associada a apenas um M√©dico.\\
- Identifique entidades e atributos.\\
- Desenhe o DER.\\
- Indique as cardinalidades.

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio-06.svg}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{{-}{-} Coloque aqui o c√≥digo SQL criar as tabelas:}


\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsubsection{Exerc√≠cio 7 -- Professor e Departamento (1:1)}\label{exercuxedcio-7-professor-e-departamento-11}

Considere um projeto de Banco de Dados.Fa√ßa a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.).\\
Cada \textbf{Professor} dirige apenas \textbf{um Departamento}, e cada Departamento tem apenas um Professor respons√°vel.\\
- Identifique entidades, atributos e relacionamento.\\
- Defina cardinalidade 1:1 no DER.

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio-07.svg}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{{-}{-} Coloque aqui o c√≥digo SQL criar as tabelas:}


\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsubsection{Exerc√≠cio 8 -- Livros e Autores (N:N)}\label{exercuxedcio-8-livros-e-autores-nn}

Considere um projeto de Banco de Dados.Fa√ßa a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.).\\
Um \textbf{Livro} pode ter v√°rios \textbf{Autores}, e cada Autor pode escrever v√°rios Livros.\\
- Identifique as entidades e atributos.\\
- Qual entidade associativa deve ser criada?\\
- Monte o DER em nota√ß√£o conceitual.

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio-08.svg}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{{-}{-} Coloque aqui o c√≥digo SQL criar as tabelas:}


\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsubsection{Exerc√≠cio 9 -- Biblioteca (Entidades Fortes e Fracas)}\label{exercuxedcio-9-biblioteca-entidades-fortes-e-fracas}

Considere um projeto de Banco de Dados.Fa√ßa a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.).\\
Um \textbf{Livro} pode ter v√°rios \textbf{Exemplares}. Um Exemplar s√≥ existe se estiver associado a um Livro.\\
- Identifique entidades fortes e fracas.\\
- Defina atributos (Livro: t√≠tulo, ano; Exemplar: c√≥digo\_exemplar, status).\\
- Monte o DER com a depend√™ncia existencial.

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio-09.svg}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{{-}{-} Coloque aqui o c√≥digo SQL criar as tabelas:}


\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsubsection{Exerc√≠cio 10 -- Empresa, Funcion√°rio e Projeto (Misto 1:N e N:N)}\label{exercuxedcio-10-empresa-funcionuxe1rio-e-projeto-misto-1n-e-nn}

Considere um projeto de Banco de Dados.Fa√ßa a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.).\\
- Uma \textbf{Empresa} possui v√°rios \textbf{Funcion√°rios}.\\
- Cada \textbf{Funcion√°rio} pode participar de v√°rios \textbf{Projetos}, e cada Projeto pode ter v√°rios Funcion√°rios.\\
- Identifique todas as entidades, atributos e relacionamentos.\\
- Determine cardinalidades corretas (Empresa--Funcion√°rio 1:N, Funcion√°rio--Projeto N:N).\\
- Crie o DER completo.

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio-10.svg}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{{-}{-} Coloque aqui o c√≥digo SQL criar as tabelas:}


\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsubsection{Tarefas propostas para cada exerc√≠cio:}\label{tarefas-propostas-para-cada-exercuxedcio}

\begin{enumerate}
\def\labelenumi{\arabic{enumi}.}
\tightlist
\item
  Identificar entidades e atributos.\\
\item
  Definir relacionamentos.\\
\item
  Especificar cardinalidades.\\
\item
  Indicar entidades fortes e fracas (quando houver).\\
\item
  Representar graficamente o DER.
\end{enumerate}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsection{Respostas dos Exerc√≠cios:}\label{respostas-dos-exercuxedcios}

\subsubsection{Exerc√≠cio \#1}\label{exercuxedcio-1}

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio-01-resposta.svg}}

\paragraph{Exerc√≠cio 1 - SQL refer√™nte ao diagrama anterior}\label{exercuxedcio-1---sql-referuxeante-ao-diagrama-anterior}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{/* =========================================================}
\CommentTok{   TRANSFORMA AS ENTIDADES EM TABELAS E ATRIBUTOS EM COLUNAS}
\CommentTok{   ========================================================= */}
\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ CLIENTES }
\NormalTok{(}
\NormalTok{    id\_cliente }\DataTypeTok{INTEGER}\NormalTok{,}
\NormalTok{    nome }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{)}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ CPFS}
\NormalTok{(}
\NormalTok{    numero\_cpf }\DataTypeTok{CHAR}\NormalTok{(}\DecValTok{11}\NormalTok{)}
\NormalTok{);}

\CommentTok{/* =========================================================}
\CommentTok{   Definir chaves prim√°rias}
\CommentTok{   ========================================================= */}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ CLIENTES }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (id\_cliente);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ CPFS }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (numero\_cpf);}

\CommentTok{/* =========================================================}
\CommentTok{    Criar coluna para futura chave estrangeira}
\CommentTok{   ========================================================= */}
\CommentTok{{-}{-} Relacionamento 1:1 (um cliente possui um CPF)}
\CommentTok{{-}{-} Vamos colocar a FK na tabela CLIENTES}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ CLIENTES   }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ numero\_cpf }\DataTypeTok{CHAR}\NormalTok{(}\DecValTok{11}\NormalTok{);}

\CommentTok{/* =========================================================}
\CommentTok{    Criar chave estrangeira}
\CommentTok{   ========================================================= */}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ CLIENTES }\KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_clientes\_cpfs }\KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (numero\_cpf) EFERENCES CPFS (numero\_cpf);}
\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsubsection{Exerc√≠cio \#2}\label{exercuxedcio-2}

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio-02-resposta.svg}}

\paragraph{Exerc√≠cio 2 - SQL refer√™nte ao diagrama anterior}\label{exercuxedcio-2---sql-referuxeante-ao-diagrama-anterior}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{/* =========================================================}
\CommentTok{   Criar tabelas (sem PK ou FK)}
\CommentTok{   ========================================================= */}
\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ CLIENTES }
\NormalTok{(}
\NormalTok{    cpf }\DataTypeTok{CHAR}\NormalTok{(}\DecValTok{11}\NormalTok{),}
\NormalTok{    nome }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{)}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ PEDIDOS }
\NormalTok{(}
\NormalTok{    cod\_pedido }\DataTypeTok{INT}\NormalTok{,}
    \KeywordTok{data} \DataTypeTok{DATE}\NormalTok{,}
\NormalTok{    valor\_total }\DataTypeTok{DECIMAL}\NormalTok{(}\DecValTok{10}\NormalTok{,}\DecValTok{2}\NormalTok{)}
\NormalTok{);}

\CommentTok{/* =========================================================}
\CommentTok{   Definir chaves prim√°rias}
\CommentTok{   ========================================================= */}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ CLIENTES  }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (cpf);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ PEDIDOS   }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (cod\_pedido);}

\CommentTok{/* =========================================================}
\CommentTok{   Criar coluna para futura chave estrangeira}
\CommentTok{   ========================================================= */}
\CommentTok{{-}{-} Relacionamento CLIENTES 1:N PEDIDOS }

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ PEDIDOS }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ cpf\_cliente }\DataTypeTok{CHAR}\NormalTok{(}\DecValTok{11}\NormalTok{);}

\CommentTok{/* =========================================================}
\CommentTok{   Criar chave estrangeira}
\CommentTok{   ========================================================= */}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ PEDIDOS }\KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_pedidos\_clientes  }\KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (cpf\_cliente) }\KeywordTok{REFERENCES}\NormalTok{ CLIENTES (cpf);}

\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsubsection{Exerc√≠cio \#3}\label{exercuxedcio-3}

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio-03-resposta.svg}}

\paragraph{Exerc√≠cio 3 - SQL refer√™nte ao diagrama anterior}\label{exercuxedcio-3---sql-referuxeante-ao-diagrama-anterior}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{/* =========================================================}
\CommentTok{   Criar tabelas (sem PK ou FK)}
\CommentTok{   ========================================================= */}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ ALUNOS }
\NormalTok{(}
\NormalTok{    id\_aluno }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    nome }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{)}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ DISCIPLINAS }
\NormalTok{(}
\NormalTok{    id\_disciplina }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    nome }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{)}
\NormalTok{);}

\CommentTok{/* Tabela para o relacionamento N:N */}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ MATRICULA }
\NormalTok{(}
\NormalTok{    semestre }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{10}\NormalTok{)}
\NormalTok{);}

\CommentTok{/* =========================================================}
\CommentTok{   Definir chaves prim√°rias}
\CommentTok{   ========================================================= */}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ ALUNOS  }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (id\_aluno);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ DISCIPLINAS }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (id\_disciplina);}

\CommentTok{/* A PK da tabela MATRICULA ser√° composta pelas FKs */}
\CommentTok{{-}{-} Definiremos depois de criar as colunas de FK}

\CommentTok{/* =========================================================}
\CommentTok{   Criar colunas para futuras chaves estrangeiras (lado N)}
\CommentTok{   ========================================================= */}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ MATRICULA }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ id\_aluno }\DataTypeTok{INT}\NormalTok{, }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ id\_disciplina }\DataTypeTok{INT}\NormalTok{;}

\CommentTok{/* =========================================================}
\CommentTok{   Criar chaves estrangeiras}
\CommentTok{   ========================================================= */}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ MATRICULA }\KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_matricula\_aluno }\KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (id\_aluno) }\KeywordTok{REFERENCES}\NormalTok{ ALUNOS (id\_aluno);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ MATRICULA }\KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_matricula\_disciplina }\KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (id\_disciplina) }\KeywordTok{REFERENCES}\NormalTok{ DISCIPLINAS (id\_disciplina);}

\CommentTok{/* =========================================================}
\CommentTok{   Definir chave prim√°ria composta da tabela MATRICULA}
\CommentTok{   ========================================================= */}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ MATRICULA }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (id\_aluno, id\_disciplina);}
\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsubsection{Exerc√≠cio \#4}\label{exercuxedcio-4}

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio-04-resposta.svg}}

\paragraph{Exerc√≠cio 4 - SQL refer√™nte ao diagrama anterior}\label{exercuxedcio-4---sql-referuxeante-ao-diagrama-anterior}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{/* =========================================================}
\CommentTok{   Criar tabelas (sem PK ou FK)}
\CommentTok{   ========================================================= */}
\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ FUNCIONARIOS }
\NormalTok{(}
\NormalTok{    id\_funcionario }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    nome }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    cargo }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{100}\NormalTok{),}
\NormalTok{    salario }\DataTypeTok{DECIMAL}\NormalTok{(}\DecValTok{10}\NormalTok{,}\DecValTok{2}\NormalTok{)}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ DEPENDENTES }
\NormalTok{(}
\NormalTok{    id\_dependente }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    nome }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    parentesco }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{50}\NormalTok{),}
\NormalTok{    data\_nascimento }\DataTypeTok{DATE}
\NormalTok{);}

\CommentTok{/* =========================================================}
\CommentTok{   Definir chaves prim√°rias}
\CommentTok{   ========================================================= */}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ FUNCIONARIOS }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (id\_funcionario);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ DEPENDENTES }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (id\_dependente);}

\CommentTok{/* =========================================================}
\CommentTok{   Criar coluna para futura chave estrangeira}
\CommentTok{   ========================================================= */}

\CommentTok{{-}{-} Relacionamento FUNCIONARIOS 1:N DEPENDENTES}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ DEPENDENTES }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ id\_funcionario }\DataTypeTok{INT}\NormalTok{;}

\CommentTok{/* =========================================================}
\CommentTok{   Criar chave estrangeira}
\CommentTok{   ========================================================= */}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ DEPENDENTES }\KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_dependentes\_funcionarios }\KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (id\_funcionario) }\KeywordTok{REFERENCES}\NormalTok{ FUNCIONARIOS  (id\_funcionario);}

\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsubsection{Exerc√≠cio \#5}\label{exercuxedcio-5}

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio-05-resposta.svg}}

\paragraph{Exerc√≠cio 5 - SQL refer√™nte ao diagrama anterior}\label{exercuxedcio-5---sql-referuxeante-ao-diagrama-anterior}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{/* =========================================================}
\CommentTok{   Criar tabelas (sem PK ou FK)}
\CommentTok{   ========================================================= */}
\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ PEDIDOS }
\NormalTok{(}
\NormalTok{    id\_pedido }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    data\_pedido }\DataTypeTok{DATE}\NormalTok{,}
\NormalTok{    valor\_total }\DataTypeTok{DECIMAL}\NormalTok{(}\DecValTok{10}\NormalTok{,}\DecValTok{2}\NormalTok{),}
\NormalTok{    status }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{50}\NormalTok{)}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ ITENS }
\NormalTok{(}
\NormalTok{    id\_item }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    descricao }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    quantidade }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    preco\_unitario }\DataTypeTok{DECIMAL}\NormalTok{(}\DecValTok{10}\NormalTok{,}\DecValTok{2}\NormalTok{)}
\NormalTok{);}

\CommentTok{/* =========================================================}
\CommentTok{   Definir chaves prim√°rias}
\CommentTok{   ========================================================= */}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ PEDIDOS }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (id\_pedido);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ ITENS }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (id\_item);}

\CommentTok{/* =========================================================}
\CommentTok{   Criar coluna para futura chave estrangeira}
\CommentTok{   ========================================================= */}

\CommentTok{{-}{-} Relacionamento PEDIDOS 1:N ITENS}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ ITENS }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ id\_pedido }\DataTypeTok{INT}\NormalTok{;}

\CommentTok{/* =========================================================}
\CommentTok{   Criar chave estrangeira}
\CommentTok{   ========================================================= */}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ ITENS }\KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_itens\_pedidos }\KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (id\_pedido) }\KeywordTok{REFERENCES}\NormalTok{ PEDIDOS (id\_pedido);}

\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsubsection{Exerc√≠cio \#6}\label{exercuxedcio-6}

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio-06-resposta.svg}}

\paragraph{Exerc√≠cio 6 - SQL refer√™nte ao diagrama anterior}\label{exercuxedcio-6---sql-referuxeante-ao-diagrama-anterior}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{/* =========================================================}
\CommentTok{   Criar tabelas (sem PK ou FK)}
\CommentTok{   ========================================================= */}
\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ MEDICOS }
\NormalTok{(}
\NormalTok{    id\_medico }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    nome }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    especialidade }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{100}\NormalTok{),}
\NormalTok{    crm }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{20}\NormalTok{)}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ CONSULTAS }
\NormalTok{(}
\NormalTok{    id\_consulta }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    data\_consulta }\DataTypeTok{DATE}\NormalTok{,}
\NormalTok{    hora }\DataTypeTok{TIME}\NormalTok{,}
\NormalTok{    observacoes }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{)}
\NormalTok{);}

\CommentTok{/* =========================================================}
\CommentTok{   Definir chaves prim√°rias}
\CommentTok{   ========================================================= */}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ MEDICOS }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (id\_medico);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ CONSULTAS }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (id\_consulta);}

\CommentTok{/* =========================================================}
\CommentTok{   Criar coluna para futura chave estrangeira}
\CommentTok{   ========================================================= */}
\CommentTok{{-}{-} Relacionamento MEDICOS 1:N CONSULTAS}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ CONSULTAS }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ id\_medico }\DataTypeTok{INT}\NormalTok{;}

\CommentTok{/* =========================================================}
\CommentTok{   Criar chave estrangeira}
\CommentTok{   ========================================================= */}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ CONSULTAS }\KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_consultas\_medicos }\KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (id\_medico) }\KeywordTok{REFERENCES}\NormalTok{ MEDICOS (id\_medico);}
\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsubsection{Exerc√≠cio \#7}\label{exercuxedcio-7}

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio-07-resposta.svg}}

\paragraph{Exerc√≠cio 7 - SQL refer√™nte ao diagrama anterior}\label{exercuxedcio-7---sql-referuxeante-ao-diagrama-anterior}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{/* =========================================================}
\CommentTok{   Criar tabelas (sem PK ou FK)}
\CommentTok{   ========================================================= */}
\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ PROFESSORES }
\NormalTok{(}
\NormalTok{    id\_professor }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    nome }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    titulacao }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{100}\NormalTok{),}
\NormalTok{    email }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{)}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ DEPARTAMENTOS }
\NormalTok{(}
\NormalTok{    id\_departamento }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    nome }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    localizacao }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    telefone }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{20}\NormalTok{)}
\NormalTok{);}

\CommentTok{/* =========================================================}
\CommentTok{   Definir chaves prim√°rias}
\CommentTok{   ========================================================= */}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ PROFESSORES }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (id\_professor);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ DEPARTAMENTOS }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (id\_departamento);}

\CommentTok{/* =========================================================}
\CommentTok{   Criar coluna para futura chave estrangeira}
\CommentTok{   ========================================================= */}
\CommentTok{{-}{-} Relacionamento 1:1 entre PROFESSORES e DEPARTAMENTOS}
\CommentTok{{-}{-} Aqui vamos colocar a FK em DEPARTAMENTOS, vinculando ao professor respons√°vel}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ DEPARTAMENTOS }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ id\_professor }\DataTypeTok{INT}\NormalTok{;}

\CommentTok{/* =========================================================}
\CommentTok{   Criar chave estrangeira}
\CommentTok{   ========================================================= */}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ DEPARTAMENTOS }\KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_departamentos\_professores }\KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (id\_professor) }\KeywordTok{REFERENCES}\NormalTok{ PROFESSORES (id\_professor);}
\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsubsection{Exerc√≠cio \#8}\label{exercuxedcio-8}

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio-08-resposta.svg}}

\paragraph{Exerc√≠cio 8 - SQL refer√™nte ao diagrama anterior}\label{exercuxedcio-8---sql-referuxeante-ao-diagrama-anterior}

\begin{Shaded}
\begin{Highlighting}[]

\CommentTok{/* =========================================================}
\CommentTok{   Criar tabelas (sem PK ou FK)}
\CommentTok{   ========================================================= */}
\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ LIVROS }
\NormalTok{(}
\NormalTok{    id\_livro }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    titulo }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    ano\_publicacao }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    editora }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{)}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ AUTORES }
\NormalTok{(}
\NormalTok{    id\_autor }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    nome }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    nacionalidade }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{100}\NormalTok{)}
\NormalTok{);}

\CommentTok{/* Tabela para relacionamento N:N com atributos */}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ ESCREVEM }
\NormalTok{(}
\NormalTok{    data\_participacao }\DataTypeTok{DATE}\NormalTok{,}
\NormalTok{    ordem\_autoria }\DataTypeTok{INT}
\NormalTok{);}

\CommentTok{/* =========================================================}
\CommentTok{   Definir chaves prim√°rias}
\CommentTok{   ========================================================= */}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ LIVROS }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (id\_livro);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ AUTORES }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (id\_autor);}

\CommentTok{/* =========================================================}
\CommentTok{   Criar colunas para futuras chaves estrangeiras}
\CommentTok{   ========================================================= */}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ ESCREVEM }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ id\_livro }\DataTypeTok{INT}\NormalTok{, }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ id\_autor }\DataTypeTok{INT}\NormalTok{;}

\CommentTok{/* =========================================================}
\CommentTok{   Criar chaves estrangeiras}
\CommentTok{   =====================================}

\CommentTok{ALTER TABLE ESCREVEM ADD CONSTRAINT fk\_escrevem\_livros   FOREIGN KEY (id\_livro) REFERENCES LIVROS (id\_livro);}

\CommentTok{ALTER TABLE ESCREVEM ADD CONSTRAINT fk\_escrevem\_autores  FOREIGN KEY (id\_autor) REFERENCES AUTORES (id\_autor);}

\CommentTok{/* =========================================================}
\CommentTok{   Definir chave prim√°ria composta da tabela ESCREVEM}
\CommentTok{   ========================================================= */}

\CommentTok{ALTER TABLE ESCREVEM  ADD PRIMARY KEY (id\_livro, id\_autor);}
\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsubsection{Exerc√≠cio \#9}\label{exercuxedcio-9}

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio-09-resposta.svg}}

\paragraph{Exerc√≠cio 9 - SQL refer√™nte ao diagrama anterior}\label{exercuxedcio-9---sql-referuxeante-ao-diagrama-anterior}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{/* =========================================================}
\CommentTok{   Criar tabelas (sem PK ou FK)}
\CommentTok{   ========================================================= */}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ LIVROS }
\NormalTok{(}
\NormalTok{    id\_livro }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    titulo }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    ano }\DataTypeTok{INT}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ EXEMPLARES }
\NormalTok{(}
\NormalTok{    codigo\_exemplar }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    status }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{50}\NormalTok{)}
\NormalTok{);}

\CommentTok{/* =========================================================}
\CommentTok{   Definir chaves prim√°rias}
\CommentTok{   ========================================================= */}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ LIVROS }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (id\_livro);}

\CommentTok{/* A chave prim√°ria de EXEMPLARES ser√° composta depois, usando FK + codigo\_exemplar */}

\CommentTok{/* =========================================================}
\CommentTok{   Criar coluna para futura chave estrangeira}
\CommentTok{   ========================================================= */}
\CommentTok{{-}{-} Relacionamento LIVROS 1:N EXEMPLARES}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ EXEMPLARES }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ id\_livro }\DataTypeTok{INT}\NormalTok{;}

\CommentTok{/* =========================================================}
\CommentTok{   Criar chave estrangeira}
\CommentTok{   ========================================================= */}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ EXEMPLARES }\KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_exemplares\_livros }\KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (id\_livro) }\KeywordTok{REFERENCES}\NormalTok{ LIVROS (id\_livro);}

\CommentTok{/* =========================================================}
\CommentTok{   Definir chave prim√°ria composta da tabela EXEMPLARES}
\CommentTok{   ========================================================= */}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ EXEMPLARES }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (id\_livro, codigo\_exemplar);}

\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\subsubsection{Exerc√≠cio \#10}\label{exercuxedcio-10}

\pandocbounded{\includesvg[keepaspectratio]{images/exercicio-10-resposta.svg}}

\paragraph{Exerc√≠cio 10 - SQL refer√™nte ao diagrama anterior}\label{exercuxedcio-10---sql-referuxeante-ao-diagrama-anterior}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{/* =========================================================}
\CommentTok{   Criar tabelas (sem PK ou FK)}
\CommentTok{   ========================================================= */}
\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ EMPRESAS (}
\NormalTok{    id\_empresa }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    nome }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    cnpj }\DataTypeTok{CHAR}\NormalTok{(}\DecValTok{14}\NormalTok{),}
\NormalTok{    endereco }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{)}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ FUNCIONARIOS (}
\NormalTok{    id\_funcionario }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    nome }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    cargo }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{100}\NormalTok{),}
\NormalTok{    salario }\DataTypeTok{DECIMAL}\NormalTok{(}\DecValTok{10}\NormalTok{,}\DecValTok{2}\NormalTok{)}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ PROJETOS (}
\NormalTok{    id\_projeto }\DataTypeTok{INT}\NormalTok{,}
\NormalTok{    nome }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{),}
\NormalTok{    data\_inicio }\DataTypeTok{DATE}\NormalTok{,}
\NormalTok{    data\_fim }\DataTypeTok{DATE}\NormalTok{,}
\NormalTok{    descricao }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{255}\NormalTok{)}
\NormalTok{);}

\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ PARTICIPAM (}
\NormalTok{    data\_inicio }\DataTypeTok{DATE}\NormalTok{,}
\NormalTok{    data\_fim }\DataTypeTok{DATE}\NormalTok{,}
\NormalTok{    papel }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{100}\NormalTok{)}
\NormalTok{);}

\CommentTok{/* =========================================================}
\CommentTok{   Definir chaves prim√°rias}
\CommentTok{   ========================================================= */}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ EMPRESAS }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (id\_empresa);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ FUNCIONARIOS }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (id\_funcionario);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ PROJETOS }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (id\_projeto);}

\CommentTok{/* A tabela PARTICIPAM ter√° PK composta, definida depois */}

\CommentTok{/* =========================================================}
\CommentTok{   Criar colunas para futuras chaves estrangeiras}
\CommentTok{   ========================================================= */}
\CommentTok{{-}{-} Relacionamento EMPRESAS 1:N FUNCIONARIOS}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ FUNCIONARIOS  }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ id\_empresa }\DataTypeTok{INT}\NormalTok{;}

\CommentTok{{-}{-} Relacionamento FUNCIONARIOS N:N PROJETOS}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ PARTICIPAM }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ id\_funcionario }\DataTypeTok{INT}\NormalTok{, }\KeywordTok{ADD} \KeywordTok{COLUMN}\NormalTok{ id\_projeto }\DataTypeTok{INT}\NormalTok{;}

\CommentTok{/* =========================================================}
\CommentTok{   Criar chaves estrangeiras}
\CommentTok{   ========================================================= */}
\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ FUNCIONARIOS }\KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_funcionarios\_empresas }\KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (id\_empresa) }\KeywordTok{REFERENCES}\NormalTok{ EMPRESAS (id\_empresa);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ PARTICIPAM }\KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_participam\_funcionarios }\KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (id\_funcionario) }\KeywordTok{REFERENCES}\NormalTok{ FUNCIONARIOS (id\_funcionario);}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ PARTICIPAM }\KeywordTok{ADD} \KeywordTok{CONSTRAINT}\NormalTok{ fk\_participam\_projetos }\KeywordTok{FOREIGN} \KeywordTok{KEY}\NormalTok{ (id\_projeto) }\KeywordTok{REFERENCES}\NormalTok{ PROJETOS (id\_projeto);}

\CommentTok{/* =========================================================}
\CommentTok{   Definir chave prim√°ria composta da tabela PARTICIPAM}
\CommentTok{   ========================================================= */}

\KeywordTok{ALTER} \KeywordTok{TABLE}\NormalTok{ PARTICIPAM }\KeywordTok{ADD} \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (id\_funcionario, id\_projeto);}

\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\chapter{Modelagem de Bancos de Dados parte 02}\label{modelagem-de-bancos-de-dados-parte-02}

\section{Exerc√≠cios RESOLVIDOS}\label{exercuxedcios-resolvidos-1}

\chapter{Administra√ß√£o e Gerenciamento de Bancos de Dados}\label{administrauxe7uxe3o-e-gerenciamento-de-bancos-de-dados}

\subsubsection*{25/08/2025}\label{section-5}
\addcontentsline{toc}{subsubsection}{25/08/2025}

\subsubsection*{Professor Migu√©l Suares}\label{professor-miguuxe9l-suares-2}
\addcontentsline{toc}{subsubsection}{Professor Migu√©l Suares}

\section{Administra√ß√£o e Gerenciamento de Banco de Dados:}\label{administrauxe7uxe3o-e-gerenciamento-de-banco-de-dados}

Por que administra√ß√£o e gerenciamento s√£o fundamentais

\begin{itemize}
\item
  Integridade e consist√™ncia
\item
  Garantir que as regras de neg√≥cio (restri√ß√µes, chaves, relacionamentos) sejam sempre respeitadas.
\item
  Evitar dados duplicados ou incoerentes.
\item
  Disponibilidade e recupera√ß√£o
\item
  Planejar backup e restore; criar pol√≠ticas de alta disponibilidade e conting√™ncia para falhas ou desastres.
\item
  Seguran√ßa e controle de acesso
\item
  Definir quem pode ver, inserir, alterar ou excluir dados.
\item
  Atender requisitos de LGPD/privacidade e normas corporativas.
\item
  Desempenho e escalabilidade
\item
  Monitorar consultas lentas, criar √≠ndices adequados, ajustar par√¢metros do SGBD para suportar crescimento do volume de dados.
\item
  Manuten√ß√£o e evolu√ß√£o
\item
  Atualizar vers√µes, aplicar patches, revisar modelos de dados √† medida que a aplica√ß√£o muda.
\end{itemize}

\section{Papel do DBA (Database Administrator)}\label{papel-do-dba-database-administrator}

O DBA √© o profissional respons√°vel por orquestrar tudo isso.Principais atribui√ß√µes:

\begin{itemize}
\item
  Projeto f√≠sico do banco (estrutura de tabelas, √≠ndices, parti√ß√µes).
\item
  Gest√£o de usu√°rios e permiss√µes -- cria√ß√£o de contas, pap√©is (roles), pol√≠ticas de seguran√ßa.
\item
  Backup e recupera√ß√£o -- pol√≠ticas de backup, testes de restaura√ß√£o.
\item
  Monitoramento de desempenho -- tuning de consultas, manuten√ß√£o de √≠ndices, an√°lise de logs.
\item
  Planejamento de capacidade -- prever crescimento, escalabilidade e uso de recursos.
\item
  Atualiza√ß√µes e patches -- manter o SGBD seguro e est√°vel.
\end{itemize}

Sem administra√ß√£o e gerenciamento adequados, um banco de dados vira um ``dep√≥sito de riscos'': falhas, lentid√£o, vazamento de informa√ß√µes ou perda definitiva de dados. O DBA atua como guardi√£o da informa√ß√£o, garantindo que ela esteja correta, segura, dispon√≠vel e perform√°tica, sustentando todas as opera√ß√µes da organiza√ß√£o.

\section{Usu√°rios, Grupos e Esquemas de Bancos de Dados}\label{usuuxe1rios-grupos-e-esquemas-de-bancos-de-dados}

\subsection{Usu√°rios}\label{usuuxe1rios}

O que s√£o ? Contas individuais que representam pessoas, aplica√ß√µes ou servi√ßos que acessam o banco.Cada usu√°rio possui um nome de login e, geralmente, uma senha ou outro m√©todo de autentica√ß√£o.

\subsubsection{Fun√ß√µes principal}\label{funuxe7uxf5es-principal}

\begin{itemize}
\item
  Conectar-se ao SGBD.
\item
  Executar opera√ß√µes de leitura, escrita ou administra√ß√£o conforme os privil√©gios concedidos.
\end{itemize}

\subsubsection{Privil√©gios:}\label{priviluxe9gios}

Podem ser espec√≠ficos (ex.: SELECT em uma tabela) ou globais (ex.: CREATE DATABASE).

S√£o a base do controle de acesso.

\subsection{Esquemas}\label{esquemas}

O que s√£o ? Um esquema √© um container l√≥gico de objetos do banco de dados. Ele organiza tabelas, views, fun√ß√µes, procedures, √≠ndices, triggers etc.

\subsubsection{Por que usar}\label{por-que-usar}

\begin{itemize}
\item
  Facilita a organiza√ß√£o (por projeto, por aplica√ß√£o, por departamento).
\item
  Permite gest√£o de permiss√µes mais granular: voc√™ pode conceder privil√©gios em n√≠vel de esquema.
\item
  Evita conflitos de nomes, pois objetos com o mesmo nome podem existir em esquemas diferentes.
\end{itemize}

\subsection{Grupos ou Roles}\label{grupos-ou-roles}

O que s√£o ? Pap√©is coletivos que agrupam permiss√µes e, muitas vezes, usu√°rios.

No MySQL: CREATE ROLE \ldots{}

No PostgreSQL: roles podem ser usu√°rios ou grupos.

\subsubsection{Vantagens}\label{vantagens}

\begin{itemize}
\item
  Gerenciamento simplificado: conceda privil√©gios ao grupo e depois apenas adicione/remova usu√°rios.
\item
  Consist√™ncia: garante que todos de uma equipe tenham as mesmas permiss√µes.
\item
  Escalabilidade: ao entrar um novo membro, basta associ√°-lo ao role, sem revisar dezenas de tabelas.
\end{itemize}

\subsection{Sistema de Gerenciamento de Banco de Dados (S.G.B.D.)}\label{sistema-de-gerenciamento-de-banco-de-dados-s.g.b.d.}

O Sistema de Gerenciamento de Banco de Dados cuida n√£o s√≥ de como as informa√ß√µes s√£o armazenadas, mas tamb√©m quem pode acessa-las, sob quais condi√ß√µes.

\pandocbounded{\includegraphics[keepaspectratio]{media/01-SGBD.jpg}}

\subsection{Cria√ß√£o de usu√°rios no MySQL}\label{criauxe7uxe3o-de-usuuxe1rios-no-mysql}

Podemos criar um novo usu√°rio no SGBD MySQL atrav√©s do seguinte comando SQL-DCL:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{CREATE} \FunctionTok{USER} \StringTok{\textquotesingle{}nome\_login\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}host\textquotesingle{}} \KeywordTok{IDENTIFIED} \KeywordTok{BY} \StringTok{\textquotesingle{}senha\textquotesingle{}} \KeywordTok{COMMENT} \StringTok{\textquotesingle{}descri√ß√£o\textquotesingle{}}\NormalTok{;}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}
  >{\centering\arraybackslash}p{(\linewidth - 2\tabcolsep) * \real{0.5000}}
  >{\centering\arraybackslash}p{(\linewidth - 2\tabcolsep) * \real{0.5000}}@{}}
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\centering
Parte
\end{minipage} & \begin{minipage}[b]{\linewidth}\centering
Fun√ß√£o
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
`nome\_login' & Nome de login do novo usu√°rio. \\
`host' & Origem permitida de conex√£o. \\
IDENTIFIED BY `senha' & Define a senha inicial. \\
COMMENT `descri√ß√£o' & (Opcional) Uma anota√ß√£o de texto para identificar o usu√°rio. \\
\end{longtable}

Exemplo 1:

Crie o usu√°rio do aluno ``Bruno Marques''. O usu√°rio deve ser o RA do aluno e a sua senha deve ser \emph{unip}.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{CREATE} \FunctionTok{USER} \StringTok{\textquotesingle{}f362bf0\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}} \KeywordTok{IDENTIFIED} \KeywordTok{BY} \StringTok{\textquotesingle{}unip\textquotesingle{}} \KeywordTok{COMMENT} \StringTok{\textquotesingle{}Bruno Antonio Marques\textquotesingle{}}\NormalTok{;}
\end{Highlighting}
\end{Shaded}

Exemplo 2:

Crie os usu√°rios de todos os alunos da sala. O usu√°rio deve ser o RA do aluno e a sua senha deve ser \emph{unip}.

\begin{Shaded}
\begin{Highlighting}[]

\CommentTok{{-}{-} turma TI2P40}

\CommentTok{{-}{-} usu√°rios no MySQL}

\KeywordTok{DROP} \FunctionTok{USER} \ControlFlowTok{IF} \KeywordTok{EXISTS} \StringTok{\textquotesingle{}f362bf0\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{; }\CommentTok{{-}{-} apaga o \textquotesingle{}Bruno Antonio Marques\textquotesingle{};}
\KeywordTok{DROP} \FunctionTok{USER} \ControlFlowTok{IF} \KeywordTok{EXISTS} \StringTok{\textquotesingle{}r536fa6\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{; }\CommentTok{{-}{-} apaga o \textquotesingle{}Caio Cesar Balbino Da Silva\textquotesingle{};}
\KeywordTok{DROP} \FunctionTok{USER} \ControlFlowTok{IF} \KeywordTok{EXISTS} \StringTok{\textquotesingle{}h756960\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{; }\CommentTok{{-}{-} apaga o \textquotesingle{}Heder Rodrigues Da Silva\textquotesingle{};}
\KeywordTok{DROP} \FunctionTok{USER} \ControlFlowTok{IF} \KeywordTok{EXISTS} \StringTok{\textquotesingle{}r8133g7\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{; }\CommentTok{{-}{-} apaga o \textquotesingle{}√çtalo Kevin Rodrigues Da Silva\textquotesingle{};}
\KeywordTok{DROP} \FunctionTok{USER} \ControlFlowTok{IF} \KeywordTok{EXISTS} \StringTok{\textquotesingle{}r837aa0\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{; }\CommentTok{{-}{-} apaga o \textquotesingle{}Lucas Souza Rodrigues\textquotesingle{};}
\KeywordTok{DROP} \FunctionTok{USER} \ControlFlowTok{IF} \KeywordTok{EXISTS} \StringTok{\textquotesingle{}h714419\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{; }\CommentTok{{-}{-} apaga o \textquotesingle{}Marcos Paulo Cordeiro Goes\textquotesingle{};}
\KeywordTok{DROP} \FunctionTok{USER} \ControlFlowTok{IF} \KeywordTok{EXISTS} \StringTok{\textquotesingle{}r854124\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{; }\CommentTok{{-}{-} apaga o \textquotesingle{}Ramon Borges De Holanda\textquotesingle{};}


\KeywordTok{CREATE} \FunctionTok{USER} \StringTok{\textquotesingle{}f362bf0\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}} \KeywordTok{IDENTIFIED} \KeywordTok{BY} \StringTok{\textquotesingle{}unip\textquotesingle{}} \KeywordTok{COMMENT}  \StringTok{\textquotesingle{}Bruno Antonio Marques\textquotesingle{}}\NormalTok{;}
\KeywordTok{CREATE} \FunctionTok{USER} \StringTok{\textquotesingle{}r536fa6\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}} \KeywordTok{IDENTIFIED} \KeywordTok{BY} \StringTok{\textquotesingle{}unip\textquotesingle{}} \KeywordTok{COMMENT}  \StringTok{\textquotesingle{}Caio Cesar Balbino Da Silva\textquotesingle{}}\NormalTok{;}
\KeywordTok{CREATE} \FunctionTok{USER} \StringTok{\textquotesingle{}h756960\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}} \KeywordTok{IDENTIFIED} \KeywordTok{BY} \StringTok{\textquotesingle{}unip\textquotesingle{}} \KeywordTok{COMMENT}  \StringTok{\textquotesingle{}Heder Rodrigues Da Silva\textquotesingle{}}\NormalTok{;}
\KeywordTok{CREATE} \FunctionTok{USER} \StringTok{\textquotesingle{}r8133g7\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}} \KeywordTok{IDENTIFIED} \KeywordTok{BY} \StringTok{\textquotesingle{}unip\textquotesingle{}} \KeywordTok{COMMENT}  \StringTok{\textquotesingle{}√çtalo Kevin Rodrigues Da Silva\textquotesingle{}}\NormalTok{;}
\KeywordTok{CREATE} \FunctionTok{USER} \StringTok{\textquotesingle{}r837aa0\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}} \KeywordTok{IDENTIFIED} \KeywordTok{BY} \StringTok{\textquotesingle{}unip\textquotesingle{}} \KeywordTok{COMMENT}  \StringTok{\textquotesingle{}Lucas Souza Rodrigues\textquotesingle{}}\NormalTok{;}
\KeywordTok{CREATE} \FunctionTok{USER} \StringTok{\textquotesingle{}h714419\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}} \KeywordTok{IDENTIFIED} \KeywordTok{BY} \StringTok{\textquotesingle{}unip\textquotesingle{}} \KeywordTok{COMMENT}  \StringTok{\textquotesingle{}Marcos Paulo Cordeiro Goes\textquotesingle{}}\NormalTok{;}
\KeywordTok{CREATE} \FunctionTok{USER} \StringTok{\textquotesingle{}r854124\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}} \KeywordTok{IDENTIFIED} \KeywordTok{BY} \StringTok{\textquotesingle{}unip\textquotesingle{}} \KeywordTok{COMMENT}  \StringTok{\textquotesingle{}Ramon Borges De Holanda\textquotesingle{}}\NormalTok{;}

\CommentTok{{-}{-} turma TI1P40}

\KeywordTok{DROP} \FunctionTok{USER} \ControlFlowTok{IF} \KeywordTok{EXISTS} \StringTok{\textquotesingle{}n0296a6\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{; }\CommentTok{{-}{-} apaga o \textquotesingle{}Bryan Lucena Barbosa Da Silva\textquotesingle{};}
\KeywordTok{DROP} \FunctionTok{USER} \ControlFlowTok{IF} \KeywordTok{EXISTS} \StringTok{\textquotesingle{}h788986\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{; }\CommentTok{{-}{-} apaga o \textquotesingle{}Igor Soares Lima Da Cunha\textquotesingle{};}
\KeywordTok{DROP} \FunctionTok{USER} \ControlFlowTok{IF} \KeywordTok{EXISTS} \StringTok{\textquotesingle{}h77gii5\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{; }\CommentTok{{-}{-} apaga o \textquotesingle{}Jessica Cristina De S Silva\textquotesingle{};}
\KeywordTok{DROP} \FunctionTok{USER} \ControlFlowTok{IF} \KeywordTok{EXISTS} \StringTok{\textquotesingle{}f3648i0\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{; }\CommentTok{{-}{-} apaga o \textquotesingle{}Maysa Kelly Dos Santos Freitas\textquotesingle{};}


\KeywordTok{CREATE} \FunctionTok{USER} \StringTok{\textquotesingle{}n0296a6\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}} \KeywordTok{IDENTIFIED} \KeywordTok{BY} \StringTok{\textquotesingle{}unip\textquotesingle{}} \KeywordTok{COMMENT}  \StringTok{\textquotesingle{}Bryan Lucena Barbosa Da Silva\textquotesingle{}}\NormalTok{;}
\KeywordTok{CREATE} \FunctionTok{USER} \StringTok{\textquotesingle{}h788986\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}} \KeywordTok{IDENTIFIED} \KeywordTok{BY} \StringTok{\textquotesingle{}unip\textquotesingle{}} \KeywordTok{COMMENT}  \StringTok{\textquotesingle{}Igor Soares Lima Da Cunha\textquotesingle{}}\NormalTok{;}
\KeywordTok{CREATE} \FunctionTok{USER} \StringTok{\textquotesingle{}h77gii5\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}} \KeywordTok{IDENTIFIED} \KeywordTok{BY} \StringTok{\textquotesingle{}unip\textquotesingle{}} \KeywordTok{COMMENT}  \StringTok{\textquotesingle{}Jessica Cristina De S Silva\textquotesingle{}}\NormalTok{;}
\KeywordTok{CREATE} \FunctionTok{USER} \StringTok{\textquotesingle{}f3648i0\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}} \KeywordTok{IDENTIFIED} \KeywordTok{BY} \StringTok{\textquotesingle{}unip\textquotesingle{}} \KeywordTok{COMMENT}  \StringTok{\textquotesingle{}Maysa Kelly Dos Santos Freitas\textquotesingle{}}\NormalTok{;}
\end{Highlighting}
\end{Shaded}

\subsection{Cria√ß√£o de Esquemas de Banco de Dados no MySQL}\label{criauxe7uxe3o-de-esquemas-de-banco-de-dados-no-mysql}

No MySQL, schema e database s√£o sin√¥nimos. √â o ``cont√™iner'' onde ficam tabelas, views, procedures, usu√°rios com permiss√µes etc.

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{CREATE} \KeywordTok{DATABASE}\NormalTok{ [}\ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{] nome\_do\_schema  [OPTIONS];}
\end{Highlighting}
\end{Shaded}

\begin{longtable}[]{@{}l@{}}
\toprule\noalign{}
CREATE DATABASE: cria um novo banco. \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
IF NOT EXISTS: evita erro caso o schema j√° exista. \\
nome\_do\_schema: nome do banco. \\
{[}OPTIONS{]}: par√¢metros opcionais como CHARACTER SET ou COLLATE \\
\end{longtable}

Exemplo 1:

Crie um esquema de Banco de Dados onde chamado 11-rondonia para guardar a tabela ``Cidades'';

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{11}\OperatorTok{{-}}\NormalTok{rondonia\textasciigrave{};}
\end{Highlighting}
\end{Shaded}

Exemplo 2:

Crie um esquema de Banco de Dados de todas as Unidades da Federa√ß√£o para guardar tabelas ``Cidades'' dentro de cada uma:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{{-}{-} Script para criar um esquema (database) para cada UF brasileira}
\CommentTok{{-}{-} Nome do esquema: \textless{}c√≥digo IBGE\textgreater{}{-}\textless{}nome\_uf\textgreater{}}
\CommentTok{{-}{-} Ordenado pelo c√≥digo IBGE}
\CommentTok{{-}{-} Compat√≠vel com MySQL 8}

\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{11}\OperatorTok{{-}}\NormalTok{rondonia\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{12}\OperatorTok{{-}}\NormalTok{acre\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{13}\OperatorTok{{-}}\NormalTok{amazonas\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{14}\OperatorTok{{-}}\NormalTok{roraima\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{15}\OperatorTok{{-}}\NormalTok{para\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{16}\OperatorTok{{-}}\NormalTok{amapa\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{17}\OperatorTok{{-}}\NormalTok{tocantins\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{21}\OperatorTok{{-}}\NormalTok{maranhao\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{22}\OperatorTok{{-}}\NormalTok{piaui\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{23}\OperatorTok{{-}}\NormalTok{ceara\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{24}\OperatorTok{{-}}\NormalTok{rio\_grande\_do\_norte\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{25}\OperatorTok{{-}}\NormalTok{paraiba\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{26}\OperatorTok{{-}}\NormalTok{pernambuco\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{27}\OperatorTok{{-}}\NormalTok{alagoas\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{28}\OperatorTok{{-}}\NormalTok{sergipe\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{29}\OperatorTok{{-}}\NormalTok{bahia\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{31}\OperatorTok{{-}}\NormalTok{minas\_gerais\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{32}\OperatorTok{{-}}\NormalTok{espiritosanto\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{33}\OperatorTok{{-}}\NormalTok{rio\_de\_janeiro\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{35}\OperatorTok{{-}}\NormalTok{sao\_paulo\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{41}\OperatorTok{{-}}\NormalTok{parana\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{42}\OperatorTok{{-}}\NormalTok{santa\_catarina\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{43}\OperatorTok{{-}}\NormalTok{rio\_grande\_do\_sul\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{50}\OperatorTok{{-}}\NormalTok{mato\_grosso\_do\_sul\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{51}\OperatorTok{{-}}\NormalTok{mato\_grosso\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{52}\OperatorTok{{-}}\NormalTok{goias\textasciigrave{};}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ \textasciigrave{}}\DecValTok{53}\OperatorTok{{-}}\NormalTok{distrito\_federal\textasciigrave{};}
\end{Highlighting}
\end{Shaded}

\subsection{Criando de Grupos de Permiss√µes no MySQL:}\label{criando-de-grupos-de-permissuxf5es-no-mysql}

No MySQL, roles (fun√ß√µes ou pap√©is) s√£o grupos de permiss√µes que voc√™ define uma vez e pode atribuir a v√°rios usu√°rios. Eles funcionam como ``grupos de acesso'', facilitando o gerenciamento de privil√©gios. Em vez de conceder privil√©gios individualmente a cada usu√°rio, voc√™ define tudo no role. Se precisar incluir um novo privil√©gio (ex.: UPDATE) para todos que j√° t√™m o role, basta atualizar o role uma vez.

Como criar uma regra no MySQL utilizando SQL-DCL

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{CREATE} \KeywordTok{ROLE} \StringTok{\textquotesingle{}nome\_grupo\textquotesingle{}}\NormalTok{;}
\end{Highlighting}
\end{Shaded}

onde, obviamente, \emph{nome\_grupo} √© o nome do grupo a ser criado.

Exemplo 1:

Crie um grupo chamado \emph{norte} para associar todas as unidades da federa√ß√£o da regi√£o norte do Brasil:

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{CREATE} \KeywordTok{ROLE} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\end{Highlighting}
\end{Shaded}

Exemplo 2:

Crie um grupos para associar todas as unidades da federa√ß√£o de todas as regi√µes do Brasil:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{{-}{-} ===========================================}
\CommentTok{{-}{-} Cria√ß√£o de roles para as 5 regi√µes do Brasil}
\CommentTok{{-}{-} ===========================================}

\KeywordTok{CREATE} \KeywordTok{ROLE} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{CREATE} \KeywordTok{ROLE} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{CREATE} \KeywordTok{ROLE} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{CREATE} \KeywordTok{ROLE} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{CREATE} \KeywordTok{ROLE} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}

\CommentTok{{-}{-} ===========================================}
\CommentTok{/*}
\CommentTok{Concedendo privil√©gios de leitura (SELECT) a cada grupo criado}
\CommentTok{*/}
\CommentTok{{-}{-} ===========================================}

\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON} \OperatorTok{*}\NormalTok{.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON} \OperatorTok{*}\NormalTok{.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON} \OperatorTok{*}\NormalTok{.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON} \OperatorTok{*}\NormalTok{.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON} \OperatorTok{*}\NormalTok{.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}

\CommentTok{{-}{-} ===========================================}
\CommentTok{{-}{-} Para atribuir um role a um usu√°rio:}
\CommentTok{{-}{-} ===========================================}
\CommentTok{{-}{-} GRANT \textquotesingle{}norte\textquotesingle{} TO \textquotesingle{}usuario\_exemplo\textquotesingle{}@\textquotesingle{}\%\textquotesingle{};}
\CommentTok{{-}{-} SET DEFAULT ROLE \textquotesingle{}norte\textquotesingle{} TO \textquotesingle{}usuario\_exemplo\textquotesingle{}@\textquotesingle{}\%\textquotesingle{};}
\end{Highlighting}
\end{Shaded}

\section{Fazendo tudo funcionar: Colocando usu√°rios em grupos e concedendo a estes acesso a Esquemas de Banco de Dados:}\label{fazendo-tudo-funcionar-colocando-usuuxe1rios-em-grupos-e-concedendo-a-estes-acesso-a-esquemas-de-banco-de-dados}

\subsection{Associando os esquemas que representam cada estado a cada grupo (que representa cada regi√ß√£o):}\label{associando-os-esquemas-que-representam-cada-estado-a-cada-grupo-que-representa-cada-regiuxe7uxe3o}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{{-}{-} ================================================}
\CommentTok{{-}{-} Associa√ß√£o dos esquemas (databases) aos roles}
\CommentTok{{-}{-} Roles criadas previamente:}
\CommentTok{{-}{-}   norte, nordeste, centro\_oeste, sudeste, sul}
\CommentTok{{-}{-} ================================================}

\CommentTok{{-}{-} \textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{} REGI√ÉO NORTE \textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}}

\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{11}\OperatorTok{{-}}\NormalTok{rondonia\textasciigrave{}.}\OperatorTok{*}       \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{12}\OperatorTok{{-}}\NormalTok{acre\textasciigrave{}.}\OperatorTok{*}           \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{13}\OperatorTok{{-}}\NormalTok{amazonas\textasciigrave{}.}\OperatorTok{*}       \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{14}\OperatorTok{{-}}\NormalTok{roraima\textasciigrave{}.}\OperatorTok{*}        \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{15}\OperatorTok{{-}}\NormalTok{para\textasciigrave{}.}\OperatorTok{*}           \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{16}\OperatorTok{{-}}\NormalTok{amapa\textasciigrave{}.}\OperatorTok{*}          \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{17}\OperatorTok{{-}}\NormalTok{tocantins\textasciigrave{}.}\OperatorTok{*}      \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}

\CommentTok{{-}{-} \textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{} REGI√ÉO NORDESTE \textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}}

\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{21}\OperatorTok{{-}}\NormalTok{maranhao\textasciigrave{}.}\OperatorTok{*}            \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{22}\OperatorTok{{-}}\NormalTok{piaui\textasciigrave{}.}\OperatorTok{*}               \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{23}\OperatorTok{{-}}\NormalTok{ceara\textasciigrave{}.}\OperatorTok{*}               \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{24}\OperatorTok{{-}}\NormalTok{rio\_grande\_do\_norte\textasciigrave{}.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{25}\OperatorTok{{-}}\NormalTok{paraiba\textasciigrave{}.}\OperatorTok{*}             \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{26}\OperatorTok{{-}}\NormalTok{pernambuco\textasciigrave{}.}\OperatorTok{*}          \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{27}\OperatorTok{{-}}\NormalTok{alagoas\textasciigrave{}.}\OperatorTok{*}             \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{28}\OperatorTok{{-}}\NormalTok{sergipe\textasciigrave{}.}\OperatorTok{*}             \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{29}\OperatorTok{{-}}\NormalTok{bahia\textasciigrave{}.}\OperatorTok{*}               \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}

\CommentTok{{-}{-} \textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{} REGI√ÉO CENTRO\_OESTE \textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}}

\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{50}\OperatorTok{{-}}\NormalTok{mato\_grosso\_do\_sul\textasciigrave{}.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{51}\OperatorTok{{-}}\NormalTok{mato\_grosso\textasciigrave{}.}\OperatorTok{*}       \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{52}\OperatorTok{{-}}\NormalTok{goias\textasciigrave{}.}\OperatorTok{*}             \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{53}\OperatorTok{{-}}\NormalTok{distrito\_federal\textasciigrave{}.}\OperatorTok{*}  \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}

\CommentTok{{-}{-} \textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{} REGI√ÉO SUDESTE \textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}}

\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{31}\OperatorTok{{-}}\NormalTok{minas\_gerais\textasciigrave{}.}\OperatorTok{*}   \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{32}\OperatorTok{{-}}\NormalTok{espiritosanto\textasciigrave{}.}\OperatorTok{*}  \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{33}\OperatorTok{{-}}\NormalTok{rio\_de\_janeiro\textasciigrave{}.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{35}\OperatorTok{{-}}\NormalTok{sao\_paulo\textasciigrave{}.}\OperatorTok{*}      \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}

\CommentTok{{-}{-} \textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{} REGI√ÉO SUL \textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}\textgreater{}}

\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{41}\OperatorTok{{-}}\NormalTok{parana\textasciigrave{}.}\OperatorTok{*}            \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{42}\OperatorTok{{-}}\NormalTok{santa\_catarina\textasciigrave{}.}\OperatorTok{*}    \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{43}\OperatorTok{{-}}\NormalTok{rio\_grande\_do\_sul\textasciigrave{}.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\end{Highlighting}
\end{Shaded}

\subsection{Associando associando alunos a cada grupo (regi√£o):}\label{associando-associando-alunos-a-cada-grupo-regiuxe3o}

\begin{longtable}[]{@{}cc@{}}
\toprule\noalign{}
Role (grupo) & Usu√°rios (login) \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
norte & f362bf0, r536fa6 \\
nordeste & h756960, r8133g7 \\
centro\_oeste & r837aa0, h714419 \\
sudeste & r854124, n0296a6 \\
sul & h788986, h77gii5, f3648i0 \\
\end{longtable}

\subsubsection{Regi√£o Norte}\label{regiuxe3o-norte}

\pandocbounded{\includesvg[keepaspectratio]{images/aula_04-Exemplo-01-grupos-01.svg}}

\pandocbounded{\includesvg[keepaspectratio]{images/aula_04-Exemplo-01-grupos-02.svg}}

\pandocbounded{\includesvg[keepaspectratio]{images/aula_04-Exemplo-01-grupos-03.svg}}

\pandocbounded{\includesvg[keepaspectratio]{images/aula_04-Exemplo-01-grupos-04.svg}}

\subsubsection{Regi√£o Nordeste}\label{regiuxe3o-nordeste}

\pandocbounded{\includesvg[keepaspectratio]{images/aula_04-Exemplo-01-grupos-05.svg}}

\pandocbounded{\includesvg[keepaspectratio]{images/aula_04-Exemplo-01-grupos-06.svg}}

\pandocbounded{\includesvg[keepaspectratio]{images/aula_04-Exemplo-01-grupos-07.svg}}

\pandocbounded{\includesvg[keepaspectratio]{images/aula_04-Exemplo-01-grupos-08.svg}}

\pandocbounded{\includesvg[keepaspectratio]{images/aula_04-Exemplo-01-grupos-09.svg}}

\subsubsection{Regi√£o Centro-Oeste}\label{regiuxe3o-centro-oeste}

\pandocbounded{\includesvg[keepaspectratio]{images/aula_04-Exemplo-01-grupos-10.svg}}

\pandocbounded{\includesvg[keepaspectratio]{images/aula_04-Exemplo-01-grupos-11.svg}}

\subsubsection{Regi√£o Sudeste}\label{regiuxe3o-sudeste}

\pandocbounded{\includesvg[keepaspectratio]{images/aula_04-Exemplo-01-grupos-12.svg}}

\pandocbounded{\includesvg[keepaspectratio]{images/aula_04-Exemplo-01-grupos-13.svg}}

\subsubsection{Regi√£o Sul}\label{regiuxe3o-sul}

\pandocbounded{\includesvg[keepaspectratio]{images/aula_04-Exemplo-01-grupos-15.svg}}

\pandocbounded{\includesvg[keepaspectratio]{images/aula_04-Exemplo-01-grupos-16.svg}}

\subsection{Associando usu√°rios aos grupos}\label{associando-usuuxe1rios-aos-grupos}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{{-}{-} =========================================}
\CommentTok{{-}{-} Associa√ß√£o de usu√°rios aos roles (grupos)}
\CommentTok{{-}{-} =========================================}

\CommentTok{{-}{-} Grupo Norte}
\KeywordTok{GRANT} \StringTok{\textquotesingle{}norte\textquotesingle{}} \KeywordTok{TO} \StringTok{\textquotesingle{}f362bf0\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \StringTok{\textquotesingle{}norte\textquotesingle{}} \KeywordTok{TO} \StringTok{\textquotesingle{}r536fa6\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{;}

\CommentTok{{-}{-} Grupo Nordeste}
\KeywordTok{GRANT} \StringTok{\textquotesingle{}nordeste\textquotesingle{}} \KeywordTok{TO} \StringTok{\textquotesingle{}h756960\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \StringTok{\textquotesingle{}nordeste\textquotesingle{}} \KeywordTok{TO} \StringTok{\textquotesingle{}r8133g7\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{;}

\CommentTok{{-}{-} Grupo Centro{-}Oeste}
\KeywordTok{GRANT} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}} \KeywordTok{TO} \StringTok{\textquotesingle{}r837aa0\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}} \KeywordTok{TO} \StringTok{\textquotesingle{}h714419\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{;}

\CommentTok{{-}{-} Grupo Sudeste}
\KeywordTok{GRANT} \StringTok{\textquotesingle{}sudeste\textquotesingle{}} \KeywordTok{TO} \StringTok{\textquotesingle{}r854124\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \StringTok{\textquotesingle{}sudeste\textquotesingle{}} \KeywordTok{TO} \StringTok{\textquotesingle{}n0296a6\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{;}

\CommentTok{{-}{-} Grupo Sul}
\KeywordTok{GRANT} \StringTok{\textquotesingle{}sul\textquotesingle{}} \KeywordTok{TO} \StringTok{\textquotesingle{}h788986\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \StringTok{\textquotesingle{}sul\textquotesingle{}} \KeywordTok{TO} \StringTok{\textquotesingle{}h77gii5\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \StringTok{\textquotesingle{}sul\textquotesingle{}} \KeywordTok{TO} \StringTok{\textquotesingle{}f3648i0\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{;}

\CommentTok{{-}{-} (Opcional) Definir cada role como padr√£o para o usu√°rio}
\KeywordTok{SET} \KeywordTok{DEFAULT} \KeywordTok{ROLE} \KeywordTok{ALL} \KeywordTok{TO}
    \StringTok{\textquotesingle{}f362bf0\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{,}
    \StringTok{\textquotesingle{}r536fa6\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{,}
    \StringTok{\textquotesingle{}h756960\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{,}
    \StringTok{\textquotesingle{}r8133g7\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{,}
    \StringTok{\textquotesingle{}r837aa0\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{,}
    \StringTok{\textquotesingle{}h714419\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{,}
    \StringTok{\textquotesingle{}r854124\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{,}
    \StringTok{\textquotesingle{}n0296a6\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{,}
    \StringTok{\textquotesingle{}h788986\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{,}
    \StringTok{\textquotesingle{}h77gii5\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{,}
    \StringTok{\textquotesingle{}f3648i0\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{;}
\end{Highlighting}
\end{Shaded}

\subsection{Concedendo privil√©gios aos grupos:}\label{concedendo-priviluxe9gios-aos-grupos}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{{-}{-} ============================================}
\CommentTok{{-}{-} NORTE l√™ os demais grupos (Nordeste, Centro{-}Oeste, Sudeste, Sul)}
\CommentTok{{-}{-} ============================================}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{21}\OperatorTok{{-}}\NormalTok{maranhao\textasciigrave{}.}\OperatorTok{*}            \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{22}\OperatorTok{{-}}\NormalTok{piaui\textasciigrave{}.}\OperatorTok{*}               \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{23}\OperatorTok{{-}}\NormalTok{ceara\textasciigrave{}.}\OperatorTok{*}               \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{24}\OperatorTok{{-}}\NormalTok{rio\_grande\_do\_norte\textasciigrave{}.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{25}\OperatorTok{{-}}\NormalTok{paraiba\textasciigrave{}.}\OperatorTok{*}             \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{26}\OperatorTok{{-}}\NormalTok{pernambuco\textasciigrave{}.}\OperatorTok{*}          \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{27}\OperatorTok{{-}}\NormalTok{alagoas\textasciigrave{}.}\OperatorTok{*}             \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{28}\OperatorTok{{-}}\NormalTok{sergipe\textasciigrave{}.}\OperatorTok{*}             \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{29}\OperatorTok{{-}}\NormalTok{bahia\textasciigrave{}.}\OperatorTok{*}               \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{50}\OperatorTok{{-}}\NormalTok{mato\_grosso\_do\_sul\textasciigrave{}.}\OperatorTok{*}  \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{51}\OperatorTok{{-}}\NormalTok{mato\_grosso\textasciigrave{}.}\OperatorTok{*}        \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{52}\OperatorTok{{-}}\NormalTok{goias\textasciigrave{}.}\OperatorTok{*}              \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{53}\OperatorTok{{-}}\NormalTok{distrito\_federal\textasciigrave{}.}\OperatorTok{*}   \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{31}\OperatorTok{{-}}\NormalTok{minas\_gerais\textasciigrave{}.}\OperatorTok{*}       \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{32}\OperatorTok{{-}}\NormalTok{espiritosanto\textasciigrave{}.}\OperatorTok{*}      \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{33}\OperatorTok{{-}}\NormalTok{rio\_de\_janeiro\textasciigrave{}.}\OperatorTok{*}     \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{35}\OperatorTok{{-}}\NormalTok{sao\_paulo\textasciigrave{}.}\OperatorTok{*}          \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{41}\OperatorTok{{-}}\NormalTok{parana\textasciigrave{}.}\OperatorTok{*}             \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{42}\OperatorTok{{-}}\NormalTok{santa\_catarina\textasciigrave{}.}\OperatorTok{*}     \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{43}\OperatorTok{{-}}\NormalTok{rio\_grande\_do\_sul\textasciigrave{}.}\OperatorTok{*}  \KeywordTok{TO} \StringTok{\textquotesingle{}norte\textquotesingle{}}\NormalTok{;}

\CommentTok{{-}{-} ============================================}
\CommentTok{{-}{-} NORDESTE l√™ os demais grupos (Norte, Centro{-}Oeste, Sudeste, Sul)}
\CommentTok{{-}{-} ============================================}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{11}\OperatorTok{{-}}\NormalTok{rondonia\textasciigrave{}.}\OperatorTok{*}           \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{12}\OperatorTok{{-}}\NormalTok{acre\textasciigrave{}.}\OperatorTok{*}               \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{13}\OperatorTok{{-}}\NormalTok{amazonas\textasciigrave{}.}\OperatorTok{*}           \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{14}\OperatorTok{{-}}\NormalTok{roraima\textasciigrave{}.}\OperatorTok{*}            \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{15}\OperatorTok{{-}}\NormalTok{para\textasciigrave{}.}\OperatorTok{*}               \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{16}\OperatorTok{{-}}\NormalTok{amapa\textasciigrave{}.}\OperatorTok{*}              \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{17}\OperatorTok{{-}}\NormalTok{tocantins\textasciigrave{}.}\OperatorTok{*}          \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{50}\OperatorTok{{-}}\NormalTok{mato\_grosso\_do\_sul\textasciigrave{}.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{51}\OperatorTok{{-}}\NormalTok{mato\_grosso\textasciigrave{}.}\OperatorTok{*}       \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{52}\OperatorTok{{-}}\NormalTok{goias\textasciigrave{}.}\OperatorTok{*}             \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{53}\OperatorTok{{-}}\NormalTok{distrito\_federal\textasciigrave{}.}\OperatorTok{*}  \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{31}\OperatorTok{{-}}\NormalTok{minas\_gerais\textasciigrave{}.}\OperatorTok{*}      \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{32}\OperatorTok{{-}}\NormalTok{espiritosanto\textasciigrave{}.}\OperatorTok{*}     \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{33}\OperatorTok{{-}}\NormalTok{rio\_de\_janeiro\textasciigrave{}.}\OperatorTok{*}    \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{35}\OperatorTok{{-}}\NormalTok{sao\_paulo\textasciigrave{}.}\OperatorTok{*}         \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{41}\OperatorTok{{-}}\NormalTok{parana\textasciigrave{}.}\OperatorTok{*}            \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{42}\OperatorTok{{-}}\NormalTok{santa\_catarina\textasciigrave{}.}\OperatorTok{*}    \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{43}\OperatorTok{{-}}\NormalTok{rio\_grande\_do\_sul\textasciigrave{}.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}nordeste\textquotesingle{}}\NormalTok{;}

\CommentTok{{-}{-} ============================================}
\CommentTok{{-}{-} CENTRO{-}OESTE l√™ os demais grupos (Norte, Nordeste, Sudeste, Sul)}
\CommentTok{{-}{-} ============================================}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{11}\OperatorTok{{-}}\NormalTok{rondonia\textasciigrave{}.}\OperatorTok{*}           \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{12}\OperatorTok{{-}}\NormalTok{acre\textasciigrave{}.}\OperatorTok{*}               \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{13}\OperatorTok{{-}}\NormalTok{amazonas\textasciigrave{}.}\OperatorTok{*}           \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{14}\OperatorTok{{-}}\NormalTok{roraima\textasciigrave{}.}\OperatorTok{*}            \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{15}\OperatorTok{{-}}\NormalTok{para\textasciigrave{}.}\OperatorTok{*}               \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{16}\OperatorTok{{-}}\NormalTok{amapa\textasciigrave{}.}\OperatorTok{*}              \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{17}\OperatorTok{{-}}\NormalTok{tocantins\textasciigrave{}.}\OperatorTok{*}          \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{21}\OperatorTok{{-}}\NormalTok{maranhao\textasciigrave{}.}\OperatorTok{*}           \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{22}\OperatorTok{{-}}\NormalTok{piaui\textasciigrave{}.}\OperatorTok{*}              \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{23}\OperatorTok{{-}}\NormalTok{ceara\textasciigrave{}.}\OperatorTok{*}              \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{24}\OperatorTok{{-}}\NormalTok{rio\_grande\_do\_norte\textasciigrave{}.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{25}\OperatorTok{{-}}\NormalTok{paraiba\textasciigrave{}.}\OperatorTok{*}            \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{26}\OperatorTok{{-}}\NormalTok{pernambuco\textasciigrave{}.}\OperatorTok{*}         \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{27}\OperatorTok{{-}}\NormalTok{alagoas\textasciigrave{}.}\OperatorTok{*}            \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{28}\OperatorTok{{-}}\NormalTok{sergipe\textasciigrave{}.}\OperatorTok{*}            \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{29}\OperatorTok{{-}}\NormalTok{bahia\textasciigrave{}.}\OperatorTok{*}              \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{31}\OperatorTok{{-}}\NormalTok{minas\_gerais\textasciigrave{}.}\OperatorTok{*}       \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{32}\OperatorTok{{-}}\NormalTok{espiritosanto\textasciigrave{}.}\OperatorTok{*}      \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{33}\OperatorTok{{-}}\NormalTok{rio\_de\_janeiro\textasciigrave{}.}\OperatorTok{*}     \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{35}\OperatorTok{{-}}\NormalTok{sao\_paulo\textasciigrave{}.}\OperatorTok{*}          \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{41}\OperatorTok{{-}}\NormalTok{parana\textasciigrave{}.}\OperatorTok{*}             \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{42}\OperatorTok{{-}}\NormalTok{santa\_catarina\textasciigrave{}.}\OperatorTok{*}     \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{43}\OperatorTok{{-}}\NormalTok{rio\_grande\_do\_sul\textasciigrave{}.}\OperatorTok{*}  \KeywordTok{TO} \StringTok{\textquotesingle{}centro\_oeste\textquotesingle{}}\NormalTok{;}

\CommentTok{{-}{-} ============================================}
\CommentTok{{-}{-} SUDESTE l√™ os demais grupos (Norte, Nordeste, Centro{-}Oeste, Sul)}
\CommentTok{{-}{-} ============================================}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{11}\OperatorTok{{-}}\NormalTok{rondonia\textasciigrave{}.}\OperatorTok{*}           \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{12}\OperatorTok{{-}}\NormalTok{acre\textasciigrave{}.}\OperatorTok{*}               \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{13}\OperatorTok{{-}}\NormalTok{amazonas\textasciigrave{}.}\OperatorTok{*}           \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{14}\OperatorTok{{-}}\NormalTok{roraima\textasciigrave{}.}\OperatorTok{*}            \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{15}\OperatorTok{{-}}\NormalTok{para\textasciigrave{}.}\OperatorTok{*}               \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{16}\OperatorTok{{-}}\NormalTok{amapa\textasciigrave{}.}\OperatorTok{*}              \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{17}\OperatorTok{{-}}\NormalTok{tocantins\textasciigrave{}.}\OperatorTok{*}          \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{21}\OperatorTok{{-}}\NormalTok{maranhao\textasciigrave{}.}\OperatorTok{*}           \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{22}\OperatorTok{{-}}\NormalTok{piaui\textasciigrave{}.}\OperatorTok{*}              \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{23}\OperatorTok{{-}}\NormalTok{ceara\textasciigrave{}.}\OperatorTok{*}              \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{24}\OperatorTok{{-}}\NormalTok{rio\_grande\_do\_norte\textasciigrave{}.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{25}\OperatorTok{{-}}\NormalTok{paraiba\textasciigrave{}.}\OperatorTok{*}            \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{26}\OperatorTok{{-}}\NormalTok{pernambuco\textasciigrave{}.}\OperatorTok{*}         \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{27}\OperatorTok{{-}}\NormalTok{alagoas\textasciigrave{}.}\OperatorTok{*}            \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{28}\OperatorTok{{-}}\NormalTok{sergipe\textasciigrave{}.}\OperatorTok{*}            \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{29}\OperatorTok{{-}}\NormalTok{bahia\textasciigrave{}.}\OperatorTok{*}              \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{50}\OperatorTok{{-}}\NormalTok{mato\_grosso\_do\_sul\textasciigrave{}.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{51}\OperatorTok{{-}}\NormalTok{mato\_grosso\textasciigrave{}.}\OperatorTok{*}       \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{52}\OperatorTok{{-}}\NormalTok{goias\textasciigrave{}.}\OperatorTok{*}             \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{53}\OperatorTok{{-}}\NormalTok{distrito\_federal\textasciigrave{}.}\OperatorTok{*}  \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{41}\OperatorTok{{-}}\NormalTok{parana\textasciigrave{}.}\OperatorTok{*}            \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{42}\OperatorTok{{-}}\NormalTok{santa\_catarina\textasciigrave{}.}\OperatorTok{*}    \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{43}\OperatorTok{{-}}\NormalTok{rio\_grande\_do\_sul\textasciigrave{}.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}sudeste\textquotesingle{}}\NormalTok{;}

\CommentTok{{-}{-} ============================================}
\CommentTok{{-}{-} SUL l√™ os demais grupos (Norte, Nordeste, Centro{-}Oeste, Sudeste)}
\CommentTok{{-}{-} ============================================}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{11}\OperatorTok{{-}}\NormalTok{rondonia\textasciigrave{}.}\OperatorTok{*}           \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{12}\OperatorTok{{-}}\NormalTok{acre\textasciigrave{}.}\OperatorTok{*}               \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{13}\OperatorTok{{-}}\NormalTok{amazonas\textasciigrave{}.}\OperatorTok{*}           \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{14}\OperatorTok{{-}}\NormalTok{roraima\textasciigrave{}.}\OperatorTok{*}            \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{15}\OperatorTok{{-}}\NormalTok{para\textasciigrave{}.}\OperatorTok{*}               \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{16}\OperatorTok{{-}}\NormalTok{amapa\textasciigrave{}.}\OperatorTok{*}              \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{17}\OperatorTok{{-}}\NormalTok{tocantins\textasciigrave{}.}\OperatorTok{*}          \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{21}\OperatorTok{{-}}\NormalTok{maranhao\textasciigrave{}.}\OperatorTok{*}           \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{22}\OperatorTok{{-}}\NormalTok{piaui\textasciigrave{}.}\OperatorTok{*}              \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{23}\OperatorTok{{-}}\NormalTok{ceara\textasciigrave{}.}\OperatorTok{*}              \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{24}\OperatorTok{{-}}\NormalTok{rio\_grande\_do\_norte\textasciigrave{}.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{25}\OperatorTok{{-}}\NormalTok{paraiba\textasciigrave{}.}\OperatorTok{*}            \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{26}\OperatorTok{{-}}\NormalTok{pernambuco\textasciigrave{}.}\OperatorTok{*}         \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{27}\OperatorTok{{-}}\NormalTok{alagoas\textasciigrave{}.}\OperatorTok{*}            \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{28}\OperatorTok{{-}}\NormalTok{sergipe\textasciigrave{}.}\OperatorTok{*}            \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{29}\OperatorTok{{-}}\NormalTok{bahia\textasciigrave{}.}\OperatorTok{*}              \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{50}\OperatorTok{{-}}\NormalTok{mato\_grosso\_do\_sul\textasciigrave{}.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{51}\OperatorTok{{-}}\NormalTok{mato\_grosso\textasciigrave{}.}\OperatorTok{*}       \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{52}\OperatorTok{{-}}\NormalTok{goias\textasciigrave{}.}\OperatorTok{*}             \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{53}\OperatorTok{{-}}\NormalTok{distrito\_federal\textasciigrave{}.}\OperatorTok{*}  \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{31}\OperatorTok{{-}}\NormalTok{minas\_gerais\textasciigrave{}.}\OperatorTok{*}      \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{32}\OperatorTok{{-}}\NormalTok{espiritosanto\textasciigrave{}.}\OperatorTok{*}     \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{33}\OperatorTok{{-}}\NormalTok{rio\_de\_janeiro\textasciigrave{}.}\OperatorTok{*}    \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{SELECT} \KeywordTok{ON}\NormalTok{ \textasciigrave{}}\DecValTok{35}\OperatorTok{{-}}\NormalTok{sao\_paulo\textasciigrave{}.}\OperatorTok{*}         \KeywordTok{TO} \StringTok{\textquotesingle{}sul\textquotesingle{}}\NormalTok{;}
\end{Highlighting}
\end{Shaded}

\subsection{Exemplo no MySQL}\label{exemplo-no-mysql}

Exemplo 01

Considere o cen√°rio: um administrador de banco de dados ir√° criar uma tabela chamada \textbf{clientes} com cpf, nome e data\_nascimento. Essa tabela dever√° ficar no esquema \textbf{compras} e ser√° acessada com \textbf{todos os privil√©gios} pelo usu√°rio \textbf{aluno}. Considere que nosso SGBD √© o MySQL 9. fa√ßa passo-a-passo os c√≥digos SQL para que o ambiente descrito seja gerado.

\subsubsection{Passo 1 - Criar o esquema de Banco de Dados ``compras''}\label{passo-1---criar-o-esquema-de-banco-de-dados-compras}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ compras}
  \KeywordTok{DEFAULT} \DataTypeTok{CHARACTER} \KeywordTok{SET}\NormalTok{ utf8mb4}
  \KeywordTok{DEFAULT}\NormalTok{ COLLATE utf8mb4\_0900\_ai\_ci;}
\end{Highlighting}
\end{Shaded}

\subsubsection{Passo 2 - Criar o usu√°rio ``aluno''}\label{passo-2---criar-o-usuuxe1rio-aluno}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{{-}{-} Apenas local:}
\KeywordTok{CREATE} \FunctionTok{USER} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS} \StringTok{\textquotesingle{}aluno\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}localhost\textquotesingle{}} \KeywordTok{IDENTIFIED} \KeywordTok{BY} \StringTok{\textquotesingle{}TroqueEstaSenha!2025\textquotesingle{}}\NormalTok{;}

\CommentTok{{-}{-} (Opcional) Acesso pela rede/WAN:}
\KeywordTok{CREATE} \FunctionTok{USER} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS} \StringTok{\textquotesingle{}aluno\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}} \KeywordTok{IDENTIFIED} \KeywordTok{BY} \StringTok{\textquotesingle{}TroqueEstaSenha!2025\textquotesingle{}}\NormalTok{;}
\end{Highlighting}
\end{Shaded}

\subsubsection{Passo 2 - Conceder ao usu√°rio ``aluno'' privil√©gios sobre todas os objetos (tabelas, views, gatilhos, √≠ndices) do esquema ``compras''}\label{passo-2---conceder-ao-usuuxe1rio-aluno-priviluxe9gios-sobre-todas-os-objetos-tabelas-views-gatilhos-uxedndices-do-esquema-compras}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{{-}{-} Para acesso local:}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ compras.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}aluno\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}localhost\textquotesingle{}}\NormalTok{;}

\CommentTok{{-}{-} (Opcional) Para acesso via rede:}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ compras.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}aluno\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}\%\textquotesingle{}}\NormalTok{;}

\CommentTok{{-}{-} Tornar os privil√©gios efetivos (costume; no MySQL moderno aplica na hora):}
\KeywordTok{FLUSH} \KeywordTok{PRIVILEGES}\NormalTok{;}
\end{Highlighting}
\end{Shaded}

\subsubsection{Passo 3 - Criar a tabela ``clientes'' dentro do esquema ``compras''}\label{passo-3---criar-a-tabela-clientes-dentro-do-esquema-compras}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{USE}\NormalTok{ compras;}

\KeywordTok{CREATE} \KeywordTok{TABLE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ clientes (}
\NormalTok{  cpf            }\DataTypeTok{CHAR}\NormalTok{(}\DecValTok{11}\NormalTok{)     }\KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{  nome           }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{120}\NormalTok{) }\KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{  data\_nascimento }\DataTypeTok{DATE}        \KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
  \KeywordTok{CONSTRAINT}\NormalTok{ pk\_clientes }\KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (cpf)}
\NormalTok{) ENGINE}\OperatorTok{=}\NormalTok{InnoDB;}
\end{Highlighting}
\end{Shaded}

\subsection{Exemplo no PostGreSQL}\label{exemplo-no-postgresql}

Exemplo 03

Considere o cen√°rio: um administrador de banco de dados ir√° criar uma tabela chamada \textbf{clientes} com cpf, nome e data\_nascimento. Essa tabela dever√° ficar no esquema \textbf{compras} e ser√° acessada com \textbf{todos os privil√©gios} pelo usu√°rio \textbf{aluno}. Considere que nosso SGBD √© o Postgresql 15. fa√ßa passo-a-passo os c√≥digos SQL para que o ambiente descrito seja gerado.

\subsubsection{Passo 0 - Crie um Banco de Dados ``sistema\_compras''}\label{passo-0---crie-um-banco-de-dados-sistema_compras}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{CREATE} \KeywordTok{DATABASE}\NormalTok{ sistema\_compras}
    \KeywordTok{WITH}\NormalTok{ OWNER }\OperatorTok{=}\NormalTok{ postgres}
\NormalTok{    ENCODING }\OperatorTok{=} \StringTok{\textquotesingle{}UTF8\textquotesingle{}}
\NormalTok{    LC\_COLLATE }\OperatorTok{=} \StringTok{\textquotesingle{}pt\_BR.UTF{-}8\textquotesingle{}}
\NormalTok{    LC\_CTYPE }\OperatorTok{=} \StringTok{\textquotesingle{}pt\_BR.UTF{-}8\textquotesingle{}}
\NormalTok{    TEMPLATE }\OperatorTok{=}\NormalTok{ template0;}
\end{Highlighting}
\end{Shaded}

\subsubsection{Passo 1 - Criar o esquema de Banco de Dados ``compras''}\label{passo-1---criar-o-esquema-de-banco-de-dados-compras-1}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{CREATE} \KeywordTok{SCHEMA} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ compras }\KeywordTok{AUTHORIZATION}\NormalTok{ postgres;}
\end{Highlighting}
\end{Shaded}

\subsubsection{Passo 2 - Criar o usu√°rio ``aluno''}\label{passo-2---criar-o-usuuxe1rio-aluno-1}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{CREATE} \KeywordTok{ROLE}\NormalTok{ aluno }\KeywordTok{WITH}
\NormalTok{    LOGIN}
    \KeywordTok{PASSWORD} \StringTok{\textquotesingle{}TroqueEstaSenha!2025\textquotesingle{}}
\NormalTok{    NOSUPERUSER}
\NormalTok{    NOCREATEDB}
\NormalTok{    NOCREATEROLE}
\NormalTok{    INHERIT;}
\end{Highlighting}
\end{Shaded}

\subsubsection{Passo 3 - Conceder ao usu√°rio ``aluno'' privil√©gios sobre todas os objetos (tabelas, views, gatilhos, √≠ndices) do esquema ``compras''}\label{passo-3---conceder-ao-usuuxe1rio-aluno-priviluxe9gios-sobre-todas-os-objetos-tabelas-views-gatilhos-uxedndices-do-esquema-compras}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{GRANT} \KeywordTok{USAGE} \KeywordTok{ON} \KeywordTok{SCHEMA}\NormalTok{ compras }\KeywordTok{TO}\NormalTok{ aluno;}
\KeywordTok{GRANT} \KeywordTok{CREATE} \KeywordTok{ON} \KeywordTok{SCHEMA}\NormalTok{ compras }\KeywordTok{TO}\NormalTok{ aluno;}
\end{Highlighting}
\end{Shaded}

\subsubsection{Passo 4 - Criar a tabela ``clientes'' dentro do esquema ``compras''}\label{passo-4---criar-a-tabela-clientes-dentro-do-esquema-compras}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{CREATE} \KeywordTok{TABLE}\NormalTok{ compras.clientes (}
\NormalTok{    cpf            }\DataTypeTok{CHAR}\NormalTok{(}\DecValTok{11}\NormalTok{)     }\KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{,}
\NormalTok{    nome           }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{120}\NormalTok{) }\KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{    data\_nascimento }\DataTypeTok{DATE}        \KeywordTok{NOT} \KeywordTok{NULL}
\NormalTok{);}
\end{Highlighting}
\end{Shaded}

\subsubsection{Passo 5 - Conceder privil√©gios da tabela ``clientes'' do esquema ``compras'' para o usu√°rio ``aluno''}\label{passo-5---conceder-priviluxe9gios-da-tabela-clientes-do-esquema-compras-para-o-usuuxe1rio-aluno}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON} \KeywordTok{TABLE}\NormalTok{ compras.clientes }\KeywordTok{TO}\NormalTok{ aluno;}
\end{Highlighting}
\end{Shaded}

\section{Feito}\label{feito}

\chapter{Administra√ß√£o e Gerenciamento de Bancos de Dados}\label{administrauxe7uxe3o-e-gerenciamento-de-bancos-de-dados-1}

\subsubsection*{25/08/2025}\label{section-6}
\addcontentsline{toc}{subsubsection}{25/08/2025}

\subsubsection*{Professor Migu√©l Suares}\label{professor-miguuxe9l-suares-3}
\addcontentsline{toc}{subsubsection}{Professor Migu√©l Suares}

\chapter{Banco de Dados: Uma Aplica√ß√£o CRUD}\label{banco-de-dados-uma-aplicauxe7uxe3o-crud}

\subsubsection*{24/03/2026}\label{section-7}
\addcontentsline{toc}{subsubsection}{24/03/2026}

\subsubsection*{Professor Migu√©l Suares}\label{professor-miguuxe9l-suares-4}
\addcontentsline{toc}{subsubsection}{Professor Migu√©l Suares}

\section{Feito}\label{feito-1}

\section{Exerc√≠cios}\label{exercuxedcios-2}

\subsubsection*{01/09/2025}\label{section-8}
\addcontentsline{toc}{subsubsection}{01/09/2025}

\subsubsection*{Professor Migu√©l Suares}\label{professor-miguuxe9l-suares-5}
\addcontentsline{toc}{subsubsection}{Professor Migu√©l Suares}

\chapter{Banco de Dados: MySQL (MariaDB)}\label{banco-de-dados-mysql-mariadb}

\subsubsection*{08/09/2025}\label{section-9}
\addcontentsline{toc}{subsubsection}{08/09/2025}

\subsubsection*{Professor Migu√©l Suares}\label{professor-miguuxe9l-suares-6}
\addcontentsline{toc}{subsubsection}{Professor Migu√©l Suares}

\chapter{Banco de Dados: MySQL (MariaDB)}\label{banco-de-dados-mysql-mariadb-1}

\subsubsection*{08/09/2025}\label{section-10}
\addcontentsline{toc}{subsubsection}{08/09/2025}

\subsubsection*{Professor Migu√©l Suares}\label{professor-miguuxe9l-suares-7}
\addcontentsline{toc}{subsubsection}{Professor Migu√©l Suares}

\chapter{Banco de Dados: Postgres}\label{banco-de-dados-postgres}

\subsubsection*{22/09/2025}\label{section-11}
\addcontentsline{toc}{subsubsection}{22/09/2025}

\subsubsection*{Professor Migu√©l Suares}\label{professor-miguuxe9l-suares-8}
\addcontentsline{toc}{subsubsection}{Professor Migu√©l Suares}

\chapter{Banco de Dados: Postgres}\label{banco-de-dados-postgres-1}

\subsubsection*{22/09/2025}\label{section-12}
\addcontentsline{toc}{subsubsection}{22/09/2025}

\subsubsection*{Professor Migu√©l Suares}\label{professor-miguuxe9l-suares-9}
\addcontentsline{toc}{subsubsection}{Professor Migu√©l Suares}

\chapter{Banco de Dados: Uma Aplica√ß√£o CRUD}\label{banco-de-dados-uma-aplicauxe7uxe3o-crud-1}

\subsubsection*{21/04/2026}\label{section-13}
\addcontentsline{toc}{subsubsection}{21/04/2026}

\subsubsection*{Professor Migu√©l Suares}\label{professor-miguuxe9l-suares-10}
\addcontentsline{toc}{subsubsection}{Professor Migu√©l Suares}

\section{O que √© uma Aplica√ß√£o CRUD?}\label{o-que-uxe9-uma-aplicauxe7uxe3o-crud}

Hoje vamos desenvolver um cadastro web simples e entender o que √© o acronimo C.R.U.D.

\section{Conceito de CRUD}\label{conceito-de-crud}

\textbf{CRUD} √© um acr√¥nimo para quatro opera√ß√µes fundamentais que um sistema realiza sobre dados em um banco de dados:

\pandocbounded{\includegraphics[keepaspectratio]{images/2025-09-01/01-CRUD.jpg}}

Essas quatro opera√ß√µes comp√µem a base da maioria das \textbf{aplica√ß√µes web} que manipulam dados persistidos em um \textbf{SGBD} (Sistema Gerenciador de Banco de Dados).

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{O padr√£o de Design de Sistemas MVC (Model View Controller)}\label{o-padruxe3o-de-design-de-sistemas-mvc-model-view-controller}

Uma aplica√ß√£o Cliente-Servidor (modelo 2 camadas) geralmente segue o \textbf{padr√£o MVC} --- \textbf{Model, View, Controller}:

\pandocbounded{\includegraphics[keepaspectratio]{images/2025-09-01/03-MVC.jpg}}

\section{Construindo uma aplica√ß√£o CRUD para interfacear com a tabela ``Pessoa''}\label{construindo-uma-aplicauxe7uxe3o-crud-para-interfacear-com-a-tabela-pessoa}

Considere o Diagrama Entidade-Relacionamento abaixo:

\pandocbounded{\includesvg[keepaspectratio]{images/aula-05-Exemplo-01-continua√ß√£o.svg}}

Vamos Converte-lo para o Modelo F√≠sico-Relacional em linguagem SQL:

\subsection{Representa√ß√£o gr√°fica no modelo F√≠sico-Relacional}\label{representauxe7uxe3o-gruxe1fica-no-modelo-fuxedsico-relacional}

Vamos agora representa-lo em linguagem SQL:

\pandocbounded{\includegraphics[keepaspectratio]{images/2025-09-01/02-TabelaPessoas.jpg}}

\section{Cria√ß√£o de uma aplica√ß√£o CRUD}\label{criauxe7uxe3o-de-uma-aplicauxe7uxe3o-crud}

Vamos criar um \textbf{microsas} (micro Software As A Service) , ou seja, um site para inserir informa√ß√µes dentro da tabela acima.

\pandocbounded{\includegraphics[keepaspectratio]{images/2025-09-01/04-Aplicacao.jpg}}

\begin{longtable}[]{@{}
  >{\raggedright\arraybackslash}p{(\linewidth - 2\tabcolsep) * \real{0.5000}}
  >{\raggedright\arraybackslash}p{(\linewidth - 2\tabcolsep) * \real{0.5000}}@{}}
\caption{Criando um Esquema de Banco de Dados - CRUD tabela Pessoas}\tabularnewline
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Informa√ß√µes de Projeto
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Tecnologias utilizadas no projeto CRUD
\end{minipage} \\
\midrule\noalign{}
\endfirsthead
\toprule\noalign{}
\begin{minipage}[b]{\linewidth}\raggedright
Informa√ß√µes de Projeto
\end{minipage} & \begin{minipage}[b]{\linewidth}\raggedright
Tecnologias utilizadas no projeto CRUD
\end{minipage} \\
\midrule\noalign{}
\endhead
\bottomrule\noalign{}
\endlastfoot
Servidor de banco de dados SGBD & MySQL 8 \\
Usu√°rio de Banco de Dados & \textbf{pessoas\_user} \\
De onde pode ser acessado & Apenas M√°quina Local (localhost) \\
Esquema de Banco de Dados & \textbf{pessoasdb} \\
Servidor de Aplica√ß√£o & Python 3 \\
Cliente da Aplica√ß√£o & HTML + Javascript \\
Tecnologia de API & RestuFul \\
\textbf{Biblioteca de Javascript} para criar API \textbf{RestFul} & M√©todo \textbf{Fetch} (Biblioteca Padr√£o do JavaScript para API RestFul) \\
Formato de Dados entre Servidor de Aplica√ß√£o e Cliente de Aplica√ß√£o & \textbf{JSON} \\
\end{longtable}

\subsubsection{Cria√ß√£o de um usu√°rio para Interagir com o Esquema de Banco de Dados}\label{criauxe7uxe3o-de-um-usuuxe1rio-para-interagir-com-o-esquema-de-banco-de-dados}

\pandocbounded{\includegraphics[keepaspectratio]{images/2025-09-01/05-Usuario.jpg}}

\begin{Shaded}
\begin{Highlighting}[]

\CommentTok{{-}{-} CRIAR USU√ÅRIO LOCAL E CONCEDER PERMISS√ïES}
\CommentTok{{-}{-} Troque \textquotesingle{}MinhaSenhaForte\textquotesingle{} por uma senha segura}


\KeywordTok{CREATE} \FunctionTok{USER} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS} \StringTok{\textquotesingle{}pessoas\_user\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}localhost\textquotesingle{}} \KeywordTok{IDENTIFIED} \KeywordTok{BY} \StringTok{\textquotesingle{}MinhaSenhaForte\textquotesingle{}}\NormalTok{;}

\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ pessoasdb.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}pessoas\_user\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}localhost\textquotesingle{}}\NormalTok{;}

\KeywordTok{FLUSH} \KeywordTok{PRIVILEGES}\NormalTok{;}
\end{Highlighting}
\end{Shaded}

\subsubsection{Cria√ß√£o do Esquema de Banco de Dados no SGBD MySQL}\label{criauxe7uxe3o-do-esquema-de-banco-de-dados-no-sgbd-mysql}

Agora vamos criar um esquema de Banco de Dados para abrigar nossa futura tabela:

\pandocbounded{\includegraphics[keepaspectratio]{images/2025-09-01/06-Esquema.jpg}}

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{{-}{-} 1) CRIAR BANCO (ajuste o nome se quiser)}

\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ pessoasdb}
  \DataTypeTok{CHARACTER} \KeywordTok{SET}\NormalTok{ utf8mb4}
\NormalTok{  COLLATE utf8mb4\_0900\_ai\_ci;}

\KeywordTok{USE}\NormalTok{ pessoasdb;}
\end{Highlighting}
\end{Shaded}

\subsubsection{Cria√ß√£o da Tabela ``pessoas''}\label{criauxe7uxe3o-da-tabela-pessoas}

\pandocbounded{\includegraphics[keepaspectratio]{images/2025-09-01/07-Tabela_Pessoas.jpg}}

\begin{Shaded}
\begin{Highlighting}[]

\CommentTok{{-}{-} 3) TABELA \textquotesingle{}pessoas\textquotesingle{} COMPAT√çVEL COM O MODELO SQLAlchemy}
\CommentTok{{-}{-}    {-} cpf: chave prim√°ria (String(14))}
\CommentTok{{-}{-}    {-} nome, endereco, foto: TEXT}
\CommentTok{{-}{-}    {-} data\_nascimento: DATE}

\KeywordTok{CREATE} \KeywordTok{TABLE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ pessoas }
\NormalTok{(}
\NormalTok{  cpf             }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{14}\NormalTok{)  }\KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{  nome            TEXT         }\KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{  endereco        TEXT         }\KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{  data\_nascimento }\DataTypeTok{DATE}         \KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{  foto            TEXT         }\KeywordTok{NULL}\NormalTok{,}
  \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (cpf)}
\NormalTok{) ENGINE}\OperatorTok{=}\NormalTok{InnoDB }\KeywordTok{DEFAULT}\NormalTok{ CHARSET}\OperatorTok{=}\NormalTok{utf8mb4 COLLATE}\OperatorTok{=}\NormalTok{utf8mb4\_0900\_ai\_ci;}


\CommentTok{{-}{-} 4) (OPCIONAL) √çNDICES PARA BUSCA}
\CommentTok{{-}{-} Seu endpoint usa LIKE/ILIKE em nome e cpf; cpf j√° √© PK.}
\CommentTok{{-}{-} Para acelerar buscas por nome com LIKE, crie um √≠ndice por prefixo.}
\CommentTok{{-}{-} OBS: √≠ndices em TEXT precisam de comprimento; 128 costuma ser um bom compromisso.}

\KeywordTok{CREATE} \KeywordTok{INDEX}\NormalTok{ idx\_pessoas\_nome\_prefix }\KeywordTok{ON}\NormalTok{ pessoas (nome(}\DecValTok{128}\NormalTok{));}
\end{Highlighting}
\end{Shaded}

\subsubsection{Uma aplica√ß√£o Cliente Servidor no formato MVC (Model View Controller)}\label{uma-aplicauxe7uxe3o-cliente-servidor-no-formato-mvc-model-view-controller}

\pandocbounded{\includesvg[keepaspectratio]{images/Aplicacao-MVC-CRUD-Pessoas-01.svg}}

\subsubsection{Cria√ß√£o do Servidor de Aplica√ß√£o em Linguagem Python}\label{criauxe7uxe3o-do-servidor-de-aplicauxe7uxe3o-em-linguagem-python}

Vejamos a representa√ß√£o gr√°fica de nosso servidor utilizando o diagrama de classes da linguagem UML

\pandocbounded{\includesvg[keepaspectratio]{images/Servidor-CRUD-Pessoas-01.svg}}

Para utilizar o MySQL como servidor, devemos instalar os drivers de MySQL para a biblioteca SQLAlchemy do Python atrav√©s da ferramenta de linha de comando PIP do python

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{pip install flask flask}\AttributeTok{{-}cors}\NormalTok{ sqlalchemy }\StringTok{"pymysql\textgreater{}=1.1"}
\NormalTok{\# (ou use mysqlclient: pip install mysqlclient e troque o driver para mysql+mysqlclient}\KeywordTok{)}
\end{Highlighting}
\end{Shaded}

Agora vamos escrever o script python que criar√° o servidor de aplica√ß√£o para interfacear nosso Cliente no Navegador e nossa tabela pessoas dentro do SGBD MySQL:

\begin{Shaded}
\begin{Highlighting}[]
\ImportTok{from}\NormalTok{ flask }\ImportTok{import}\NormalTok{ Flask, request, jsonify}
\ImportTok{from}\NormalTok{ flask\_cors }\ImportTok{import}\NormalTok{ CORS}
\ImportTok{from}\NormalTok{ sqlalchemy }\ImportTok{import}\NormalTok{ create\_engine, Column, String, Date, Text}
\ImportTok{from}\NormalTok{ sqlalchemy.orm }\ImportTok{import}\NormalTok{ sessionmaker, declarative\_base}
\ImportTok{from}\NormalTok{ datetime }\ImportTok{import}\NormalTok{ date}

\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\CommentTok{\# Flask + CORS}
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\NormalTok{app }\OperatorTok{=}\NormalTok{ Flask(}\VariableTok{\_\_name\_\_}\NormalTok{)}
\NormalTok{CORS(app)  }\CommentTok{\# em produ√ß√£o, restrinja as origens}

\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\CommentTok{\# Banco de Dados MySQL (localhost)}
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\CommentTok{\# Par√¢metros do projeto:}
\CommentTok{\#   SGBD: MySQL 8}
\CommentTok{\#   Host: localhost}
\CommentTok{\#   Usu√°rio: pessoas\_user}
\CommentTok{\#   DB/Schema: pessoasdb}
\CommentTok{\#   Tabela: pessoas}
\NormalTok{DATABASE\_URL }\OperatorTok{=} \StringTok{"mysql+pymysql://pessoas\_user:MinhaSenhaForte@localhost:3306/pessoasdb"}

\NormalTok{engine }\OperatorTok{=}\NormalTok{ create\_engine(}
\NormalTok{    DATABASE\_URL,}
\NormalTok{    pool\_pre\_ping}\OperatorTok{=}\VariableTok{True}\NormalTok{,        }\CommentTok{\# evita "MySQL server has gone away"}
\NormalTok{    future}\OperatorTok{=}\VariableTok{True}
\NormalTok{)}
\NormalTok{SessionLocal }\OperatorTok{=}\NormalTok{ sessionmaker(bind}\OperatorTok{=}\NormalTok{engine, autoflush}\OperatorTok{=}\VariableTok{False}\NormalTok{, autocommit}\OperatorTok{=}\VariableTok{False}\NormalTok{, future}\OperatorTok{=}\VariableTok{True}\NormalTok{)}
\NormalTok{Base }\OperatorTok{=}\NormalTok{ declarative\_base()}

\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\CommentTok{\# Modelo Pessoa}
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\KeywordTok{class}\NormalTok{ Pessoa(Base):}
\NormalTok{    \_\_tablename\_\_ }\OperatorTok{=} \StringTok{"pessoas"}
\NormalTok{    cpf }\OperatorTok{=}\NormalTok{ Column(String(}\DecValTok{14}\NormalTok{), primary\_key}\OperatorTok{=}\VariableTok{True}\NormalTok{)}
\NormalTok{    nome }\OperatorTok{=}\NormalTok{ Column(Text, nullable}\OperatorTok{=}\VariableTok{False}\NormalTok{)}
\NormalTok{    endereco }\OperatorTok{=}\NormalTok{ Column(Text, nullable}\OperatorTok{=}\VariableTok{False}\NormalTok{)}
\NormalTok{    data\_nascimento }\OperatorTok{=}\NormalTok{ Column(Date, nullable}\OperatorTok{=}\VariableTok{False}\NormalTok{)}
\NormalTok{    foto }\OperatorTok{=}\NormalTok{ Column(Text)  }\CommentTok{\# Base64 ou URL}

\CommentTok{\# Cria a tabela se n√£o existir (deve existir conforme seu script SQL)}
\NormalTok{Base.metadata.create\_all(engine)}

\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\CommentTok{\# Helpers}
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\KeywordTok{def}\NormalTok{ to\_dict(p: Pessoa):}
    \ControlFlowTok{return}\NormalTok{ \{}
        \StringTok{"cpf"}\NormalTok{: p.cpf,}
        \StringTok{"nome"}\NormalTok{: p.nome,}
        \StringTok{"endereco"}\NormalTok{: p.endereco,}
        \StringTok{"data\_nascimento"}\NormalTok{: p.data\_nascimento.isoformat(),}
        \StringTok{"foto"}\NormalTok{: p.foto}
\NormalTok{    \}}

\KeywordTok{def}\NormalTok{ parse\_date\_iso(value):}
    \ControlFlowTok{if} \BuiltInTok{isinstance}\NormalTok{(value, date):}
        \ControlFlowTok{return}\NormalTok{ value}
    \ControlFlowTok{return}\NormalTok{ date.fromisoformat(value)  }\CommentTok{\# espera "YYYY{-}MM{-}DD"}

\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\CommentTok{\# CRUD}
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}

\CommentTok{\# Listar todas as pessoas ou pesquisar por termo (?q=)}
\AttributeTok{@app.route}\NormalTok{(}\StringTok{\textquotesingle{}/pessoas\textquotesingle{}}\NormalTok{, methods}\OperatorTok{=}\NormalTok{[}\StringTok{\textquotesingle{}GET\textquotesingle{}}\NormalTok{])}
\KeywordTok{def}\NormalTok{ listar():}
\NormalTok{    termo }\OperatorTok{=}\NormalTok{ (request.args.get(}\StringTok{\textquotesingle{}q\textquotesingle{}}\NormalTok{) }\KeywordTok{or} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{).strip()}
    \ControlFlowTok{with}\NormalTok{ SessionLocal() }\ImportTok{as}\NormalTok{ session:}
\NormalTok{        query }\OperatorTok{=}\NormalTok{ session.query(Pessoa)}
        \ControlFlowTok{if}\NormalTok{ termo:}
\NormalTok{            like }\OperatorTok{=} \SpecialStringTok{f"\%}\SpecialCharTok{\{}\NormalTok{termo}\SpecialCharTok{\}}\SpecialStringTok{\%"}
            \CommentTok{\# MySQL √© case{-}insensitive com collation *\_ci; ilike √© traduzido para LIKE}
\NormalTok{            query }\OperatorTok{=}\NormalTok{ query.}\BuiltInTok{filter}\NormalTok{((Pessoa.nome.ilike(like)) }\OperatorTok{|}\NormalTok{ (Pessoa.cpf.ilike(like)))}
\NormalTok{        pessoas }\OperatorTok{=}\NormalTok{ query.order\_by(Pessoa.nome.asc()).}\BuiltInTok{all}\NormalTok{()}
        \ControlFlowTok{return}\NormalTok{ jsonify([to\_dict(p) }\ControlFlowTok{for}\NormalTok{ p }\KeywordTok{in}\NormalTok{ pessoas])}

\CommentTok{\# Inserir nova pessoa}
\AttributeTok{@app.route}\NormalTok{(}\StringTok{\textquotesingle{}/pessoas\textquotesingle{}}\NormalTok{, methods}\OperatorTok{=}\NormalTok{[}\StringTok{\textquotesingle{}POST\textquotesingle{}}\NormalTok{])}
\KeywordTok{def}\NormalTok{ inserir():}
\NormalTok{    dados }\OperatorTok{=}\NormalTok{ request.get\_json(force}\OperatorTok{=}\VariableTok{True}\NormalTok{)}
\NormalTok{    required }\OperatorTok{=}\NormalTok{ [}\StringTok{\textquotesingle{}cpf\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}nome\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}endereco\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}data\_nascimento\textquotesingle{}}\NormalTok{]}
\NormalTok{    faltantes }\OperatorTok{=}\NormalTok{ [k }\ControlFlowTok{for}\NormalTok{ k }\KeywordTok{in}\NormalTok{ required }\ControlFlowTok{if} \KeywordTok{not}\NormalTok{ dados.get(k)]}
    \ControlFlowTok{if}\NormalTok{ faltantes:}
        \ControlFlowTok{return}\NormalTok{ jsonify(\{}\StringTok{"error"}\NormalTok{: }\StringTok{"Campos obrigat√≥rios faltando"}\NormalTok{, }\StringTok{"fields"}\NormalTok{: faltantes\}), }\DecValTok{422}

    \ControlFlowTok{try}\NormalTok{:}
\NormalTok{        dn }\OperatorTok{=}\NormalTok{ parse\_date\_iso(dados[}\StringTok{\textquotesingle{}data\_nascimento\textquotesingle{}}\NormalTok{])}
    \ControlFlowTok{except} \PreprocessorTok{Exception}\NormalTok{:}
        \ControlFlowTok{return}\NormalTok{ jsonify(\{}\StringTok{"error"}\NormalTok{: }\StringTok{"data\_nascimento inv√°lida. Use YYYY{-}MM{-}DD"}\NormalTok{\}), }\DecValTok{422}

    \ControlFlowTok{with}\NormalTok{ SessionLocal() }\ImportTok{as}\NormalTok{ session:}
        \ControlFlowTok{if}\NormalTok{ session.query(Pessoa).filter\_by(cpf}\OperatorTok{=}\NormalTok{dados[}\StringTok{\textquotesingle{}cpf\textquotesingle{}}\NormalTok{]).first():}
            \ControlFlowTok{return}\NormalTok{ jsonify(\{}\StringTok{"error"}\NormalTok{: }\StringTok{"CPF j√° cadastrado"}\NormalTok{\}), }\DecValTok{409}
\NormalTok{        pessoa }\OperatorTok{=}\NormalTok{ Pessoa(}
\NormalTok{            cpf}\OperatorTok{=}\NormalTok{dados[}\StringTok{\textquotesingle{}cpf\textquotesingle{}}\NormalTok{],}
\NormalTok{            nome}\OperatorTok{=}\NormalTok{dados[}\StringTok{\textquotesingle{}nome\textquotesingle{}}\NormalTok{],}
\NormalTok{            endereco}\OperatorTok{=}\NormalTok{dados[}\StringTok{\textquotesingle{}endereco\textquotesingle{}}\NormalTok{],}
\NormalTok{            data\_nascimento}\OperatorTok{=}\NormalTok{dn,}
\NormalTok{            foto}\OperatorTok{=}\NormalTok{dados.get(}\StringTok{\textquotesingle{}foto\textquotesingle{}}\NormalTok{)}
\NormalTok{        )}
\NormalTok{        session.add(pessoa)}
\NormalTok{        session.commit()}
\NormalTok{        session.refresh(pessoa)}
        \ControlFlowTok{return}\NormalTok{ jsonify(to\_dict(pessoa)), }\DecValTok{201}

\CommentTok{\# Alterar pessoa (PUT)}
\AttributeTok{@app.route}\NormalTok{(}\StringTok{\textquotesingle{}/pessoas/\textless{}cpf\textgreater{}\textquotesingle{}}\NormalTok{, methods}\OperatorTok{=}\NormalTok{[}\StringTok{\textquotesingle{}PUT\textquotesingle{}}\NormalTok{])}
\KeywordTok{def}\NormalTok{ alterar(cpf):}
\NormalTok{    dados }\OperatorTok{=}\NormalTok{ request.get\_json(force}\OperatorTok{=}\VariableTok{True}\NormalTok{)}
    \ControlFlowTok{with}\NormalTok{ SessionLocal() }\ImportTok{as}\NormalTok{ session:}
\NormalTok{        pessoa }\OperatorTok{=}\NormalTok{ session.query(Pessoa).filter\_by(cpf}\OperatorTok{=}\NormalTok{cpf).first()}
        \ControlFlowTok{if} \KeywordTok{not}\NormalTok{ pessoa:}
            \ControlFlowTok{return}\NormalTok{ jsonify(\{}\StringTok{"error"}\NormalTok{: }\StringTok{"CPF n√£o encontrado"}\NormalTok{\}), }\DecValTok{404}

        \ControlFlowTok{if} \StringTok{\textquotesingle{}nome\textquotesingle{}} \KeywordTok{in}\NormalTok{ dados }\KeywordTok{and}\NormalTok{ dados[}\StringTok{\textquotesingle{}nome\textquotesingle{}}\NormalTok{] }\KeywordTok{is} \KeywordTok{not} \VariableTok{None}\NormalTok{:}
\NormalTok{            pessoa.nome }\OperatorTok{=}\NormalTok{ dados[}\StringTok{\textquotesingle{}nome\textquotesingle{}}\NormalTok{]}
        \ControlFlowTok{if} \StringTok{\textquotesingle{}endereco\textquotesingle{}} \KeywordTok{in}\NormalTok{ dados }\KeywordTok{and}\NormalTok{ dados[}\StringTok{\textquotesingle{}endereco\textquotesingle{}}\NormalTok{] }\KeywordTok{is} \KeywordTok{not} \VariableTok{None}\NormalTok{:}
\NormalTok{            pessoa.endereco }\OperatorTok{=}\NormalTok{ dados[}\StringTok{\textquotesingle{}endereco\textquotesingle{}}\NormalTok{]}
        \ControlFlowTok{if} \StringTok{\textquotesingle{}data\_nascimento\textquotesingle{}} \KeywordTok{in}\NormalTok{ dados }\KeywordTok{and}\NormalTok{ dados[}\StringTok{\textquotesingle{}data\_nascimento\textquotesingle{}}\NormalTok{] }\KeywordTok{is} \KeywordTok{not} \VariableTok{None}\NormalTok{:}
            \ControlFlowTok{try}\NormalTok{:}
\NormalTok{                pessoa.data\_nascimento }\OperatorTok{=}\NormalTok{ parse\_date\_iso(dados[}\StringTok{\textquotesingle{}data\_nascimento\textquotesingle{}}\NormalTok{])}
            \ControlFlowTok{except} \PreprocessorTok{Exception}\NormalTok{:}
                \ControlFlowTok{return}\NormalTok{ jsonify(\{}\StringTok{"error"}\NormalTok{: }\StringTok{"data\_nascimento inv√°lida. Use YYYY{-}MM{-}DD"}\NormalTok{\}), }\DecValTok{422}
        \ControlFlowTok{if} \StringTok{\textquotesingle{}foto\textquotesingle{}} \KeywordTok{in}\NormalTok{ dados:}
\NormalTok{            pessoa.foto }\OperatorTok{=}\NormalTok{ dados[}\StringTok{\textquotesingle{}foto\textquotesingle{}}\NormalTok{]}

\NormalTok{        session.commit()}
\NormalTok{        session.refresh(pessoa)}
        \ControlFlowTok{return}\NormalTok{ jsonify(to\_dict(pessoa)), }\DecValTok{200}

\CommentTok{\# Remover pessoa}
\AttributeTok{@app.route}\NormalTok{(}\StringTok{\textquotesingle{}/pessoas/\textless{}cpf\textgreater{}\textquotesingle{}}\NormalTok{, methods}\OperatorTok{=}\NormalTok{[}\StringTok{\textquotesingle{}DELETE\textquotesingle{}}\NormalTok{])}
\KeywordTok{def}\NormalTok{ remover(cpf):}
    \ControlFlowTok{with}\NormalTok{ SessionLocal() }\ImportTok{as}\NormalTok{ session:}
\NormalTok{        pessoa }\OperatorTok{=}\NormalTok{ session.query(Pessoa).filter\_by(cpf}\OperatorTok{=}\NormalTok{cpf).first()}
        \ControlFlowTok{if} \KeywordTok{not}\NormalTok{ pessoa:}
            \ControlFlowTok{return}\NormalTok{ jsonify(\{}\StringTok{"error"}\NormalTok{: }\StringTok{"CPF n√£o encontrado"}\NormalTok{\}), }\DecValTok{404}
\NormalTok{        session.delete(pessoa)}
\NormalTok{        session.commit()}
        \ControlFlowTok{return} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{, }\DecValTok{204}

\CommentTok{\# Buscar pessoa por CPF}
\AttributeTok{@app.route}\NormalTok{(}\StringTok{\textquotesingle{}/pessoas/\textless{}cpf\textgreater{}\textquotesingle{}}\NormalTok{, methods}\OperatorTok{=}\NormalTok{[}\StringTok{\textquotesingle{}GET\textquotesingle{}}\NormalTok{])}
\KeywordTok{def}\NormalTok{ buscar(cpf):}
    \ControlFlowTok{with}\NormalTok{ SessionLocal() }\ImportTok{as}\NormalTok{ session:}
\NormalTok{        pessoa }\OperatorTok{=}\NormalTok{ session.query(Pessoa).filter\_by(cpf}\OperatorTok{=}\NormalTok{cpf).first()}
        \ControlFlowTok{if} \KeywordTok{not}\NormalTok{ pessoa:}
            \ControlFlowTok{return}\NormalTok{ jsonify(\{}\StringTok{"error"}\NormalTok{: }\StringTok{"CPF n√£o encontrado"}\NormalTok{\}), }\DecValTok{404}
        \ControlFlowTok{return}\NormalTok{ jsonify(to\_dict(pessoa))}

\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\CommentTok{\# Inicia o servidor}
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\ControlFlowTok{if} \VariableTok{\_\_name\_\_} \OperatorTok{==} \StringTok{\textquotesingle{}\_\_main\_\_\textquotesingle{}}\NormalTok{:}
\NormalTok{    app.run(debug}\OperatorTok{=}\VariableTok{True}\NormalTok{, port}\OperatorTok{=}\DecValTok{5000}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

\subsubsection{Cria√ß√£o do Cliente de Aplica√ß√£o em HTML (Parte Gr√°fica) e Javascript (Programa√ß√£o Execut√°vel)}\label{criauxe7uxe3o-do-cliente-de-aplicauxe7uxe3o-em-html-parte-gruxe1fica-e-javascript-programauxe7uxe3o-executuxe1vel}

Vamos verificar como √© o Diagrama de Classes do Cliente que vai conversar com o servidor que vimos anteriormente:

\pandocbounded{\includegraphics[keepaspectratio]{images/2025-09-01/09-cliente.jpg}}

Agora vamos verificar o c√≥digo-fonte.

Salve esse c√≥digo em um arquivo chamado \textbf{cliente.html}, para poder abrir-lo no navegador, juntamente com o servidor rodando:

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{\textless{}!DOCTYPE}\NormalTok{ html}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{html}\OtherTok{ lang}\OperatorTok{=}\StringTok{"pt{-}BR"}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{head}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{meta}\OtherTok{ charset}\OperatorTok{=}\StringTok{"UTF{-}8"}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{title}\DataTypeTok{\textgreater{}}\NormalTok{Cadastro de Pessoas {-} Flask/MySQL}\DataTypeTok{\textless{}/}\KeywordTok{title}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{style}\DataTypeTok{\textgreater{}}
\NormalTok{  body \{ }\KeywordTok{font{-}family}\CharTok{:} \DecValTok{system{-}ui}\OperatorTok{,} \DecValTok{{-}apple{-}system}\OperatorTok{,} \DecValTok{Segoe UI}\OperatorTok{,} \DecValTok{Roboto}\OperatorTok{,} \DecValTok{Arial}\OperatorTok{;} \KeywordTok{max{-}width}\CharTok{:} \DecValTok{980}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{margin}\CharTok{:} \DecValTok{24}\DataTypeTok{px} \BuiltInTok{auto}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  label \{ }\KeywordTok{display}\CharTok{:} \DecValTok{block}\OperatorTok{;} \KeywordTok{margin{-}top}\CharTok{:} \DecValTok{10}\DataTypeTok{px}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  button \{ }\KeywordTok{margin{-}top}\CharTok{:} \DecValTok{10}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{margin{-}right}\CharTok{:} \DecValTok{6}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{padding}\CharTok{:} \DecValTok{8}\DataTypeTok{px} \DecValTok{12}\DataTypeTok{px}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  table \{ }\KeywordTok{border{-}collapse}\CharTok{:} \DecValTok{collapse}\OperatorTok{;} \KeywordTok{width}\CharTok{:}\DecValTok{100}\DataTypeTok{\%}\OperatorTok{;} \KeywordTok{margin{-}top}\CharTok{:}\DecValTok{20}\DataTypeTok{px}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  th}\OperatorTok{,}\NormalTok{ td \{ }\KeywordTok{border}\CharTok{:}\DecValTok{1}\DataTypeTok{px} \DecValTok{solid} \ConstantTok{\#ddd}\OperatorTok{;} \KeywordTok{padding}\CharTok{:}\DecValTok{8}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{text{-}align}\CharTok{:}\DecValTok{left}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  img}\FunctionTok{.thumb}\NormalTok{ \{ }\KeywordTok{width}\CharTok{:}\DecValTok{60}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{height}\CharTok{:}\DecValTok{60}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{object{-}fit}\CharTok{:}\DecValTok{cover}\OperatorTok{;} \KeywordTok{border{-}radius}\CharTok{:}\DecValTok{4}\DataTypeTok{px}\OperatorTok{;}\NormalTok{ \}}
  \FunctionTok{.row}\NormalTok{ \{ }\KeywordTok{display}\CharTok{:}\DecValTok{flex}\OperatorTok{;} \KeywordTok{gap}\CharTok{:}\DecValTok{8}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{align{-}items}\CharTok{:}\DecValTok{center}\OperatorTok{;} \KeywordTok{flex{-}wrap}\CharTok{:}\DecValTok{wrap}\OperatorTok{;}\NormalTok{ \}}
\DataTypeTok{\textless{}/}\KeywordTok{style}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{head}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{body}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{h1}\DataTypeTok{\textgreater{}}\NormalTok{Cadastro de Pessoas (Flask/MySQL)}\DataTypeTok{\textless{}/}\KeywordTok{h1}\DataTypeTok{\textgreater{}}

\DataTypeTok{\textless{}}\KeywordTok{form}\OtherTok{ id}\OperatorTok{=}\StringTok{"formPessoa"}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{label}\DataTypeTok{\textgreater{}}\NormalTok{CPF (chave prim√°ria): }\DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ id}\OperatorTok{=}\StringTok{"cpf"}\OtherTok{ required}\DataTypeTok{\textgreater{}\textless{}/}\KeywordTok{label}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{label}\DataTypeTok{\textgreater{}}\NormalTok{Nome: }\DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ id}\OperatorTok{=}\StringTok{"nome"}\OtherTok{ required}\DataTypeTok{\textgreater{}\textless{}/}\KeywordTok{label}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{label}\DataTypeTok{\textgreater{}}\NormalTok{Endere√ßo: }\DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ id}\OperatorTok{=}\StringTok{"endereco"}\OtherTok{ required}\DataTypeTok{\textgreater{}\textless{}/}\KeywordTok{label}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{label}\DataTypeTok{\textgreater{}}\NormalTok{Data Nasc.: }\DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ type}\OperatorTok{=}\StringTok{"date"}\OtherTok{ id}\OperatorTok{=}\StringTok{"data\_nascimento"}\OtherTok{ required}\DataTypeTok{\textgreater{}\textless{}/}\KeywordTok{label}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{label}\DataTypeTok{\textgreater{}}\NormalTok{Foto: }\DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ type}\OperatorTok{=}\StringTok{"file"}\OtherTok{ id}\OperatorTok{=}\StringTok{"foto"}\OtherTok{ accept}\OperatorTok{=}\StringTok{"image/*"}\DataTypeTok{\textgreater{}\textless{}/}\KeywordTok{label}\DataTypeTok{\textgreater{}}

  \DataTypeTok{\textless{}}\KeywordTok{div}\OtherTok{ class}\OperatorTok{=}\StringTok{"row"}\DataTypeTok{\textgreater{}}
    \DataTypeTok{\textless{}}\KeywordTok{button}\OtherTok{ type}\OperatorTok{=}\StringTok{"button"}\OtherTok{ id}\OperatorTok{=}\StringTok{"btnInserir"}\OtherTok{ onclick}\OperatorTok{=}\StringTok{"inserir()"}\DataTypeTok{\textgreater{}}\NormalTok{Inserir}\DataTypeTok{\textless{}/}\KeywordTok{button}\DataTypeTok{\textgreater{}}
    \DataTypeTok{\textless{}}\KeywordTok{button}\OtherTok{ type}\OperatorTok{=}\StringTok{"button"}\OtherTok{ id}\OperatorTok{=}\StringTok{"btnAlterar"}\OtherTok{ onclick}\OperatorTok{=}\StringTok{"alterar()"}\DataTypeTok{\textgreater{}}\NormalTok{Alterar}\DataTypeTok{\textless{}/}\KeywordTok{button}\DataTypeTok{\textgreater{}}
    \DataTypeTok{\textless{}}\KeywordTok{button}\OtherTok{ type}\OperatorTok{=}\StringTok{"button"}\OtherTok{ id}\OperatorTok{=}\StringTok{"btnRemover"}\OtherTok{ onclick}\OperatorTok{=}\StringTok{"remover()"}\DataTypeTok{\textgreater{}}\NormalTok{Remover}\DataTypeTok{\textless{}/}\KeywordTok{button}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}/}\KeywordTok{div}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{form}\DataTypeTok{\textgreater{}}

\DataTypeTok{\textless{}}\KeywordTok{h2}\DataTypeTok{\textgreater{}}\NormalTok{Pesquisar}\DataTypeTok{\textless{}/}\KeywordTok{h2}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{div}\OtherTok{ class}\OperatorTok{=}\StringTok{"row"}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ id}\OperatorTok{=}\StringTok{"pesquisa"}\OtherTok{ placeholder}\OperatorTok{=}\StringTok{"Digite nome ou CPF"}\OtherTok{ style}\OperatorTok{=}\StringTok{"flex:1"}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{button}\OtherTok{ type}\OperatorTok{=}\StringTok{"button"}\OtherTok{ id}\OperatorTok{=}\StringTok{"btnPesquisar"}\OtherTok{ onclick}\OperatorTok{=}\StringTok{"pesquisar()"}\DataTypeTok{\textgreater{}}\NormalTok{Pesquisar}\DataTypeTok{\textless{}/}\KeywordTok{button}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{button}\OtherTok{ type}\OperatorTok{=}\StringTok{"button"}\OtherTok{ onclick}\OperatorTok{=}\StringTok{"listar()"}\DataTypeTok{\textgreater{}}\NormalTok{Listar tudo}\DataTypeTok{\textless{}/}\KeywordTok{button}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{div}\DataTypeTok{\textgreater{}}

\DataTypeTok{\textless{}}\KeywordTok{table}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{thead}\DataTypeTok{\textgreater{}}
    \DataTypeTok{\textless{}}\KeywordTok{tr}\DataTypeTok{\textgreater{}}
      \DataTypeTok{\textless{}}\KeywordTok{th}\DataTypeTok{\textgreater{}}\NormalTok{CPF}\DataTypeTok{\textless{}/}\KeywordTok{th}\DataTypeTok{\textgreater{}\textless{}}\KeywordTok{th}\DataTypeTok{\textgreater{}}\NormalTok{Foto}\DataTypeTok{\textless{}/}\KeywordTok{th}\DataTypeTok{\textgreater{}\textless{}}\KeywordTok{th}\DataTypeTok{\textgreater{}}\NormalTok{Nome}\DataTypeTok{\textless{}/}\KeywordTok{th}\DataTypeTok{\textgreater{}}
      \DataTypeTok{\textless{}}\KeywordTok{th}\DataTypeTok{\textgreater{}}\NormalTok{Endere√ßo}\DataTypeTok{\textless{}/}\KeywordTok{th}\DataTypeTok{\textgreater{}\textless{}}\KeywordTok{th}\DataTypeTok{\textgreater{}}\NormalTok{Nascimento}\DataTypeTok{\textless{}/}\KeywordTok{th}\DataTypeTok{\textgreater{}}
    \DataTypeTok{\textless{}/}\KeywordTok{tr}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}/}\KeywordTok{thead}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{tbody}\OtherTok{ id}\OperatorTok{=}\StringTok{"tabela"}\DataTypeTok{\textgreater{}\textless{}/}\KeywordTok{tbody}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{table}\DataTypeTok{\textgreater{}}

\DataTypeTok{\textless{}}\KeywordTok{script}\DataTypeTok{\textgreater{}}
\KeywordTok{const}\NormalTok{ API }\OperatorTok{=} \StringTok{\textquotesingle{}http://localhost:5000/pessoas\textquotesingle{}}\OperatorTok{;}

\CommentTok{/* {-}{-}{-}{-}{-}{-}{-}{-}{-}{-} Helpers {-}{-}{-}{-}{-}{-}{-}{-}{-}{-} */}
\KeywordTok{function} \FunctionTok{setBusy}\NormalTok{(busy) \{}
  \ControlFlowTok{for}\NormalTok{ (}\KeywordTok{const}\NormalTok{ id }\KeywordTok{of}\NormalTok{ [}\StringTok{\textquotesingle{}btnInserir\textquotesingle{}}\OperatorTok{,}\StringTok{\textquotesingle{}btnAlterar\textquotesingle{}}\OperatorTok{,}\StringTok{\textquotesingle{}btnRemover\textquotesingle{}}\OperatorTok{,}\StringTok{\textquotesingle{}btnPesquisar\textquotesingle{}}\NormalTok{]) \{}
    \KeywordTok{const}\NormalTok{ el }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(id)}\OperatorTok{;}
    \ControlFlowTok{if}\NormalTok{ (el) el}\OperatorTok{.}\AttributeTok{disabled} \OperatorTok{=}\NormalTok{ busy}\OperatorTok{;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{function} \FunctionTok{validaCampos}\NormalTok{() \{}
  \KeywordTok{const}\NormalTok{ campos }\OperatorTok{=}\NormalTok{ [}\StringTok{\textquotesingle{}cpf\textquotesingle{}}\OperatorTok{,}\StringTok{\textquotesingle{}nome\textquotesingle{}}\OperatorTok{,}\StringTok{\textquotesingle{}endereco\textquotesingle{}}\OperatorTok{,}\StringTok{\textquotesingle{}data\_nascimento\textquotesingle{}}\NormalTok{]}\OperatorTok{;}
  \ControlFlowTok{for}\NormalTok{ (}\KeywordTok{const}\NormalTok{ id }\KeywordTok{of}\NormalTok{ campos) \{}
    \KeywordTok{const}\NormalTok{ valor }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(id)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{;}
    \ControlFlowTok{if}\NormalTok{ (}\OperatorTok{!}\NormalTok{valor) \{}
      \FunctionTok{alert}\NormalTok{(}\VerbatimStringTok{\textasciigrave{}O campo "}\SpecialCharTok{$\{}\NormalTok{id}\SpecialCharTok{\}}\VerbatimStringTok{" n√£o pode ficar em branco.\textasciigrave{}}\NormalTok{)}\OperatorTok{;}
      \ControlFlowTok{return} \KeywordTok{false}\OperatorTok{;}
\NormalTok{    \}}
\NormalTok{  \}}
  \ControlFlowTok{return} \KeywordTok{true}\OperatorTok{;}
\NormalTok{\}}

\KeywordTok{function} \FunctionTok{getFotoBase64}\NormalTok{() \{}
  \KeywordTok{const}\NormalTok{ file }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}foto\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{files}\NormalTok{[}\DecValTok{0}\NormalTok{]}\OperatorTok{;}
  \ControlFlowTok{if}\NormalTok{(}\OperatorTok{!}\NormalTok{file) }\ControlFlowTok{return} \BuiltInTok{Promise}\OperatorTok{.}\FunctionTok{resolve}\NormalTok{(}\StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
  \ControlFlowTok{return} \KeywordTok{new} \BuiltInTok{Promise}\NormalTok{((resolve}\OperatorTok{,}\NormalTok{reject)}\KeywordTok{=\textgreater{}}\NormalTok{\{}
    \KeywordTok{const}\NormalTok{ reader }\OperatorTok{=} \KeywordTok{new} \BuiltInTok{FileReader}\NormalTok{()}\OperatorTok{;}
\NormalTok{    reader}\OperatorTok{.}\AttributeTok{onload} \OperatorTok{=}\NormalTok{ () }\KeywordTok{=\textgreater{}} \FunctionTok{resolve}\NormalTok{(reader}\OperatorTok{.}\AttributeTok{result}\NormalTok{)}\OperatorTok{;}
\NormalTok{    reader}\OperatorTok{.}\AttributeTok{onerror} \OperatorTok{=}\NormalTok{ reject}\OperatorTok{;}
\NormalTok{    reader}\OperatorTok{.}\FunctionTok{readAsDataURL}\NormalTok{(file)}\OperatorTok{;}
\NormalTok{  \})}\OperatorTok{;}
\NormalTok{\}}

\KeywordTok{function} \FunctionTok{coletaDados}\NormalTok{(base64Foto)\{}
  \ControlFlowTok{return}\NormalTok{ \{}
    \DataTypeTok{cpf}\OperatorTok{:} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}cpf\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{,}
    \DataTypeTok{nome}\OperatorTok{:} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}nome\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{,}
    \DataTypeTok{endereco}\OperatorTok{:} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}endereco\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{,}
    \DataTypeTok{data\_nascimento}\OperatorTok{:} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}data\_nascimento\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{,} \CommentTok{// YYYY{-}MM{-}DD}
    \DataTypeTok{foto}\OperatorTok{:}\NormalTok{ base64Foto }\OperatorTok{||} \StringTok{\textquotesingle{}\textquotesingle{}}
\NormalTok{  \}}\OperatorTok{;}
\NormalTok{\}}

\KeywordTok{async} \KeywordTok{function} \FunctionTok{readJsonSafe}\NormalTok{(res) \{}
  \KeywordTok{const}\NormalTok{ ct }\OperatorTok{=}\NormalTok{ res}\OperatorTok{.}\AttributeTok{headers}\OperatorTok{.}\FunctionTok{get}\NormalTok{(}\StringTok{\textquotesingle{}content{-}type\textquotesingle{}}\NormalTok{) }\OperatorTok{||} \StringTok{\textquotesingle{}\textquotesingle{}}\OperatorTok{;}
  \ControlFlowTok{if}\NormalTok{ (ct}\OperatorTok{.}\FunctionTok{includes}\NormalTok{(}\StringTok{\textquotesingle{}application/json\textquotesingle{}}\NormalTok{)) \{}
    \ControlFlowTok{try}\NormalTok{ \{ }\ControlFlowTok{return} \ControlFlowTok{await}\NormalTok{ res}\OperatorTok{.}\FunctionTok{json}\NormalTok{()}\OperatorTok{;}\NormalTok{ \} }\ControlFlowTok{catch}\NormalTok{ \{ }\ControlFlowTok{return} \KeywordTok{null}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  \}}
  \ControlFlowTok{return} \KeywordTok{null}\OperatorTok{;}
\NormalTok{\}}

\CommentTok{/* {-}{-}{-}{-}{-}{-}{-}{-}{-}{-} CRUD {-}{-}{-}{-}{-}{-}{-}{-}{-}{-} */}
\KeywordTok{async} \KeywordTok{function} \FunctionTok{inserir}\NormalTok{() \{}
  \ControlFlowTok{if}\NormalTok{(}\OperatorTok{!}\FunctionTok{validaCampos}\NormalTok{()) }\ControlFlowTok{return}\OperatorTok{;}
  \FunctionTok{setBusy}\NormalTok{(}\KeywordTok{true}\NormalTok{)}\OperatorTok{;}
  \ControlFlowTok{try}\NormalTok{ \{}
    \KeywordTok{const}\NormalTok{ base64 }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{getFotoBase64}\NormalTok{()}\OperatorTok{;}
    \KeywordTok{const}\NormalTok{ pessoa }\OperatorTok{=} \FunctionTok{coletaDados}\NormalTok{(base64)}\OperatorTok{;}

    \KeywordTok{const}\NormalTok{ res }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{fetch}\NormalTok{(API}\OperatorTok{,}\NormalTok{ \{}
      \DataTypeTok{method}\OperatorTok{:} \StringTok{\textquotesingle{}POST\textquotesingle{}}\OperatorTok{,}
      \DataTypeTok{headers}\OperatorTok{:}\NormalTok{ \{}\StringTok{\textquotesingle{}Content{-}Type\textquotesingle{}}\OperatorTok{:} \StringTok{\textquotesingle{}application/json\textquotesingle{}}\NormalTok{\}}\OperatorTok{,}
      \DataTypeTok{body}\OperatorTok{:} \BuiltInTok{JSON}\OperatorTok{.}\FunctionTok{stringify}\NormalTok{(pessoa)}
\NormalTok{    \})}\OperatorTok{;}
    \KeywordTok{const}\NormalTok{ data }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{readJsonSafe}\NormalTok{(res)}\OperatorTok{;}
    \ControlFlowTok{if}\NormalTok{(res}\OperatorTok{.}\AttributeTok{ok}\NormalTok{) \{}
      \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Inserido com sucesso!\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
      \FunctionTok{listar}\NormalTok{()}\OperatorTok{;}
      \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}formPessoa\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\FunctionTok{reset}\NormalTok{()}\OperatorTok{;}
\NormalTok{    \} }\ControlFlowTok{else}\NormalTok{ \{}
      \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Erro: \textquotesingle{}} \OperatorTok{+}\NormalTok{ (data}\OperatorTok{?.}\AttributeTok{error} \OperatorTok{||}\NormalTok{ res}\OperatorTok{.}\AttributeTok{statusText}\NormalTok{))}\OperatorTok{;}
\NormalTok{    \}}
\NormalTok{  \} }\ControlFlowTok{catch}\NormalTok{ (e) \{}
    \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Falha ao inserir: \textquotesingle{}} \OperatorTok{+}\NormalTok{ e}\OperatorTok{.}\AttributeTok{message}\NormalTok{)}\OperatorTok{;}
\NormalTok{  \} }\ControlFlowTok{finally}\NormalTok{ \{}
    \FunctionTok{setBusy}\NormalTok{(}\KeywordTok{false}\NormalTok{)}\OperatorTok{;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{async} \KeywordTok{function} \FunctionTok{alterar}\NormalTok{() \{}
  \ControlFlowTok{if}\NormalTok{(}\OperatorTok{!}\FunctionTok{validaCampos}\NormalTok{()) }\ControlFlowTok{return}\OperatorTok{;}
  \KeywordTok{const}\NormalTok{ cpf }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}cpf\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{;}
  \FunctionTok{setBusy}\NormalTok{(}\KeywordTok{true}\NormalTok{)}\OperatorTok{;}
  \ControlFlowTok{try}\NormalTok{ \{}
    \KeywordTok{const}\NormalTok{ base64 }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{getFotoBase64}\NormalTok{()}\OperatorTok{;}
    \KeywordTok{const}\NormalTok{ novosDados }\OperatorTok{=} \FunctionTok{coletaDados}\NormalTok{()}\OperatorTok{;}
    \ControlFlowTok{if}\NormalTok{ (base64) novosDados}\OperatorTok{.}\AttributeTok{foto} \OperatorTok{=}\NormalTok{ base64}\OperatorTok{;}

    \KeywordTok{const}\NormalTok{ res }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{fetch}\NormalTok{(}\VerbatimStringTok{\textasciigrave{}}\SpecialCharTok{$\{}\NormalTok{API}\SpecialCharTok{\}}\VerbatimStringTok{/}\SpecialCharTok{$\{}\PreprocessorTok{encodeURIComponent}\NormalTok{(cpf)}\SpecialCharTok{\}}\VerbatimStringTok{\textasciigrave{}}\OperatorTok{,}\NormalTok{ \{}
      \DataTypeTok{method}\OperatorTok{:} \StringTok{\textquotesingle{}PUT\textquotesingle{}}\OperatorTok{,}
      \DataTypeTok{headers}\OperatorTok{:}\NormalTok{ \{}\StringTok{\textquotesingle{}Content{-}Type\textquotesingle{}}\OperatorTok{:} \StringTok{\textquotesingle{}application/json\textquotesingle{}}\NormalTok{\}}\OperatorTok{,}
      \DataTypeTok{body}\OperatorTok{:} \BuiltInTok{JSON}\OperatorTok{.}\FunctionTok{stringify}\NormalTok{(novosDados)}
\NormalTok{    \})}\OperatorTok{;}
    \KeywordTok{const}\NormalTok{ data }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{readJsonSafe}\NormalTok{(res)}\OperatorTok{;}
    \ControlFlowTok{if}\NormalTok{(res}\OperatorTok{.}\AttributeTok{ok}\NormalTok{) \{}
      \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Alterado com sucesso!\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
      \FunctionTok{listar}\NormalTok{()}\OperatorTok{;}
\NormalTok{    \} }\ControlFlowTok{else}\NormalTok{ \{}
      \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Erro: \textquotesingle{}} \OperatorTok{+}\NormalTok{ (data}\OperatorTok{?.}\AttributeTok{error} \OperatorTok{||}\NormalTok{ res}\OperatorTok{.}\AttributeTok{statusText}\NormalTok{))}\OperatorTok{;}
\NormalTok{    \}}
\NormalTok{  \} }\ControlFlowTok{catch}\NormalTok{ (e) \{}
    \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Falha ao alterar: \textquotesingle{}} \OperatorTok{+}\NormalTok{ e}\OperatorTok{.}\AttributeTok{message}\NormalTok{)}\OperatorTok{;}
\NormalTok{  \} }\ControlFlowTok{finally}\NormalTok{ \{}
    \FunctionTok{setBusy}\NormalTok{(}\KeywordTok{false}\NormalTok{)}\OperatorTok{;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{async} \KeywordTok{function} \FunctionTok{remover}\NormalTok{() \{}
  \KeywordTok{const}\NormalTok{ cpf }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}cpf\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{;}
  \ControlFlowTok{if}\NormalTok{(}\OperatorTok{!}\NormalTok{cpf) }\ControlFlowTok{return} \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Informe o CPF para remover.\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
  \ControlFlowTok{if}\NormalTok{(}\OperatorTok{!}\FunctionTok{confirm}\NormalTok{(}\StringTok{\textquotesingle{}Confirma a exclus√£o?\textquotesingle{}}\NormalTok{)) }\ControlFlowTok{return}\OperatorTok{;}

  \FunctionTok{setBusy}\NormalTok{(}\KeywordTok{true}\NormalTok{)}\OperatorTok{;}
  \ControlFlowTok{try}\NormalTok{ \{}
    \KeywordTok{const}\NormalTok{ res }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{fetch}\NormalTok{(}\VerbatimStringTok{\textasciigrave{}}\SpecialCharTok{$\{}\NormalTok{API}\SpecialCharTok{\}}\VerbatimStringTok{/}\SpecialCharTok{$\{}\PreprocessorTok{encodeURIComponent}\NormalTok{(cpf)}\SpecialCharTok{\}}\VerbatimStringTok{\textasciigrave{}}\OperatorTok{,}\NormalTok{ \{}\DataTypeTok{method}\OperatorTok{:}\StringTok{\textquotesingle{}DELETE\textquotesingle{}}\NormalTok{\})}\OperatorTok{;}
    \CommentTok{// 204 =\textgreater{} sem corpo; n√£o tente parsear JSON aqui}
    \ControlFlowTok{if}\NormalTok{(res}\OperatorTok{.}\AttributeTok{status} \OperatorTok{===} \DecValTok{204}\NormalTok{) \{}
      \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Removido com sucesso!\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
      \FunctionTok{listar}\NormalTok{()}\OperatorTok{;}
      \ControlFlowTok{return}\OperatorTok{;}
\NormalTok{    \}}
    \KeywordTok{const}\NormalTok{ data }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{readJsonSafe}\NormalTok{(res)}\OperatorTok{;}
    \ControlFlowTok{if}\NormalTok{(res}\OperatorTok{.}\AttributeTok{ok}\NormalTok{) \{}
      \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Removido com sucesso!\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
      \FunctionTok{listar}\NormalTok{()}\OperatorTok{;}
\NormalTok{    \} }\ControlFlowTok{else}\NormalTok{ \{}
      \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Erro: \textquotesingle{}} \OperatorTok{+}\NormalTok{ (data}\OperatorTok{?.}\AttributeTok{error} \OperatorTok{||}\NormalTok{ res}\OperatorTok{.}\AttributeTok{statusText}\NormalTok{))}\OperatorTok{;}
\NormalTok{    \}}
\NormalTok{  \} }\ControlFlowTok{catch}\NormalTok{ (e) \{}
    \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Falha ao remover: \textquotesingle{}} \OperatorTok{+}\NormalTok{ e}\OperatorTok{.}\AttributeTok{message}\NormalTok{)}\OperatorTok{;}
\NormalTok{  \} }\ControlFlowTok{finally}\NormalTok{ \{}
    \FunctionTok{setBusy}\NormalTok{(}\KeywordTok{false}\NormalTok{)}\OperatorTok{;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{async} \KeywordTok{function} \FunctionTok{pesquisar}\NormalTok{() \{}
  \KeywordTok{const}\NormalTok{ termo }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}pesquisa\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{;}
  \FunctionTok{setBusy}\NormalTok{(}\KeywordTok{true}\NormalTok{)}\OperatorTok{;}
  \ControlFlowTok{try}\NormalTok{ \{}
    \KeywordTok{const}\NormalTok{ url }\OperatorTok{=}\NormalTok{ termo }\OperatorTok{?} \VerbatimStringTok{\textasciigrave{}}\SpecialCharTok{$\{}\NormalTok{API}\SpecialCharTok{\}}\VerbatimStringTok{?q=}\SpecialCharTok{$\{}\PreprocessorTok{encodeURIComponent}\NormalTok{(termo)}\SpecialCharTok{\}}\VerbatimStringTok{\textasciigrave{}} \OperatorTok{:}\NormalTok{ API}\OperatorTok{;}
    \KeywordTok{const}\NormalTok{ res }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{fetch}\NormalTok{(url)}\OperatorTok{;}
    \KeywordTok{const}\NormalTok{ data }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{readJsonSafe}\NormalTok{(res)}\OperatorTok{;}
    \ControlFlowTok{if}\NormalTok{(}\OperatorTok{!}\NormalTok{res}\OperatorTok{.}\AttributeTok{ok}\NormalTok{) }\ControlFlowTok{return} \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Falha na pesquisa: \textquotesingle{}} \OperatorTok{+}\NormalTok{ (data}\OperatorTok{?.}\AttributeTok{error} \OperatorTok{||}\NormalTok{ res}\OperatorTok{.}\AttributeTok{statusText}\NormalTok{))}\OperatorTok{;}
    \FunctionTok{preencheTabela}\NormalTok{(}\BuiltInTok{Array}\OperatorTok{.}\FunctionTok{isArray}\NormalTok{(data) }\OperatorTok{?}\NormalTok{ data }\OperatorTok{:}\NormalTok{ (data}\OperatorTok{?.}\AttributeTok{items} \OperatorTok{??}\NormalTok{ []))}\OperatorTok{;}
\NormalTok{  \} }\ControlFlowTok{catch}\NormalTok{ (e) \{}
    \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Falha na pesquisa: \textquotesingle{}} \OperatorTok{+}\NormalTok{ e}\OperatorTok{.}\AttributeTok{message}\NormalTok{)}\OperatorTok{;}
\NormalTok{  \} }\ControlFlowTok{finally}\NormalTok{ \{}
    \FunctionTok{setBusy}\NormalTok{(}\KeywordTok{false}\NormalTok{)}\OperatorTok{;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{async} \KeywordTok{function} \FunctionTok{listar}\NormalTok{() \{}
  \FunctionTok{setBusy}\NormalTok{(}\KeywordTok{true}\NormalTok{)}\OperatorTok{;}
  \ControlFlowTok{try}\NormalTok{ \{}
    \KeywordTok{const}\NormalTok{ res }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{fetch}\NormalTok{(API)}\OperatorTok{;}
    \KeywordTok{const}\NormalTok{ data }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{readJsonSafe}\NormalTok{(res)}\OperatorTok{;}
    \ControlFlowTok{if}\NormalTok{(}\OperatorTok{!}\NormalTok{res}\OperatorTok{.}\AttributeTok{ok}\NormalTok{) }\ControlFlowTok{return} \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Falha ao listar: \textquotesingle{}} \OperatorTok{+}\NormalTok{ (data}\OperatorTok{?.}\AttributeTok{error} \OperatorTok{||}\NormalTok{ res}\OperatorTok{.}\AttributeTok{statusText}\NormalTok{))}\OperatorTok{;}
    \FunctionTok{preencheTabela}\NormalTok{(}\BuiltInTok{Array}\OperatorTok{.}\FunctionTok{isArray}\NormalTok{(data) }\OperatorTok{?}\NormalTok{ data }\OperatorTok{:}\NormalTok{ (data}\OperatorTok{?.}\AttributeTok{items} \OperatorTok{??}\NormalTok{ []))}\OperatorTok{;}
\NormalTok{  \} }\ControlFlowTok{catch}\NormalTok{ (e) \{}
    \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Falha ao listar: \textquotesingle{}} \OperatorTok{+}\NormalTok{ e}\OperatorTok{.}\AttributeTok{message}\NormalTok{)}\OperatorTok{;}
\NormalTok{  \} }\ControlFlowTok{finally}\NormalTok{ \{}
    \FunctionTok{setBusy}\NormalTok{(}\KeywordTok{false}\NormalTok{)}\OperatorTok{;}
\NormalTok{  \}}
\NormalTok{\}}

\CommentTok{/* {-}{-}{-}{-}{-}{-}{-}{-}{-}{-} UI {-}{-}{-}{-}{-}{-}{-}{-}{-}{-} */}
\KeywordTok{function} \FunctionTok{preencheTabela}\NormalTok{(lista)\{}
  \KeywordTok{const}\NormalTok{ tbody }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}tabela\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
\NormalTok{  tbody}\OperatorTok{.}\AttributeTok{innerHTML} \OperatorTok{=} \StringTok{\textquotesingle{}\textquotesingle{}}\OperatorTok{;}
\NormalTok{  (lista }\OperatorTok{||}\NormalTok{ [])}\OperatorTok{.}\FunctionTok{forEach}\NormalTok{(p}\KeywordTok{=\textgreater{}}\NormalTok{\{}
    \KeywordTok{const}\NormalTok{ tr }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{createElement}\NormalTok{(}\StringTok{\textquotesingle{}tr\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
\NormalTok{    tr}\OperatorTok{.}\AttributeTok{innerHTML} \OperatorTok{=} \VerbatimStringTok{\textasciigrave{}}
\VerbatimStringTok{      \textless{}td\textgreater{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{cpf}\SpecialCharTok{\}}\VerbatimStringTok{\textless{}/td\textgreater{}}
\VerbatimStringTok{      \textless{}td\textgreater{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{foto} \OperatorTok{?} \VerbatimStringTok{\textasciigrave{}\textless{}img class="thumb" src="}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{foto}\SpecialCharTok{\}}\VerbatimStringTok{" alt="foto"\textgreater{}\textasciigrave{}} \OperatorTok{:} \StringTok{\textquotesingle{}\textquotesingle{}}\SpecialCharTok{\}}\VerbatimStringTok{\textless{}/td\textgreater{}}
\VerbatimStringTok{      \textless{}td\textgreater{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{nome}\SpecialCharTok{\}}\VerbatimStringTok{\textless{}/td\textgreater{}}
\VerbatimStringTok{      \textless{}td\textgreater{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{endereco}\SpecialCharTok{\}}\VerbatimStringTok{\textless{}/td\textgreater{}}
\VerbatimStringTok{      \textless{}td\textgreater{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{data\_nascimento}\SpecialCharTok{\}}\VerbatimStringTok{\textless{}/td\textgreater{}\textasciigrave{}}\OperatorTok{;}
\NormalTok{    tr}\OperatorTok{.}\AttributeTok{onclick} \OperatorTok{=}\NormalTok{ () }\KeywordTok{=\textgreater{}}\NormalTok{ \{}
      \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}cpf\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value} \OperatorTok{=}\NormalTok{ p}\OperatorTok{.}\AttributeTok{cpf}\OperatorTok{;}
      \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}nome\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value} \OperatorTok{=}\NormalTok{ p}\OperatorTok{.}\AttributeTok{nome}\OperatorTok{;}
      \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}endereco\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value} \OperatorTok{=}\NormalTok{ p}\OperatorTok{.}\AttributeTok{endereco}\OperatorTok{;}
      \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}data\_nascimento\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value} \OperatorTok{=}\NormalTok{ p}\OperatorTok{.}\AttributeTok{data\_nascimento}\OperatorTok{;}
\NormalTok{    \}}\OperatorTok{;}
\NormalTok{    tbody}\OperatorTok{.}\FunctionTok{appendChild}\NormalTok{(tr)}\OperatorTok{;}
\NormalTok{  \})}\OperatorTok{;}
\NormalTok{\}}

\FunctionTok{listar}\NormalTok{()}\OperatorTok{;}
\DataTypeTok{\textless{}/}\KeywordTok{script}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{body}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{html}\DataTypeTok{\textgreater{}}
\end{Highlighting}
\end{Shaded}

\subsection{Resultado final:}\label{resultado-final}

\subsubsection{Servidor de aplica√ß√£o Python ``Restful'' rodando}\label{servidor-de-aplicauxe7uxe3o-python-restful-rodando}

\pandocbounded{\includegraphics[keepaspectratio]{images/2025-09-01/10-servidor_rodando.jpg}}

\subsubsection{Cliente HTML + Javascript ( p√°gina EST√ÅTICA ) aberta no navegador}\label{cliente-html-javascript-puxe1gina-estuxe1tica-aberta-no-navegador}

\paragraph{Passo 1 - Preencher dados no formul√°rio do cliente}\label{passo-1---preencher-dados-no-formuluxe1rio-do-cliente}

Vamos inserir dados de exemplo no ``cliente WEB'' abaixo

\pandocbounded{\includegraphics[keepaspectratio]{images/2025-09-01/11-Cliente_Vazio.jpg}}

\paragraph{Passo 2 - Pressionar o Bot√£o INSERIR}\label{passo-2---pressionar-o-botuxe3o-inserir}

\pandocbounded{\includegraphics[keepaspectratio]{images/2025-09-01/11-Cliente_Vazio-02.jpg}}

OBS: Na tela do servidor, √© poss√≠vel verificar as opera√ß√µes HTTP Equivalentes ao SQL que foram executadas entre o Servidor e o Cliente

\pandocbounded{\includegraphics[keepaspectratio]{images/2025-09-01/10-servidor_rodando-01.jpg}}

\paragraph{Passo 3 - Verificar se o ``DBGRID'' do cliente ``espelhando'' a linha da tabela ``pessoas'' no esquema ``pessoasdb'' do SQBG MySQL}\label{passo-3---verificar-se-o-dbgrid-do-cliente-espelhando-a-linha-da-tabela-pessoas-no-esquema-pessoasdb-do-sqbg-mysql}

\pandocbounded{\includegraphics[keepaspectratio]{images/2025-09-01/11-Cliente_03-Preenchido.jpg}}

\paragraph{Passo 4 - Verificar na tabela pessoas a linha que o cliente preencheu atrav√©s da API da aplica√ß√£o cliente/servidor}\label{passo-4---verificar-na-tabela-pessoas-a-linha-que-o-cliente-preencheu-atravuxe9s-da-api-da-aplicauxe7uxe3o-clienteservidor}

\pandocbounded{\includegraphics[keepaspectratio]{images/2025-09-01/12-Dados_no_SGBD.jpg}}

\section{Feito}\label{feito-2}

\section{Exerc√≠cios}\label{exercuxedcios-3}

\subsubsection*{01/09/2025}\label{section-14}
\addcontentsline{toc}{subsubsection}{01/09/2025}

\subsubsection*{Professor Migu√©l Suares}\label{professor-miguuxe9l-suares-11}
\addcontentsline{toc}{subsubsection}{Professor Migu√©l Suares}

\subsection{Banco de Dados utilizado nos exemplos de aplica√ß√µes abaixo}\label{banco-de-dados-utilizado-nos-exemplos-de-aplicauxe7uxf5es-abaixo}

Crie o banco de dados abaixo em um servidor mysql 8 ou superior na sua m√°quina antes de testar os exemplos abaixo:

\begin{Shaded}
\begin{Highlighting}[]
\CommentTok{{-}{-} 1) CRIAR BANCO (ajuste o nome se quiser)}
\KeywordTok{CREATE} \KeywordTok{DATABASE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ pessoasdb}
  \DataTypeTok{CHARACTER} \KeywordTok{SET}\NormalTok{ utf8mb4}
\NormalTok{  COLLATE utf8mb4\_0900\_ai\_ci;}

\KeywordTok{USE}\NormalTok{ pessoasdb;}

\CommentTok{{-}{-} 2) (OPCIONAL) CRIAR USU√ÅRIO LOCAL E CONCEDER PERMISS√ïES}
\CommentTok{{-}{-}    Troque \textquotesingle{}MinhaSenhaForte\textquotesingle{} por uma senha segura}
\KeywordTok{CREATE} \FunctionTok{USER} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS} \StringTok{\textquotesingle{}pessoas\_user\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}localhost\textquotesingle{}} \KeywordTok{IDENTIFIED} \KeywordTok{BY} \StringTok{\textquotesingle{}MinhaSenhaForte\textquotesingle{}}\NormalTok{;}
\KeywordTok{GRANT} \KeywordTok{ALL} \KeywordTok{PRIVILEGES} \KeywordTok{ON}\NormalTok{ pessoasdb.}\OperatorTok{*} \KeywordTok{TO} \StringTok{\textquotesingle{}pessoas\_user\textquotesingle{}}\NormalTok{@}\StringTok{\textquotesingle{}localhost\textquotesingle{}}\NormalTok{;}
\KeywordTok{FLUSH} \KeywordTok{PRIVILEGES}\NormalTok{;}

\CommentTok{{-}{-} 3) TABELA \textquotesingle{}pessoas\textquotesingle{} COMPAT√çVEL COM O MODELO SQLAlchemy}
\CommentTok{{-}{-}    {-} cpf: chave prim√°ria (String(14))}
\CommentTok{{-}{-}    {-} nome, endereco, foto: TEXT}
\CommentTok{{-}{-}    {-} data\_nascimento: DATE}
\KeywordTok{CREATE} \KeywordTok{TABLE} \ControlFlowTok{IF} \KeywordTok{NOT} \KeywordTok{EXISTS}\NormalTok{ pessoas (}
\NormalTok{  cpf             }\DataTypeTok{VARCHAR}\NormalTok{(}\DecValTok{14}\NormalTok{)  }\KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{  nome            TEXT         }\KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{  endereco        TEXT         }\KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{  data\_nascimento }\DataTypeTok{DATE}         \KeywordTok{NOT} \KeywordTok{NULL}\NormalTok{,}
\NormalTok{  foto            TEXT         }\KeywordTok{NULL}\NormalTok{,}
  \KeywordTok{PRIMARY} \KeywordTok{KEY}\NormalTok{ (cpf)}
\NormalTok{) ENGINE}\OperatorTok{=}\NormalTok{InnoDB }\KeywordTok{DEFAULT}\NormalTok{ CHARSET}\OperatorTok{=}\NormalTok{utf8mb4 COLLATE}\OperatorTok{=}\NormalTok{utf8mb4\_0900\_ai\_ci;}

\CommentTok{{-}{-} 4) (OPCIONAL) √çNDICES PARA BUSCA}
\CommentTok{{-}{-} Seu endpoint usa LIKE/ILIKE em nome e cpf; cpf j√° √© PK.}
\CommentTok{{-}{-} Para acelerar buscas por nome com LIKE, crie um √≠ndice por prefixo.}
\CommentTok{{-}{-} OBS: √≠ndices em TEXT precisam de comprimento; 128 costuma ser um bom compromisso.}
\KeywordTok{CREATE} \KeywordTok{INDEX}\NormalTok{ idx\_pessoas\_nome\_prefix }\KeywordTok{ON}\NormalTok{ pessoas (nome(}\DecValTok{128}\NormalTok{));}
\end{Highlighting}
\end{Shaded}

\section{Exemplo 01}\label{exemplo-01}

servidor SUPABASE \ldots. a fazer

\section{Exemplo 02 - SERVIDOR DE APLICA√á√ÉO PYTHON}\label{exemplo-02---servidor-de-aplicauxe7uxe3o-python}

\pandocbounded{\includegraphics[keepaspectratio]{images/clipboard-3666283714.png}}

Neste exemplo, temos uma aplica√ß√£o cliente feita html e javascript

A interface do Cliente √© feita em HTML5

A conex√£o com o servidor √© feita pelo javascript incorporado no HTML:

CRUD no cliente √© feito peloa javascript utilizando metodologia Restful sobre protocolo HTTP 2.0

O servidor Restful √© feito em linguagem PYTHON

OBS: N√ÉO TEMOS CONTROLE DE SESS√ÉO DE CLIENTE IMPLEMENTADO.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{python }\AttributeTok{{-}m}\NormalTok{ pip install {-}}\AttributeTok{{-}user}\NormalTok{ {-}}\AttributeTok{{-}upgrade}\NormalTok{ flask flask}\AttributeTok{{-}cors}\NormalTok{ sqlalchemy psycopg2}\AttributeTok{{-}binary}
\end{Highlighting}
\end{Shaded}

\subsection{Servidor python}\label{servidor-python}

\begin{Shaded}
\begin{Highlighting}[]
\ImportTok{from}\NormalTok{ flask }\ImportTok{import}\NormalTok{ Flask, request, jsonify}
\ImportTok{from}\NormalTok{ flask\_cors }\ImportTok{import}\NormalTok{ CORS}
\ImportTok{from}\NormalTok{ sqlalchemy }\ImportTok{import}\NormalTok{ create\_engine, Column, String, Date, Text}
\ImportTok{from}\NormalTok{ sqlalchemy.ext.declarative }\ImportTok{import}\NormalTok{ declarative\_base}
\ImportTok{from}\NormalTok{ sqlalchemy.orm }\ImportTok{import}\NormalTok{ sessionmaker}

\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\CommentTok{\# Configura√ß√£o do Flask e CORS}
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\NormalTok{app }\OperatorTok{=}\NormalTok{ Flask(}\VariableTok{\_\_name\_\_}\NormalTok{)}
\NormalTok{CORS(app)}

\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\CommentTok{\# Configura√ß√£o do banco PostgreSQL}
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\NormalTok{DATABASE\_URL }\OperatorTok{=} \StringTok{"postgresql://postgres:MinhaSuperSenha@db.pbbtfwmydxmxdibmtbqq.supabase.co:5432/postgres"}

\NormalTok{engine }\OperatorTok{=}\NormalTok{ create\_engine(DATABASE\_URL)}
\NormalTok{SessionLocal }\OperatorTok{=}\NormalTok{ sessionmaker(bind}\OperatorTok{=}\NormalTok{engine)}
\NormalTok{Base }\OperatorTok{=}\NormalTok{ declarative\_base()}

\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\CommentTok{\# Modelo Pessoa}
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\KeywordTok{class}\NormalTok{ Pessoa(Base):}
\NormalTok{    \_\_tablename\_\_ }\OperatorTok{=} \StringTok{"pessoas"}
\NormalTok{    cpf }\OperatorTok{=}\NormalTok{ Column(String(}\DecValTok{14}\NormalTok{), primary\_key}\OperatorTok{=}\VariableTok{True}\NormalTok{)}
\NormalTok{    nome }\OperatorTok{=}\NormalTok{ Column(Text, nullable}\OperatorTok{=}\VariableTok{False}\NormalTok{)}
\NormalTok{    endereco }\OperatorTok{=}\NormalTok{ Column(Text, nullable}\OperatorTok{=}\VariableTok{False}\NormalTok{)}
\NormalTok{    data\_nascimento }\OperatorTok{=}\NormalTok{ Column(Date, nullable}\OperatorTok{=}\VariableTok{False}\NormalTok{)}
\NormalTok{    foto }\OperatorTok{=}\NormalTok{ Column(Text)  }\CommentTok{\# Base64 ou URL}

\CommentTok{\# Cria a tabela se n√£o existir}
\NormalTok{Base.metadata.create\_all(engine)}

\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\CommentTok{\# CRUD}
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}

\CommentTok{\# Listar todas as pessoas ou pesquisar por termo}
\AttributeTok{@app.route}\NormalTok{(}\StringTok{\textquotesingle{}/pessoas\textquotesingle{}}\NormalTok{, methods}\OperatorTok{=}\NormalTok{[}\StringTok{\textquotesingle{}GET\textquotesingle{}}\NormalTok{])}
\KeywordTok{def}\NormalTok{ listar():}
\NormalTok{    termo }\OperatorTok{=}\NormalTok{ request.args.get(}\StringTok{\textquotesingle{}q\textquotesingle{}}\NormalTok{, }\StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{).lower()}
\NormalTok{    session }\OperatorTok{=}\NormalTok{ SessionLocal()}
    \ControlFlowTok{if}\NormalTok{ termo:}
\NormalTok{        pessoas }\OperatorTok{=}\NormalTok{ session.query(Pessoa).}\BuiltInTok{filter}\NormalTok{(}
\NormalTok{            (Pessoa.nome.ilike(}\SpecialStringTok{f"\%}\SpecialCharTok{\{}\NormalTok{termo}\SpecialCharTok{\}}\SpecialStringTok{\%"}\NormalTok{)) }\OperatorTok{|}\NormalTok{ (Pessoa.cpf.ilike(}\SpecialStringTok{f"\%}\SpecialCharTok{\{}\NormalTok{termo}\SpecialCharTok{\}}\SpecialStringTok{\%"}\NormalTok{))}
\NormalTok{        ).}\BuiltInTok{all}\NormalTok{()}
    \ControlFlowTok{else}\NormalTok{:}
\NormalTok{        pessoas }\OperatorTok{=}\NormalTok{ session.query(Pessoa).}\BuiltInTok{all}\NormalTok{()}
\NormalTok{    session.close()}
    \ControlFlowTok{return}\NormalTok{ jsonify([\{}
        \StringTok{"cpf"}\NormalTok{: p.cpf,}
        \StringTok{"nome"}\NormalTok{: p.nome,}
        \StringTok{"endereco"}\NormalTok{: p.endereco,}
        \StringTok{"data\_nascimento"}\NormalTok{: p.data\_nascimento.isoformat(),}
        \StringTok{"foto"}\NormalTok{: p.foto}
\NormalTok{    \} }\ControlFlowTok{for}\NormalTok{ p }\KeywordTok{in}\NormalTok{ pessoas])}

\CommentTok{\# Inserir nova pessoa}
\AttributeTok{@app.route}\NormalTok{(}\StringTok{\textquotesingle{}/pessoas\textquotesingle{}}\NormalTok{, methods}\OperatorTok{=}\NormalTok{[}\StringTok{\textquotesingle{}POST\textquotesingle{}}\NormalTok{])}
\KeywordTok{def}\NormalTok{ inserir():}
\NormalTok{    dados }\OperatorTok{=}\NormalTok{ request.get\_json()}
\NormalTok{    session }\OperatorTok{=}\NormalTok{ SessionLocal()}
    \ControlFlowTok{if}\NormalTok{ session.query(Pessoa).filter\_by(cpf}\OperatorTok{=}\NormalTok{dados[}\StringTok{\textquotesingle{}cpf\textquotesingle{}}\NormalTok{]).first():}
\NormalTok{        session.close()}
        \ControlFlowTok{return}\NormalTok{ jsonify(\{}\StringTok{"error"}\NormalTok{: }\StringTok{"CPF j√° cadastrado"}\NormalTok{\}), }\DecValTok{400}
\NormalTok{    pessoa }\OperatorTok{=}\NormalTok{ Pessoa(}
\NormalTok{        cpf}\OperatorTok{=}\NormalTok{dados[}\StringTok{\textquotesingle{}cpf\textquotesingle{}}\NormalTok{],}
\NormalTok{        nome}\OperatorTok{=}\NormalTok{dados[}\StringTok{\textquotesingle{}nome\textquotesingle{}}\NormalTok{],}
\NormalTok{        endereco}\OperatorTok{=}\NormalTok{dados[}\StringTok{\textquotesingle{}endereco\textquotesingle{}}\NormalTok{],}
\NormalTok{        data\_nascimento}\OperatorTok{=}\NormalTok{dados[}\StringTok{\textquotesingle{}data\_nascimento\textquotesingle{}}\NormalTok{],}
\NormalTok{        foto}\OperatorTok{=}\NormalTok{dados.get(}\StringTok{\textquotesingle{}foto\textquotesingle{}}\NormalTok{)}
\NormalTok{    )}
\NormalTok{    session.add(pessoa)}
\NormalTok{    session.commit()}
\NormalTok{    session.close()}
    \ControlFlowTok{return}\NormalTok{ jsonify(\{}\StringTok{"message"}\NormalTok{: }\StringTok{"Inserido com sucesso"}\NormalTok{\}), }\DecValTok{201}

\CommentTok{\# Alterar pessoa}
\AttributeTok{@app.route}\NormalTok{(}\StringTok{\textquotesingle{}/pessoas/\textless{}cpf\textgreater{}\textquotesingle{}}\NormalTok{, methods}\OperatorTok{=}\NormalTok{[}\StringTok{\textquotesingle{}PUT\textquotesingle{}}\NormalTok{])}
\KeywordTok{def}\NormalTok{ alterar(cpf):}
\NormalTok{    dados }\OperatorTok{=}\NormalTok{ request.get\_json()}
\NormalTok{    session }\OperatorTok{=}\NormalTok{ SessionLocal()}
\NormalTok{    pessoa }\OperatorTok{=}\NormalTok{ session.query(Pessoa).filter\_by(cpf}\OperatorTok{=}\NormalTok{cpf).first()}
    \ControlFlowTok{if} \KeywordTok{not}\NormalTok{ pessoa:}
\NormalTok{        session.close()}
        \ControlFlowTok{return}\NormalTok{ jsonify(\{}\StringTok{"error"}\NormalTok{: }\StringTok{"CPF n√£o encontrado"}\NormalTok{\}), }\DecValTok{404}
\NormalTok{    pessoa.nome }\OperatorTok{=}\NormalTok{ dados.get(}\StringTok{\textquotesingle{}nome\textquotesingle{}}\NormalTok{, pessoa.nome)}
\NormalTok{    pessoa.endereco }\OperatorTok{=}\NormalTok{ dados.get(}\StringTok{\textquotesingle{}endereco\textquotesingle{}}\NormalTok{, pessoa.endereco)}
\NormalTok{    pessoa.data\_nascimento }\OperatorTok{=}\NormalTok{ dados.get(}\StringTok{\textquotesingle{}data\_nascimento\textquotesingle{}}\NormalTok{, pessoa.data\_nascimento)}
\NormalTok{    pessoa.foto }\OperatorTok{=}\NormalTok{ dados.get(}\StringTok{\textquotesingle{}foto\textquotesingle{}}\NormalTok{, pessoa.foto)}
\NormalTok{    session.commit()}
\NormalTok{    session.close()}
    \ControlFlowTok{return}\NormalTok{ jsonify(\{}\StringTok{"message"}\NormalTok{: }\StringTok{"Alterado com sucesso"}\NormalTok{\})}

\CommentTok{\# Remover pessoa}
\AttributeTok{@app.route}\NormalTok{(}\StringTok{\textquotesingle{}/pessoas/\textless{}cpf\textgreater{}\textquotesingle{}}\NormalTok{, methods}\OperatorTok{=}\NormalTok{[}\StringTok{\textquotesingle{}DELETE\textquotesingle{}}\NormalTok{])}
\KeywordTok{def}\NormalTok{ remover(cpf):}
\NormalTok{    session }\OperatorTok{=}\NormalTok{ SessionLocal()}
\NormalTok{    pessoa }\OperatorTok{=}\NormalTok{ session.query(Pessoa).filter\_by(cpf}\OperatorTok{=}\NormalTok{cpf).first()}
    \ControlFlowTok{if} \KeywordTok{not}\NormalTok{ pessoa:}
\NormalTok{        session.close()}
        \ControlFlowTok{return}\NormalTok{ jsonify(\{}\StringTok{"error"}\NormalTok{: }\StringTok{"CPF n√£o encontrado"}\NormalTok{\}), }\DecValTok{404}
\NormalTok{    session.delete(pessoa)}
\NormalTok{    session.commit()}
\NormalTok{    session.close()}
    \ControlFlowTok{return}\NormalTok{ jsonify(\{}\StringTok{"message"}\NormalTok{: }\StringTok{"Removido com sucesso"}\NormalTok{\})}

\CommentTok{\# Buscar pessoa por CPF}
\AttributeTok{@app.route}\NormalTok{(}\StringTok{\textquotesingle{}/pessoas/\textless{}cpf\textgreater{}\textquotesingle{}}\NormalTok{, methods}\OperatorTok{=}\NormalTok{[}\StringTok{\textquotesingle{}GET\textquotesingle{}}\NormalTok{])}
\KeywordTok{def}\NormalTok{ buscar(cpf):}
\NormalTok{    session }\OperatorTok{=}\NormalTok{ SessionLocal()}
\NormalTok{    pessoa }\OperatorTok{=}\NormalTok{ session.query(Pessoa).filter\_by(cpf}\OperatorTok{=}\NormalTok{cpf).first()}
\NormalTok{    session.close()}
    \ControlFlowTok{if} \KeywordTok{not}\NormalTok{ pessoa:}
        \ControlFlowTok{return}\NormalTok{ jsonify(\{}\StringTok{"error"}\NormalTok{: }\StringTok{"CPF n√£o encontrado"}\NormalTok{\}), }\DecValTok{404}
    \ControlFlowTok{return}\NormalTok{ jsonify(\{}
        \StringTok{"cpf"}\NormalTok{: pessoa.cpf,}
        \StringTok{"nome"}\NormalTok{: pessoa.nome,}
        \StringTok{"endereco"}\NormalTok{: pessoa.endereco,}
        \StringTok{"data\_nascimento"}\NormalTok{: pessoa.data\_nascimento.isoformat(),}
        \StringTok{"foto"}\NormalTok{: pessoa.foto}
\NormalTok{    \})}

\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\CommentTok{\# Inicia o servidor}
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\ControlFlowTok{if} \VariableTok{\_\_name\_\_} \OperatorTok{==} \StringTok{\textquotesingle{}\_\_main\_\_\textquotesingle{}}\NormalTok{:}
\NormalTok{    app.run(debug}\OperatorTok{=}\VariableTok{True}\NormalTok{, port}\OperatorTok{=}\DecValTok{5000}\NormalTok{)}
\end{Highlighting}
\end{Shaded}

servidor estar√° rodando na porta 5000 e EXP√ïE A API de opera√ß√µes na URI \url{http://localhost:5000/pessoas} sem senha

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{http}\InformationTok{:}\ErrorTok{//localhost:5000/pessoas}
\end{Highlighting}
\end{Shaded}

\subsection{Cliente HTML (conex√£o Restful)}\label{cliente-html-conexuxe3o-restful}

crie o arquivo index.html e abra-o no navegador

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{\textless{}!DOCTYPE}\NormalTok{ html}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{html}\OtherTok{ lang}\OperatorTok{=}\StringTok{"pt{-}BR"}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{head}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{meta}\OtherTok{ charset}\OperatorTok{=}\StringTok{"UTF{-}8"}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{title}\DataTypeTok{\textgreater{}}\NormalTok{Cadastro de Pessoas {-} Flask/MySQL}\DataTypeTok{\textless{}/}\KeywordTok{title}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{style}\DataTypeTok{\textgreater{}}
\NormalTok{  body \{ }\KeywordTok{font{-}family}\CharTok{:} \DecValTok{system{-}ui}\OperatorTok{,} \DecValTok{{-}apple{-}system}\OperatorTok{,} \DecValTok{Segoe UI}\OperatorTok{,} \DecValTok{Roboto}\OperatorTok{,} \DecValTok{Arial}\OperatorTok{;} \KeywordTok{max{-}width}\CharTok{:} \DecValTok{980}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{margin}\CharTok{:} \DecValTok{24}\DataTypeTok{px} \BuiltInTok{auto}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  label \{ }\KeywordTok{display}\CharTok{:} \DecValTok{block}\OperatorTok{;} \KeywordTok{margin{-}top}\CharTok{:} \DecValTok{10}\DataTypeTok{px}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  button \{ }\KeywordTok{margin{-}top}\CharTok{:} \DecValTok{10}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{margin{-}right}\CharTok{:} \DecValTok{6}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{padding}\CharTok{:} \DecValTok{8}\DataTypeTok{px} \DecValTok{12}\DataTypeTok{px}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  table \{ }\KeywordTok{border{-}collapse}\CharTok{:} \DecValTok{collapse}\OperatorTok{;} \KeywordTok{width}\CharTok{:}\DecValTok{100}\DataTypeTok{\%}\OperatorTok{;} \KeywordTok{margin{-}top}\CharTok{:}\DecValTok{20}\DataTypeTok{px}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  th}\OperatorTok{,}\NormalTok{ td \{ }\KeywordTok{border}\CharTok{:}\DecValTok{1}\DataTypeTok{px} \DecValTok{solid} \ConstantTok{\#ddd}\OperatorTok{;} \KeywordTok{padding}\CharTok{:}\DecValTok{8}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{text{-}align}\CharTok{:}\DecValTok{left}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  img}\FunctionTok{.thumb}\NormalTok{ \{ }\KeywordTok{width}\CharTok{:}\DecValTok{60}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{height}\CharTok{:}\DecValTok{60}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{object{-}fit}\CharTok{:}\DecValTok{cover}\OperatorTok{;} \KeywordTok{border{-}radius}\CharTok{:}\DecValTok{4}\DataTypeTok{px}\OperatorTok{;}\NormalTok{ \}}
  \FunctionTok{.row}\NormalTok{ \{ }\KeywordTok{display}\CharTok{:}\DecValTok{flex}\OperatorTok{;} \KeywordTok{gap}\CharTok{:}\DecValTok{8}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{align{-}items}\CharTok{:}\DecValTok{center}\OperatorTok{;} \KeywordTok{flex{-}wrap}\CharTok{:}\DecValTok{wrap}\OperatorTok{;}\NormalTok{ \}}
\DataTypeTok{\textless{}/}\KeywordTok{style}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{head}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{body}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{h1}\DataTypeTok{\textgreater{}}\NormalTok{Cadastro de Pessoas (Flask/MySQL)}\DataTypeTok{\textless{}/}\KeywordTok{h1}\DataTypeTok{\textgreater{}}

\DataTypeTok{\textless{}}\KeywordTok{form}\OtherTok{ id}\OperatorTok{=}\StringTok{"formPessoa"}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{label}\DataTypeTok{\textgreater{}}\NormalTok{CPF (chave prim√°ria): }\DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ id}\OperatorTok{=}\StringTok{"cpf"}\OtherTok{ required}\DataTypeTok{\textgreater{}\textless{}/}\KeywordTok{label}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{label}\DataTypeTok{\textgreater{}}\NormalTok{Nome: }\DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ id}\OperatorTok{=}\StringTok{"nome"}\OtherTok{ required}\DataTypeTok{\textgreater{}\textless{}/}\KeywordTok{label}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{label}\DataTypeTok{\textgreater{}}\NormalTok{Endere√ßo: }\DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ id}\OperatorTok{=}\StringTok{"endereco"}\OtherTok{ required}\DataTypeTok{\textgreater{}\textless{}/}\KeywordTok{label}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{label}\DataTypeTok{\textgreater{}}\NormalTok{Data Nasc.: }\DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ type}\OperatorTok{=}\StringTok{"date"}\OtherTok{ id}\OperatorTok{=}\StringTok{"data\_nascimento"}\OtherTok{ required}\DataTypeTok{\textgreater{}\textless{}/}\KeywordTok{label}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{label}\DataTypeTok{\textgreater{}}\NormalTok{Foto: }\DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ type}\OperatorTok{=}\StringTok{"file"}\OtherTok{ id}\OperatorTok{=}\StringTok{"foto"}\OtherTok{ accept}\OperatorTok{=}\StringTok{"image/*"}\DataTypeTok{\textgreater{}\textless{}/}\KeywordTok{label}\DataTypeTok{\textgreater{}}

  \DataTypeTok{\textless{}}\KeywordTok{div}\OtherTok{ class}\OperatorTok{=}\StringTok{"row"}\DataTypeTok{\textgreater{}}
    \DataTypeTok{\textless{}}\KeywordTok{button}\OtherTok{ type}\OperatorTok{=}\StringTok{"button"}\OtherTok{ id}\OperatorTok{=}\StringTok{"btnInserir"}\OtherTok{ onclick}\OperatorTok{=}\StringTok{"inserir()"}\DataTypeTok{\textgreater{}}\NormalTok{Inserir}\DataTypeTok{\textless{}/}\KeywordTok{button}\DataTypeTok{\textgreater{}}
    \DataTypeTok{\textless{}}\KeywordTok{button}\OtherTok{ type}\OperatorTok{=}\StringTok{"button"}\OtherTok{ id}\OperatorTok{=}\StringTok{"btnAlterar"}\OtherTok{ onclick}\OperatorTok{=}\StringTok{"alterar()"}\DataTypeTok{\textgreater{}}\NormalTok{Alterar}\DataTypeTok{\textless{}/}\KeywordTok{button}\DataTypeTok{\textgreater{}}
    \DataTypeTok{\textless{}}\KeywordTok{button}\OtherTok{ type}\OperatorTok{=}\StringTok{"button"}\OtherTok{ id}\OperatorTok{=}\StringTok{"btnRemover"}\OtherTok{ onclick}\OperatorTok{=}\StringTok{"remover()"}\DataTypeTok{\textgreater{}}\NormalTok{Remover}\DataTypeTok{\textless{}/}\KeywordTok{button}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}/}\KeywordTok{div}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{form}\DataTypeTok{\textgreater{}}

\DataTypeTok{\textless{}}\KeywordTok{h2}\DataTypeTok{\textgreater{}}\NormalTok{Pesquisar}\DataTypeTok{\textless{}/}\KeywordTok{h2}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{div}\OtherTok{ class}\OperatorTok{=}\StringTok{"row"}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ id}\OperatorTok{=}\StringTok{"pesquisa"}\OtherTok{ placeholder}\OperatorTok{=}\StringTok{"Digite nome ou CPF"}\OtherTok{ style}\OperatorTok{=}\StringTok{"flex:1"}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{button}\OtherTok{ type}\OperatorTok{=}\StringTok{"button"}\OtherTok{ id}\OperatorTok{=}\StringTok{"btnPesquisar"}\OtherTok{ onclick}\OperatorTok{=}\StringTok{"pesquisar()"}\DataTypeTok{\textgreater{}}\NormalTok{Pesquisar}\DataTypeTok{\textless{}/}\KeywordTok{button}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{button}\OtherTok{ type}\OperatorTok{=}\StringTok{"button"}\OtherTok{ onclick}\OperatorTok{=}\StringTok{"listar()"}\DataTypeTok{\textgreater{}}\NormalTok{Listar tudo}\DataTypeTok{\textless{}/}\KeywordTok{button}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{div}\DataTypeTok{\textgreater{}}

\DataTypeTok{\textless{}}\KeywordTok{table}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{thead}\DataTypeTok{\textgreater{}}
    \DataTypeTok{\textless{}}\KeywordTok{tr}\DataTypeTok{\textgreater{}}
      \DataTypeTok{\textless{}}\KeywordTok{th}\DataTypeTok{\textgreater{}}\NormalTok{CPF}\DataTypeTok{\textless{}/}\KeywordTok{th}\DataTypeTok{\textgreater{}\textless{}}\KeywordTok{th}\DataTypeTok{\textgreater{}}\NormalTok{Foto}\DataTypeTok{\textless{}/}\KeywordTok{th}\DataTypeTok{\textgreater{}\textless{}}\KeywordTok{th}\DataTypeTok{\textgreater{}}\NormalTok{Nome}\DataTypeTok{\textless{}/}\KeywordTok{th}\DataTypeTok{\textgreater{}}
      \DataTypeTok{\textless{}}\KeywordTok{th}\DataTypeTok{\textgreater{}}\NormalTok{Endere√ßo}\DataTypeTok{\textless{}/}\KeywordTok{th}\DataTypeTok{\textgreater{}\textless{}}\KeywordTok{th}\DataTypeTok{\textgreater{}}\NormalTok{Nascimento}\DataTypeTok{\textless{}/}\KeywordTok{th}\DataTypeTok{\textgreater{}}
    \DataTypeTok{\textless{}/}\KeywordTok{tr}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}/}\KeywordTok{thead}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{tbody}\OtherTok{ id}\OperatorTok{=}\StringTok{"tabela"}\DataTypeTok{\textgreater{}\textless{}/}\KeywordTok{tbody}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{table}\DataTypeTok{\textgreater{}}

\DataTypeTok{\textless{}}\KeywordTok{script}\DataTypeTok{\textgreater{}}
\KeywordTok{const}\NormalTok{ API }\OperatorTok{=} \StringTok{\textquotesingle{}http://localhost:5000/pessoas\textquotesingle{}}\OperatorTok{;}

\CommentTok{/* {-}{-}{-}{-}{-}{-}{-}{-}{-}{-} Helpers {-}{-}{-}{-}{-}{-}{-}{-}{-}{-} */}
\KeywordTok{function} \FunctionTok{setBusy}\NormalTok{(busy) \{}
  \ControlFlowTok{for}\NormalTok{ (}\KeywordTok{const}\NormalTok{ id }\KeywordTok{of}\NormalTok{ [}\StringTok{\textquotesingle{}btnInserir\textquotesingle{}}\OperatorTok{,}\StringTok{\textquotesingle{}btnAlterar\textquotesingle{}}\OperatorTok{,}\StringTok{\textquotesingle{}btnRemover\textquotesingle{}}\OperatorTok{,}\StringTok{\textquotesingle{}btnPesquisar\textquotesingle{}}\NormalTok{]) \{}
    \KeywordTok{const}\NormalTok{ el }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(id)}\OperatorTok{;}
    \ControlFlowTok{if}\NormalTok{ (el) el}\OperatorTok{.}\AttributeTok{disabled} \OperatorTok{=}\NormalTok{ busy}\OperatorTok{;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{function} \FunctionTok{validaCampos}\NormalTok{() \{}
  \KeywordTok{const}\NormalTok{ campos }\OperatorTok{=}\NormalTok{ [}\StringTok{\textquotesingle{}cpf\textquotesingle{}}\OperatorTok{,}\StringTok{\textquotesingle{}nome\textquotesingle{}}\OperatorTok{,}\StringTok{\textquotesingle{}endereco\textquotesingle{}}\OperatorTok{,}\StringTok{\textquotesingle{}data\_nascimento\textquotesingle{}}\NormalTok{]}\OperatorTok{;}
  \ControlFlowTok{for}\NormalTok{ (}\KeywordTok{const}\NormalTok{ id }\KeywordTok{of}\NormalTok{ campos) \{}
    \KeywordTok{const}\NormalTok{ valor }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(id)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{;}
    \ControlFlowTok{if}\NormalTok{ (}\OperatorTok{!}\NormalTok{valor) \{}
      \FunctionTok{alert}\NormalTok{(}\VerbatimStringTok{\textasciigrave{}O campo "}\SpecialCharTok{$\{}\NormalTok{id}\SpecialCharTok{\}}\VerbatimStringTok{" n√£o pode ficar em branco.\textasciigrave{}}\NormalTok{)}\OperatorTok{;}
      \ControlFlowTok{return} \KeywordTok{false}\OperatorTok{;}
\NormalTok{    \}}
\NormalTok{  \}}
  \ControlFlowTok{return} \KeywordTok{true}\OperatorTok{;}
\NormalTok{\}}

\KeywordTok{function} \FunctionTok{getFotoBase64}\NormalTok{() \{}
  \KeywordTok{const}\NormalTok{ file }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}foto\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{files}\NormalTok{[}\DecValTok{0}\NormalTok{]}\OperatorTok{;}
  \ControlFlowTok{if}\NormalTok{(}\OperatorTok{!}\NormalTok{file) }\ControlFlowTok{return} \BuiltInTok{Promise}\OperatorTok{.}\FunctionTok{resolve}\NormalTok{(}\StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
  \ControlFlowTok{return} \KeywordTok{new} \BuiltInTok{Promise}\NormalTok{((resolve}\OperatorTok{,}\NormalTok{reject)}\KeywordTok{=\textgreater{}}\NormalTok{\{}
    \KeywordTok{const}\NormalTok{ reader }\OperatorTok{=} \KeywordTok{new} \BuiltInTok{FileReader}\NormalTok{()}\OperatorTok{;}
\NormalTok{    reader}\OperatorTok{.}\AttributeTok{onload} \OperatorTok{=}\NormalTok{ () }\KeywordTok{=\textgreater{}} \FunctionTok{resolve}\NormalTok{(reader}\OperatorTok{.}\AttributeTok{result}\NormalTok{)}\OperatorTok{;}
\NormalTok{    reader}\OperatorTok{.}\AttributeTok{onerror} \OperatorTok{=}\NormalTok{ reject}\OperatorTok{;}
\NormalTok{    reader}\OperatorTok{.}\FunctionTok{readAsDataURL}\NormalTok{(file)}\OperatorTok{;}
\NormalTok{  \})}\OperatorTok{;}
\NormalTok{\}}

\KeywordTok{function} \FunctionTok{coletaDados}\NormalTok{(base64Foto)\{}
  \ControlFlowTok{return}\NormalTok{ \{}
    \DataTypeTok{cpf}\OperatorTok{:} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}cpf\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{,}
    \DataTypeTok{nome}\OperatorTok{:} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}nome\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{,}
    \DataTypeTok{endereco}\OperatorTok{:} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}endereco\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{,}
    \DataTypeTok{data\_nascimento}\OperatorTok{:} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}data\_nascimento\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{,} \CommentTok{// YYYY{-}MM{-}DD}
    \DataTypeTok{foto}\OperatorTok{:}\NormalTok{ base64Foto }\OperatorTok{||} \StringTok{\textquotesingle{}\textquotesingle{}}
\NormalTok{  \}}\OperatorTok{;}
\NormalTok{\}}

\KeywordTok{async} \KeywordTok{function} \FunctionTok{readJsonSafe}\NormalTok{(res) \{}
  \KeywordTok{const}\NormalTok{ ct }\OperatorTok{=}\NormalTok{ res}\OperatorTok{.}\AttributeTok{headers}\OperatorTok{.}\FunctionTok{get}\NormalTok{(}\StringTok{\textquotesingle{}content{-}type\textquotesingle{}}\NormalTok{) }\OperatorTok{||} \StringTok{\textquotesingle{}\textquotesingle{}}\OperatorTok{;}
  \ControlFlowTok{if}\NormalTok{ (ct}\OperatorTok{.}\FunctionTok{includes}\NormalTok{(}\StringTok{\textquotesingle{}application/json\textquotesingle{}}\NormalTok{)) \{}
    \ControlFlowTok{try}\NormalTok{ \{ }\ControlFlowTok{return} \ControlFlowTok{await}\NormalTok{ res}\OperatorTok{.}\FunctionTok{json}\NormalTok{()}\OperatorTok{;}\NormalTok{ \} }\ControlFlowTok{catch}\NormalTok{ \{ }\ControlFlowTok{return} \KeywordTok{null}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  \}}
  \ControlFlowTok{return} \KeywordTok{null}\OperatorTok{;}
\NormalTok{\}}

\CommentTok{/* {-}{-}{-}{-}{-}{-}{-}{-}{-}{-} CRUD {-}{-}{-}{-}{-}{-}{-}{-}{-}{-} */}
\KeywordTok{async} \KeywordTok{function} \FunctionTok{inserir}\NormalTok{() \{}
  \ControlFlowTok{if}\NormalTok{(}\OperatorTok{!}\FunctionTok{validaCampos}\NormalTok{()) }\ControlFlowTok{return}\OperatorTok{;}
  \FunctionTok{setBusy}\NormalTok{(}\KeywordTok{true}\NormalTok{)}\OperatorTok{;}
  \ControlFlowTok{try}\NormalTok{ \{}
    \KeywordTok{const}\NormalTok{ base64 }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{getFotoBase64}\NormalTok{()}\OperatorTok{;}
    \KeywordTok{const}\NormalTok{ pessoa }\OperatorTok{=} \FunctionTok{coletaDados}\NormalTok{(base64)}\OperatorTok{;}

    \KeywordTok{const}\NormalTok{ res }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{fetch}\NormalTok{(API}\OperatorTok{,}\NormalTok{ \{}
      \DataTypeTok{method}\OperatorTok{:} \StringTok{\textquotesingle{}POST\textquotesingle{}}\OperatorTok{,}
      \DataTypeTok{headers}\OperatorTok{:}\NormalTok{ \{}\StringTok{\textquotesingle{}Content{-}Type\textquotesingle{}}\OperatorTok{:} \StringTok{\textquotesingle{}application/json\textquotesingle{}}\NormalTok{\}}\OperatorTok{,}
      \DataTypeTok{body}\OperatorTok{:} \BuiltInTok{JSON}\OperatorTok{.}\FunctionTok{stringify}\NormalTok{(pessoa)}
\NormalTok{    \})}\OperatorTok{;}
    \KeywordTok{const}\NormalTok{ data }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{readJsonSafe}\NormalTok{(res)}\OperatorTok{;}
    \ControlFlowTok{if}\NormalTok{(res}\OperatorTok{.}\AttributeTok{ok}\NormalTok{) \{}
      \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Inserido com sucesso!\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
      \FunctionTok{listar}\NormalTok{()}\OperatorTok{;}
      \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}formPessoa\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\FunctionTok{reset}\NormalTok{()}\OperatorTok{;}
\NormalTok{    \} }\ControlFlowTok{else}\NormalTok{ \{}
      \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Erro: \textquotesingle{}} \OperatorTok{+}\NormalTok{ (data}\OperatorTok{?.}\AttributeTok{error} \OperatorTok{||}\NormalTok{ res}\OperatorTok{.}\AttributeTok{statusText}\NormalTok{))}\OperatorTok{;}
\NormalTok{    \}}
\NormalTok{  \} }\ControlFlowTok{catch}\NormalTok{ (e) \{}
    \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Falha ao inserir: \textquotesingle{}} \OperatorTok{+}\NormalTok{ e}\OperatorTok{.}\AttributeTok{message}\NormalTok{)}\OperatorTok{;}
\NormalTok{  \} }\ControlFlowTok{finally}\NormalTok{ \{}
    \FunctionTok{setBusy}\NormalTok{(}\KeywordTok{false}\NormalTok{)}\OperatorTok{;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{async} \KeywordTok{function} \FunctionTok{alterar}\NormalTok{() \{}
  \ControlFlowTok{if}\NormalTok{(}\OperatorTok{!}\FunctionTok{validaCampos}\NormalTok{()) }\ControlFlowTok{return}\OperatorTok{;}
  \KeywordTok{const}\NormalTok{ cpf }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}cpf\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{;}
  \FunctionTok{setBusy}\NormalTok{(}\KeywordTok{true}\NormalTok{)}\OperatorTok{;}
  \ControlFlowTok{try}\NormalTok{ \{}
    \KeywordTok{const}\NormalTok{ base64 }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{getFotoBase64}\NormalTok{()}\OperatorTok{;}
    \KeywordTok{const}\NormalTok{ novosDados }\OperatorTok{=} \FunctionTok{coletaDados}\NormalTok{()}\OperatorTok{;}
    \ControlFlowTok{if}\NormalTok{ (base64) novosDados}\OperatorTok{.}\AttributeTok{foto} \OperatorTok{=}\NormalTok{ base64}\OperatorTok{;}

    \KeywordTok{const}\NormalTok{ res }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{fetch}\NormalTok{(}\VerbatimStringTok{\textasciigrave{}}\SpecialCharTok{$\{}\NormalTok{API}\SpecialCharTok{\}}\VerbatimStringTok{/}\SpecialCharTok{$\{}\PreprocessorTok{encodeURIComponent}\NormalTok{(cpf)}\SpecialCharTok{\}}\VerbatimStringTok{\textasciigrave{}}\OperatorTok{,}\NormalTok{ \{}
      \DataTypeTok{method}\OperatorTok{:} \StringTok{\textquotesingle{}PUT\textquotesingle{}}\OperatorTok{,}
      \DataTypeTok{headers}\OperatorTok{:}\NormalTok{ \{}\StringTok{\textquotesingle{}Content{-}Type\textquotesingle{}}\OperatorTok{:} \StringTok{\textquotesingle{}application/json\textquotesingle{}}\NormalTok{\}}\OperatorTok{,}
      \DataTypeTok{body}\OperatorTok{:} \BuiltInTok{JSON}\OperatorTok{.}\FunctionTok{stringify}\NormalTok{(novosDados)}
\NormalTok{    \})}\OperatorTok{;}
    \KeywordTok{const}\NormalTok{ data }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{readJsonSafe}\NormalTok{(res)}\OperatorTok{;}
    \ControlFlowTok{if}\NormalTok{(res}\OperatorTok{.}\AttributeTok{ok}\NormalTok{) \{}
      \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Alterado com sucesso!\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
      \FunctionTok{listar}\NormalTok{()}\OperatorTok{;}
\NormalTok{    \} }\ControlFlowTok{else}\NormalTok{ \{}
      \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Erro: \textquotesingle{}} \OperatorTok{+}\NormalTok{ (data}\OperatorTok{?.}\AttributeTok{error} \OperatorTok{||}\NormalTok{ res}\OperatorTok{.}\AttributeTok{statusText}\NormalTok{))}\OperatorTok{;}
\NormalTok{    \}}
\NormalTok{  \} }\ControlFlowTok{catch}\NormalTok{ (e) \{}
    \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Falha ao alterar: \textquotesingle{}} \OperatorTok{+}\NormalTok{ e}\OperatorTok{.}\AttributeTok{message}\NormalTok{)}\OperatorTok{;}
\NormalTok{  \} }\ControlFlowTok{finally}\NormalTok{ \{}
    \FunctionTok{setBusy}\NormalTok{(}\KeywordTok{false}\NormalTok{)}\OperatorTok{;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{async} \KeywordTok{function} \FunctionTok{remover}\NormalTok{() \{}
  \KeywordTok{const}\NormalTok{ cpf }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}cpf\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{;}
  \ControlFlowTok{if}\NormalTok{(}\OperatorTok{!}\NormalTok{cpf) }\ControlFlowTok{return} \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Informe o CPF para remover.\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
  \ControlFlowTok{if}\NormalTok{(}\OperatorTok{!}\FunctionTok{confirm}\NormalTok{(}\StringTok{\textquotesingle{}Confirma a exclus√£o?\textquotesingle{}}\NormalTok{)) }\ControlFlowTok{return}\OperatorTok{;}

  \FunctionTok{setBusy}\NormalTok{(}\KeywordTok{true}\NormalTok{)}\OperatorTok{;}
  \ControlFlowTok{try}\NormalTok{ \{}
    \KeywordTok{const}\NormalTok{ res }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{fetch}\NormalTok{(}\VerbatimStringTok{\textasciigrave{}}\SpecialCharTok{$\{}\NormalTok{API}\SpecialCharTok{\}}\VerbatimStringTok{/}\SpecialCharTok{$\{}\PreprocessorTok{encodeURIComponent}\NormalTok{(cpf)}\SpecialCharTok{\}}\VerbatimStringTok{\textasciigrave{}}\OperatorTok{,}\NormalTok{ \{}\DataTypeTok{method}\OperatorTok{:}\StringTok{\textquotesingle{}DELETE\textquotesingle{}}\NormalTok{\})}\OperatorTok{;}
    \CommentTok{// 204 =\textgreater{} sem corpo; n√£o tente parsear JSON aqui}
    \ControlFlowTok{if}\NormalTok{(res}\OperatorTok{.}\AttributeTok{status} \OperatorTok{===} \DecValTok{204}\NormalTok{) \{}
      \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Removido com sucesso!\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
      \FunctionTok{listar}\NormalTok{()}\OperatorTok{;}
      \ControlFlowTok{return}\OperatorTok{;}
\NormalTok{    \}}
    \KeywordTok{const}\NormalTok{ data }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{readJsonSafe}\NormalTok{(res)}\OperatorTok{;}
    \ControlFlowTok{if}\NormalTok{(res}\OperatorTok{.}\AttributeTok{ok}\NormalTok{) \{}
      \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Removido com sucesso!\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
      \FunctionTok{listar}\NormalTok{()}\OperatorTok{;}
\NormalTok{    \} }\ControlFlowTok{else}\NormalTok{ \{}
      \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Erro: \textquotesingle{}} \OperatorTok{+}\NormalTok{ (data}\OperatorTok{?.}\AttributeTok{error} \OperatorTok{||}\NormalTok{ res}\OperatorTok{.}\AttributeTok{statusText}\NormalTok{))}\OperatorTok{;}
\NormalTok{    \}}
\NormalTok{  \} }\ControlFlowTok{catch}\NormalTok{ (e) \{}
    \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Falha ao remover: \textquotesingle{}} \OperatorTok{+}\NormalTok{ e}\OperatorTok{.}\AttributeTok{message}\NormalTok{)}\OperatorTok{;}
\NormalTok{  \} }\ControlFlowTok{finally}\NormalTok{ \{}
    \FunctionTok{setBusy}\NormalTok{(}\KeywordTok{false}\NormalTok{)}\OperatorTok{;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{async} \KeywordTok{function} \FunctionTok{pesquisar}\NormalTok{() \{}
  \KeywordTok{const}\NormalTok{ termo }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}pesquisa\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{;}
  \FunctionTok{setBusy}\NormalTok{(}\KeywordTok{true}\NormalTok{)}\OperatorTok{;}
  \ControlFlowTok{try}\NormalTok{ \{}
    \KeywordTok{const}\NormalTok{ url }\OperatorTok{=}\NormalTok{ termo }\OperatorTok{?} \VerbatimStringTok{\textasciigrave{}}\SpecialCharTok{$\{}\NormalTok{API}\SpecialCharTok{\}}\VerbatimStringTok{?q=}\SpecialCharTok{$\{}\PreprocessorTok{encodeURIComponent}\NormalTok{(termo)}\SpecialCharTok{\}}\VerbatimStringTok{\textasciigrave{}} \OperatorTok{:}\NormalTok{ API}\OperatorTok{;}
    \KeywordTok{const}\NormalTok{ res }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{fetch}\NormalTok{(url)}\OperatorTok{;}
    \KeywordTok{const}\NormalTok{ data }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{readJsonSafe}\NormalTok{(res)}\OperatorTok{;}
    \ControlFlowTok{if}\NormalTok{(}\OperatorTok{!}\NormalTok{res}\OperatorTok{.}\AttributeTok{ok}\NormalTok{) }\ControlFlowTok{return} \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Falha na pesquisa: \textquotesingle{}} \OperatorTok{+}\NormalTok{ (data}\OperatorTok{?.}\AttributeTok{error} \OperatorTok{||}\NormalTok{ res}\OperatorTok{.}\AttributeTok{statusText}\NormalTok{))}\OperatorTok{;}
    \FunctionTok{preencheTabela}\NormalTok{(}\BuiltInTok{Array}\OperatorTok{.}\FunctionTok{isArray}\NormalTok{(data) }\OperatorTok{?}\NormalTok{ data }\OperatorTok{:}\NormalTok{ (data}\OperatorTok{?.}\AttributeTok{items} \OperatorTok{??}\NormalTok{ []))}\OperatorTok{;}
\NormalTok{  \} }\ControlFlowTok{catch}\NormalTok{ (e) \{}
    \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Falha na pesquisa: \textquotesingle{}} \OperatorTok{+}\NormalTok{ e}\OperatorTok{.}\AttributeTok{message}\NormalTok{)}\OperatorTok{;}
\NormalTok{  \} }\ControlFlowTok{finally}\NormalTok{ \{}
    \FunctionTok{setBusy}\NormalTok{(}\KeywordTok{false}\NormalTok{)}\OperatorTok{;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{async} \KeywordTok{function} \FunctionTok{listar}\NormalTok{() \{}
  \FunctionTok{setBusy}\NormalTok{(}\KeywordTok{true}\NormalTok{)}\OperatorTok{;}
  \ControlFlowTok{try}\NormalTok{ \{}
    \KeywordTok{const}\NormalTok{ res }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{fetch}\NormalTok{(API)}\OperatorTok{;}
    \KeywordTok{const}\NormalTok{ data }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{readJsonSafe}\NormalTok{(res)}\OperatorTok{;}
    \ControlFlowTok{if}\NormalTok{(}\OperatorTok{!}\NormalTok{res}\OperatorTok{.}\AttributeTok{ok}\NormalTok{) }\ControlFlowTok{return} \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Falha ao listar: \textquotesingle{}} \OperatorTok{+}\NormalTok{ (data}\OperatorTok{?.}\AttributeTok{error} \OperatorTok{||}\NormalTok{ res}\OperatorTok{.}\AttributeTok{statusText}\NormalTok{))}\OperatorTok{;}
    \FunctionTok{preencheTabela}\NormalTok{(}\BuiltInTok{Array}\OperatorTok{.}\FunctionTok{isArray}\NormalTok{(data) }\OperatorTok{?}\NormalTok{ data }\OperatorTok{:}\NormalTok{ (data}\OperatorTok{?.}\AttributeTok{items} \OperatorTok{??}\NormalTok{ []))}\OperatorTok{;}
\NormalTok{  \} }\ControlFlowTok{catch}\NormalTok{ (e) \{}
    \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Falha ao listar: \textquotesingle{}} \OperatorTok{+}\NormalTok{ e}\OperatorTok{.}\AttributeTok{message}\NormalTok{)}\OperatorTok{;}
\NormalTok{  \} }\ControlFlowTok{finally}\NormalTok{ \{}
    \FunctionTok{setBusy}\NormalTok{(}\KeywordTok{false}\NormalTok{)}\OperatorTok{;}
\NormalTok{  \}}
\NormalTok{\}}

\CommentTok{/* {-}{-}{-}{-}{-}{-}{-}{-}{-}{-} UI {-}{-}{-}{-}{-}{-}{-}{-}{-}{-} */}
\KeywordTok{function} \FunctionTok{preencheTabela}\NormalTok{(lista)\{}
  \KeywordTok{const}\NormalTok{ tbody }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}tabela\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
\NormalTok{  tbody}\OperatorTok{.}\AttributeTok{innerHTML} \OperatorTok{=} \StringTok{\textquotesingle{}\textquotesingle{}}\OperatorTok{;}
\NormalTok{  (lista }\OperatorTok{||}\NormalTok{ [])}\OperatorTok{.}\FunctionTok{forEach}\NormalTok{(p}\KeywordTok{=\textgreater{}}\NormalTok{\{}
    \KeywordTok{const}\NormalTok{ tr }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{createElement}\NormalTok{(}\StringTok{\textquotesingle{}tr\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
\NormalTok{    tr}\OperatorTok{.}\AttributeTok{innerHTML} \OperatorTok{=} \VerbatimStringTok{\textasciigrave{}}
\VerbatimStringTok{      \textless{}td\textgreater{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{cpf}\SpecialCharTok{\}}\VerbatimStringTok{\textless{}/td\textgreater{}}
\VerbatimStringTok{      \textless{}td\textgreater{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{foto} \OperatorTok{?} \VerbatimStringTok{\textasciigrave{}\textless{}img class="thumb" src="}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{foto}\SpecialCharTok{\}}\VerbatimStringTok{" alt="foto"\textgreater{}\textasciigrave{}} \OperatorTok{:} \StringTok{\textquotesingle{}\textquotesingle{}}\SpecialCharTok{\}}\VerbatimStringTok{\textless{}/td\textgreater{}}
\VerbatimStringTok{      \textless{}td\textgreater{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{nome}\SpecialCharTok{\}}\VerbatimStringTok{\textless{}/td\textgreater{}}
\VerbatimStringTok{      \textless{}td\textgreater{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{endereco}\SpecialCharTok{\}}\VerbatimStringTok{\textless{}/td\textgreater{}}
\VerbatimStringTok{      \textless{}td\textgreater{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{data\_nascimento}\SpecialCharTok{\}}\VerbatimStringTok{\textless{}/td\textgreater{}\textasciigrave{}}\OperatorTok{;}
\NormalTok{    tr}\OperatorTok{.}\AttributeTok{onclick} \OperatorTok{=}\NormalTok{ () }\KeywordTok{=\textgreater{}}\NormalTok{ \{}
      \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}cpf\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value} \OperatorTok{=}\NormalTok{ p}\OperatorTok{.}\AttributeTok{cpf}\OperatorTok{;}
      \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}nome\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value} \OperatorTok{=}\NormalTok{ p}\OperatorTok{.}\AttributeTok{nome}\OperatorTok{;}
      \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}endereco\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value} \OperatorTok{=}\NormalTok{ p}\OperatorTok{.}\AttributeTok{endereco}\OperatorTok{;}
      \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}data\_nascimento\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value} \OperatorTok{=}\NormalTok{ p}\OperatorTok{.}\AttributeTok{data\_nascimento}\OperatorTok{;}
\NormalTok{    \}}\OperatorTok{;}
\NormalTok{    tbody}\OperatorTok{.}\FunctionTok{appendChild}\NormalTok{(tr)}\OperatorTok{;}
\NormalTok{  \})}\OperatorTok{;}
\NormalTok{\}}

\FunctionTok{listar}\NormalTok{()}\OperatorTok{;}
\DataTypeTok{\textless{}/}\KeywordTok{script}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{body}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{html}\DataTypeTok{\textgreater{}}
\end{Highlighting}
\end{Shaded}

\begin{center}\rule{0.5\linewidth}{0.5pt}\end{center}

\section{Exemplo 03 - SERVIDOR DE APLICA√á√ÉO PERL}\label{exemplo-03---servidor-de-aplicauxe7uxe3o-perl}

\pandocbounded{\includegraphics[keepaspectratio]{images/clipboard-2372699820.png}}

Neste exemplo, temos uma aplica√ß√£o cliente feita html e javascript

A interface do Cliente √© feita em HTML5

A conex√£o com o servidor √© feita pelo javascript incorporado no HTML:

CRUD no cliente √© feito peloa javascript utilizando metodologia Restful sobre protocolo HTTP 2.0

O servidor Restful √© feito em linguagem PERL

OBS: N√ÉO TEMOS CONTROLE DE SESS√ÉO DE CLIENTE IMPLEMENTADO.

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{cpan Dancer2 DBI DBD::Pg JSON}
\end{Highlighting}
\end{Shaded}

\subsection{Servidor Perl}\label{servidor-perl}

\begin{Shaded}
\begin{Highlighting}[]
\KeywordTok{\#!/usr/bin/perl}
\FunctionTok{use} \KeywordTok{strict}\NormalTok{;}
\FunctionTok{use} \KeywordTok{warnings}\NormalTok{;}
\FunctionTok{use}\NormalTok{ Dancer2;}
\FunctionTok{use}\NormalTok{ DBI;}
\FunctionTok{use}\NormalTok{ JSON;}

\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\CommentTok{\# Configura√ß√µes do banco}
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\KeywordTok{my} \DataTypeTok{$dsn}\NormalTok{ = }\OtherTok{"}\StringTok{dbi:Pg:dbname=postgres;host=db.pbbtfwmydxmxdibmtbqq.supabase.co;port=5432}\OtherTok{"}\NormalTok{;}
\KeywordTok{my} \DataTypeTok{$db\_user}\NormalTok{ = }\OtherTok{"}\StringTok{postgres}\OtherTok{"}\NormalTok{;}
\KeywordTok{my} \DataTypeTok{$db\_pass}\NormalTok{ = }\OtherTok{"}\StringTok{MinhaSuperSenha}\OtherTok{"}\NormalTok{;}

\KeywordTok{my} \DataTypeTok{$dbh}\NormalTok{ = DBI{-}\textgreater{}}\FunctionTok{connect}\NormalTok{(}\DataTypeTok{$dsn}\NormalTok{, }\DataTypeTok{$db\_user}\NormalTok{, }\DataTypeTok{$db\_pass}\NormalTok{, \{ RaiseError =\textgreater{} }\DecValTok{1}\NormalTok{, AutoCommit =\textgreater{} }\DecValTok{1}\NormalTok{ \});}

\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\CommentTok{\# Helpers}
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\KeywordTok{sub }\FunctionTok{json\_response}\NormalTok{ \{}
\NormalTok{    content\_type }\OtherTok{\textquotesingle{}}\SpecialStringTok{application/json}\OtherTok{\textquotesingle{}}\NormalTok{;}
    \KeywordTok{return}\NormalTok{ encode\_json(}\WarningTok{$\_}\NormalTok{[}\DecValTok{0}\NormalTok{]);}
\NormalTok{\}}

\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\CommentTok{\# Endpoints REST}
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}

\CommentTok{\# Listar todas ou pesquisar}
\NormalTok{get }\OtherTok{\textquotesingle{}}\SpecialStringTok{/pessoas}\OtherTok{\textquotesingle{}}\NormalTok{ =\textgreater{} }\KeywordTok{sub }\NormalTok{\{}
    \KeywordTok{my} \DataTypeTok{$q}\NormalTok{ = query\_parameters{-}\textgreater{}get(}\OtherTok{\textquotesingle{}}\SpecialStringTok{q}\OtherTok{\textquotesingle{}}\NormalTok{) || }\OtherTok{\textquotesingle{}\textquotesingle{}}\NormalTok{;}
    \KeywordTok{my} \DataTypeTok{$sql}\NormalTok{ = }\OtherTok{"}\StringTok{SELECT * FROM pessoas}\OtherTok{"}\NormalTok{;}
    \KeywordTok{my} \DataTypeTok{@params}\NormalTok{;}
    \KeywordTok{if}\NormalTok{ (}\DataTypeTok{$q} \OtherTok{ne} \OtherTok{\textquotesingle{}\textquotesingle{}}\NormalTok{) \{}
        \DataTypeTok{$sql}\NormalTok{ .= }\OtherTok{"}\StringTok{ WHERE cpf ILIKE ? OR nome ILIKE ?}\OtherTok{"}\NormalTok{;}
        \DataTypeTok{@params}\NormalTok{ = (}\OtherTok{"}\StringTok{\%}\DataTypeTok{$q}\StringTok{\%}\OtherTok{"}\NormalTok{, }\OtherTok{"}\StringTok{\%}\DataTypeTok{$q}\StringTok{\%}\OtherTok{"}\NormalTok{);}
\NormalTok{    \}}
    \KeywordTok{my} \DataTypeTok{$sth}\NormalTok{ = }\DataTypeTok{$dbh}\NormalTok{{-}\textgreater{}}\DataTypeTok{prepare}\NormalTok{(}\DataTypeTok{$sql}\NormalTok{);}
    \DataTypeTok{$sth}\NormalTok{{-}\textgreater{}}\DataTypeTok{execute}\NormalTok{(}\DataTypeTok{@params}\NormalTok{);}
    \KeywordTok{my} \DataTypeTok{@rows}\NormalTok{;}
    \KeywordTok{while}\NormalTok{ (}\KeywordTok{my} \DataTypeTok{$row}\NormalTok{ = }\DataTypeTok{$sth}\NormalTok{{-}\textgreater{}}\DataTypeTok{fetchrow\_hashref}\NormalTok{) \{}
        \FunctionTok{push} \DataTypeTok{@rows}\NormalTok{, }\DataTypeTok{$row}\NormalTok{;}
\NormalTok{    \}}
    \KeywordTok{return}\NormalTok{ json\_response(\textbackslash{}}\DataTypeTok{@rows}\NormalTok{);}
\NormalTok{\};}

\CommentTok{\# Buscar por CPF}
\NormalTok{get }\OtherTok{\textquotesingle{}}\SpecialStringTok{/pessoas/:cpf}\OtherTok{\textquotesingle{}}\NormalTok{ =\textgreater{} }\KeywordTok{sub }\NormalTok{\{}
    \KeywordTok{my} \DataTypeTok{$cpf}\NormalTok{ = route\_parameters{-}\textgreater{}get(}\OtherTok{\textquotesingle{}}\SpecialStringTok{cpf}\OtherTok{\textquotesingle{}}\NormalTok{);}
    \KeywordTok{my} \DataTypeTok{$sth}\NormalTok{ = }\DataTypeTok{$dbh}\NormalTok{{-}\textgreater{}}\DataTypeTok{prepare}\NormalTok{(}\OtherTok{"}\StringTok{SELECT * FROM pessoas WHERE cpf = ?}\OtherTok{"}\NormalTok{);}
    \DataTypeTok{$sth}\NormalTok{{-}\textgreater{}}\DataTypeTok{execute}\NormalTok{(}\DataTypeTok{$cpf}\NormalTok{);}
    \KeywordTok{my} \DataTypeTok{$row}\NormalTok{ = }\DataTypeTok{$sth}\NormalTok{{-}\textgreater{}}\DataTypeTok{fetchrow\_hashref}\NormalTok{;}
    \KeywordTok{return} \DataTypeTok{$row}\NormalTok{ ? json\_response(}\DataTypeTok{$row}\NormalTok{) : status(}\DecValTok{404}\NormalTok{){-}\textgreater{}json\_response(\{ error =\textgreater{} }\OtherTok{"}\StringTok{CPF n√£o encontrado}\OtherTok{"}\NormalTok{ \});}
\NormalTok{\};}

\CommentTok{\# Inserir}
\NormalTok{post }\OtherTok{\textquotesingle{}}\SpecialStringTok{/pessoas}\OtherTok{\textquotesingle{}}\NormalTok{ =\textgreater{} }\KeywordTok{sub }\NormalTok{\{}
    \KeywordTok{my} \DataTypeTok{$data}\NormalTok{ = from\_json(request{-}\textgreater{}body);}
    \KeywordTok{my} \DataTypeTok{$cpf}\NormalTok{ = }\DataTypeTok{$data}\NormalTok{{-}\textgreater{}\{cpf\};}
    \CommentTok{\# Verifica se existe}
    \KeywordTok{my} \DataTypeTok{$check}\NormalTok{ = }\DataTypeTok{$dbh}\NormalTok{{-}\textgreater{}}\DataTypeTok{prepare}\NormalTok{(}\OtherTok{"}\StringTok{SELECT cpf FROM pessoas WHERE cpf = ?}\OtherTok{"}\NormalTok{);}
    \DataTypeTok{$check}\NormalTok{{-}\textgreater{}}\DataTypeTok{execute}\NormalTok{(}\DataTypeTok{$cpf}\NormalTok{);}
    \KeywordTok{if}\NormalTok{ (}\DataTypeTok{$check}\NormalTok{{-}\textgreater{}}\DataTypeTok{fetchrow\_array}\NormalTok{) \{}
\NormalTok{        status(}\DecValTok{400}\NormalTok{);}
        \KeywordTok{return}\NormalTok{ json\_response(\{ error =\textgreater{} }\OtherTok{"}\StringTok{CPF j√° cadastrado}\OtherTok{"}\NormalTok{ \});}
\NormalTok{    \}}
    \KeywordTok{my} \DataTypeTok{$sth}\NormalTok{ = }\DataTypeTok{$dbh}\NormalTok{{-}\textgreater{}}\DataTypeTok{prepare}\NormalTok{(}\OtherTok{"}\StringTok{INSERT INTO pessoas (cpf, nome, endereco, data\_nascimento, foto) VALUES (?, ?, ?, ?, ?)}\OtherTok{"}\NormalTok{);}
    \DataTypeTok{$sth}\NormalTok{{-}\textgreater{}}\DataTypeTok{execute}\NormalTok{(}\DataTypeTok{$cpf}\NormalTok{, }\DataTypeTok{$data}\NormalTok{{-}\textgreater{}\{nome\}, }\DataTypeTok{$data}\NormalTok{{-}\textgreater{}\{endereco\}, }\DataTypeTok{$data}\NormalTok{{-}\textgreater{}\{data\_nascimento\}, }\DataTypeTok{$data}\NormalTok{{-}\textgreater{}\{foto\});}
\NormalTok{    status(}\DecValTok{201}\NormalTok{);}
    \KeywordTok{return}\NormalTok{ json\_response(\{ message =\textgreater{} }\OtherTok{"}\StringTok{Inserido com sucesso}\OtherTok{"}\NormalTok{ \});}
\NormalTok{\};}

\CommentTok{\# Alterar}
\NormalTok{put }\OtherTok{\textquotesingle{}}\SpecialStringTok{/pessoas/:cpf}\OtherTok{\textquotesingle{}}\NormalTok{ =\textgreater{} }\KeywordTok{sub }\NormalTok{\{}
    \KeywordTok{my} \DataTypeTok{$cpf}\NormalTok{ = route\_parameters{-}\textgreater{}get(}\OtherTok{\textquotesingle{}}\SpecialStringTok{cpf}\OtherTok{\textquotesingle{}}\NormalTok{);}
    \KeywordTok{my} \DataTypeTok{$data}\NormalTok{ = from\_json(request{-}\textgreater{}body);}
    \CommentTok{\# Verifica se existe}
    \KeywordTok{my} \DataTypeTok{$check}\NormalTok{ = }\DataTypeTok{$dbh}\NormalTok{{-}\textgreater{}}\DataTypeTok{prepare}\NormalTok{(}\OtherTok{"}\StringTok{SELECT cpf FROM pessoas WHERE cpf = ?}\OtherTok{"}\NormalTok{);}
    \DataTypeTok{$check}\NormalTok{{-}\textgreater{}}\DataTypeTok{execute}\NormalTok{(}\DataTypeTok{$cpf}\NormalTok{);}
    \KeywordTok{unless}\NormalTok{ (}\DataTypeTok{$check}\NormalTok{{-}\textgreater{}}\DataTypeTok{fetchrow\_array}\NormalTok{) \{}
\NormalTok{        status(}\DecValTok{404}\NormalTok{);}
        \KeywordTok{return}\NormalTok{ json\_response(\{ error =\textgreater{} }\OtherTok{"}\StringTok{CPF n√£o encontrado}\OtherTok{"}\NormalTok{ \});}
\NormalTok{    \}}
    \KeywordTok{my} \DataTypeTok{$sth}\NormalTok{ = }\DataTypeTok{$dbh}\NormalTok{{-}\textgreater{}}\DataTypeTok{prepare}\NormalTok{(}\OtherTok{"}\StringTok{UPDATE pessoas SET nome=?, endereco=?, data\_nascimento=?, foto=? WHERE cpf=?}\OtherTok{"}\NormalTok{);}
    \DataTypeTok{$sth}\NormalTok{{-}\textgreater{}}\DataTypeTok{execute}\NormalTok{(}\DataTypeTok{$data}\NormalTok{{-}\textgreater{}\{nome\}, }\DataTypeTok{$data}\NormalTok{{-}\textgreater{}\{endereco\}, }\DataTypeTok{$data}\NormalTok{{-}\textgreater{}\{data\_nascimento\}, }\DataTypeTok{$data}\NormalTok{{-}\textgreater{}\{foto\}, }\DataTypeTok{$cpf}\NormalTok{);}
    \KeywordTok{return}\NormalTok{ json\_response(\{ message =\textgreater{} }\OtherTok{"}\StringTok{Alterado com sucesso}\OtherTok{"}\NormalTok{ \});}
\NormalTok{\};}

\CommentTok{\# Remover}
\NormalTok{del }\OtherTok{\textquotesingle{}}\SpecialStringTok{/pessoas/:cpf}\OtherTok{\textquotesingle{}}\NormalTok{ =\textgreater{} }\KeywordTok{sub }\NormalTok{\{}
    \KeywordTok{my} \DataTypeTok{$cpf}\NormalTok{ = route\_parameters{-}\textgreater{}get(}\OtherTok{\textquotesingle{}}\SpecialStringTok{cpf}\OtherTok{\textquotesingle{}}\NormalTok{);}
    \KeywordTok{my} \DataTypeTok{$sth}\NormalTok{ = }\DataTypeTok{$dbh}\NormalTok{{-}\textgreater{}}\DataTypeTok{prepare}\NormalTok{(}\OtherTok{"}\StringTok{DELETE FROM pessoas WHERE cpf=?}\OtherTok{"}\NormalTok{);}
    \KeywordTok{my} \DataTypeTok{$rows}\NormalTok{ = }\DataTypeTok{$sth}\NormalTok{{-}\textgreater{}}\DataTypeTok{execute}\NormalTok{(}\DataTypeTok{$cpf}\NormalTok{);}
    \KeywordTok{if}\NormalTok{ (}\DataTypeTok{$rows}\NormalTok{) \{}
        \KeywordTok{return}\NormalTok{ json\_response(\{ message =\textgreater{} }\OtherTok{"}\StringTok{Removido com sucesso}\OtherTok{"}\NormalTok{ \});}
\NormalTok{    \} }\KeywordTok{else}\NormalTok{ \{}
\NormalTok{        status(}\DecValTok{404}\NormalTok{);}
        \KeywordTok{return}\NormalTok{ json\_response(\{ error =\textgreater{} }\OtherTok{"}\StringTok{CPF n√£o encontrado}\OtherTok{"}\NormalTok{ \});}
\NormalTok{    \}}
\NormalTok{\};}

\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\CommentTok{\# Inicializa o servidor}
\CommentTok{\# {-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}{-}}
\NormalTok{set port =\textgreater{} }\DecValTok{5000}\NormalTok{;}
\NormalTok{set serializer =\textgreater{} }\OtherTok{\textquotesingle{}}\SpecialStringTok{JSON}\OtherTok{\textquotesingle{}}\NormalTok{;}

\NormalTok{start;}
\end{Highlighting}
\end{Shaded}

servidor estar√° rodando na porta 5000 e EXP√ïE A API de opera√ß√µes na URI \url{http://localhost:5000/pessoas} sem senha

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{http}\InformationTok{:}\ErrorTok{//localhost:5000/pessoas}
\end{Highlighting}
\end{Shaded}

\subsection{Cliente HTML (conex√£o Restful)}\label{cliente-html-conexuxe3o-restful-1}

crie o arquivo index.html e abra-o no navegador

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{\textless{}!DOCTYPE}\NormalTok{ html}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{html}\OtherTok{ lang}\OperatorTok{=}\StringTok{"pt{-}BR"}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{head}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{meta}\OtherTok{ charset}\OperatorTok{=}\StringTok{"UTF{-}8"}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{title}\DataTypeTok{\textgreater{}}\NormalTok{Cadastro de Pessoas {-} Perl/PostgreSQL}\DataTypeTok{\textless{}/}\KeywordTok{title}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{style}\DataTypeTok{\textgreater{}}
\NormalTok{  body \{ }\KeywordTok{font{-}family}\CharTok{:} \DecValTok{sans{-}serif}\OperatorTok{;} \KeywordTok{max{-}width}\CharTok{:} \DecValTok{800}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{margin}\CharTok{:} \DecValTok{20}\DataTypeTok{px} \BuiltInTok{auto}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  label \{ }\KeywordTok{display}\CharTok{:} \DecValTok{block}\OperatorTok{;} \KeywordTok{margin{-}top}\CharTok{:} \DecValTok{10}\DataTypeTok{px}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  button \{ }\KeywordTok{margin{-}top}\CharTok{:} \DecValTok{10}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{margin{-}right}\CharTok{:} \DecValTok{5}\DataTypeTok{px}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  table \{ }\KeywordTok{border{-}collapse}\CharTok{:} \DecValTok{collapse}\OperatorTok{;} \KeywordTok{width}\CharTok{:}\DecValTok{100}\DataTypeTok{\%}\OperatorTok{;} \KeywordTok{margin{-}top}\CharTok{:}\DecValTok{20}\DataTypeTok{px}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  th}\OperatorTok{,}\NormalTok{ td \{ }\KeywordTok{border}\CharTok{:}\DecValTok{1}\DataTypeTok{px} \DecValTok{solid} \ConstantTok{\#ccc}\OperatorTok{;} \KeywordTok{padding}\CharTok{:}\DecValTok{6}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{text{-}align}\CharTok{:}\DecValTok{left}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  img}\FunctionTok{.thumb}\NormalTok{ \{ }\KeywordTok{width}\CharTok{:}\DecValTok{60}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{height}\CharTok{:}\DecValTok{60}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{object{-}fit}\CharTok{:}\DecValTok{cover}\OperatorTok{;} \KeywordTok{border{-}radius}\CharTok{:}\DecValTok{4}\DataTypeTok{px}\OperatorTok{;}\NormalTok{ \}}
\DataTypeTok{\textless{}/}\KeywordTok{style}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{head}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{body}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{h1}\DataTypeTok{\textgreater{}}\NormalTok{Cadastro de Pessoas (Perl/PostgreSQL)}\DataTypeTok{\textless{}/}\KeywordTok{h1}\DataTypeTok{\textgreater{}}

\DataTypeTok{\textless{}}\KeywordTok{form}\OtherTok{ id}\OperatorTok{=}\StringTok{"formPessoa"}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{label}\DataTypeTok{\textgreater{}}\NormalTok{CPF (chave prim√°ria): }\DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ id}\OperatorTok{=}\StringTok{"cpf"}\OtherTok{ required}\DataTypeTok{\textgreater{}\textless{}/}\KeywordTok{label}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{label}\DataTypeTok{\textgreater{}}\NormalTok{Nome: }\DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ id}\OperatorTok{=}\StringTok{"nome"}\OtherTok{ required}\DataTypeTok{\textgreater{}\textless{}/}\KeywordTok{label}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{label}\DataTypeTok{\textgreater{}}\NormalTok{Endere√ßo: }\DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ id}\OperatorTok{=}\StringTok{"endereco"}\OtherTok{ required}\DataTypeTok{\textgreater{}\textless{}/}\KeywordTok{label}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{label}\DataTypeTok{\textgreater{}}\NormalTok{Data Nasc.: }\DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ type}\OperatorTok{=}\StringTok{"date"}\OtherTok{ id}\OperatorTok{=}\StringTok{"data\_nascimento"}\OtherTok{ required}\DataTypeTok{\textgreater{}\textless{}/}\KeywordTok{label}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{label}\DataTypeTok{\textgreater{}}\NormalTok{Foto: }\DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ type}\OperatorTok{=}\StringTok{"file"}\OtherTok{ id}\OperatorTok{=}\StringTok{"foto"}\OtherTok{ accept}\OperatorTok{=}\StringTok{"image/*"}\DataTypeTok{\textgreater{}\textless{}/}\KeywordTok{label}\DataTypeTok{\textgreater{}}

  \DataTypeTok{\textless{}}\KeywordTok{button}\OtherTok{ type}\OperatorTok{=}\StringTok{"button"}\OtherTok{ onclick}\OperatorTok{=}\StringTok{"inserir()"}\DataTypeTok{\textgreater{}}\NormalTok{Inserir}\DataTypeTok{\textless{}/}\KeywordTok{button}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{button}\OtherTok{ type}\OperatorTok{=}\StringTok{"button"}\OtherTok{ onclick}\OperatorTok{=}\StringTok{"alterar()"}\DataTypeTok{\textgreater{}}\NormalTok{Alterar}\DataTypeTok{\textless{}/}\KeywordTok{button}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{button}\OtherTok{ type}\OperatorTok{=}\StringTok{"button"}\OtherTok{ onclick}\OperatorTok{=}\StringTok{"remover()"}\DataTypeTok{\textgreater{}}\NormalTok{Remover}\DataTypeTok{\textless{}/}\KeywordTok{button}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{form}\DataTypeTok{\textgreater{}}

\DataTypeTok{\textless{}}\KeywordTok{h2}\DataTypeTok{\textgreater{}}\NormalTok{Pesquisar}\DataTypeTok{\textless{}/}\KeywordTok{h2}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ id}\OperatorTok{=}\StringTok{"pesquisa"}\OtherTok{ placeholder}\OperatorTok{=}\StringTok{"Digite nome ou CPF"}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{button}\OtherTok{ type}\OperatorTok{=}\StringTok{"button"}\OtherTok{ onclick}\OperatorTok{=}\StringTok{"pesquisar()"}\DataTypeTok{\textgreater{}}\NormalTok{Pesquisar}\DataTypeTok{\textless{}/}\KeywordTok{button}\DataTypeTok{\textgreater{}}

\DataTypeTok{\textless{}}\KeywordTok{table}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{thead}\DataTypeTok{\textgreater{}}
    \DataTypeTok{\textless{}}\KeywordTok{tr}\DataTypeTok{\textgreater{}}
      \DataTypeTok{\textless{}}\KeywordTok{th}\DataTypeTok{\textgreater{}}\NormalTok{CPF}\DataTypeTok{\textless{}/}\KeywordTok{th}\DataTypeTok{\textgreater{}\textless{}}\KeywordTok{th}\DataTypeTok{\textgreater{}}\NormalTok{Foto}\DataTypeTok{\textless{}/}\KeywordTok{th}\DataTypeTok{\textgreater{}\textless{}}\KeywordTok{th}\DataTypeTok{\textgreater{}}\NormalTok{Nome}\DataTypeTok{\textless{}/}\KeywordTok{th}\DataTypeTok{\textgreater{}}
      \DataTypeTok{\textless{}}\KeywordTok{th}\DataTypeTok{\textgreater{}}\NormalTok{Endere√ßo}\DataTypeTok{\textless{}/}\KeywordTok{th}\DataTypeTok{\textgreater{}\textless{}}\KeywordTok{th}\DataTypeTok{\textgreater{}}\NormalTok{Nascimento}\DataTypeTok{\textless{}/}\KeywordTok{th}\DataTypeTok{\textgreater{}}
    \DataTypeTok{\textless{}/}\KeywordTok{tr}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}/}\KeywordTok{thead}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{tbody}\OtherTok{ id}\OperatorTok{=}\StringTok{"tabela"}\DataTypeTok{\textgreater{}\textless{}/}\KeywordTok{tbody}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{table}\DataTypeTok{\textgreater{}}

\DataTypeTok{\textless{}}\KeywordTok{script}\DataTypeTok{\textgreater{}}
\KeywordTok{const}\NormalTok{ API }\OperatorTok{=} \StringTok{\textquotesingle{}http://localhost:5000/pessoas\textquotesingle{}}\OperatorTok{;}

\CommentTok{/* {-}{-}{-}{-}{-}{-}{-}{-}{-}{-} Fun√ß√µes utilit√°rias {-}{-}{-}{-}{-}{-}{-}{-}{-}{-} */}
\KeywordTok{function} \FunctionTok{validaCampos}\NormalTok{() \{}
  \KeywordTok{const}\NormalTok{ campos }\OperatorTok{=}\NormalTok{ [}\StringTok{\textquotesingle{}cpf\textquotesingle{}}\OperatorTok{,}\StringTok{\textquotesingle{}nome\textquotesingle{}}\OperatorTok{,}\StringTok{\textquotesingle{}endereco\textquotesingle{}}\OperatorTok{,}\StringTok{\textquotesingle{}data\_nascimento\textquotesingle{}}\NormalTok{]}\OperatorTok{;}
  \ControlFlowTok{for}\NormalTok{ (}\KeywordTok{const}\NormalTok{ id }\KeywordTok{of}\NormalTok{ campos) \{}
    \KeywordTok{const}\NormalTok{ valor }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(id)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{;}
    \ControlFlowTok{if}\NormalTok{ (}\OperatorTok{!}\NormalTok{valor) \{}
      \FunctionTok{alert}\NormalTok{(}\VerbatimStringTok{\textasciigrave{}O campo "}\SpecialCharTok{$\{}\NormalTok{id}\SpecialCharTok{\}}\VerbatimStringTok{" n√£o pode ficar em branco.\textasciigrave{}}\NormalTok{)}\OperatorTok{;}
      \ControlFlowTok{return} \KeywordTok{false}\OperatorTok{;}
\NormalTok{    \}}
\NormalTok{  \}}
  \ControlFlowTok{return} \KeywordTok{true}\OperatorTok{;}
\NormalTok{\}}

\KeywordTok{function} \FunctionTok{getFotoBase64}\NormalTok{() \{}
  \KeywordTok{const}\NormalTok{ file }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}foto\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{files}\NormalTok{[}\DecValTok{0}\NormalTok{]}\OperatorTok{;}
  \ControlFlowTok{if}\NormalTok{(}\OperatorTok{!}\NormalTok{file) }\ControlFlowTok{return} \BuiltInTok{Promise}\OperatorTok{.}\FunctionTok{resolve}\NormalTok{(}\StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
  \ControlFlowTok{return} \KeywordTok{new} \BuiltInTok{Promise}\NormalTok{((resolve}\OperatorTok{,}\NormalTok{reject)}\KeywordTok{=\textgreater{}}\NormalTok{\{}
    \KeywordTok{const}\NormalTok{ reader }\OperatorTok{=} \KeywordTok{new} \BuiltInTok{FileReader}\NormalTok{()}\OperatorTok{;}
\NormalTok{    reader}\OperatorTok{.}\AttributeTok{onload} \OperatorTok{=}\NormalTok{ () }\KeywordTok{=\textgreater{}} \FunctionTok{resolve}\NormalTok{(reader}\OperatorTok{.}\AttributeTok{result}\NormalTok{)}\OperatorTok{;}
\NormalTok{    reader}\OperatorTok{.}\AttributeTok{onerror} \OperatorTok{=}\NormalTok{ reject}\OperatorTok{;}
\NormalTok{    reader}\OperatorTok{.}\FunctionTok{readAsDataURL}\NormalTok{(file)}\OperatorTok{;}
\NormalTok{  \})}\OperatorTok{;}
\NormalTok{\}}

\KeywordTok{function} \FunctionTok{coletaDados}\NormalTok{(base64Foto)\{}
  \ControlFlowTok{return}\NormalTok{ \{}
    \DataTypeTok{cpf}\OperatorTok{:} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}cpf\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{,}
    \DataTypeTok{nome}\OperatorTok{:} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}nome\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{,}
    \DataTypeTok{endereco}\OperatorTok{:} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}endereco\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{,}
    \DataTypeTok{data\_nascimento}\OperatorTok{:} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}data\_nascimento\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{,}
    \DataTypeTok{foto}\OperatorTok{:}\NormalTok{ base64Foto }\OperatorTok{||} \StringTok{\textquotesingle{}\textquotesingle{}}
\NormalTok{  \}}\OperatorTok{;}
\NormalTok{\}}

\CommentTok{/* {-}{-}{-}{-}{-}{-}{-}{-}{-}{-} CRUD {-}{-}{-}{-}{-}{-}{-}{-}{-}{-} */}
\KeywordTok{async} \KeywordTok{function} \FunctionTok{inserir}\NormalTok{() \{}
  \ControlFlowTok{if}\NormalTok{(}\OperatorTok{!}\FunctionTok{validaCampos}\NormalTok{()) }\ControlFlowTok{return}\OperatorTok{;}
  \KeywordTok{const}\NormalTok{ base64 }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{getFotoBase64}\NormalTok{()}\OperatorTok{;}
  \KeywordTok{const}\NormalTok{ pessoa }\OperatorTok{=} \FunctionTok{coletaDados}\NormalTok{(base64)}\OperatorTok{;}

  \KeywordTok{const}\NormalTok{ res }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{fetch}\NormalTok{(API}\OperatorTok{,}\NormalTok{ \{}
    \DataTypeTok{method}\OperatorTok{:} \StringTok{\textquotesingle{}POST\textquotesingle{}}\OperatorTok{,}
    \DataTypeTok{headers}\OperatorTok{:}\NormalTok{ \{}\StringTok{\textquotesingle{}Content{-}Type\textquotesingle{}}\OperatorTok{:} \StringTok{\textquotesingle{}application/json\textquotesingle{}}\NormalTok{\}}\OperatorTok{,}
    \DataTypeTok{body}\OperatorTok{:} \BuiltInTok{JSON}\OperatorTok{.}\FunctionTok{stringify}\NormalTok{(pessoa)}
\NormalTok{  \})}\OperatorTok{;}
  \KeywordTok{const}\NormalTok{ data }\OperatorTok{=} \ControlFlowTok{await}\NormalTok{ res}\OperatorTok{.}\FunctionTok{json}\NormalTok{()}\OperatorTok{;}
  \ControlFlowTok{if}\NormalTok{(res}\OperatorTok{.}\AttributeTok{ok}\NormalTok{) }\FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Inserido com sucesso!\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
  \ControlFlowTok{else} \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Erro: \textquotesingle{}} \OperatorTok{+}\NormalTok{ (data}\OperatorTok{.}\AttributeTok{error} \OperatorTok{||} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{))}\OperatorTok{;}
  \FunctionTok{listar}\NormalTok{()}\OperatorTok{;}
\NormalTok{\}}

\KeywordTok{async} \KeywordTok{function} \FunctionTok{alterar}\NormalTok{() \{}
  \ControlFlowTok{if}\NormalTok{(}\OperatorTok{!}\FunctionTok{validaCampos}\NormalTok{()) }\ControlFlowTok{return}\OperatorTok{;}
  \KeywordTok{const}\NormalTok{ cpf }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}cpf\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{;}
  \KeywordTok{const}\NormalTok{ base64 }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{getFotoBase64}\NormalTok{()}\OperatorTok{;}
  \KeywordTok{const}\NormalTok{ novosDados }\OperatorTok{=} \FunctionTok{coletaDados}\NormalTok{()}\OperatorTok{;}
  \ControlFlowTok{if}\NormalTok{(base64) novosDados}\OperatorTok{.}\AttributeTok{foto} \OperatorTok{=}\NormalTok{ base64}\OperatorTok{;}

  \KeywordTok{const}\NormalTok{ res }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{fetch}\NormalTok{(}\VerbatimStringTok{\textasciigrave{}}\SpecialCharTok{$\{}\NormalTok{API}\SpecialCharTok{\}}\VerbatimStringTok{/}\SpecialCharTok{$\{}\PreprocessorTok{encodeURIComponent}\NormalTok{(cpf)}\SpecialCharTok{\}}\VerbatimStringTok{\textasciigrave{}}\OperatorTok{,}\NormalTok{ \{}
    \DataTypeTok{method}\OperatorTok{:} \StringTok{\textquotesingle{}PUT\textquotesingle{}}\OperatorTok{,}
    \DataTypeTok{headers}\OperatorTok{:}\NormalTok{ \{}\StringTok{\textquotesingle{}Content{-}Type\textquotesingle{}}\OperatorTok{:} \StringTok{\textquotesingle{}application/json\textquotesingle{}}\NormalTok{\}}\OperatorTok{,}
    \DataTypeTok{body}\OperatorTok{:} \BuiltInTok{JSON}\OperatorTok{.}\FunctionTok{stringify}\NormalTok{(novosDados)}
\NormalTok{  \})}\OperatorTok{;}
  \KeywordTok{const}\NormalTok{ data }\OperatorTok{=} \ControlFlowTok{await}\NormalTok{ res}\OperatorTok{.}\FunctionTok{json}\NormalTok{()}\OperatorTok{;}
  \ControlFlowTok{if}\NormalTok{(res}\OperatorTok{.}\AttributeTok{ok}\NormalTok{) }\FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Alterado com sucesso!\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
  \ControlFlowTok{else} \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Erro: \textquotesingle{}} \OperatorTok{+}\NormalTok{ (data}\OperatorTok{.}\AttributeTok{error} \OperatorTok{||} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{))}\OperatorTok{;}
  \FunctionTok{listar}\NormalTok{()}\OperatorTok{;}
\NormalTok{\}}

\KeywordTok{async} \KeywordTok{function} \FunctionTok{remover}\NormalTok{() \{}
  \KeywordTok{const}\NormalTok{ cpf }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}cpf\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{;}
  \ControlFlowTok{if}\NormalTok{(}\OperatorTok{!}\NormalTok{cpf) }\ControlFlowTok{return} \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Informe o CPF para remover.\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
  \ControlFlowTok{if}\NormalTok{(}\FunctionTok{confirm}\NormalTok{(}\StringTok{\textquotesingle{}Confirma a exclus√£o?\textquotesingle{}}\NormalTok{))\{}
    \KeywordTok{const}\NormalTok{ res }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{fetch}\NormalTok{(}\VerbatimStringTok{\textasciigrave{}}\SpecialCharTok{$\{}\NormalTok{API}\SpecialCharTok{\}}\VerbatimStringTok{/}\SpecialCharTok{$\{}\PreprocessorTok{encodeURIComponent}\NormalTok{(cpf)}\SpecialCharTok{\}}\VerbatimStringTok{\textasciigrave{}}\OperatorTok{,}\NormalTok{ \{}\DataTypeTok{method}\OperatorTok{:}\StringTok{\textquotesingle{}DELETE\textquotesingle{}}\NormalTok{\})}\OperatorTok{;}
    \KeywordTok{const}\NormalTok{ data }\OperatorTok{=} \ControlFlowTok{await}\NormalTok{ res}\OperatorTok{.}\FunctionTok{json}\NormalTok{()}\OperatorTok{;}
    \ControlFlowTok{if}\NormalTok{(res}\OperatorTok{.}\AttributeTok{ok}\NormalTok{) }\FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Removido com sucesso!\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
    \ControlFlowTok{else} \FunctionTok{alert}\NormalTok{(}\StringTok{\textquotesingle{}Erro: \textquotesingle{}} \OperatorTok{+}\NormalTok{ (data}\OperatorTok{.}\AttributeTok{error} \OperatorTok{||} \StringTok{\textquotesingle{}\textquotesingle{}}\NormalTok{))}\OperatorTok{;}
    \FunctionTok{listar}\NormalTok{()}\OperatorTok{;}
\NormalTok{  \}}
\NormalTok{\}}

\KeywordTok{async} \KeywordTok{function} \FunctionTok{pesquisar}\NormalTok{() \{}
  \KeywordTok{const}\NormalTok{ termo }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}pesquisa\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{;}
  \ControlFlowTok{if}\NormalTok{(}\OperatorTok{!}\NormalTok{termo)\{ }\FunctionTok{listar}\NormalTok{()}\OperatorTok{;} \ControlFlowTok{return}\OperatorTok{;}\NormalTok{ \}}
  \KeywordTok{const}\NormalTok{ res }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{fetch}\NormalTok{(}\VerbatimStringTok{\textasciigrave{}}\SpecialCharTok{$\{}\NormalTok{API}\SpecialCharTok{\}}\VerbatimStringTok{?q=}\SpecialCharTok{$\{}\PreprocessorTok{encodeURIComponent}\NormalTok{(termo)}\SpecialCharTok{\}}\VerbatimStringTok{\textasciigrave{}}\NormalTok{)}\OperatorTok{;}
  \KeywordTok{const}\NormalTok{ data }\OperatorTok{=} \ControlFlowTok{await}\NormalTok{ res}\OperatorTok{.}\FunctionTok{json}\NormalTok{()}\OperatorTok{;}
  \FunctionTok{preencheTabela}\NormalTok{(data)}\OperatorTok{;}
\NormalTok{\}}

\KeywordTok{async} \KeywordTok{function} \FunctionTok{listar}\NormalTok{() \{}
  \KeywordTok{const}\NormalTok{ res }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{fetch}\NormalTok{(API)}\OperatorTok{;}
  \KeywordTok{const}\NormalTok{ data }\OperatorTok{=} \ControlFlowTok{await}\NormalTok{ res}\OperatorTok{.}\FunctionTok{json}\NormalTok{()}\OperatorTok{;}
  \FunctionTok{preencheTabela}\NormalTok{(data)}\OperatorTok{;}
\NormalTok{\}}

\CommentTok{/* {-}{-}{-}{-}{-}{-}{-}{-}{-}{-} UI {-}{-}{-}{-}{-}{-}{-}{-}{-}{-} */}
\KeywordTok{function} \FunctionTok{preencheTabela}\NormalTok{(lista)\{}
  \KeywordTok{const}\NormalTok{ tbody }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}tabela\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
\NormalTok{  tbody}\OperatorTok{.}\AttributeTok{innerHTML} \OperatorTok{=} \StringTok{\textquotesingle{}\textquotesingle{}}\OperatorTok{;}
\NormalTok{  lista}\OperatorTok{.}\FunctionTok{forEach}\NormalTok{(p}\KeywordTok{=\textgreater{}}\NormalTok{\{}
    \KeywordTok{const}\NormalTok{ tr }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{createElement}\NormalTok{(}\StringTok{\textquotesingle{}tr\textquotesingle{}}\NormalTok{)}\OperatorTok{;}
\NormalTok{    tr}\OperatorTok{.}\AttributeTok{innerHTML} \OperatorTok{=} \VerbatimStringTok{\textasciigrave{}}
\VerbatimStringTok{      \textless{}td\textgreater{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{cpf}\SpecialCharTok{\}}\VerbatimStringTok{\textless{}/td\textgreater{}}
\VerbatimStringTok{      \textless{}td\textgreater{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{foto} \OperatorTok{?} \VerbatimStringTok{\textasciigrave{}\textless{}img class="thumb" src="}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{foto}\SpecialCharTok{\}}\VerbatimStringTok{" alt="foto"\textgreater{}\textasciigrave{}} \OperatorTok{:} \StringTok{\textquotesingle{}\textquotesingle{}}\SpecialCharTok{\}}\VerbatimStringTok{\textless{}/td\textgreater{}}
\VerbatimStringTok{      \textless{}td\textgreater{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{nome}\SpecialCharTok{\}}\VerbatimStringTok{\textless{}/td\textgreater{}}
\VerbatimStringTok{      \textless{}td\textgreater{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{endereco}\SpecialCharTok{\}}\VerbatimStringTok{\textless{}/td\textgreater{}}
\VerbatimStringTok{      \textless{}td\textgreater{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{data\_nascimento}\SpecialCharTok{\}}\VerbatimStringTok{\textless{}/td\textgreater{}\textasciigrave{}}\OperatorTok{;}
\NormalTok{    tr}\OperatorTok{.}\AttributeTok{onclick} \OperatorTok{=}\NormalTok{ () }\KeywordTok{=\textgreater{}}\NormalTok{ \{}
      \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}cpf\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value} \OperatorTok{=}\NormalTok{ p}\OperatorTok{.}\AttributeTok{cpf}\OperatorTok{;}
      \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}nome\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value} \OperatorTok{=}\NormalTok{ p}\OperatorTok{.}\AttributeTok{nome}\OperatorTok{;}
      \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}endereco\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value} \OperatorTok{=}\NormalTok{ p}\OperatorTok{.}\AttributeTok{endereco}\OperatorTok{;}
      \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{\textquotesingle{}data\_nascimento\textquotesingle{}}\NormalTok{)}\OperatorTok{.}\AttributeTok{value} \OperatorTok{=}\NormalTok{ p}\OperatorTok{.}\AttributeTok{data\_nascimento}\OperatorTok{;}
\NormalTok{    \}}\OperatorTok{;}
\NormalTok{    tbody}\OperatorTok{.}\FunctionTok{appendChild}\NormalTok{(tr)}\OperatorTok{;}
\NormalTok{  \})}\OperatorTok{;}
\NormalTok{\}}

\FunctionTok{listar}\NormalTok{()}\OperatorTok{;}
\DataTypeTok{\textless{}/}\KeywordTok{script}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{body}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{html}\DataTypeTok{\textgreater{}}
\end{Highlighting}
\end{Shaded}

\section{Exemplo 04 - SERVIDOR DE APLICA√á√ÉO JAVA}\label{exemplo-04---servidor-de-aplicauxe7uxe3o-java}

\pandocbounded{\includegraphics[keepaspectratio]{images/clipboard-3162947411.png}}

{[} Vou refazer estes exemplo {]}

\section{Exemplo 05 - SERVIDOR DE APLICA√á√ÉO C++}\label{exemplo-05---servidor-de-aplicauxe7uxe3o-c}

\pandocbounded{\includegraphics[keepaspectratio]{images/clipboard-2416235942.png}}

Neste exemplo, temos uma aplica√ß√£o cliente feita html e javascript

A interface do Cliente √© feita em HTML5

A conex√£o com o servidor √© feita pelo javascript incorporado no HTML:

CRUD no cliente √© feito peloa javascript utilizando metodologia Restful sobre protocolo HTTP 2.0

O servidor Restful √© feito em linguagem C++

A linguagem C++ precisa ser compilada.

PORTANTO O C√ìDIGO DO SERVIDOR PRECISAR√Å SER COMPILADO.

EM C++ VAMOS USAR BIBLIOTECAS EXTERNAS libpqxx e crow

OBS: N√ÉO TEMOS CONTROLE DE SESS√ÉO DE CLIENTE IMPLEMENTADO.

estrutura de diret√≥rios:

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{pessoas{-}rest{-}cpp/}
\NormalTok{‚îú‚îÄ CMakeLists}\FunctionTok{.txt}
\NormalTok{‚îú‚îÄ src/}
\NormalTok{‚îÇ   ‚îî‚îÄ main}\FunctionTok{.cpp}
\NormalTok{‚îî‚îÄ include/}
\NormalTok{    ‚îî‚îÄ crow\_all}\FunctionTok{.h}\NormalTok{        ‚Üê header √∫nico da biblioteca Crow}
\end{Highlighting}
\end{Shaded}

\subsection{Criando o arquivo C++ do servidor}\label{criando-o-arquivo-c-do-servidor}

\begin{Shaded}
\begin{Highlighting}[]
\PreprocessorTok{\#include }\ImportTok{"crow\_all.h"}
\PreprocessorTok{\#include }\ImportTok{\textless{}pqxx/pqxx\textgreater{}}
\PreprocessorTok{\#include }\ImportTok{\textless{}iostream\textgreater{}}

\AttributeTok{const} \BuiltInTok{std::}\NormalTok{string CONN\_STR }\OperatorTok{=}
    \StringTok{"postgresql://postgres:MinhaSuperSenha@db.pbbtfwmydxmxdibmtbqq.supabase.co:5432/postgres"}\OperatorTok{;}

\DataTypeTok{int}\NormalTok{ main}\OperatorTok{()} \OperatorTok{\{}
\NormalTok{    crow}\OperatorTok{::}\NormalTok{SimpleApp app}\OperatorTok{;}

    \CommentTok{// GET /pessoas}
\NormalTok{    CROW\_ROUTE}\OperatorTok{(}\NormalTok{app}\OperatorTok{,} \StringTok{"/pessoas"}\OperatorTok{).}\NormalTok{methods}\OperatorTok{(}\StringTok{"GET"}\OperatorTok{\_method)}
    \OperatorTok{([](}\AttributeTok{const}\NormalTok{ crow}\OperatorTok{::}\NormalTok{request}\OperatorTok{\&}\NormalTok{ req}\OperatorTok{)\{}
\NormalTok{        pqxx}\OperatorTok{::}\NormalTok{connection c}\OperatorTok{(}\NormalTok{CONN\_STR}\OperatorTok{);}
\NormalTok{        pqxx}\OperatorTok{::}\NormalTok{work w}\OperatorTok{(}\NormalTok{c}\OperatorTok{);}
        \BuiltInTok{std::}\NormalTok{string q }\OperatorTok{=}\NormalTok{ req}\OperatorTok{.}\NormalTok{url\_params}\OperatorTok{.}\NormalTok{get}\OperatorTok{(}\StringTok{"q"}\OperatorTok{)} \OperatorTok{?}\NormalTok{ req}\OperatorTok{.}\NormalTok{url\_params}\OperatorTok{.}\NormalTok{get}\OperatorTok{(}\StringTok{"q"}\OperatorTok{)} \OperatorTok{:} \StringTok{""}\OperatorTok{;}
\NormalTok{        pqxx}\OperatorTok{::}\NormalTok{result r}\OperatorTok{;}
        \ControlFlowTok{if}\OperatorTok{(!}\NormalTok{q}\OperatorTok{.}\NormalTok{empty}\OperatorTok{())} \OperatorTok{\{}
\NormalTok{            r }\OperatorTok{=}\NormalTok{ w}\OperatorTok{.}\NormalTok{exec\_params}\OperatorTok{(}
                \StringTok{"SELECT cpf,nome,endereco,data\_nascimento,foto "}
                \StringTok{"FROM pessoas WHERE lower(nome) LIKE lower(\textquotesingle{}\%\textquotesingle{}||$1||\textquotesingle{}\%\textquotesingle{}) OR cpf LIKE \textquotesingle{}\%\textquotesingle{}||$1||\textquotesingle{}\%\textquotesingle{}"}\OperatorTok{,}
\NormalTok{                q}\OperatorTok{);}
        \OperatorTok{\}} \ControlFlowTok{else} \OperatorTok{\{}
\NormalTok{            r }\OperatorTok{=}\NormalTok{ w}\OperatorTok{.}\NormalTok{exec}\OperatorTok{(}\StringTok{"SELECT cpf,nome,endereco,data\_nascimento,foto FROM pessoas"}\OperatorTok{);}
        \OperatorTok{\}}
\NormalTok{        crow}\OperatorTok{::}\NormalTok{json}\OperatorTok{::}\NormalTok{wvalue out}\OperatorTok{;}
        \DataTypeTok{size\_t}\NormalTok{ i}\OperatorTok{=}\DecValTok{0}\OperatorTok{;}
        \ControlFlowTok{for}\OperatorTok{(}\KeywordTok{auto}\NormalTok{ row }\OperatorTok{:}\NormalTok{ r}\OperatorTok{)} \OperatorTok{\{}
\NormalTok{            out}\OperatorTok{[}\NormalTok{i}\OperatorTok{][}\StringTok{"cpf"}\OperatorTok{]} \OperatorTok{=}\NormalTok{ row}\OperatorTok{[}\StringTok{"cpf"}\OperatorTok{].}\NormalTok{c\_str}\OperatorTok{();}
\NormalTok{            out}\OperatorTok{[}\NormalTok{i}\OperatorTok{][}\StringTok{"nome"}\OperatorTok{]} \OperatorTok{=}\NormalTok{ row}\OperatorTok{[}\StringTok{"nome"}\OperatorTok{].}\NormalTok{c\_str}\OperatorTok{();}
\NormalTok{            out}\OperatorTok{[}\NormalTok{i}\OperatorTok{][}\StringTok{"endereco"}\OperatorTok{]} \OperatorTok{=}\NormalTok{ row}\OperatorTok{[}\StringTok{"endereco"}\OperatorTok{].}\NormalTok{c\_str}\OperatorTok{();}
\NormalTok{            out}\OperatorTok{[}\NormalTok{i}\OperatorTok{][}\StringTok{"dataNascimento"}\OperatorTok{]} \OperatorTok{=}\NormalTok{ row}\OperatorTok{[}\StringTok{"data\_nascimento"}\OperatorTok{].}\NormalTok{c\_str}\OperatorTok{();}
\NormalTok{            out}\OperatorTok{[}\NormalTok{i}\OperatorTok{][}\StringTok{"foto"}\OperatorTok{]} \OperatorTok{=}\NormalTok{ row}\OperatorTok{[}\StringTok{"foto"}\OperatorTok{].}\NormalTok{is\_null}\OperatorTok{()} \OperatorTok{?} \StringTok{""} \OperatorTok{:}\NormalTok{ row}\OperatorTok{[}\StringTok{"foto"}\OperatorTok{].}\NormalTok{c\_str}\OperatorTok{();}
            \OperatorTok{++}\NormalTok{i}\OperatorTok{;}
        \OperatorTok{\}}
        \ControlFlowTok{return}\NormalTok{ crow}\OperatorTok{::}\NormalTok{response}\OperatorTok{(}\NormalTok{out}\OperatorTok{);}
    \OperatorTok{\});}

    \CommentTok{// POST /pessoas}
\NormalTok{    CROW\_ROUTE}\OperatorTok{(}\NormalTok{app}\OperatorTok{,} \StringTok{"/pessoas"}\OperatorTok{).}\NormalTok{methods}\OperatorTok{(}\StringTok{"POST"}\OperatorTok{\_method)}
    \OperatorTok{([](}\AttributeTok{const}\NormalTok{ crow}\OperatorTok{::}\NormalTok{request}\OperatorTok{\&}\NormalTok{ req}\OperatorTok{)\{}
        \KeywordTok{auto}\NormalTok{ body }\OperatorTok{=}\NormalTok{ crow}\OperatorTok{::}\NormalTok{json}\OperatorTok{::}\NormalTok{load}\OperatorTok{(}\NormalTok{req}\OperatorTok{.}\NormalTok{body}\OperatorTok{);}
        \ControlFlowTok{if}\OperatorTok{(!}\NormalTok{body }\OperatorTok{||} \OperatorTok{!}\NormalTok{body}\OperatorTok{.}\NormalTok{has}\OperatorTok{(}\StringTok{"cpf"}\OperatorTok{))}
            \ControlFlowTok{return}\NormalTok{ crow}\OperatorTok{::}\NormalTok{response}\OperatorTok{(}\DecValTok{400}\OperatorTok{,} \StringTok{"CPF √© obrigat√≥rio"}\OperatorTok{);}

        \ControlFlowTok{try} \OperatorTok{\{}
\NormalTok{            pqxx}\OperatorTok{::}\NormalTok{connection c}\OperatorTok{(}\NormalTok{CONN\_STR}\OperatorTok{);}
\NormalTok{            pqxx}\OperatorTok{::}\NormalTok{work w}\OperatorTok{(}\NormalTok{c}\OperatorTok{);}
\NormalTok{            w}\OperatorTok{.}\NormalTok{exec\_params}\OperatorTok{(}
                \StringTok{"INSERT INTO pessoas (cpf,nome,endereco,data\_nascimento,foto) "}
                \StringTok{"VALUES ($1,$2,$3,$4,$5)"}\OperatorTok{,}
\NormalTok{                body}\OperatorTok{[}\StringTok{"cpf"}\OperatorTok{].}\NormalTok{s}\OperatorTok{(),}
\NormalTok{                body}\OperatorTok{[}\StringTok{"nome"}\OperatorTok{].}\VariableTok{s\_or}\OperatorTok{(}\StringTok{""}\OperatorTok{),}
\NormalTok{                body}\OperatorTok{[}\StringTok{"endereco"}\OperatorTok{].}\VariableTok{s\_or}\OperatorTok{(}\StringTok{""}\OperatorTok{),}
\NormalTok{                body}\OperatorTok{[}\StringTok{"dataNascimento"}\OperatorTok{].}\VariableTok{s\_or}\OperatorTok{(}\StringTok{""}\OperatorTok{),}
\NormalTok{                body}\OperatorTok{[}\StringTok{"foto"}\OperatorTok{].}\VariableTok{s\_or}\OperatorTok{(}\StringTok{""}\OperatorTok{)}
            \OperatorTok{);}
\NormalTok{            w}\OperatorTok{.}\NormalTok{commit}\OperatorTok{();}
            \ControlFlowTok{return}\NormalTok{ crow}\OperatorTok{::}\NormalTok{response}\OperatorTok{(}\DecValTok{201}\OperatorTok{,} \StringTok{"Inserido"}\OperatorTok{);}
        \OperatorTok{\}} \ControlFlowTok{catch}\OperatorTok{(}\AttributeTok{const} \BuiltInTok{std::}\NormalTok{exception }\OperatorTok{\&}\NormalTok{e}\OperatorTok{)} \OperatorTok{\{}
            \ControlFlowTok{return}\NormalTok{ crow}\OperatorTok{::}\NormalTok{response}\OperatorTok{(}\DecValTok{400}\OperatorTok{,}\NormalTok{ e}\OperatorTok{.}\NormalTok{what}\OperatorTok{());}
        \OperatorTok{\}}
    \OperatorTok{\});}

    \CommentTok{// PUT /pessoas/\textless{}cpf\textgreater{}}
\NormalTok{    CROW\_ROUTE}\OperatorTok{(}\NormalTok{app}\OperatorTok{,} \StringTok{"/pessoas/\textless{}string\textgreater{}"}\OperatorTok{).}\NormalTok{methods}\OperatorTok{(}\StringTok{"PUT"}\OperatorTok{\_method)}
    \OperatorTok{([](}\AttributeTok{const}\NormalTok{ crow}\OperatorTok{::}\NormalTok{request}\OperatorTok{\&}\NormalTok{ req}\OperatorTok{,} \BuiltInTok{std::}\NormalTok{string cpf}\OperatorTok{)\{}
        \KeywordTok{auto}\NormalTok{ body }\OperatorTok{=}\NormalTok{ crow}\OperatorTok{::}\NormalTok{json}\OperatorTok{::}\NormalTok{load}\OperatorTok{(}\NormalTok{req}\OperatorTok{.}\NormalTok{body}\OperatorTok{);}
        \ControlFlowTok{if}\OperatorTok{(!}\NormalTok{body}\OperatorTok{)}
            \ControlFlowTok{return}\NormalTok{ crow}\OperatorTok{::}\NormalTok{response}\OperatorTok{(}\DecValTok{400}\OperatorTok{,} \StringTok{"JSON inv√°lido"}\OperatorTok{);}
        \ControlFlowTok{try} \OperatorTok{\{}
\NormalTok{            pqxx}\OperatorTok{::}\NormalTok{connection c}\OperatorTok{(}\NormalTok{CONN\_STR}\OperatorTok{);}
\NormalTok{            pqxx}\OperatorTok{::}\NormalTok{work w}\OperatorTok{(}\NormalTok{c}\OperatorTok{);}
\NormalTok{            w}\OperatorTok{.}\NormalTok{exec\_params}\OperatorTok{(}
                \StringTok{"UPDATE pessoas SET nome=$1,endereco=$2,data\_nascimento=$3,foto=$4 WHERE cpf=$5"}\OperatorTok{,}
\NormalTok{                body}\OperatorTok{[}\StringTok{"nome"}\OperatorTok{].}\VariableTok{s\_or}\OperatorTok{(}\StringTok{""}\OperatorTok{),}
\NormalTok{                body}\OperatorTok{[}\StringTok{"endereco"}\OperatorTok{].}\VariableTok{s\_or}\OperatorTok{(}\StringTok{""}\OperatorTok{),}
\NormalTok{                body}\OperatorTok{[}\StringTok{"dataNascimento"}\OperatorTok{].}\VariableTok{s\_or}\OperatorTok{(}\StringTok{""}\OperatorTok{),}
\NormalTok{                body}\OperatorTok{[}\StringTok{"foto"}\OperatorTok{].}\VariableTok{s\_or}\OperatorTok{(}\StringTok{""}\OperatorTok{),}
\NormalTok{                cpf}
            \OperatorTok{);}
            \ControlFlowTok{if}\OperatorTok{(}\NormalTok{w}\OperatorTok{.}\NormalTok{affected\_rows}\OperatorTok{()} \OperatorTok{==} \DecValTok{0}\OperatorTok{)} \ControlFlowTok{return}\NormalTok{ crow}\OperatorTok{::}\NormalTok{response}\OperatorTok{(}\DecValTok{404}\OperatorTok{,} \StringTok{"CPF n√£o encontrado"}\OperatorTok{);}
\NormalTok{            w}\OperatorTok{.}\NormalTok{commit}\OperatorTok{();}
            \ControlFlowTok{return}\NormalTok{ crow}\OperatorTok{::}\NormalTok{response}\OperatorTok{(}\DecValTok{200}\OperatorTok{,} \StringTok{"Alterado"}\OperatorTok{);}
        \OperatorTok{\}} \ControlFlowTok{catch}\OperatorTok{(}\AttributeTok{const} \BuiltInTok{std::}\NormalTok{exception }\OperatorTok{\&}\NormalTok{e}\OperatorTok{)} \OperatorTok{\{}
            \ControlFlowTok{return}\NormalTok{ crow}\OperatorTok{::}\NormalTok{response}\OperatorTok{(}\DecValTok{400}\OperatorTok{,}\NormalTok{ e}\OperatorTok{.}\NormalTok{what}\OperatorTok{());}
        \OperatorTok{\}}
    \OperatorTok{\});}

    \CommentTok{// DELETE /pessoas/\textless{}cpf\textgreater{}}
\NormalTok{    CROW\_ROUTE}\OperatorTok{(}\NormalTok{app}\OperatorTok{,} \StringTok{"/pessoas/\textless{}string\textgreater{}"}\OperatorTok{).}\NormalTok{methods}\OperatorTok{(}\StringTok{"DELETE"}\OperatorTok{\_method)}
    \OperatorTok{([](}\AttributeTok{const}\NormalTok{ crow}\OperatorTok{::}\NormalTok{request}\OperatorTok{\&,} \BuiltInTok{std::}\NormalTok{string cpf}\OperatorTok{)\{}
        \ControlFlowTok{try} \OperatorTok{\{}
\NormalTok{            pqxx}\OperatorTok{::}\NormalTok{connection c}\OperatorTok{(}\NormalTok{CONN\_STR}\OperatorTok{);}
\NormalTok{            pqxx}\OperatorTok{::}\NormalTok{work w}\OperatorTok{(}\NormalTok{c}\OperatorTok{);}
\NormalTok{            w}\OperatorTok{.}\NormalTok{exec\_params}\OperatorTok{(}\StringTok{"DELETE FROM pessoas WHERE cpf=$1"}\OperatorTok{,}\NormalTok{ cpf}\OperatorTok{);}
            \ControlFlowTok{if}\OperatorTok{(}\NormalTok{w}\OperatorTok{.}\NormalTok{affected\_rows}\OperatorTok{()} \OperatorTok{==} \DecValTok{0}\OperatorTok{)} \ControlFlowTok{return}\NormalTok{ crow}\OperatorTok{::}\NormalTok{response}\OperatorTok{(}\DecValTok{404}\OperatorTok{,} \StringTok{"CPF n√£o encontrado"}\OperatorTok{);}
\NormalTok{            w}\OperatorTok{.}\NormalTok{commit}\OperatorTok{();}
            \ControlFlowTok{return}\NormalTok{ crow}\OperatorTok{::}\NormalTok{response}\OperatorTok{(}\DecValTok{200}\OperatorTok{,} \StringTok{"Removido"}\OperatorTok{);}
        \OperatorTok{\}} \ControlFlowTok{catch}\OperatorTok{(}\AttributeTok{const} \BuiltInTok{std::}\NormalTok{exception }\OperatorTok{\&}\NormalTok{e}\OperatorTok{)} \OperatorTok{\{}
            \ControlFlowTok{return}\NormalTok{ crow}\OperatorTok{::}\NormalTok{response}\OperatorTok{(}\DecValTok{400}\OperatorTok{,}\NormalTok{ e}\OperatorTok{.}\NormalTok{what}\OperatorTok{());}
        \OperatorTok{\}}
    \OperatorTok{\});}

    \BuiltInTok{std::}\NormalTok{cout }\OperatorTok{\textless{}\textless{}} \StringTok{"Servidor rodando em http://0.0.0.0:8080}\SpecialCharTok{\textbackslash{}n}\StringTok{"}\OperatorTok{;}
\NormalTok{    app}\OperatorTok{.}\NormalTok{port}\OperatorTok{(}\DecValTok{8080}\OperatorTok{).}\NormalTok{multithreaded}\OperatorTok{().}\NormalTok{run}\OperatorTok{();}
\OperatorTok{\}}
\end{Highlighting}
\end{Shaded}

\subsection{Ferramenta de compila√ß√£o CMAKE}\label{ferramenta-de-compilauxe7uxe3o-cmake}

Preparando o arquivo de instru√ß√µes da ferramenta de projeto CMAKE

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{cmake\_minimum\_required(VERSION 3.20)}
\NormalTok{project(PessoasRestCpp LANGUAGES CXX)}

\NormalTok{set(CMAKE\_CXX\_STANDARD 17)}
\NormalTok{set(CMAKE\_CXX\_STANDARD\_REQUIRED ON)}

\NormalTok{\# Caminho para os headers (Crow e outros)}
\NormalTok{include\_directories($\{CMAKE\_SOURCE\_DIR\}/include)}

\NormalTok{\# Localiza√ß√£o de libpqxx (ajuste se estiver em pasta diferente)}
\NormalTok{find\_package(PostgreSQL REQUIRED)}
\NormalTok{find\_path(PQXX\_INCLUDE\_DIR pqxx/pqxx)}
\NormalTok{find\_library(PQXX\_LIBRARY pqxx)}

\NormalTok{if(NOT PQXX\_INCLUDE\_DIR OR NOT PQXX\_LIBRARY)}
\NormalTok{    message(FATAL\_ERROR "libpqxx n√£o encontrada. Instale com vcpkg ou aponte manualmente.")}
\NormalTok{endif()}

\NormalTok{add\_executable(pessoas{-}rest}
\NormalTok{    src/main.cpp}
\NormalTok{)}

\NormalTok{target\_include\_directories(pessoas{-}rest PRIVATE $\{PQXX\_INCLUDE\_DIR\})}
\NormalTok{target\_link\_libraries(pessoas{-}rest}
\NormalTok{    $\{PQXX\_LIBRARY\}}
\NormalTok{    PostgreSQL::PostgreSQL}
\NormalTok{)}
\end{Highlighting}
\end{Shaded}

Adicionando biblioteca extra no compilador C++ do windows

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{vcpkg install libpqxx}
\end{Highlighting}
\end{Shaded}

Gere o projeto do servidor para ``Visual Studio 17 2022'' E ARQUITETURA x64

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{cmake }\AttributeTok{{-}B}\NormalTok{ build }\AttributeTok{{-}G} \StringTok{"Visual Studio 17 2022"} \AttributeTok{{-}A}\NormalTok{ x64  }\AttributeTok{{-}DCMAKE\_TOOLCHAIN\_FILE}\NormalTok{=C:}\AttributeTok{/path/to/vcpkg/scripts/buildsystems/vcpkg}\NormalTok{.cmake}
\end{Highlighting}
\end{Shaded}

Compile e linque todo o projeto

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{cmake {-}}\AttributeTok{{-}build}\NormalTok{ build {-}}\AttributeTok{{-}config}\NormalTok{ Release}
\end{Highlighting}
\end{Shaded}

execute o servidor

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{build/Release/pessoas{-}rest.exe}
\end{Highlighting}
\end{Shaded}

servidor estar√° rodando na porta 8080 e EXP√ïE A API de opera√ß√µes na URI \url{http://localhost:8080/pessoas} sem senha

\begin{Shaded}
\begin{Highlighting}[]
\NormalTok{http}\InformationTok{:}\ErrorTok{//localhost:8080/pessoas}
\end{Highlighting}
\end{Shaded}

\subsection{Cliente HTML (conex√£o Restful)}\label{cliente-html-conexuxe3o-restful-2}

crie o arquivo index.html e abra-o no navegador

\begin{Shaded}
\begin{Highlighting}[]
\DataTypeTok{\textless{}!DOCTYPE}\NormalTok{ html}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{html}\OtherTok{ lang}\OperatorTok{=}\StringTok{"pt{-}BR"}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{head}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{meta}\OtherTok{ charset}\OperatorTok{=}\StringTok{"UTF{-}8"}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{title}\DataTypeTok{\textgreater{}}\NormalTok{Cadastro de Pessoas}\DataTypeTok{\textless{}/}\KeywordTok{title}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{style}\DataTypeTok{\textgreater{}}
\NormalTok{  body \{ }\KeywordTok{font{-}family}\CharTok{:} \DecValTok{Arial}\OperatorTok{,} \DecValTok{sans{-}serif}\OperatorTok{;} \KeywordTok{margin}\CharTok{:} \DecValTok{20}\DataTypeTok{px}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  h1 \{ }\KeywordTok{color}\CharTok{:} \ConstantTok{\#333}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  form \{ }\KeywordTok{margin{-}bottom}\CharTok{:} \DecValTok{20}\DataTypeTok{px}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  label \{ }\KeywordTok{display}\CharTok{:} \DecValTok{block}\OperatorTok{;} \KeywordTok{margin{-}top}\CharTok{:} \DecValTok{10}\DataTypeTok{px}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  input}\ExtensionTok{[}\SpecialStringTok{type}\OperatorTok{=}\StringTok{text}\ExtensionTok{]}\OperatorTok{,}\NormalTok{ input}\ExtensionTok{[}\SpecialStringTok{type}\OperatorTok{=}\StringTok{date}\ExtensionTok{]}\OperatorTok{,}\NormalTok{ input}\ExtensionTok{[}\SpecialStringTok{type}\OperatorTok{=}\StringTok{file}\ExtensionTok{]}\NormalTok{ \{}
    \KeywordTok{width}\CharTok{:} \DecValTok{300}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{padding}\CharTok{:} \DecValTok{5}\DataTypeTok{px}\OperatorTok{;}
\NormalTok{  \}}
\NormalTok{  table \{ }\KeywordTok{border{-}collapse}\CharTok{:} \DecValTok{collapse}\OperatorTok{;} \KeywordTok{width}\CharTok{:} \DecValTok{100}\DataTypeTok{\%}\OperatorTok{;} \KeywordTok{margin{-}top}\CharTok{:} \DecValTok{20}\DataTypeTok{px}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  th}\OperatorTok{,}\NormalTok{ td \{ }\KeywordTok{border}\CharTok{:} \DecValTok{1}\DataTypeTok{px} \DecValTok{solid} \ConstantTok{\#aaa}\OperatorTok{;} \KeywordTok{padding}\CharTok{:} \DecValTok{6}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{text{-}align}\CharTok{:} \DecValTok{left}\OperatorTok{;}\NormalTok{ \}}
\NormalTok{  img \{ }\KeywordTok{max{-}width}\CharTok{:} \DecValTok{80}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{max{-}height}\CharTok{:} \DecValTok{80}\DataTypeTok{px}\OperatorTok{;}\NormalTok{ \}}
  \FunctionTok{.btn}\NormalTok{ \{ }\KeywordTok{padding}\CharTok{:} \DecValTok{4}\DataTypeTok{px} \DecValTok{8}\DataTypeTok{px}\OperatorTok{;} \KeywordTok{cursor}\CharTok{:} \DecValTok{pointer}\OperatorTok{;} \KeywordTok{margin}\CharTok{:} \DecValTok{0} \DecValTok{2}\DataTypeTok{px}\OperatorTok{;}\NormalTok{ \}}
\DataTypeTok{\textless{}/}\KeywordTok{style}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{head}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}}\KeywordTok{body}\DataTypeTok{\textgreater{}}

\DataTypeTok{\textless{}}\KeywordTok{h1}\DataTypeTok{\textgreater{}}\NormalTok{Cadastro de Pessoas}\DataTypeTok{\textless{}/}\KeywordTok{h1}\DataTypeTok{\textgreater{}}

\DataTypeTok{\textless{}}\KeywordTok{form}\OtherTok{ id}\OperatorTok{=}\StringTok{"pessoaForm"}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{label}\DataTypeTok{\textgreater{}}\NormalTok{CPF*:}
    \DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ type}\OperatorTok{=}\StringTok{"text"}\OtherTok{ id}\OperatorTok{=}\StringTok{"cpf"}\OtherTok{ required}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}/}\KeywordTok{label}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{label}\DataTypeTok{\textgreater{}}\NormalTok{Nome:}
    \DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ type}\OperatorTok{=}\StringTok{"text"}\OtherTok{ id}\OperatorTok{=}\StringTok{"nome"}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}/}\KeywordTok{label}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{label}\DataTypeTok{\textgreater{}}\NormalTok{Endere√ßo:}
    \DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ type}\OperatorTok{=}\StringTok{"text"}\OtherTok{ id}\OperatorTok{=}\StringTok{"endereco"}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}/}\KeywordTok{label}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{label}\DataTypeTok{\textgreater{}}\NormalTok{Data de Nascimento:}
    \DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ type}\OperatorTok{=}\StringTok{"date"}\OtherTok{ id}\OperatorTok{=}\StringTok{"dataNascimento"}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}/}\KeywordTok{label}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{label}\DataTypeTok{\textgreater{}}\NormalTok{Foto:}
    \DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ type}\OperatorTok{=}\StringTok{"file"}\OtherTok{ id}\OperatorTok{=}\StringTok{"foto"}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}/}\KeywordTok{label}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{button}\OtherTok{ type}\OperatorTok{=}\StringTok{"submit"}\OtherTok{ class}\OperatorTok{=}\StringTok{"btn"}\DataTypeTok{\textgreater{}}\NormalTok{Salvar}\DataTypeTok{\textless{}/}\KeywordTok{button}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{form}\DataTypeTok{\textgreater{}}

\DataTypeTok{\textless{}}\KeywordTok{div}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{input}\OtherTok{ type}\OperatorTok{=}\StringTok{"text"}\OtherTok{ id}\OperatorTok{=}\StringTok{"search"}\OtherTok{ placeholder}\OperatorTok{=}\StringTok{"Buscar por CPF ou Nome"}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{button}\OtherTok{ id}\OperatorTok{=}\StringTok{"btnBuscar"}\OtherTok{ class}\OperatorTok{=}\StringTok{"btn"}\DataTypeTok{\textgreater{}}\NormalTok{Buscar}\DataTypeTok{\textless{}/}\KeywordTok{button}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{button}\OtherTok{ id}\OperatorTok{=}\StringTok{"btnListar"}\OtherTok{ class}\OperatorTok{=}\StringTok{"btn"}\DataTypeTok{\textgreater{}}\NormalTok{Listar Todos}\DataTypeTok{\textless{}/}\KeywordTok{button}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{div}\DataTypeTok{\textgreater{}}

\DataTypeTok{\textless{}}\KeywordTok{table}\OtherTok{ id}\OperatorTok{=}\StringTok{"tabelaPessoas"}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{thead}\DataTypeTok{\textgreater{}}
    \DataTypeTok{\textless{}}\KeywordTok{tr}\DataTypeTok{\textgreater{}}
      \DataTypeTok{\textless{}}\KeywordTok{th}\DataTypeTok{\textgreater{}}\NormalTok{CPF}\DataTypeTok{\textless{}/}\KeywordTok{th}\DataTypeTok{\textgreater{}\textless{}}\KeywordTok{th}\DataTypeTok{\textgreater{}}\NormalTok{Nome}\DataTypeTok{\textless{}/}\KeywordTok{th}\DataTypeTok{\textgreater{}\textless{}}\KeywordTok{th}\DataTypeTok{\textgreater{}}\NormalTok{Endere√ßo}\DataTypeTok{\textless{}/}\KeywordTok{th}\DataTypeTok{\textgreater{}\textless{}}\KeywordTok{th}\DataTypeTok{\textgreater{}}\NormalTok{Nascimento}\DataTypeTok{\textless{}/}\KeywordTok{th}\DataTypeTok{\textgreater{}\textless{}}\KeywordTok{th}\DataTypeTok{\textgreater{}}\NormalTok{Foto}\DataTypeTok{\textless{}/}\KeywordTok{th}\DataTypeTok{\textgreater{}\textless{}}\KeywordTok{th}\DataTypeTok{\textgreater{}}\NormalTok{A√ß√µes}\DataTypeTok{\textless{}/}\KeywordTok{th}\DataTypeTok{\textgreater{}}
    \DataTypeTok{\textless{}/}\KeywordTok{tr}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}/}\KeywordTok{thead}\DataTypeTok{\textgreater{}}
  \DataTypeTok{\textless{}}\KeywordTok{tbody}\DataTypeTok{\textgreater{}\textless{}/}\KeywordTok{tbody}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{table}\DataTypeTok{\textgreater{}}

\DataTypeTok{\textless{}}\KeywordTok{script}\DataTypeTok{\textgreater{}}
\KeywordTok{const}\NormalTok{ API\_URL }\OperatorTok{=} \StringTok{"http://localhost:8080/pessoas"}\OperatorTok{;}

\KeywordTok{async} \KeywordTok{function} \FunctionTok{carregarPessoas}\NormalTok{(query}\OperatorTok{=}\StringTok{""}\NormalTok{) \{}
  \KeywordTok{const}\NormalTok{ url }\OperatorTok{=}\NormalTok{ query }\OperatorTok{?} \VerbatimStringTok{\textasciigrave{}}\SpecialCharTok{$\{}\NormalTok{API\_URL}\SpecialCharTok{\}}\VerbatimStringTok{?q=}\SpecialCharTok{$\{}\PreprocessorTok{encodeURIComponent}\NormalTok{(query)}\SpecialCharTok{\}}\VerbatimStringTok{\textasciigrave{}} \OperatorTok{:}\NormalTok{ API\_URL}\OperatorTok{;}
  \KeywordTok{const}\NormalTok{ resp }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{fetch}\NormalTok{(url)}\OperatorTok{;}
  \KeywordTok{const}\NormalTok{ data }\OperatorTok{=} \ControlFlowTok{await}\NormalTok{ resp}\OperatorTok{.}\FunctionTok{json}\NormalTok{()}\OperatorTok{;}
  \KeywordTok{const}\NormalTok{ tbody }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{querySelector}\NormalTok{(}\StringTok{"\#tabelaPessoas tbody"}\NormalTok{)}\OperatorTok{;}
\NormalTok{  tbody}\OperatorTok{.}\AttributeTok{innerHTML} \OperatorTok{=} \StringTok{""}\OperatorTok{;}
\NormalTok{  data}\OperatorTok{.}\FunctionTok{forEach}\NormalTok{(p }\KeywordTok{=\textgreater{}}\NormalTok{ \{}
    \KeywordTok{const}\NormalTok{ tr }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{createElement}\NormalTok{(}\StringTok{"tr"}\NormalTok{)}\OperatorTok{;}
\NormalTok{    tr}\OperatorTok{.}\AttributeTok{innerHTML} \OperatorTok{=} \VerbatimStringTok{\textasciigrave{}}
\VerbatimStringTok{      \textless{}td\textgreater{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{cpf}\SpecialCharTok{\}}\VerbatimStringTok{\textless{}/td\textgreater{}}
\VerbatimStringTok{      \textless{}td\textgreater{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{nome} \OperatorTok{||} \StringTok{""}\SpecialCharTok{\}}\VerbatimStringTok{\textless{}/td\textgreater{}}
\VerbatimStringTok{      \textless{}td\textgreater{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{endereco} \OperatorTok{||} \StringTok{""}\SpecialCharTok{\}}\VerbatimStringTok{\textless{}/td\textgreater{}}
\VerbatimStringTok{      \textless{}td\textgreater{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{dataNascimento} \OperatorTok{||} \StringTok{""}\SpecialCharTok{\}}\VerbatimStringTok{\textless{}/td\textgreater{}}
\VerbatimStringTok{      \textless{}td\textgreater{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{foto} \OperatorTok{?} \VerbatimStringTok{\textasciigrave{}\textless{}img src="}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{foto}\SpecialCharTok{\}}\VerbatimStringTok{" alt="foto"\textgreater{}\textasciigrave{}} \OperatorTok{:} \StringTok{""}\SpecialCharTok{\}}\VerbatimStringTok{\textless{}/td\textgreater{}}
\VerbatimStringTok{      \textless{}td\textgreater{}}
\VerbatimStringTok{        \textless{}button class="btn" onclick="editar(\textquotesingle{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{cpf}\SpecialCharTok{\}}\VerbatimStringTok{\textquotesingle{})"\textgreater{}Editar\textless{}/button\textgreater{}}
\VerbatimStringTok{        \textless{}button class="btn" onclick="excluir(\textquotesingle{}}\SpecialCharTok{$\{}\NormalTok{p}\OperatorTok{.}\AttributeTok{cpf}\SpecialCharTok{\}}\VerbatimStringTok{\textquotesingle{})"\textgreater{}Excluir\textless{}/button\textgreater{}}
\VerbatimStringTok{      \textless{}/td\textgreater{}}
\VerbatimStringTok{    \textasciigrave{}}\OperatorTok{;}
\NormalTok{    tbody}\OperatorTok{.}\FunctionTok{appendChild}\NormalTok{(tr)}\OperatorTok{;}
\NormalTok{  \})}\OperatorTok{;}
\NormalTok{\}}

\KeywordTok{async} \KeywordTok{function} \FunctionTok{toBase64}\NormalTok{(file) \{}
  \ControlFlowTok{return} \KeywordTok{new} \BuiltInTok{Promise}\NormalTok{((resolve}\OperatorTok{,}\NormalTok{ reject) }\KeywordTok{=\textgreater{}}\NormalTok{ \{}
    \KeywordTok{const}\NormalTok{ reader }\OperatorTok{=} \KeywordTok{new} \BuiltInTok{FileReader}\NormalTok{()}\OperatorTok{;}
\NormalTok{    reader}\OperatorTok{.}\AttributeTok{onload} \OperatorTok{=}\NormalTok{ () }\KeywordTok{=\textgreater{}} \FunctionTok{resolve}\NormalTok{(reader}\OperatorTok{.}\AttributeTok{result}\NormalTok{)}\OperatorTok{;}
\NormalTok{    reader}\OperatorTok{.}\AttributeTok{onerror} \OperatorTok{=}\NormalTok{ reject}\OperatorTok{;}
\NormalTok{    reader}\OperatorTok{.}\FunctionTok{readAsDataURL}\NormalTok{(file)}\OperatorTok{;}
\NormalTok{  \})}\OperatorTok{;}
\NormalTok{\}}

\BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{"pessoaForm"}\NormalTok{)}\OperatorTok{.}\FunctionTok{addEventListener}\NormalTok{(}\StringTok{"submit"}\OperatorTok{,} \KeywordTok{async}\NormalTok{ e }\KeywordTok{=\textgreater{}}\NormalTok{ \{}
\NormalTok{  e}\OperatorTok{.}\FunctionTok{preventDefault}\NormalTok{()}\OperatorTok{;}
  \KeywordTok{const}\NormalTok{ cpf }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{"cpf"}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{;}
  \ControlFlowTok{if}\NormalTok{ (}\OperatorTok{!}\NormalTok{cpf) \{ }\FunctionTok{alert}\NormalTok{(}\StringTok{"CPF √© obrigat√≥rio."}\NormalTok{)}\OperatorTok{;} \ControlFlowTok{return}\OperatorTok{;}\NormalTok{ \}}

  \KeywordTok{const}\NormalTok{ nome }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{"nome"}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{;}
  \KeywordTok{const}\NormalTok{ endereco }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{"endereco"}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{;}
  \KeywordTok{const}\NormalTok{ dataNascimento }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{"dataNascimento"}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{;}
  \KeywordTok{const}\NormalTok{ fotoFile }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{"foto"}\NormalTok{)}\OperatorTok{.}\AttributeTok{files}\NormalTok{[}\DecValTok{0}\NormalTok{]}\OperatorTok{;}
  \KeywordTok{let}\NormalTok{ fotoBase64 }\OperatorTok{=} \StringTok{""}\OperatorTok{;}
  \ControlFlowTok{if}\NormalTok{ (fotoFile) \{}
\NormalTok{    fotoBase64 }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{toBase64}\NormalTok{(fotoFile)}\OperatorTok{;}
\NormalTok{  \}}

  \CommentTok{// Se j√° existe, usa PUT, sen√£o POST}
  \KeywordTok{const}\NormalTok{ method }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{"cpf"}\NormalTok{)}\OperatorTok{.}\AttributeTok{dataset}\OperatorTok{.}\AttributeTok{editing} \OperatorTok{?} \StringTok{"PUT"} \OperatorTok{:} \StringTok{"POST"}\OperatorTok{;}
  \KeywordTok{const}\NormalTok{ url }\OperatorTok{=}\NormalTok{ method }\OperatorTok{===} \StringTok{"PUT"} \OperatorTok{?} \VerbatimStringTok{\textasciigrave{}}\SpecialCharTok{$\{}\NormalTok{API\_URL}\SpecialCharTok{\}}\VerbatimStringTok{/}\SpecialCharTok{$\{}\NormalTok{cpf}\SpecialCharTok{\}}\VerbatimStringTok{\textasciigrave{}} \OperatorTok{:}\NormalTok{ API\_URL}\OperatorTok{;}

  \KeywordTok{const}\NormalTok{ resp }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{fetch}\NormalTok{(url}\OperatorTok{,}\NormalTok{ \{}
\NormalTok{    method}\OperatorTok{,}
    \DataTypeTok{headers}\OperatorTok{:}\NormalTok{ \{ }\StringTok{"Content{-}Type"}\OperatorTok{:} \StringTok{"application/json"}\NormalTok{ \}}\OperatorTok{,}
    \DataTypeTok{body}\OperatorTok{:} \BuiltInTok{JSON}\OperatorTok{.}\FunctionTok{stringify}\NormalTok{(\{ cpf}\OperatorTok{,}\NormalTok{ nome}\OperatorTok{,}\NormalTok{ endereco}\OperatorTok{,}\NormalTok{ dataNascimento}\OperatorTok{,} \DataTypeTok{foto}\OperatorTok{:}\NormalTok{ fotoBase64 \})}
\NormalTok{  \})}\OperatorTok{;}

  \ControlFlowTok{if}\NormalTok{ (resp}\OperatorTok{.}\AttributeTok{ok}\NormalTok{) \{}
    \FunctionTok{alert}\NormalTok{(}\StringTok{"Salvo com sucesso!"}\NormalTok{)}\OperatorTok{;}
    \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{"pessoaForm"}\NormalTok{)}\OperatorTok{.}\FunctionTok{reset}\NormalTok{()}\OperatorTok{;}
    \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{"cpf"}\NormalTok{)}\OperatorTok{.}\AttributeTok{dataset}\OperatorTok{.}\AttributeTok{editing} \OperatorTok{=} \StringTok{""}\OperatorTok{;}
    \FunctionTok{carregarPessoas}\NormalTok{()}\OperatorTok{;}
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
    \FunctionTok{alert}\NormalTok{(}\StringTok{"Erro: "} \OperatorTok{+} \ControlFlowTok{await}\NormalTok{ resp}\OperatorTok{.}\FunctionTok{text}\NormalTok{())}\OperatorTok{;}
\NormalTok{  \}}
\NormalTok{\})}\OperatorTok{;}

\KeywordTok{function} \FunctionTok{editar}\NormalTok{(cpf) \{}
  \KeywordTok{const}\NormalTok{ row }\OperatorTok{=}\NormalTok{ [}\OperatorTok{...}\BuiltInTok{document}\OperatorTok{.}\FunctionTok{querySelectorAll}\NormalTok{(}\StringTok{"\#tabelaPessoas tbody tr"}\NormalTok{)]}
    \OperatorTok{.}\FunctionTok{find}\NormalTok{(tr }\KeywordTok{=\textgreater{}}\NormalTok{ tr}\OperatorTok{.}\AttributeTok{children}\NormalTok{[}\DecValTok{0}\NormalTok{]}\OperatorTok{.}\AttributeTok{textContent} \OperatorTok{===}\NormalTok{ cpf)}\OperatorTok{;}
  \ControlFlowTok{if}\NormalTok{ (}\OperatorTok{!}\NormalTok{row) }\ControlFlowTok{return}\OperatorTok{;}
  \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{"cpf"}\NormalTok{)}\OperatorTok{.}\AttributeTok{value} \OperatorTok{=}\NormalTok{ cpf}\OperatorTok{;}
  \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{"nome"}\NormalTok{)}\OperatorTok{.}\AttributeTok{value} \OperatorTok{=}\NormalTok{ row}\OperatorTok{.}\AttributeTok{children}\NormalTok{[}\DecValTok{1}\NormalTok{]}\OperatorTok{.}\AttributeTok{textContent}\OperatorTok{;}
  \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{"endereco"}\NormalTok{)}\OperatorTok{.}\AttributeTok{value} \OperatorTok{=}\NormalTok{ row}\OperatorTok{.}\AttributeTok{children}\NormalTok{[}\DecValTok{2}\NormalTok{]}\OperatorTok{.}\AttributeTok{textContent}\OperatorTok{;}
  \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{"dataNascimento"}\NormalTok{)}\OperatorTok{.}\AttributeTok{value} \OperatorTok{=}\NormalTok{ row}\OperatorTok{.}\AttributeTok{children}\NormalTok{[}\DecValTok{3}\NormalTok{]}\OperatorTok{.}\AttributeTok{textContent}\OperatorTok{;}
  \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{"cpf"}\NormalTok{)}\OperatorTok{.}\AttributeTok{dataset}\OperatorTok{.}\AttributeTok{editing} \OperatorTok{=} \StringTok{"true"}\OperatorTok{;}
  \BuiltInTok{window}\OperatorTok{.}\FunctionTok{scrollTo}\NormalTok{(\{ }\DataTypeTok{top}\OperatorTok{:} \DecValTok{0}\OperatorTok{,} \DataTypeTok{behavior}\OperatorTok{:} \StringTok{\textquotesingle{}smooth\textquotesingle{}}\NormalTok{ \})}\OperatorTok{;}
\NormalTok{\}}

\KeywordTok{async} \KeywordTok{function} \FunctionTok{excluir}\NormalTok{(cpf) \{}
  \ControlFlowTok{if}\NormalTok{ (}\OperatorTok{!}\FunctionTok{confirm}\NormalTok{(}\VerbatimStringTok{\textasciigrave{}Excluir CPF }\SpecialCharTok{$\{}\NormalTok{cpf}\SpecialCharTok{\}}\VerbatimStringTok{?\textasciigrave{}}\NormalTok{)) }\ControlFlowTok{return}\OperatorTok{;}
  \KeywordTok{const}\NormalTok{ resp }\OperatorTok{=} \ControlFlowTok{await} \FunctionTok{fetch}\NormalTok{(}\VerbatimStringTok{\textasciigrave{}}\SpecialCharTok{$\{}\NormalTok{API\_URL}\SpecialCharTok{\}}\VerbatimStringTok{/}\SpecialCharTok{$\{}\NormalTok{cpf}\SpecialCharTok{\}}\VerbatimStringTok{\textasciigrave{}}\OperatorTok{,}\NormalTok{ \{ }\DataTypeTok{method}\OperatorTok{:} \StringTok{"DELETE"}\NormalTok{ \})}\OperatorTok{;}
  \ControlFlowTok{if}\NormalTok{ (resp}\OperatorTok{.}\AttributeTok{ok}\NormalTok{) \{}
    \FunctionTok{carregarPessoas}\NormalTok{()}\OperatorTok{;}
\NormalTok{  \} }\ControlFlowTok{else}\NormalTok{ \{}
    \FunctionTok{alert}\NormalTok{(}\StringTok{"Erro: "} \OperatorTok{+} \ControlFlowTok{await}\NormalTok{ resp}\OperatorTok{.}\FunctionTok{text}\NormalTok{())}\OperatorTok{;}
\NormalTok{  \}}
\NormalTok{\}}

\BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{"btnBuscar"}\NormalTok{)}\OperatorTok{.}\FunctionTok{addEventListener}\NormalTok{(}\StringTok{"click"}\OperatorTok{,}\NormalTok{ () }\KeywordTok{=\textgreater{}}\NormalTok{ \{}
  \KeywordTok{const}\NormalTok{ q }\OperatorTok{=} \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{"search"}\NormalTok{)}\OperatorTok{.}\AttributeTok{value}\OperatorTok{.}\FunctionTok{trim}\NormalTok{()}\OperatorTok{;}
  \FunctionTok{carregarPessoas}\NormalTok{(q)}\OperatorTok{;}
\NormalTok{\})}\OperatorTok{;}

\BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{"btnListar"}\NormalTok{)}\OperatorTok{.}\FunctionTok{addEventListener}\NormalTok{(}\StringTok{"click"}\OperatorTok{,}\NormalTok{ () }\KeywordTok{=\textgreater{}}\NormalTok{ \{}
  \BuiltInTok{document}\OperatorTok{.}\FunctionTok{getElementById}\NormalTok{(}\StringTok{"search"}\NormalTok{)}\OperatorTok{.}\AttributeTok{value} \OperatorTok{=} \StringTok{""}\OperatorTok{;}
  \FunctionTok{carregarPessoas}\NormalTok{()}\OperatorTok{;}
\NormalTok{\})}\OperatorTok{;}

\CommentTok{// Carregar lista inicial}
\FunctionTok{carregarPessoas}\NormalTok{()}\OperatorTok{;}
\DataTypeTok{\textless{}/}\KeywordTok{script}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{body}\DataTypeTok{\textgreater{}}
\DataTypeTok{\textless{}/}\KeywordTok{html}\DataTypeTok{\textgreater{}}
\end{Highlighting}
\end{Shaded}

\chapter{Banco de Dados Estat√≠stico - Cliente Rstudio}\label{banco-de-dados-estatuxedstico---cliente-rstudio}

\subsubsection*{06/10/2025}\label{section-15}
\addcontentsline{toc}{subsubsection}{06/10/2025}

\subsubsection*{Professor Migu√©l Suares}\label{professor-miguuxe9l-suares-12}
\addcontentsline{toc}{subsubsection}{Professor Migu√©l Suares}

\chapter{Banco de Dados Estat√≠stico - Cliente Rstudio}\label{banco-de-dados-estatuxedstico---cliente-rstudio-1}

\subsubsection*{06/10/2025}\label{section-16}
\addcontentsline{toc}{subsubsection}{06/10/2025}

\subsubsection*{Professor Migu√©l Suares}\label{professor-miguuxe9l-suares-13}
\addcontentsline{toc}{subsubsection}{Professor Migu√©l Suares}

\chapter{Banco de Dados - An√°lise de Dados Parte 01}\label{banco-de-dados---anuxe1lise-de-dados-parte-01}

\subsubsection*{13/10/2025}\label{section-17}
\addcontentsline{toc}{subsubsection}{13/10/2025}

\subsubsection*{Professor Migu√©l Suares}\label{professor-miguuxe9l-suares-14}
\addcontentsline{toc}{subsubsection}{Professor Migu√©l Suares}

\chapter{Banco de Dados - An√°lise de Dados Parte 01}\label{banco-de-dados---anuxe1lise-de-dados-parte-01-1}

\subsubsection*{13/10/2025}\label{section-18}
\addcontentsline{toc}{subsubsection}{13/10/2025}

\subsubsection*{Professor Migu√©l Suares}\label{professor-miguuxe9l-suares-15}
\addcontentsline{toc}{subsubsection}{Professor Migu√©l Suares}

\chapter{Banco de Dados - An√°lise de Dados Parte 02}\label{banco-de-dados---anuxe1lise-de-dados-parte-02}

\subsubsection*{20/10/2025}\label{section-19}
\addcontentsline{toc}{subsubsection}{20/10/2025}

\subsubsection*{Professor Migu√©l Suares}\label{professor-miguuxe9l-suares-16}
\addcontentsline{toc}{subsubsection}{Professor Migu√©l Suares}

\begin{figure}
\centering
\pandocbounded{\includegraphics[keepaspectratio]{2026-ADS-1sem-BancoDeDados_files/figure-latex/tikz-diagrama12-1.pdf}}
\caption{\label{fig:tikz-diagrama12}Diagrama de Montadoras, Ve√≠culos e Propriet√°rios}
\end{figure}

================================================================================

\pandocbounded{\includegraphics[keepaspectratio]{2026-ADS-1sem-BancoDeDados_files/figure-latex/tikz-diagrama12-02-1.pdf}}
\pandocbounded{\includegraphics[keepaspectratio]{2026-ADS-1sem-BancoDeDados_files/figure-latex/ex1-1.pdf}}

\chapter{Banco de Dados - An√°lise de Dados Parte 02}\label{banco-de-dados---anuxe1lise-de-dados-parte-02-1}

\subsubsection*{20/10/2025}\label{section-20}
\addcontentsline{toc}{subsubsection}{20/10/2025}

\subsubsection*{Professor Migu√©l Suares}\label{professor-miguuxe9l-suares-17}
\addcontentsline{toc}{subsubsection}{Professor Migu√©l Suares}

\chapter{Banco de Dados - An√°lise de Dados Parte 03}\label{banco-de-dados---anuxe1lise-de-dados-parte-03}

\subsubsection*{27/10/2025}\label{section-21}
\addcontentsline{toc}{subsubsection}{27/10/2025}

\subsubsection*{Professor Migu√©l Suares}\label{professor-miguuxe9l-suares-18}
\addcontentsline{toc}{subsubsection}{Professor Migu√©l Suares}

\chapter{Banco de Dados - An√°lise de Dados Parte 03}\label{banco-de-dados---anuxe1lise-de-dados-parte-03-1}

\subsubsection*{27/10/2025}\label{section-22}
\addcontentsline{toc}{subsubsection}{27/10/2025}

\subsubsection*{Professor Migu√©l Suares}\label{professor-miguuxe9l-suares-19}
\addcontentsline{toc}{subsubsection}{Professor Migu√©l Suares}

\bibliography{book.bib}

\end{document}
