<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>GTI - Banco de dados - 2025 - AnotaÃ§Ãµes de aula</title>
  <meta name="description" content="<p>Este livreto reÃºne anotaÃ§Ãµes, reflexÃµes e conteÃºdos desenvolvidos ao longo das aulas da disciplina Banco de Dados, ministrada pelo Professor MiguÃ©l Suares. Elaborado com base em experiÃªncias prÃ¡ticas, referÃªncias acadÃªmicas e diretrizes atualizadas sobre o tema, o material busca fornecer uma visÃ£o crÃ­tica e aplicada sobre anÃ¡lise de dados nas organizaÃ§Ãµes contemporÃ¢neas.</p>" />
  <meta name="generator" content="bookdown #bookdown:version# and GitBook 2.6.7" />

  <meta property="og:title" content="GTI - Banco de dados - 2025 - AnotaÃ§Ãµes de aula" />
  <meta property="og:type" content="book" />
  <meta property="og:image" content="your book url like <a href="https://bookdown.org/yihui/bookdown" class="uri">https://bookdown.org/yihui/bookdown</a>/images/cover.jpg" />
  <meta property="og:description" content="<p>Este livreto reÃºne anotaÃ§Ãµes, reflexÃµes e conteÃºdos desenvolvidos ao longo das aulas da disciplina Banco de Dados, ministrada pelo Professor MiguÃ©l Suares. Elaborado com base em experiÃªncias prÃ¡ticas, referÃªncias acadÃªmicas e diretrizes atualizadas sobre o tema, o material busca fornecer uma visÃ£o crÃ­tica e aplicada sobre anÃ¡lise de dados nas organizaÃ§Ãµes contemporÃ¢neas.</p>" />
  <meta name="github-repo" content="miguel7penteado/2025-2sem-GTI-BancoDeDados" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="GTI - Banco de dados - 2025 - AnotaÃ§Ãµes de aula" />
  
  <meta name="twitter:description" content="<p>Este livreto reÃºne anotaÃ§Ãµes, reflexÃµes e conteÃºdos desenvolvidos ao longo das aulas da disciplina Banco de Dados, ministrada pelo Professor MiguÃ©l Suares. Elaborado com base em experiÃªncias prÃ¡ticas, referÃªncias acadÃªmicas e diretrizes atualizadas sobre o tema, o material busca fornecer uma visÃ£o crÃ­tica e aplicada sobre anÃ¡lise de dados nas organizaÃ§Ãµes contemporÃ¢neas.</p>" />
  <meta name="twitter:image" content="your book url like <a href="https://bookdown.org/yihui/bookdown" class="uri">https://bookdown.org/yihui/bookdown</a>/images/cover.jpg" />

<meta name="author" content="Professor MiguÃ©l Suares" />


<meta name="date" content="2026-02-07" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
<script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script>
<script src="https://cdn.jsdelivr.net/npm/fuse.js@6.4.6/dist/fuse.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<link href="libs/anchor-sections-1.1.0/anchor-sections.css" rel="stylesheet" />
<link href="libs/anchor-sections-1.1.0/anchor-sections-hash.css" rel="stylesheet" />
<script src="libs/anchor-sections-1.1.0/anchor-sections.js"></script>


<style type="text/css">
html { -webkit-text-size-adjust: 100%; }
pre > code.sourceCode { white-space: pre; position: relative; }
pre > code.sourceCode > span { display: inline-block; line-height: 1.25; }
pre > code.sourceCode > span:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode > span { color: inherit; text-decoration: inherit; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
pre > code.sourceCode { white-space: pre-wrap; }
pre > code.sourceCode > span { text-indent: -5em; padding-left: 5em; }
}
pre.numberSource code
  { counter-reset: source-line 0; }
pre.numberSource code > span
  { position: relative; left: -4em; counter-increment: source-line; }
pre.numberSource code > span > a:first-child::before
  { content: counter(source-line);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {   }
@media screen {
pre > code.sourceCode > span > a:first-child::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { color: #008000; } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { color: #008000; font-weight: bold; } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

<style type="text/css">
  
  div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
</style>

<link rel="stylesheet" href="style.css" type="text/css" />
</head>

<body>



<!--bookdown:title:start-->
<div id="header">
<h1 class="title">GTI - Banco de dados - 2025 - AnotaÃ§Ãµes de aula</h1>
<p class="author"><em>Professor MiguÃ©l Suares</em></p>
<p class="date"><em>2026-02-07</em></p>
</div>
<!--bookdown:title:end-->

<!--bookdown:toc:start-->
  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">
<!--bookdown:toc2:start-->
<ul>
<li><a href="#sobre-estas-anota%C3%A7%C3%B5es" id="toc-sobre-estas-anotaÃ§Ãµes">Sobre estas anotaÃ§Ãµes</a>
<ul>
<li><a href="#acesso-ao-gitbook-celular" id="toc-acesso-ao-gitbook-celular"><span class="toc-section-number">0.1</span> ACESSO AO GITBOOK CELULAR</a></li>
<li><a href="#leitores-de-formato-de-arquivo-epub-para-smartphone" id="toc-leitores-de-formato-de-arquivo-epub-para-smartphone"><span class="toc-section-number">0.2</span> Leitores de formato de arquivo EPUB para SmartPhone</a>
<ul>
<li><a href="#android" id="toc-android"><span class="toc-section-number">0.2.1</span> ANDROID</a></li>
</ul></li>
<li><a href="#livros-texto-da-disciplina" id="toc-livros-texto-da-disciplina"><span class="toc-section-number">0.3</span> Livros Texto da Disciplina</a>
<ul>
<li><a href="#introdu%C3%A7%C3%A3o-a-sistemas-de-bancos-de-dados-do-autor-christopher-john-date" id="toc-introduÃ§Ã£o-a-sistemas-de-bancos-de-dados-do-autor-christopher-john-date"><span class="toc-section-number">0.3.1</span> â€œIntroduÃ§Ã£o a sistemas de bancos de dadosâ€ do autor â€œ<strong>Christopher John Date</strong>â€</a></li>
<li><a href="#projeto-de-bancos-de-dados-do-autor-carlos-alberto-heuser" id="toc-projeto-de-bancos-de-dados-do-autor-carlos-alberto-heuser"><span class="toc-section-number">0.3.2</span> â€œ<strong>Projeto de bancos de dados</strong>â€ do autor â€œCarlos Alberto HEUSERâ€</a></li>
</ul></li>
<li><a href="#calend%C3%A1rio-das-aulas" id="toc-calendÃ¡rio-das-aulas"><span class="toc-section-number">0.4</span> CalendÃ¡rio das aulas</a></li>
<li><a href="#alunos-2025---2o-semestre" id="toc-alunos-2025---2o-semestre"><span class="toc-section-number">0.5</span> Alunos 2025 - 2o Semestre</a>
<ul>
<li><a href="#campus-ch%C3%A1cara-santo-ant%C3%B4nio" id="toc-campus-chÃ¡cara-santo-antÃ´nio"><span class="toc-section-number">0.5.1</span> Campus ChÃ¡cara Santo AntÃ´nio</a></li>
</ul></li>
</ul></li>
<li><a href="#postgres-zip-version-windows-starting-guide" id="toc-postgres-zip-version-windows-starting-guide"><span class="toc-section-number">1</span> Postgres (Zip Version) Windows Starting Guide</a></li>
<li><a href="#aula-inaugural" id="toc-aula-inaugural"><span class="toc-section-number">2</span> Aula Inaugural</a>
<ul>
<li><a href="#disciplina-banco-de-dados" id="toc-disciplina-banco-de-dados"><span class="toc-section-number">2.1</span> Disciplina: <strong>Banco de Dados</strong></a></li>
<li><a href="#sobre-o-professor" id="toc-sobre-o-professor"><span class="toc-section-number">2.2</span> ğŸ‘¨â€ğŸ« Sobre o Professor</a></li>
<li><a href="#objetivos-da-disciplina" id="toc-objetivos-da-disciplina"><span class="toc-section-number">2.3</span> ğŸ¯ Objetivos da Disciplina</a></li>
<li><a href="#calend%C3%A1rio-da-disciplina" id="toc-calendÃ¡rio-da-disciplina"><span class="toc-section-number">2.4</span> ğŸ“… CalendÃ¡rio da Disciplina</a></li>
<li><a href="#ementa-resumida" id="toc-ementa-resumida"><span class="toc-section-number">2.5</span> ğŸ“š Ementa Resumida</a></li>
<li><a href="#avalia%C3%A7%C3%A3o" id="toc-avaliaÃ§Ã£o"><span class="toc-section-number">2.6</span> ğŸ“ AvaliaÃ§Ã£o</a></li>
<li><a href="#ferramentas-da-disciplina" id="toc-ferramentas-da-disciplina"><span class="toc-section-number">2.7</span> ğŸ› ï¸ Ferramentas da Disciplina</a></li>
<li><a href="#expectativas-e-regras" id="toc-expectativas-e-regras"><span class="toc-section-number">2.8</span> ğŸ“Œ Expectativas e Regras</a></li>
<li><a href="#dicas-para-mandar-bem" id="toc-dicas-para-mandar-bem"><span class="toc-section-number">2.9</span> ğŸ’¡ Dicas para Mandar Bem</a></li>
<li><a href="#encerramento" id="toc-encerramento"><span class="toc-section-number">2.10</span> ğŸ™Œ Encerramento</a></li>
<li><a href="#estamos-prontos" id="toc-estamos-prontos"><span class="toc-section-number">2.11</span> Estamos prontos?</a></li>
</ul></li>
<li><a href="#fundamentos-de-sistemas-de-bancos-de-dados" id="toc-fundamentos-de-sistemas-de-bancos-de-dados"><span class="toc-section-number">3</span> Fundamentos de Sistemas de Bancos de Dados</a>
<ul>
<li><a href="#o-in%C3%ADcio-edgar-frank-ted-codd-19081923-18042003" id="toc-o-inÃ­cio-edgar-frank-ted-codd-19081923-18042003"><span class="toc-section-number">3.1</span> O inÃ­cio : Edgar Frank â€œTedâ€ Codd (19/08/1923 â€“ 18/04/2003)</a></li>
<li><a href="#anos-1970-ibm-entra-no-modelo-relacional-systemr-e-sequelsql" id="toc-anos-1970-ibm-entra-no-modelo-relacional-systemr-e-sequelsql"><span class="toc-section-number">3.2</span> Anos 1970: IBM entra no Modelo relacional: SystemR e SEQUEL/SQL</a></li>
<li><a href="#anos-1970-prof-codd-inspira-prof-stonebraker-banco-ingres" id="toc-anos-1970-prof-codd-inspira-prof-stonebraker-banco-ingres"><span class="toc-section-number">3.3</span> Anos 1970: Prof Codd inspira Prof StoneBraker: BANCO INGRES</a></li>
<li><a href="#anos-1980-ingres-semi-livre-vs-ibm-system-r-pago-vs-oracle" id="toc-anos-1980-ingres-semi-livre-vs-ibm-system-r-pago-vs-oracle"><span class="toc-section-number">3.4</span> Anos 1980: INGRES (SEMI-LIVRE) vs IBM System R ( pago ) vs ORACLE</a></li>
<li><a href="#anos-1990-mysql-e-postgres-que-vira-postgresql" id="toc-anos-1990-mysql-e-postgres-que-vira-postgresql"><span class="toc-section-number">3.5</span> Anos 1990: MySQL e POSTGRES que vira POSTGRESQL</a></li>
<li><a href="#anos-2000-sybase-eo-no-sql" id="toc-anos-2000-sybase-eo-no-sql"><span class="toc-section-number">3.6</span> Anos 2000: Sybase eo No-SQL</a></li>
<li><a href="#exerc%C3%ADcios" id="toc-exercÃ­cios"><span class="toc-section-number">3.7</span> ExercÃ­cios</a></li>
</ul></li>
<li><a href="#modelagem-de-bancos-de-dados" id="toc-modelagem-de-bancos-de-dados"><span class="toc-section-number">4</span> Modelagem de Bancos de Dados</a>
<ul>
<li><a href="#introdu%C3%A7%C3%A3o-visitando-a-teoria-de-bancos-de-dados" id="toc-introduÃ§Ã£o-visitando-a-teoria-de-bancos-de-dados"><span class="toc-section-number">4.1</span> IntroduÃ§Ã£o: Visitando a teoria de Bancos de Dados</a></li>
<li><a href="#modelo-matem%C3%A1tico-de-um-banco-de-dados" id="toc-modelo-matemÃ¡tico-de-um-banco-de-dados"><span class="toc-section-number">4.2</span> Modelo MatemÃ¡tico de um Banco de Dados</a>
<ul>
<li><a href="#podemos-representa-lo-matem%C3%A1ticamente-utilizando-a-teoria-dos-conjuntos" id="toc-podemos-representa-lo-matemÃ¡ticamente-utilizando-a-teoria-dos-conjuntos"><span class="toc-section-number">4.2.1</span> Podemos representa-lo matemÃ¡ticamente utilizando a teoria dos conjuntos</a></li>
<li><a href="#ent%C3%A3o-para-podemos-relacionar-estes-dois-conjuntos-funcion%C3%A1rios-e-departamentos-utilizando-a-teoria-das-fun%C3%A7%C3%B5es" id="toc-entÃ£o-para-podemos-relacionar-estes-dois-conjuntos-funcionÃ¡rios-e-departamentos-utilizando-a-teoria-das-funÃ§Ãµes"><span class="toc-section-number">4.2.2</span> EntÃ£o para podemos relacionar estes dois conjuntos (FuncionÃ¡rios e Departamentos) utilizando a Teoria das FunÃ§Ãµes</a></li>
</ul></li>
<li><a href="#modelo-l%C3%B3gico-de-banco-de-dados" id="toc-modelo-lÃ³gico-de-banco-de-dados"><span class="toc-section-number">4.3</span> Modelo LÃ³gico de Banco de Dados</a>
<ul>
<li><a href="#modelo-conceitual-entidade-relacionamento-de-banco-de-dados" id="toc-modelo-conceitual-entidade-relacionamento-de-banco-de-dados"><span class="toc-section-number">4.3.1</span> Modelo Conceitual â€œEntidade Relacionamentoâ€ de Banco de Dados</a></li>
<li><a href="#composi%C3%A7%C3%A3o-e-significado-do-diagrama-entidade-relacionamento-der" id="toc-composiÃ§Ã£o-e-significado-do-diagrama-entidade-relacionamento-der"><span class="toc-section-number">4.3.2</span> ComposiÃ§Ã£o e Significado do Diagrama Entidade Relacionamento (DER)</a></li>
</ul></li>
<li><a href="#modelo-f%C3%ADsico-de-banco-de-dados" id="toc-modelo-fÃ­sico-de-banco-de-dados"><span class="toc-section-number">4.4</span> Modelo FÃ­sico de Banco de Dados</a>
<ul>
<li><a href="#gera%C3%A7%C3%A3o-do-modelo-f%C3%ADsico-para-aplica-lo-ao-sgbd-sistema-de-gerenciamento-de-banco-de-dados" id="toc-geraÃ§Ã£o-do-modelo-fÃ­sico-para-aplica-lo-ao-sgbd-sistema-de-gerenciamento-de-banco-de-dados"><span class="toc-section-number">4.4.1</span> GeraÃ§Ã£o do modelo FÃ­sico para aplica-lo ao SGBD (Sistema de Gerenciamento de Banco de Dados):</a></li>
<li><a href="#interagindo-com-o-modelo-f%C3%ADsico---a-linguagem-sql-structured-query-language" id="toc-interagindo-com-o-modelo-fÃ­sico---a-linguagem-sql-structured-query-language"><span class="toc-section-number">4.4.2</span> Interagindo com o Modelo FÃ­sico - A linguagem SQL (Structured Query Language)</a></li>
</ul></li>
<li><a href="#exemplo-revenda-de-ve%C3%ADculos-multi-marcas" id="toc-exemplo-revenda-de-veÃ­culos-multi-marcas"><span class="toc-section-number">4.5</span> EXEMPLO: REVENDA DE VEÃCULOS MULTI-MARCAS</a>
<ul>
<li><a href="#passo-1---visualizando-matem%C3%A1ticamente-os-dados" id="toc-passo-1---visualizando-matemÃ¡ticamente-os-dados"><span class="toc-section-number">4.5.1</span> Passo 1 - Visualizando matemÃ¡ticamente os dados:</a></li>
<li><a href="#modelo-l%C3%B3gico-modelo-entidade-relacionamento" id="toc-modelo-lÃ³gico-modelo-entidade-relacionamento"><span class="toc-section-number">4.5.2</span> Modelo LÃ³gico: Modelo Entidade Relacionamento</a></li>
</ul></li>
<li><a href="#verbos-relacionamentos-e-cardinalidade" id="toc-verbos-relacionamentos-e-cardinalidade"><span class="toc-section-number">4.6</span> VERBOS: Relacionamentos e Cardinalidade</a>
<ul>
<li><a href="#tipos-principais-de-cardinalidade" id="toc-tipos-principais-de-cardinalidade"><span class="toc-section-number">4.6.1</span> ğŸ”¹ Tipos principais de cardinalidade</a></li>
<li><a href="#relacionamento-11-um-para-um" id="toc-relacionamento-11-um-para-um"><span class="toc-section-number">4.6.2</span> 1. Relacionamento <strong>1:1 (Um para Um)</strong></a></li>
<li><a href="#relacionamento-1n-um-para-muitos" id="toc-relacionamento-1n-um-para-muitos"><span class="toc-section-number">4.6.3</span> Relacionamento <strong>1:N (Um para Muitos)</strong></a></li>
<li><a href="#relacionamento-nn-muitos-para-muitos" id="toc-relacionamento-nn-muitos-para-muitos"><span class="toc-section-number">4.6.4</span> Relacionamento N:N (Muitos para Muitos)</a></li>
</ul></li>
<li><a href="#entidade-dominante-e-entidade-subordinada" id="toc-entidade-dominante-e-entidade-subordinada"><span class="toc-section-number">4.7</span> Entidade Dominante e Entidade Subordinada</a>
<ul>
<li><a href="#defini%C3%A7%C3%B5es" id="toc-definiÃ§Ãµes"><span class="toc-section-number">4.7.1</span> DefiniÃ§Ãµes:</a></li>
</ul></li>
<li><a href="#cardinalidade-do-modelo-l%C3%B3gico-e-a-cria%C3%A7%C3%A3o-de-chaves-estrangeiras-no-modelo-f%C3%ADsico-relacional" id="toc-cardinalidade-do-modelo-lÃ³gico-e-a-criaÃ§Ã£o-de-chaves-estrangeiras-no-modelo-fÃ­sico-relacional"><span class="toc-section-number">4.8</span> CARDINALIDADE DO MODELO LÃ“GICO E A CRIAÃ‡ÃƒO DE CHAVES ESTRANGEIRAS NO MODELO FÃSICO-RELACIONAL</a></li>
<li><a href="#normaliza%C3%A7%C3%A3o-em-bancos-de-dados-relaionais" id="toc-normalizaÃ§Ã£o-em-bancos-de-dados-relaionais"><span class="toc-section-number">4.9</span> NormalizaÃ§Ã£o em Bancos de Dados Relaionais</a>
<ul>
<li><a href="#tabela-desnormalizada" id="toc-tabela-desnormalizada"><span class="toc-section-number">4.9.1</span> Tabela Desnormalizada</a></li>
<li><a href="#tabela-normalizada" id="toc-tabela-normalizada"><span class="toc-section-number">4.9.2</span> Tabela Normalizada</a></li>
</ul></li>
<li><a href="#refer%C3%AAncias" id="toc-referÃªncias"><span class="toc-section-number">4.10</span> ReferÃªncias</a></li>
<li><a href="#exerc%C3%ADcios-resolvidos" id="toc-exercÃ­cios-resolvidos"><span class="toc-section-number">4.11</span> ExercÃ­cios RESOLVIDOS</a>
<ul>
<li><a href="#exerc%C3%ADcios-1" id="toc-exercÃ­cios-1"><span class="toc-section-number">4.11.1</span> ExercÃ­cios</a></li>
<li><a href="#lista-de-exerc%C3%ADcios-modelo-entidade-relacionamento-mer" id="toc-lista-de-exercÃ­cios-modelo-entidade-relacionamento-mer"><span class="toc-section-number">4.11.2</span> ğŸ“ Lista de ExercÃ­cios â€“ Modelo Entidade-Relacionamento (MER)</a></li>
<li><a href="#respostas-dos-exerc%C3%ADcios" id="toc-respostas-dos-exercÃ­cios"><span class="toc-section-number">4.11.3</span> Respostas dos ExercÃ­cios:</a></li>
</ul></li>
</ul></li>
<li><a href="#administra%C3%A7%C3%A3o-e-gerenciamento-de-bancos-de-dados" id="toc-administraÃ§Ã£o-e-gerenciamento-de-bancos-de-dados"><span class="toc-section-number">5</span> AdministraÃ§Ã£o e Gerenciamento de Bancos de Dados</a>
<ul>
<li><a href="#administra%C3%A7%C3%A3o-e-gerenciamento-de-banco-de-dados" id="toc-administraÃ§Ã£o-e-gerenciamento-de-banco-de-dados"><span class="toc-section-number">5.1</span> AdministraÃ§Ã£o e Gerenciamento de Banco de Dados:</a></li>
<li><a href="#papel-do-dba-database-administrator" id="toc-papel-do-dba-database-administrator"><span class="toc-section-number">5.2</span> Papel do DBA (Database Administrator)</a></li>
<li><a href="#usu%C3%A1rios-grupos-e-esquemas-de-bancos-de-dados" id="toc-usuÃ¡rios-grupos-e-esquemas-de-bancos-de-dados"><span class="toc-section-number">5.3</span> UsuÃ¡rios, Grupos e Esquemas de Bancos de Dados</a>
<ul>
<li><a href="#usu%C3%A1rios" id="toc-usuÃ¡rios"><span class="toc-section-number">5.3.1</span> UsuÃ¡rios</a></li>
<li><a href="#esquemas" id="toc-esquemas"><span class="toc-section-number">5.3.2</span> Esquemas</a></li>
<li><a href="#grupos-ou-roles" id="toc-grupos-ou-roles"><span class="toc-section-number">5.3.3</span> Grupos ou Roles</a></li>
<li><a href="#sistema-de-gerenciamento-de-banco-de-dados-s.g.b.d." id="toc-sistema-de-gerenciamento-de-banco-de-dados-s.g.b.d."><span class="toc-section-number">5.3.4</span> Sistema de Gerenciamento de Banco de Dados (S.G.B.D.)</a></li>
<li><a href="#cria%C3%A7%C3%A3o-de-usu%C3%A1rios-no-mysql" id="toc-criaÃ§Ã£o-de-usuÃ¡rios-no-mysql"><span class="toc-section-number">5.3.5</span> CriaÃ§Ã£o de usuÃ¡rios no MySQL</a></li>
<li><a href="#cria%C3%A7%C3%A3o-de-esquemas-de-banco-de-dados-no-mysql" id="toc-criaÃ§Ã£o-de-esquemas-de-banco-de-dados-no-mysql"><span class="toc-section-number">5.3.6</span> CriaÃ§Ã£o de Esquemas de Banco de Dados no MySQL</a></li>
<li><a href="#criando-de-grupos-de-permiss%C3%B5es-no-mysql" id="toc-criando-de-grupos-de-permissÃµes-no-mysql"><span class="toc-section-number">5.3.7</span> Criando de Grupos de PermissÃµes no MySQL:</a></li>
</ul></li>
<li><a href="#fazendo-tudo-funcionar-colocando-usu%C3%A1rios-em-grupos-e-concedendo-a-estes-acesso-a-esquemas-de-banco-de-dados" id="toc-fazendo-tudo-funcionar-colocando-usuÃ¡rios-em-grupos-e-concedendo-a-estes-acesso-a-esquemas-de-banco-de-dados"><span class="toc-section-number">5.4</span> Fazendo tudo funcionar: Colocando usuÃ¡rios em grupos e concedendo a estes acesso a Esquemas de Banco de Dados:</a>
<ul>
<li><a href="#associando-os-esquemas-que-representam-cada-estado-a-cada-grupo-que-representa-cada-regi%C3%A7%C3%A3o" id="toc-associando-os-esquemas-que-representam-cada-estado-a-cada-grupo-que-representa-cada-regiÃ§Ã£o"><span class="toc-section-number">5.4.1</span> Associando os esquemas que representam cada estado a cada grupo (que representa cada regiÃ§Ã£o):</a></li>
<li><a href="#associando-associando-alunos-a-cada-grupo-regi%C3%A3o" id="toc-associando-associando-alunos-a-cada-grupo-regiÃ£o"><span class="toc-section-number">5.4.2</span> Associando associando alunos a cada grupo (regiÃ£o):</a></li>
<li><a href="#associando-usu%C3%A1rios-aos-grupos" id="toc-associando-usuÃ¡rios-aos-grupos"><span class="toc-section-number">5.4.3</span> Associando usuÃ¡rios aos grupos</a></li>
<li><a href="#concedendo-privil%C3%A9gios-aos-grupos" id="toc-concedendo-privilÃ©gios-aos-grupos"><span class="toc-section-number">5.4.4</span> Concedendo privilÃ©gios aos grupos:</a></li>
<li><a href="#exemplo-no-mysql" id="toc-exemplo-no-mysql"><span class="toc-section-number">5.4.5</span> Exemplo no MySQL</a></li>
<li><a href="#exemplo-no-postgresql" id="toc-exemplo-no-postgresql"><span class="toc-section-number">5.4.6</span> Exemplo no PostGreSQL</a></li>
</ul></li>
<li><a href="#feito" id="toc-feito"><span class="toc-section-number">5.5</span> Feito</a></li>
</ul></li>
<li><a href="#administra%C3%A7%C3%A3o-e-gerenciamento-de-bancos-de-dados-1" id="toc-administraÃ§Ã£o-e-gerenciamento-de-bancos-de-dados-1"><span class="toc-section-number">6</span> AdministraÃ§Ã£o e Gerenciamento de Bancos de Dados</a></li>
<li><a href="#banco-de-dados-uma-aplica%C3%A7%C3%A3o-crud" id="toc-banco-de-dados-uma-aplicaÃ§Ã£o-crud"><span class="toc-section-number">7</span> Banco de Dados: Uma AplicaÃ§Ã£o CRUD</a>
<ul>
<li><a href="#o-que-%C3%A9-uma-aplica%C3%A7%C3%A3o-crud" id="toc-o-que-Ã©-uma-aplicaÃ§Ã£o-crud"><span class="toc-section-number">7.1</span> O que Ã© uma AplicaÃ§Ã£o CRUD?</a></li>
<li><a href="#conceito-de-crud" id="toc-conceito-de-crud"><span class="toc-section-number">7.2</span> Conceito de CRUD</a></li>
<li><a href="#o-padr%C3%A3o-de-design-de-sistemas-mvc-model-view-controller" id="toc-o-padrÃ£o-de-design-de-sistemas-mvc-model-view-controller"><span class="toc-section-number">7.3</span> O padrÃ£o de Design de Sistemas MVC (Model View Controller)</a></li>
<li><a href="#construindo-uma-aplica%C3%A7%C3%A3o-crud-para-interfacear-com-a-tabela-pessoa" id="toc-construindo-uma-aplicaÃ§Ã£o-crud-para-interfacear-com-a-tabela-pessoa"><span class="toc-section-number">7.4</span> Construindo uma aplicaÃ§Ã£o CRUD para interfacear com a tabela â€œPessoaâ€</a>
<ul>
<li><a href="#representa%C3%A7%C3%A3o-gr%C3%A1fica-no-modelo-f%C3%ADsico-relacional" id="toc-representaÃ§Ã£o-grÃ¡fica-no-modelo-fÃ­sico-relacional"><span class="toc-section-number">7.4.1</span> RepresentaÃ§Ã£o grÃ¡fica no modelo FÃ­sico-Relacional</a></li>
</ul></li>
<li><a href="#cria%C3%A7%C3%A3o-de-uma-aplica%C3%A7%C3%A3o-crud" id="toc-criaÃ§Ã£o-de-uma-aplicaÃ§Ã£o-crud"><span class="toc-section-number">7.5</span> CriaÃ§Ã£o de uma aplicaÃ§Ã£o CRUD</a>
<ul>
<li><a href="#resultado-final" id="toc-resultado-final"><span class="toc-section-number">7.5.1</span> Resultado final:</a></li>
</ul></li>
<li><a href="#feito-1" id="toc-feito-1"><span class="toc-section-number">7.6</span> Feito</a></li>
<li><a href="#exerc%C3%ADcios-2" id="toc-exercÃ­cios-2"><span class="toc-section-number">7.7</span> ExercÃ­cios</a>
<ul>
<li><a href="#banco-de-dados-utilizado-nos-exemplos-de-aplica%C3%A7%C3%B5es-abaixo" id="toc-banco-de-dados-utilizado-nos-exemplos-de-aplicaÃ§Ãµes-abaixo"><span class="toc-section-number">7.7.1</span> Banco de Dados utilizado nos exemplos de aplicaÃ§Ãµes abaixo</a></li>
</ul></li>
<li><a href="#exemplo-01" id="toc-exemplo-01"><span class="toc-section-number">7.8</span> Exemplo 01</a></li>
<li><a href="#exemplo-02---servidor-de-aplica%C3%A7%C3%A3o-python" id="toc-exemplo-02---servidor-de-aplicaÃ§Ã£o-python"><span class="toc-section-number">7.9</span> Exemplo 02 - SERVIDOR DE APLICAÃ‡ÃƒO PYTHON</a>
<ul>
<li><a href="#servidor-python" id="toc-servidor-python"><span class="toc-section-number">7.9.1</span> Servidor python</a></li>
<li><a href="#cliente-html-conex%C3%A3o-restful" id="toc-cliente-html-conexÃ£o-restful"><span class="toc-section-number">7.9.2</span> Cliente HTML (conexÃ£o Restful)</a></li>
</ul></li>
<li><a href="#exemplo-03---servidor-de-aplica%C3%A7%C3%A3o-perl" id="toc-exemplo-03---servidor-de-aplicaÃ§Ã£o-perl"><span class="toc-section-number">7.10</span> Exemplo 03 - SERVIDOR DE APLICAÃ‡ÃƒO PERL</a>
<ul>
<li><a href="#servidor-perl" id="toc-servidor-perl"><span class="toc-section-number">7.10.1</span> Servidor Perl</a></li>
<li><a href="#cliente-html-conex%C3%A3o-restful-1" id="toc-cliente-html-conexÃ£o-restful-1"><span class="toc-section-number">7.10.2</span> Cliente HTML (conexÃ£o Restful)</a></li>
</ul></li>
<li><a href="#exemplo-04---servidor-de-aplica%C3%A7%C3%A3o-java" id="toc-exemplo-04---servidor-de-aplicaÃ§Ã£o-java"><span class="toc-section-number">7.11</span> Exemplo 04 - SERVIDOR DE APLICAÃ‡ÃƒO JAVA</a></li>
<li><a href="#exemplo-05---servidor-de-aplica%C3%A7%C3%A3o-c" id="toc-exemplo-05---servidor-de-aplicaÃ§Ã£o-c"><span class="toc-section-number">7.12</span> Exemplo 05 - SERVIDOR DE APLICAÃ‡ÃƒO C++</a>
<ul>
<li><a href="#criando-o-arquivo-c-do-servidor" id="toc-criando-o-arquivo-c-do-servidor"><span class="toc-section-number">7.12.1</span> Criando o arquivo C++ do servidor</a></li>
<li><a href="#ferramenta-de-compila%C3%A7%C3%A3o-cmake" id="toc-ferramenta-de-compilaÃ§Ã£o-cmake"><span class="toc-section-number">7.12.2</span> Ferramenta de compilaÃ§Ã£o CMAKE</a></li>
<li><a href="#cliente-html-conex%C3%A3o-restful-2" id="toc-cliente-html-conexÃ£o-restful-2"><span class="toc-section-number">7.12.3</span> Cliente HTML (conexÃ£o Restful)</a></li>
</ul></li>
</ul></li>
<li><a href="#banco-de-dados-mysql-mariadb" id="toc-banco-de-dados-mysql-mariadb"><span class="toc-section-number">8</span> Banco de Dados: MySQL (MariaDB)</a></li>
<li><a href="#banco-de-dados-mysql-mariadb-1" id="toc-banco-de-dados-mysql-mariadb-1"><span class="toc-section-number">9</span> Banco de Dados: MySQL (MariaDB)</a></li>
<li><a href="#banco-de-dados-postgres" id="toc-banco-de-dados-postgres"><span class="toc-section-number">10</span> Banco de Dados: Postgres</a></li>
<li><a href="#banco-de-dados-postgres-1" id="toc-banco-de-dados-postgres-1"><span class="toc-section-number">11</span> Banco de Dados: Postgres</a></li>
<li><a href="#banco-de-dados-espaciais---cliente-qgis" id="toc-banco-de-dados-espaciais---cliente-qgis"><span class="toc-section-number">12</span> Banco de Dados Espaciais - Cliente QGIS</a></li>
<li><a href="#banco-de-dados-espaciais---cliente-qgis-1" id="toc-banco-de-dados-espaciais---cliente-qgis-1"><span class="toc-section-number">13</span> Banco de Dados Espaciais - Cliente QGIS</a></li>
<li><a href="#banco-de-dados-estat%C3%ADstico---cliente-rstudio" id="toc-banco-de-dados-estatÃ­stico---cliente-rstudio"><span class="toc-section-number">14</span> Banco de Dados EstatÃ­stico - Cliente Rstudio</a></li>
<li><a href="#banco-de-dados-estat%C3%ADstico---cliente-rstudio-1" id="toc-banco-de-dados-estatÃ­stico---cliente-rstudio-1"><span class="toc-section-number">15</span> Banco de Dados EstatÃ­stico - Cliente Rstudio</a></li>
<li><a href="#banco-de-dados---an%C3%A1lise-de-dados-parte-01" id="toc-banco-de-dados---anÃ¡lise-de-dados-parte-01"><span class="toc-section-number">16</span> Banco de Dados - AnÃ¡lise de Dados Parte 01</a></li>
<li><a href="#banco-de-dados---an%C3%A1lise-de-dados-parte-01-1" id="toc-banco-de-dados---anÃ¡lise-de-dados-parte-01-1"><span class="toc-section-number">17</span> Banco de Dados - AnÃ¡lise de Dados Parte 01</a></li>
<li><a href="#banco-de-dados---an%C3%A1lise-de-dados-parte-02" id="toc-banco-de-dados---anÃ¡lise-de-dados-parte-02"><span class="toc-section-number">18</span> Banco de Dados - AnÃ¡lise de Dados Parte 02</a></li>
<li><a href="#banco-de-dados---an%C3%A1lise-de-dados-parte-02-1" id="toc-banco-de-dados---anÃ¡lise-de-dados-parte-02-1"><span class="toc-section-number">19</span> Banco de Dados - AnÃ¡lise de Dados Parte 02</a></li>
<li><a href="#banco-de-dados---an%C3%A1lise-de-dados-parte-03" id="toc-banco-de-dados---anÃ¡lise-de-dados-parte-03"><span class="toc-section-number">20</span> Banco de Dados - AnÃ¡lise de Dados Parte 03</a></li>
<li><a href="#banco-de-dados---an%C3%A1lise-de-dados-parte-03-1" id="toc-banco-de-dados---anÃ¡lise-de-dados-parte-03-1"><span class="toc-section-number">21</span> Banco de Dados - AnÃ¡lise de Dados Parte 03</a></li>
</ul>
<!--bookdown:toc2:end-->
      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">GTI - Banco de dados - 2025 - AnotaÃ§Ãµes de aula</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<!--bookdown:toc:end-->
<!--bookdown:body:start-->
<div id="sobre-estas-anotaÃ§Ãµes" class="section level1 unnumbered hasAnchor">
<h1 class="unnumbered hasAnchor">Sobre estas anotaÃ§Ãµes<a href="#sobre-estas-anota%C3%A7%C3%B5es" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<p>Estas anotaÃ§Ãµes sÃ£o apenas lembretes das aulas expostas em sala, durante a disciplina de Banco de dados.</p>
<div id="acesso-ao-gitbook-celular" class="section level2 hasAnchor" number="0.1">
<h2 class="hasAnchor"><span class="header-section-number">0.1</span> ACESSO AO GITBOOK CELULAR<a href="#acesso-ao-gitbook-celular" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<div id="httpsmiguel7penteado.github.io2025-2sem-gti-bancodedados" class="section level4 hasAnchor" number="0.1.0.1">
<h4 class="hasAnchor"><span class="header-section-number">0.1.0.1</span> <a href="https://miguel7penteado.github.io/2025-2sem-GTI-BancoDeDados" class="uri">https://miguel7penteado.github.io/2025-2sem-GTI-BancoDeDados</a><a href="#httpsmiguel7penteado.github.io2025-2sem-gti-bancodedados" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/qr-code-disciplina.jpg" /></p>
</div>
</div>
<div id="leitores-de-formato-de-arquivo-epub-para-smartphone" class="section level2 hasAnchor" number="0.2">
<h2 class="hasAnchor"><span class="header-section-number">0.2</span> Leitores de formato de arquivo EPUB para SmartPhone<a href="#leitores-de-formato-de-arquivo-epub-para-smartphone" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<div id="android" class="section level3 hasAnchor" number="0.2.1">
<h3 class="hasAnchor"><span class="header-section-number">0.2.1</span> ANDROID<a href="#android" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="moon-reader" class="section level4 hasAnchor" number="0.2.1.1">
<h4 class="hasAnchor"><span class="header-section-number">0.2.1.1</span> <strong>Moon+ Reader</strong><a href="#moon-reader" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/qrcode/leitor_epub/MoonReaderPlus.jpg" width="340" /></p>
</div>
</div>
</div>
<div id="livros-texto-da-disciplina" class="section level2 hasAnchor" number="0.3">
<h2 class="hasAnchor"><span class="header-section-number">0.3</span> Livros Texto da Disciplina<a href="#livros-texto-da-disciplina" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<div id="introduÃ§Ã£o-a-sistemas-de-bancos-de-dados-do-autor-christopher-john-date" class="section level3 hasAnchor" number="0.3.1">
<h3 class="hasAnchor"><span class="header-section-number">0.3.1</span> <a href="https://www.kufunda.net/publicdocs/Introdu%C3%A7%C3%A3o%20a%20Sistemas%20de%20Bancos%20de%20Dados%20(C.%20J.%20Date)%20(z-lib.org).pdf">â€œIntroduÃ§Ã£o a sistemas de bancos de dadosâ€ do autor â€œ<strong>Christopher John Date</strong>â€</a><a href="#introdu%C3%A7%C3%A3o-a-sistemas-de-bancos-de-dados-do-autor-christopher-john-date" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><img src="images/livros/livro1.jpg" /></p>
<table>
<colgroup>
<col width="22%" />
<col width="77%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Autor(es)</strong></td>
<td><h3 id="christopher-john-date" class="hasAnchor"><a href="https://en.wikipedia.org/wiki/Christopher_J._Date"><strong>Christopher John Date</strong></a><a href="#christopher-john-date" class="anchor-section" aria-label="Anchor link to header"></a></h3></td>
</tr>
<tr class="even">
<td><strong>Editora</strong></td>
<td>LTC</td>
</tr>
<tr class="odd">
<td><strong>Idioma</strong></td>
<td>PortuguÃªs</td>
</tr>
<tr class="even">
<td><strong>ISBN</strong></td>
<td>978-85-352-8445-4</td>
</tr>
<tr class="odd">
<td><strong>Formato</strong></td>
<td>Capa dura</td>
</tr>
<tr class="even">
<td><strong>PÃ¡ginas</strong></td>
<td>1623</td>
</tr>
<tr class="odd">
<td><strong>CÃ³digo Biblioteca</strong></td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div id="projeto-de-bancos-de-dados-do-autor-carlos-alberto-heuser" class="section level3 hasAnchor" number="0.3.2">
<h3 class="hasAnchor"><span class="header-section-number">0.3.2</span> <a href="https://drive.google.com/file/d/0B452rmbcudPSVFdCZ09vVkJUUUd2dlpMNS1vaEczUQ/view?pli=1&amp;resourcekey=0-3MTcHlAYjPX6YSvBQGweUQ">â€œ<strong>Projeto de bancos de dados</strong>â€ do autor â€œCarlos Alberto HEUSERâ€</a><a href="#projeto-de-bancos-de-dados-do-autor-carlos-alberto-heuser" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><img src="images/livros/livro2.jpg" /></p>
<table>
<colgroup>
<col width="20%" />
<col width="79%" />
</colgroup>
<tbody>
<tr class="odd">
<td><strong>Autor(es)</strong></td>
<td><h3 id="carlos-alberto-heuser" class="hasAnchor"><a href="https://www.inf.ufrgs.br/site/docente/carlos-alberto-heuser/">Carlos Alberto HEUSER</a><a href="#carlos-alberto-heuser" class="anchor-section" aria-label="Anchor link to header"></a></h3></td>
</tr>
<tr class="even">
<td><strong>Editora</strong></td>
<td>Bookman</td>
</tr>
<tr class="odd">
<td><strong>Idioma</strong></td>
<td>PortuguÃªs</td>
</tr>
<tr class="even">
<td><strong>ISBN-10</strong></td>
<td>8577803821</td>
</tr>
<tr class="odd">
<td><strong>Formato</strong></td>
<td>Impresso</td>
</tr>
<tr class="even">
<td><strong>PÃ¡ginas</strong></td>
<td>282</td>
</tr>
<tr class="odd">
<td><strong>CÃ³digo Biblioteca</strong></td>
<td></td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="calendÃ¡rio-das-aulas" class="section level2 hasAnchor" number="0.4">
<h2 class="hasAnchor"><span class="header-section-number">0.4</span> CalendÃ¡rio das aulas<a href="#calend%C3%A1rio-das-aulas" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<div id="agosto-de-2025" class="section level5 hasAnchor" number="0.4.0.0.1">
<h5 class="hasAnchor"><span class="header-section-number">0.4.0.0.1</span> AGOSTO DE 2025<a href="#agosto-de-2025" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<table>
<thead>
<tr class="header">
<th>Data</th>
<th>Dia da Semana</th>
<th>Aulas</th>
<th>ConteÃºdo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>04/08/2025</td>
<td>Segunda-Feira</td>
<td>Aula Inaugural</td>
<td></td>
</tr>
<tr class="even">
<td>11/08/2025</td>
<td>Segunda-Feira</td>
<td>Aula 2</td>
<td></td>
</tr>
<tr class="odd">
<td>18/08/2025</td>
<td>Segunda-Feira</td>
<td>Aula 3</td>
<td></td>
</tr>
<tr class="even">
<td>25/08/2025</td>
<td>Segunda-Feira</td>
<td>Aula 4</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div id="setembro-de-2025" class="section level5 hasAnchor" number="0.4.0.0.2">
<h5 class="hasAnchor"><span class="header-section-number">0.4.0.0.2</span> SETEMBRO DE 2025<a href="#setembro-de-2025" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<table>
<thead>
<tr class="header">
<th>Data</th>
<th>Dia da Semana</th>
<th>Aulas</th>
<th>ConteÃºdo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>01/09/2025</td>
<td>Segunda-Feira</td>
<td>Aula 5</td>
<td></td>
</tr>
<tr class="even">
<td>08/09/2025</td>
<td>Segunda-Feira</td>
<td>Aula 6</td>
<td></td>
</tr>
<tr class="odd">
<td>15/09/2025</td>
<td>Segunda-Feira</td>
<td>NP1</td>
<td>PROVA</td>
</tr>
<tr class="even">
<td>22/09/2025</td>
<td>Segunda-Feira</td>
<td>Aula 7</td>
<td></td>
</tr>
<tr class="odd">
<td>29/09/2025</td>
<td>Segunda-Feira</td>
<td>Aula 8</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div id="outubro-de-2025" class="section level5 hasAnchor" number="0.4.0.0.3">
<h5 class="hasAnchor"><span class="header-section-number">0.4.0.0.3</span> OUTUBRO DE 2025<a href="#outubro-de-2025" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<table>
<thead>
<tr class="header">
<th>Data</th>
<th>Dia da Semana</th>
<th>Aulas</th>
<th>ConteÃºdo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>06/10/2025</td>
<td>Segunda-Feira</td>
<td>Aula 9</td>
<td></td>
</tr>
<tr class="even">
<td>13/10/2025</td>
<td>Segunda-Feira</td>
<td>Aula 10</td>
<td></td>
</tr>
<tr class="odd">
<td>20/10/2025</td>
<td>Segunda-Feira</td>
<td>Aula 11</td>
<td></td>
</tr>
<tr class="even">
<td>27/10/2025</td>
<td>Segunda-Feira</td>
<td>Aula 12</td>
<td></td>
</tr>
</tbody>
</table>
</div>
<div id="novembro-de-2025" class="section level5 hasAnchor" number="0.4.0.0.4">
<h5 class="hasAnchor"><span class="header-section-number">0.4.0.0.4</span> NOVEMBRO DE 2025<a href="#novembro-de-2025" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<table>
<thead>
<tr class="header">
<th>Data</th>
<th>Dia da Semana</th>
<th>Aulas</th>
<th>ConteÃºdo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>03/11/2025</td>
<td>Segunda-Feira</td>
<td>NP2</td>
<td>PROVA</td>
</tr>
<tr class="even">
<td>10/11/2025</td>
<td>Segunda-Feira</td>
<td></td>
<td>N/A</td>
</tr>
<tr class="odd">
<td>17/11/2025</td>
<td>Segunda-Feira</td>
<td>SUB</td>
<td>PROVA</td>
</tr>
<tr class="even">
<td>24/11/2025</td>
<td>Segunda-Feira</td>
<td></td>
<td>N/A</td>
</tr>
</tbody>
</table>
</div>
<div id="dezembro-de-2025" class="section level5 hasAnchor" number="0.4.0.0.5">
<h5 class="hasAnchor"><span class="header-section-number">0.4.0.0.5</span> DEZEMBRO DE 2025<a href="#dezembro-de-2025" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<table>
<thead>
<tr class="header">
<th>Data</th>
<th>Dia da Semana</th>
<th>Aulas</th>
<th>ConteÃºdo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>01/12/2025</td>
<td>Segunda-Feira</td>
<td></td>
<td>N/A</td>
</tr>
<tr class="even">
<td>08/12/2025</td>
<td>Segunda-Feira</td>
<td>EXAME</td>
<td>PROVA</td>
</tr>
<tr class="odd">
<td>15/12/2025</td>
<td>Segunda-Feira</td>
<td></td>
<td>N/A</td>
</tr>
</tbody>
</table>
</div>
</div>
<div id="alunos-2025---2o-semestre" class="section level2 hasAnchor" number="0.5">
<h2 class="hasAnchor"><span class="header-section-number">0.5</span> Alunos 2025 - 2o Semestre<a href="#alunos-2025---2o-semestre" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”</p>
<div id="campus-chÃ¡cara-santo-antÃ´nio" class="section level3 hasAnchor" number="0.5.1">
<h3 class="hasAnchor"><span class="header-section-number">0.5.1</span> Campus ChÃ¡cara Santo AntÃ´nio<a href="#campus-ch%C3%A1cara-santo-ant%C3%B4nio" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="turma-ti2p40" class="section level4 hasAnchor" number="0.5.1.1">
<h4 class="hasAnchor"><span class="header-section-number">0.5.1.1</span> Turma TI2P40<a href="#turma-ti2p40" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<table>
<thead>
<tr class="header">
<th align="center">MatrÃ­cula</th>
<th align="center">Nome do aluno</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">F362BF0</td>
<td align="center">BRUNO ANTONIO MARQUES</td>
</tr>
<tr class="even">
<td align="center">R536FA6</td>
<td align="center">CAIO CESAR BALBINO DA SILVA</td>
</tr>
<tr class="odd">
<td align="center">H6094I1</td>
<td align="center">DOUGLAS VINICIUS M DOS SANTOS</td>
</tr>
<tr class="even">
<td align="center">R6607G5</td>
<td align="center">GABRIEL ROQUE DOS SANTOS</td>
</tr>
<tr class="odd">
<td align="center">R8133G7</td>
<td align="center">ÃTALO KEVIN RODRIGUES DA SILVA</td>
</tr>
<tr class="even">
<td align="center">R837AA0</td>
<td align="center">LUCAS SOUZA RODRIGUES</td>
</tr>
<tr class="odd">
<td align="center">H714419</td>
<td align="center">MARCOS PAULO CORDEIRO GOES</td>
</tr>
</tbody>
</table>
</div>
</div>
</div>
</div>
<div id="postgres-zip-version-windows-starting-guide" class="section level1 hasAnchor" number="1">
<h1 class="hasAnchor"><span class="header-section-number">1</span> Postgres (Zip Version) Windows Starting Guide<a href="#postgres-zip-version-windows-starting-guide" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<p>Download postgresql from <a href="https://www.enterprisedb.com/download-postgresql-binaries" class="uri">https://www.enterprisedb.com/download-postgresql-binaries</a>;</p>
<p>Unzip it;</p>
<p>Open a cmd;</p>
<p>Enter into the â€˜binâ€™ directory;</p>
<p>Init the database:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb1-1"><a href="#cb1-1" tabindex="-1"></a>initdb<span class="op">.</span><span class="fu">exe</span> <span class="op">-</span>D <span class="op">../</span><span class="kw">data</span> â€“username<span class="op">=</span>postgres â€“auth<span class="op">=</span>trust</span></code></pre></div>
<p>Start the database:</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb2-1"><a href="#cb2-1" tabindex="-1"></a>pg_ctl<span class="op">.</span><span class="fu">exe</span> <span class="fu">start</span> <span class="op">-</span>D <span class="op">../</span><span class="kw">data</span></span></code></pre></div>
<p>Open another cmd;</p>
<p>Enter into the â€˜binâ€™ directory;</p>
<p>Log into the database:</p>
<div class="sourceCode" id="cb3"><pre class="sourceCode powershell"><code class="sourceCode powershell"><span id="cb3-1"><a href="#cb3-1" tabindex="-1"></a>psql<span class="op">.</span><span class="fu">exe</span> â€“username<span class="op">=</span>postgres</span></code></pre></div>
<p>Create a password for your user:</p>
<div class="sourceCode" id="cb4"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb4-1"><a href="#cb4-1" tabindex="-1"></a><span class="kw">ALTER</span> <span class="fu">USER</span> postgres <span class="kw">WITH</span> <span class="kw">PASSWORD</span> â€˜VeryVerySecretâ€™;</span></code></pre></div>
<p>Install adminpack extension:</p>
<div class="sourceCode" id="cb5"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb5-1"><a href="#cb5-1" tabindex="-1"></a><span class="kw">CREATE</span> EXTENSION adminpack;</span></code></pre></div>
<p>Reference: <a href="https://feilerdev.wordpress.com/2017/12/05/installing-postgresql-on-windows-using-zip-archive-without-the-installer/" class="uri">https://feilerdev.wordpress.com/2017/12/05/installing-postgresql-on-windows-using-zip-archive-without-the-installer/</a></p>
<!--chapter:end:index.Rmd-->
</div>
<div id="aula-inaugural" class="section level1 hasAnchor" number="2">
<h1 class="hasAnchor"><span class="header-section-number">2</span> Aula Inaugural<a href="#aula-inaugural" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="section" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">04/08/2025<a href="#section" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="professor-miguÃ©l-suares" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">Professor MiguÃ©l Suares<a href="#professor-migu%C3%A9l-suares" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="disciplina-banco-de-dados" class="section level2 hasAnchor" number="2.1">
<h2 class="hasAnchor"><span class="header-section-number">2.1</span> Disciplina: <strong>Banco de Dados</strong><a href="#disciplina-banco-de-dados" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Curso: GestÃ£o em Tecnologia da InformaÃ§Ã£o (GTI)<br />
</li>
<li>PerÃ­odo: <strong>Noturno</strong><br />
</li>
<li>Turma: <strong>2Âº semestre de 2025</strong></li>
<li>Campus: <strong>ChÃ¡cara Santo AntÃ´nio</strong></li>
</ul>
<blockquote>
<p>â€œDados sÃ£o o novo petrÃ³leo.â€ â€“ Clive Humby!</p>
</blockquote>
<p><img src="images/2025-08-04/Boas_Vindas.jpg" width="300" /></p>
<hr />
</div>
<div id="sobre-o-professor" class="section level2 hasAnchor" number="2.2">
<h2 class="hasAnchor"><span class="header-section-number">2.2</span> ğŸ‘¨â€ğŸ« Sobre o Professor<a href="#sobre-o-professor" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>Nome: Prof.Â MiguÃ©l Suares</p></li>
<li><p>FormaÃ§Ã£o: Mestre em Engenharia da ComputaÃ§Ã£o e Energia da Agricultura</p></li>
<li><p>ExperiÃªncia: +10 anos com bancos de dados relacionais e anÃ¡lise de dados</p></li>
<li><p>Contato: <a href="mailto:miguel.penteado@docente.unip.br">miguel.penteado@docente.unip.br</a></p></li>
</ul>
<hr />
</div>
<div id="objetivos-da-disciplina" class="section level2 hasAnchor" number="2.3">
<h2 class="hasAnchor"><span class="header-section-number">2.3</span> ğŸ¯ Objetivos da Disciplina<a href="#objetivos-da-disciplina" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>Compreender os fundamentos de bancos de dados</p></li>
<li><p>Modelar dados com diagramas ER</p></li>
<li><p>Implementar e consultar bases de dados com SQL</p></li>
<li><p>Utilizar ferramentas como MySQL, PostgreSQL, QGIS e R</p></li>
<li><p>Desenvolver raciocÃ­nio lÃ³gico para resolver problemas com dados</p>
<p><img src="images/2025-08-04/logos.jpg" width="334" /></p></li>
</ul>
<hr />
</div>
<div id="calendÃ¡rio-da-disciplina" class="section level2 hasAnchor" number="2.4">
<h2 class="hasAnchor"><span class="header-section-number">2.4</span> ğŸ“… CalendÃ¡rio da Disciplina<a href="#calend%C3%A1rio-da-disciplina" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<table>
<thead>
<tr class="header">
<th>Data</th>
<th>Aula</th>
<th>Tema</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>04/08/2025</td>
<td>Aula 1</td>
<td>Aula Inaugural</td>
</tr>
<tr class="even">
<td>11/08/2025</td>
<td>Aula 2</td>
<td>Fundamentos</td>
</tr>
<tr class="odd">
<td>18/08/2025</td>
<td>Aula 3</td>
<td>Modelagem e Diagramas</td>
</tr>
<tr class="even">
<td>25/08/2025</td>
<td>Aula 4</td>
<td>AdministraÃ§Ã£o e Gerenciamento</td>
</tr>
<tr class="odd">
<td>01/09/2025</td>
<td>Aula 5</td>
<td>AplicaÃ§Ã£o CRUD</td>
</tr>
<tr class="even">
<td>08/09/2025</td>
<td>Aula 6</td>
<td>MySQL</td>
</tr>
<tr class="odd">
<td>15/09/2025</td>
<td><strong>NP1</strong></td>
<td><strong>Prova</strong></td>
</tr>
<tr class="even">
<td>22/09/2025</td>
<td>Aula 7</td>
<td>Postgres</td>
</tr>
<tr class="odd">
<td>29/09/2025</td>
<td>Aula 8</td>
<td>QGIS</td>
</tr>
<tr class="even">
<td>06/10/2025</td>
<td>Aula 9</td>
<td>RStudio</td>
</tr>
<tr class="odd">
<td>13/10/2025</td>
<td>Aula 10</td>
<td>AnÃ¡lise I</td>
</tr>
<tr class="even">
<td>20/10/2025</td>
<td>Aula 11</td>
<td>AnÃ¡lise II</td>
</tr>
<tr class="odd">
<td>27/10/2025</td>
<td>Aula 12</td>
<td>AnÃ¡lise III</td>
</tr>
<tr class="even">
<td>03/11/2025</td>
<td><strong>NP2</strong></td>
<td><strong>Prova</strong></td>
</tr>
</tbody>
</table>
<hr />
</div>
<div id="ementa-resumida" class="section level2 hasAnchor" number="2.5">
<h2 class="hasAnchor"><span class="header-section-number">2.5</span> ğŸ“š Ementa Resumida<a href="#ementa-resumida" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>IntroduÃ§Ã£o a bancos de dados relacionais (RDBMS)</p></li>
<li><p>Modelagem de dados (M.E.R.) e diagramas Entidade Relacionamento (D.E.R.)</p></li>
<li><p>Linguagem SQL: DDL, DML, DCL</p></li>
<li><p>Ferramentas: MySQL, PostgreSQL</p></li>
<li><p>VisualizaÃ§Ã£o geoespacial (QGIS)</p></li>
<li><p>AnÃ¡lise e exploraÃ§Ã£o de dados (R e RStudio)</p>
<p><img src="images/2025-08-04/modelagem.jpg" width="331" /></p></li>
</ul>
<hr />
</div>
<div id="avaliaÃ§Ã£o" class="section level2 hasAnchor" number="2.6">
<h2 class="hasAnchor"><span class="header-section-number">2.6</span> ğŸ“ AvaliaÃ§Ã£o<a href="#avalia%C3%A7%C3%A3o" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><strong>Provas (NP1 + NP2)</strong></li>
<li><strong>Prova Substitutiva</strong></li>
<li><strong>Exame</strong></li>
</ul>
<hr />
</div>
<div id="ferramentas-da-disciplina" class="section level2 hasAnchor" number="2.7">
<h2 class="hasAnchor"><span class="header-section-number">2.7</span> ğŸ› ï¸ Ferramentas da Disciplina<a href="#ferramentas-da-disciplina" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><strong>Servidores de Banco de Dados</strong>: MySQL, PostgreSQL</li>
<li><strong>Servidores de Banco de Dados</strong>: pgAdmin, MySQL Workbench, DBeaver<br />
</li>
<li><strong>Geoprocessamento</strong>: QGIS<br />
</li>
<li><strong>AnÃ¡lise de Dados</strong>: R + RStudio<br />
</li>
<li><strong>Versionamento e OrganizaÃ§Ã£o</strong>: GitHub, Teams</li>
</ul>
<hr />
</div>
<div id="expectativas-e-regras" class="section level2 hasAnchor" number="2.8">
<h2 class="hasAnchor"><span class="header-section-number">2.8</span> ğŸ“Œ Expectativas e Regras<a href="#expectativas-e-regras" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>Pontualidade e entrega de atividades no prazo</li>
<li>Trabalhos devem ser originais (sem plÃ¡gio)</li>
<li>ParticipaÃ§Ã£o ativa nas discussÃµes e prÃ¡ticas</li>
<li>Uso responsÃ¡vel das ferramentas</li>
<li>Respeito e colaboraÃ§Ã£o entre colegas</li>
</ul>
<hr />
</div>
<div id="dicas-para-mandar-bem" class="section level2 hasAnchor" number="2.9">
<h2 class="hasAnchor"><span class="header-section-number">2.9</span> ğŸ’¡ Dicas para Mandar Bem<a href="#dicas-para-mandar-bem" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li>FaÃ§a os exercÃ­cios logo apÃ³s a aula</li>
<li>Participe das prÃ¡ticas com base real</li>
<li>Mantenha o repositÃ³rio do projeto atualizado</li>
<li>RefaÃ§a consultas SQL atÃ© entender</li>
<li>Teste e documente suas soluÃ§Ãµes</li>
</ul>
<hr />
</div>
<div id="encerramento" class="section level2 hasAnchor" number="2.10">
<h2 class="hasAnchor"><span class="header-section-number">2.10</span> ğŸ™Œ Encerramento<a href="#encerramento" class="anchor-section" aria-label="Anchor link to header"></a></h2>
</div>
<div id="estamos-prontos" class="section level2 hasAnchor" number="2.11">
<h2 class="hasAnchor"><span class="header-section-number">2.11</span> Estamos prontos?<a href="#estamos-prontos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>ğŸ“§ DÃºvidas? Estou Ã  disposiÃ§Ã£o<br />
ğŸ“Š Vamos construir conhecimento juntos!</p>
<blockquote>
<p>PrÃ³xima aula: <strong>Fundamentos de Banco de Dados</strong> â€“ 11/08/2025</p>
</blockquote>
<!--chapter:end:01-2026-02-10_Inaugural.Rmd-->
</div>
</div>
<div id="fundamentos-de-sistemas-de-bancos-de-dados" class="section level1 hasAnchor" number="3">
<h1 class="hasAnchor"><span class="header-section-number">3</span> Fundamentos de Sistemas de Bancos de Dados<a href="#fundamentos-de-sistemas-de-bancos-de-dados" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="section-1" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">11/08/2025<a href="#section-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="professor-miguÃ©l-suares-1" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">Professor MiguÃ©l Suares<a href="#professor-migu%C3%A9l-suares-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<hr />
</div>
<div id="o-inÃ­cio-edgar-frank-ted-codd-19081923-18042003" class="section level2 hasAnchor" number="3.1">
<h2 class="hasAnchor"><span class="header-section-number">3.1</span> O inÃ­cio : Edgar Frank â€œTedâ€ Codd (19/08/1923 â€“ 18/04/2003)<a href="#o-in%C3%ADcio-edgar-frank-ted-codd-19081923-18042003" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>Nome: Professor Codd - MatemÃ¡tico da IBM</p>
<p><img src="images/2025-08-11/01-codd.jpg" width="134" /></p></li>
<li><p>1965: Cria modelo relacional nos tempos da IBM/NASA/Projeto Apolo</p></li>
</ul>
<p><img src="images/2025-08-11/modelagem.jpg" width="334" /></p>
<ul>
<li><p>1969: Codd nÃ£o Ã© levado a sÃ©rio</p></li>
<li><p>1970: Publica a teoria relacional nas universidades (Berkley, CalifÃ³rnia)</p></li>
</ul>
<hr />
</div>
<div id="anos-1970-ibm-entra-no-modelo-relacional-systemr-e-sequelsql" class="section level2 hasAnchor" number="3.2">
<h2 class="hasAnchor"><span class="header-section-number">3.2</span> Anos 1970: IBM entra no Modelo relacional: SystemR e SEQUEL/SQL<a href="#anos-1970-ibm-entra-no-modelo-relacional-systemr-e-sequelsql" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>1970: IBM entende a importÃ¢ncia do modelo de Codd</p></li>
<li><p>1971: Como Codd publica o conhecimento, o projeto vai para <em>Raymond Francis Boyce</em></p>
<p><img src="images/2025-08-11/05-Boyce.png" width="138" /></p></li>
<li><p>1974: Donald D. Chamberlin e <em>Raymond Francis Boyce</em> criam a SQL na IBM</p></li>
<li><p>1973: <em>Raymond Francis Boyce</em> criam o SystemR (Banco Relacional da IBM)</p></li>
<li><p>Codd continua publicando artigos sobre modelo relacional</p></li>
<li><p>1977: Ex-alunos prof Michael StoneBraker fundam a (Relational Inc) ORACLE â€œcopiandoâ€ o SystemR da IBM.</p>
<p><img src="images/2025-08-11/06-oracle.png" width="132" /></p></li>
</ul>
<hr />
</div>
<div id="anos-1970-prof-codd-inspira-prof-stonebraker-banco-ingres" class="section level2 hasAnchor" number="3.3">
<h2 class="hasAnchor"><span class="header-section-number">3.3</span> Anos 1970: Prof Codd inspira Prof StoneBraker: BANCO INGRES<a href="#anos-1970-prof-codd-inspira-prof-stonebraker-banco-ingres" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>1974: Michael StoneBraker comeÃ§a projeto INGRES na Universidade de Berkley</p>
<p><img src="images/2025-08-11/07-Michael_StoneBraker.png" width="202" /></p></li>
<li><p>1976: Nasce o INGRES, pai de muitos Bancos de Dados Modernos.</p>
<p><img src="images/2025-08-11/03-ingress-1.0.jpg" width="173" /></p></li>
<li><p>1976: INGRES nasce com linguagem prÃ³rpia, o QUEL, ao invÃ©s do SQL</p></li>
<li><p>INGRESS cria a empresa Relational INC</p></li>
<li><p>Ex-funcionÃ¡rios (alunos) da Relational Inc fundam a SYBASE.</p></li>
</ul>
<hr />
</div>
<div id="anos-1980-ingres-semi-livre-vs-ibm-system-r-pago-vs-oracle" class="section level2 hasAnchor" number="3.4">
<h2 class="hasAnchor"><span class="header-section-number">3.4</span> Anos 1980: INGRES (SEMI-LIVRE) vs IBM System R ( pago ) vs ORACLE<a href="#anos-1980-ingres-semi-livre-vs-ibm-system-r-pago-vs-oracle" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>1982 IBM transforma SystemR em IBM DB2.</p></li>
<li><p>1984 Ex-funcionÃ¡rios (alunos) da Relational Inc fundam a SYBASE.</p>
<p><img src="images/2025-08-11/08-sybase.png" width="257" /></p></li>
<li><p>1985: SoneBraker cria o PostGRES (Banco de Dados Objeto-Relacional)</p></li>
<li><p>1986: INGRES perde para a ORACLE no mercado de SGBDs</p></li>
<li><p>1989: SQL vira padrÃ£o ANSI e padrÃ£o ISO</p></li>
</ul>
<hr />
</div>
<div id="anos-1990-mysql-e-postgres-que-vira-postgresql" class="section level2 hasAnchor" number="3.5">
<h2 class="hasAnchor"><span class="header-section-number">3.5</span> Anos 1990: MySQL e POSTGRES que vira POSTGRESQL<a href="#anos-1990-mysql-e-postgres-que-vira-postgresql" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>1993: O SYBASE SQL Server Ã© portado para o Windows NT 4.0</p></li>
<li><p>1994: Fim do relacionamento entre Microsoft e SYBASE: nasce o MS-SQL Server</p></li>
<li><p>1994: <strong>Andrew Yu</strong> e <strong>Jolly Chen</strong> Adicionam SQL ao POSTGRES: nasce o <strong>PostgreSQL</strong></p>
<p><img src="images/2025-08-11/10-postgresql.png" width="141" /></p></li>
<li><p>1994: David Axmark, Allan Larsson e Michael â€œMontyâ€ Widenius criam o MySQL.</p>
<p><img src="images/2025-08-11/09-mysql.png" width="131" /></p></li>
<li><p>1997: Nasce o postgreSQL 6.0</p></li>
<li><p>1998: Carlo Strozzi - Modelo NÃ£o-SQL (conceito de SGBDs que nÃ£o usam interface SQL)</p></li>
</ul>
<hr />
</div>
<div id="anos-2000-sybase-eo-no-sql" class="section level2 hasAnchor" number="3.6">
<h2 class="hasAnchor"><span class="header-section-number">3.6</span> Anos 2000: Sybase eo No-SQL<a href="#anos-2000-sybase-eo-no-sql" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<ul>
<li><p>2003 - Doug Cutting e Mike Cafarella, projeto <em>Hadoop</em> baeado no documento <em>Google File System</em></p></li>
<li><p>2007 - 10gen (MongoDB Inc) inicia o projeto MongoDB (NÃ£o SQL)</p>
<p><img src="images/2025-08-11/11-mongodb.png" width="260" /></p></li>
<li><p>2007 - Avinash Lakshman do facebook disponibiliza o Apache Cassandra (NÃ£o SQL)</p>
<p><img src="images/2025-08-11/12-cassandra.png" width="126" /></p></li>
<li><p>2008 - BIG DATA LanÃ§ado o Apache HADOOP e o Apache Hive (emulador SQL)</p>
<p><img src="images/2025-08-11/13-hadoop.png" width="441" />BIG</p>
<p><img src="images/2025-08-11/14-Apache_Hive.png" width="139" /></p></li>
</ul>
<hr />
<!--chapter:end:02-2026-02-24_Fubdamentos_SGBD-aula.Rmd-->
</div>
<div id="exercÃ­cios" class="section level2 hasAnchor" number="3.7">
<h2 class="hasAnchor"><span class="header-section-number">3.7</span> ExercÃ­cios<a href="#exerc%C3%ADcios" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!--chapter:end:02-2026-02-24_Fubdamentos_SGBD-exercicio.Rmd-->
</div>
</div>
<div id="modelagem-de-bancos-de-dados" class="section level1 hasAnchor" number="4">
<h1 class="hasAnchor"><span class="header-section-number">4</span> Modelagem de Bancos de Dados<a href="#modelagem-de-bancos-de-dados" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="section-2" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">18/08/2025<a href="#section-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="professor-miguÃ©l-suares-2" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">Professor MiguÃ©l Suares<a href="#professor-migu%C3%A9l-suares-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="introduÃ§Ã£o-visitando-a-teoria-de-bancos-de-dados" class="section level2 hasAnchor" number="4.1">
<h2 class="hasAnchor"><span class="header-section-number">4.1</span> IntroduÃ§Ã£o: Visitando a teoria de Bancos de Dados<a href="#introdu%C3%A7%C3%A3o-visitando-a-teoria-de-bancos-de-dados" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><img src="images/5-bi/01-banco-de-dados.jpg" width="452" /></p>
<blockquote>
<p><strong>Banco de Dados</strong> Um banco de dados Ã© uma coleÃ§Ã£o compartilhada de dados logicamente relacionados, projetada para atender Ã s necessidades informacionais de uma organizaÃ§Ã£o. - <em>DATE, C. J. An Introduction to Database Systems. 8. ed.Â Boston: Addison-Wesley, 2003</em>.</p>
</blockquote>
<p>Ou seja, alguns pontos-chave da definiÃ§Ã£o de Date:</p>
<ul>
<li><p>â€œColeÃ§Ã£o de dados â€¦â€ â†’ nÃ£o Ã© um conjunto de arquivos soltos, mas dados organizados.</p></li>
<li><p>â€œCompartilhada â€¦â€ â†’ nÃ£o pertence a apenas um usuÃ¡rio ou aplicaÃ§Ã£o; Ã© usada por vÃ¡rios.</p></li>
<li><p>â€œDados logicamente relacionados â€¦â€ â†’ os dados tÃªm um relacionamento semÃ¢ntico, nÃ£o sÃ£o apenas agrupamentos arbitrÃ¡rios.</p></li>
<li><p>â€œProjetada para atender necessidades â€¦â€ â†’ o banco existe para suportar os processos de uma organizaÃ§Ã£o (consultas, relatÃ³rios, controle, tomada de decisÃ£o).</p></li>
</ul>
<p><img src="images/5-bi/07-tabela_relacional.jpg" /></p>
<blockquote>
<p><strong>Banco de Dados Relacional</strong> Um banco de dados relacional Ã© um banco de dados baseado em um modelo de dados relacional, no qual os dados sÃ£o representados como um conjunto de relaÃ§Ãµes (tabelas), e cada relaÃ§Ã£o consiste em tuplas (linhas) e atributos (colunas). - <em>SILBERSCHATZ, Abraham; KORTH, Henry F.; SUDARSHAN, S. Database System Concepts. 6. ed.Â New York: McGraw-Hill, 2010.</em></p>
</blockquote>
<p>Agora, alguns pontos-chave da definiÃ§Ã£o de <em>Abraham Silberschatz</em> :</p>
<ul>
<li><p>Base no modelo relacional de Codd (1970).</p></li>
<li><p>Dados representados em tabelas (relaÃ§Ãµes).</p></li>
<li><p>Cada tabela Ã© composta de tuplas (linhas) e atributos (colunas).</p></li>
<li><p>Integridade garantida por restriÃ§Ãµes (chaves, integridade referencial, domÃ­nio de atributos).</p></li>
<li><p>ManipulaÃ§Ã£o feita por linguagens relacionais (Ã¡lgebra relacional, cÃ¡lculo relacional, SQL).</p></li>
</ul>
<p>O Banco de Dados Relacional organiza as informaÃ§Ãµes em <strong>tabelas bidiomensionais</strong> constituÃ­das de <strong>linhas e colunas</strong> chamadas e essas tabelas recebem o nome de <strong>relaÃ§Ãµes</strong>. Cada <strong>relaÃ§Ã£o</strong> possui um <strong>campo-chave</strong> que confere identificaÃ§Ã£o exclusiva a cada registro da tabela.</p>
</div>
<div id="modelo-matemÃ¡tico-de-um-banco-de-dados" class="section level2 hasAnchor" number="4.2">
<h2 class="hasAnchor"><span class="header-section-number">4.2</span> Modelo MatemÃ¡tico de um Banco de Dados<a href="#modelo-matem%C3%A1tico-de-um-banco-de-dados" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Considere um Banco de Dados para representar, com consistÃªncia MatemÃ¡tica os funcionÃ¡rios e Departamentos de uma Empresa.</p>
<div id="podemos-representa-lo-matemÃ¡ticamente-utilizando-a-teoria-dos-conjuntos" class="section level3 hasAnchor" number="4.2.1">
<h3 class="hasAnchor"><span class="header-section-number">4.2.1</span> Podemos representa-lo matemÃ¡ticamente utilizando a teoria dos conjuntos<a href="#podemos-representa-lo-matem%C3%A1ticamente-utilizando-a-teoria-dos-conjuntos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="figure">
<img src="2026-ADS-1sem-BancoDeDados_files/figure-html/tikz-diagrama0-1.png" alt="Diagrama de Montadoras, VeÃ­culos e ProprietÃ¡rios" width="672" />
<p class="caption">
(#fig:tikz-diagrama0)Diagrama de Montadoras, VeÃ­culos e ProprietÃ¡rios
</p>
</div>
<div id="edgard-f-cood-explica-em-sua-obra-a-relational-model-of-data-for-large-shared-data-banks-como-definir-uma-banco-de-dados-compartilhado-matemÃ¡ticamente" class="section level4 hasAnchor" number="4.2.1.1">
<h4 class="hasAnchor"><span class="header-section-number">4.2.1.1</span> Edgard F Cood explica em sua obra â€œA Relational Model of Data for Large Shared Data Banksâ€ como definir uma Banco de Dados compartilhado <em>matemÃ¡ticamente</em><a href="#edgard-f-cood-explica-em-sua-obra-a-relational-model-of-data-for-large-shared-data-banks-como-definir-uma-banco-de-dados-compartilhado-matem%C3%A1ticamente" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<blockquote>
<p>Um <strong>banco de dados relacional</strong> Ã© um banco de dados no qual todos os dados sÃ£o representados por meio de <strong>relaÃ§Ãµes (matematicamente, conjuntos de tuplas)</strong>, e todas as operaÃ§Ãµes sobre os dados sÃ£o baseadas em operadores formais do cÃ¡lculo relacional e da Ã¡lgebra relacional. - <em>A Relational Model of Data for Large Shared Data Banksâ€ (Communications of the ACM, vol.Â 13, n.Â 6, pp.Â 377â€“387, 1970).</em></p>
</blockquote>
<p><a href="https://buttondown.com/jaffray/archive/in-codd-we-trust-or-not/"><img src="images/2025-08-18/02-Edgard_Frank_Codd.jpg" alt="Professor Edgar Frank Codd - Universidade do Tenessi" /></a></p>
</div>
</div>
<div id="entÃ£o-para-podemos-relacionar-estes-dois-conjuntos-funcionÃ¡rios-e-departamentos-utilizando-a-teoria-das-funÃ§Ãµes" class="section level3 hasAnchor" number="4.2.2">
<h3 class="hasAnchor"><span class="header-section-number">4.2.2</span> EntÃ£o para podemos relacionar estes dois conjuntos (FuncionÃ¡rios e Departamentos) utilizando a Teoria das FunÃ§Ãµes<a href="#ent%C3%A3o-para-podemos-relacionar-estes-dois-conjuntos-funcion%C3%A1rios-e-departamentos-utilizando-a-teoria-das-fun%C3%A7%C3%B5es" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><span class="math display">\[
\text{Edgard Frank Codd era um matemÃ¡tico tradicional} \\
\text{Considere o conseito de funÃ§Ã£o: } \\
f(x) = Y \\
\text{era dessa forma que ele imaginava relacionamento e } \\
\text{ garantia matemÃ¡tica de CONSISTÃŠNCIA entre } \\
\text{ elementos de 2 conjuntos de dados diferentes }
\]</span></p>
<div class="figure">
<img src="2026-ADS-1sem-BancoDeDados_files/figure-html/tikz-diagrama10-1.png" alt="Diagrama de Montadoras, VeÃ­culos e ProprietÃ¡rios" width="672" />
<p class="caption">
(#fig:tikz-diagrama10)Diagrama de Montadoras, VeÃ­culos e ProprietÃ¡rios
</p>
</div>
<p>Mas vai ficar faltando como representar os atributos nesse modelo (colunas das tabelas):</p>
<p><span class="math display">\[
\begin{array}{c| c | c}
\textbf{ Conjunto FuncionÃ¡rios}    &amp; \textbf{ Relacionamento Trabalha} &amp; \textbf{Conjunto Departamentos)} \\
\hline
FULANO                             &amp;  \quad TRABALHA                   &amp; \quad RH \\
BELTRANO                           &amp;  \quad TRABALHA                   &amp; \quad FINANCEIRO \\
CICLANO                            &amp;  \quad TRABALHA                   &amp; \quad DEIRETORIA \\
\hline
\textbf{Total: 3 ELEMENTOS }       &amp; \textbf{ CONECTADOS }             &amp; \textbf{Total: 3 ELEMENTOS }
\end{array}
\]</span></p>
<p>Ainda, Ã© necessÃ¡rio acrescentar algumas regras de integridade a representaÃ§Ã£o;</p>
</div>
</div>
<div id="modelo-lÃ³gico-de-banco-de-dados" class="section level2 hasAnchor" number="4.3">
<h2 class="hasAnchor"><span class="header-section-number">4.3</span> Modelo LÃ³gico de Banco de Dados<a href="#modelo-l%C3%B3gico-de-banco-de-dados" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="modelo-conceitual-entidade-relacionamento-de-banco-de-dados" class="section level3 hasAnchor" number="4.3.1">
<h3 class="hasAnchor"><span class="header-section-number">4.3.1</span> Modelo Conceitual â€œEntidade Relacionamentoâ€ de Banco de Dados<a href="#modelo-conceitual-entidade-relacionamento-de-banco-de-dados" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>O Modelo Entidade-Relacionamento (MER), proposto por Peter Chen em 1976, Ã© uma ferramenta fundamental na modelagem de dados. Ã‰ um modelo de dados de alto nÃ­vel que descreve a estrutura conceitual de um banco de dados. O Modelo Entidade-Relacionamento (MER) Ã© representado graficamente atravÃ©s de um DER (Diagrama Entidade-Relacionamento).</p>
<p><a href="https://personalidades-tecnologia.blogspot.com/2011/06/peter-pin-shan-chen-peter-pin-shan-chen.html"><img src="images/2025-08-18/03-Peter_Chen.jpg" width="173" alt="Professor Peter Chen - universidade norte-americana de Luisiania" /></a></p>
<p>Ã‰ utilizado para projetar Bancos de Dados Relacionais a partir de entrevistas onde se descreve as informaÃ§Ãµes que se deseja armazenar de forma consistente. Exemplo:</p>
<p>â€œ<em>Desenhe um diagrama entidade-relacionamento DER contendo as entidades funcionarios e departamentos. A entidade â€funcionÃ¡riosâ€ possui os atributos â€nomeâ€ e â€CPFâ€. A entidade â€Departamentosâ€ possui os atributos â€Nomeâ€ e â€siglaâ€. O atributo â€CPFâ€ Ã© chave primÃ¡ria da entidade â€FuncionÃ¡riosâ€. O atributo â€siglaâ€ Ã© chave primÃ¡ria da entidade â€Departamentosâ€. As entidades â€FuncionÃ¡riosâ€ e â€Departamentosâ€ se relacionam atravÃ©s de um relacionamento chamado â€Pertenceâ€</em>.â€</p>
<p><img src="images/Exemplo-01.svg" /><!-- --></p>
<p>Segundo Laudon</p>
<blockquote>
<p><strong>Diagrama Entidade/Relacionamento (DER)</strong> Ã© uma representaÃ§Ã£o esquemÃ¡tica utilizada para entender as relaÃ§Ãµes entre as tabelas de um banco de dados relacional. [[1] - LAUDON, Kenneth C.; LAUDON, Jane P. *Sistemas de informaÃ§Ã£o gerenciais*. 11. ed.Â SÃ£o Paulo: Pearson Education do Brasil, 2010. p.Â 180.]</p>
</blockquote>
</div>
<div id="composiÃ§Ã£o-e-significado-do-diagrama-entidade-relacionamento-der" class="section level3 hasAnchor" number="4.3.2">
<h3 class="hasAnchor"><span class="header-section-number">4.3.2</span> ComposiÃ§Ã£o e Significado do Diagrama Entidade Relacionamento (DER)<a href="#composi%C3%A7%C3%A3o-e-significado-do-diagrama-entidade-relacionamento-der" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><span class="math display">\[
\begin{array}{c| c | c}
\textbf{ NOME DO COMPONENTE}    &amp; \textbf{RepresentaÃ§Ã£o GrÃ¡fica}   &amp; \textbf{ Liguagem Natural (texto)} \\
\hline
ENTIDADE                        &amp;  \quad RETÃ‚NGULO                 &amp; \quad SUBSTÃƒNTIVO \\
ATRIBUTO                        &amp;  \quad ELÃPSE                    &amp; \quad ADJETIVO \\
RELACIONAMENTO                  &amp;  \quad LOSÃ‚NGULO                 &amp; \quad VERBO \\
\hline
\textbf{Total: 3 ELEMENTOS }    &amp; \textbf{ FORMA GRÃFICA }         &amp; \textbf{ FORMA MOFOLÃ“GICA GRAMATICAL }
\end{array}
\]</span></p>
<div class="figure">
<img src="2026-ADS-1sem-BancoDeDados_files/figure-html/tikz-diagrama-DER-00-1.png" alt="Diagrama de Montadoras, VeÃ­culos e ProprietÃ¡rios" width="672" />
<p class="caption">
(#fig:tikz-diagrama-DER-00)Diagrama de Montadoras, VeÃ­culos e ProprietÃ¡rios
</p>
</div>
</div>
</div>
<div id="modelo-fÃ­sico-de-banco-de-dados" class="section level2 hasAnchor" number="4.4">
<h2 class="hasAnchor"><span class="header-section-number">4.4</span> Modelo FÃ­sico de Banco de Dados<a href="#modelo-f%C3%ADsico-de-banco-de-dados" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="geraÃ§Ã£o-do-modelo-fÃ­sico-para-aplica-lo-ao-sgbd-sistema-de-gerenciamento-de-banco-de-dados" class="section level3 hasAnchor" number="4.4.1">
<h3 class="hasAnchor"><span class="header-section-number">4.4.1</span> GeraÃ§Ã£o do modelo FÃ­sico para aplica-lo ao SGBD (Sistema de Gerenciamento de Banco de Dados):<a href="#gera%C3%A7%C3%A3o-do-modelo-f%C3%ADsico-para-aplica-lo-ao-sgbd-sistema-de-gerenciamento-de-banco-de-dados" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Uma vez que o modelo conceitual seja gerado, o analista pode mapea-lo para um â€œmodelo fÃ­sicoâ€. Aqui, cada entidade irÃ¡ gerar uma tebela, cada atributo irÃ¡ originar uma coluna pertinente da tabela em questÃ£o e cada relacionamento irÃ¡ mapear <strong>chaves primÃ¡rias</strong> e <strong>chaves forasteiras</strong> nas tabelas interrelacionadas.</p>
<p><span class="math display">\[
\begin{array}{c| c | c}
\textbf{Componente LÃ³gico}    &amp; \textbf{ Componente FÃ­sico}   &amp; \textbf{Liguagem Natural (texto)} \\
\hline
ENTIDADE                        &amp;  \quad TABELA               &amp; \quad SUBSTÃƒNTIVO \\
ATRIBUTO                        &amp;  \quad COLUNA               &amp; \quad ADJETIVO \\
RELACIONAMENTO                  &amp;  \quad CHAVE-ESTRANGEIRA    &amp; \quad VERBO \\
\hline
\textbf{Diagrama LÃ³gico DER }    &amp; \textbf{ FORMA FÃSICA - SGBD }    &amp; \textbf{ FORMA MOFOLÃ“GICA GRAMATICAL ORIGINAL }
\end{array}
\]</span></p>
<p>A ferramenta que irÃ¡ criar as estruturas FÃ­sicas (tabelas, colunas, chaves) dentro do Banco de Dados Ã© o Sistema de Gerenciamento de Banco de Dados atravÃ©s da linguagem <strong>SQL</strong>.</p>
<p><img src="images/5-bi/06-modelo_fisico.jpg" /></p>
</div>
<div id="interagindo-com-o-modelo-fÃ­sico---a-linguagem-sql-structured-query-language" class="section level3 hasAnchor" number="4.4.2">
<h3 class="hasAnchor"><span class="header-section-number">4.4.2</span> Interagindo com o Modelo FÃ­sico - A linguagem SQL (Structured Query Language)<a href="#interagindo-com-o-modelo-f%C3%ADsico---a-linguagem-sql-structured-query-language" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>A linguagem SQL foi criada nos laboratÃ³rios da IBM em 1974, como interface de manipulaÃ§Ã£o ao Bando de Dados Relacional System-R , atualmente denominado IBM DB2. Os criadores foram engenheiros de sistemas que sucederam o professor Edgard Frank Codd no projeto de Banco de Dados Relacional: Donald Chamberlain e Raymond Boyce.</p>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<tbody>
<tr class="odd">
<td><img src="images/2025-08-18/04-Donald_Chamberlain.jpg" width="358" alt="Donald Chamberlain - Criador da linguagem SQL nos laboratÃ³rios da IBM" /></td>
<td><img src="images/2025-08-18/04-Raymond_Boyce.jpg" width="238" alt="Raymond Boyce - Criador da linguagem SQL nos laboratÃ³rios da IBM" /></td>
</tr>
</tbody>
</table>
<p>A lingauem SQL Ã© a ponte com o mundo exterior para um Sistema de Gerenciamento de Banco de Dados (SGBD). Os conjunto de comandos da linguagem SQL sÃ£o divididos em 3 grandes grupos:</p>
<p><span class="math display">\[
\begin{array}{c| c | c}
\textbf{GRUPO}    &amp; \textbf{ Comandos}   &amp; \textbf{Finalidade} \\
\hline
Grupo \ DDL         &amp;  \quad \ Data \ Definion \ Language        &amp; \quad Criar \ estruturas \ de \ dados \\
Grupo \ DML         &amp;  \quad \ Data \ Manipulation \ Language    &amp; \quad Manipular \ dados \ armazenados \\
Grupo \ DCL         &amp;  \quad \ Data \ Control \ Language         &amp; \quad Criar \ Regras \ para \ os \ dados \\
Grupo \ TCL         &amp;  \quad \ Transaction \ Control \ Language  &amp; \quad Criar \ TransaÃ§Ãµes \ para \ os \ dados \\
\hline
\textbf{Subconjunto SQL }    &amp; \textbf{ Significado }    &amp; \textbf{ Conjunto Completo }
\end{array}
\]</span></p>
<p>Comandos exemplo:</p>
<p><span class="math display">\[
\begin{array}{c| c }
\textbf{GRUPO}    &amp; \textbf{ Comandos}    \\
\hline
Grupo \ DDL         &amp;  \quad  CREATE, \quad ALTER,\quad DROP \ \        \\
Grupo \ DML         &amp;  \quad SELECT, \quad INSERT, \quad UPDATE, \quad DELETE, \quad JOIN    \\
Grupo \ DCL         &amp;  \quad GRANT, \quad REVOKE  \\
Grupo \ TCL         &amp;  \quad COMMIT, \quad ROLLBACK, \quad SAVEPOINT   \\
\hline
\textbf{Subconjunto SQL }    &amp; \textbf{ Significado }     
\end{array}
\]</span></p>
<p>O cÃ³digo abaixo escrito em Lingauem SQL padrÃ£o transfere para o modelo fÃ­sico o modelo lÃ³gico anterior:</p>
<p><img src="images/Exemplo-01-continua%C3%A7%C3%A3o.svg" /><!-- --></p>
<p>Transformando em SQL - EQUIVALENTE:</p>
<div class="sourceCode" id="cb6"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb6-1"><a href="#cb6-1" tabindex="-1"></a><span class="co">-- Exemplo testado e gerado no SGBD Postgres versÃ£o 15</span></span>
<span id="cb6-2"><a href="#cb6-2" tabindex="-1"></a></span>
<span id="cb6-3"><a href="#cb6-3" tabindex="-1"></a><span class="co">-- Tabela FuncionÃ¡rios</span></span>
<span id="cb6-4"><a href="#cb6-4" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> <span class="ot">&quot;public&quot;</span>.funcionarios</span>
<span id="cb6-5"><a href="#cb6-5" tabindex="-1"></a>(</span>
<span id="cb6-6"><a href="#cb6-6" tabindex="-1"></a>    cpf bigint <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb6-7"><a href="#cb6-7" tabindex="-1"></a>    nome <span class="dt">varchar</span>(<span class="dv">200</span>)</span>
<span id="cb6-8"><a href="#cb6-8" tabindex="-1"></a>);</span>
<span id="cb6-9"><a href="#cb6-9" tabindex="-1"></a></span>
<span id="cb6-10"><a href="#cb6-10" tabindex="-1"></a><span class="co">-- Tabela Departamentos</span></span>
<span id="cb6-11"><a href="#cb6-11" tabindex="-1"></a></span>
<span id="cb6-12"><a href="#cb6-12" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> <span class="ot">&quot;public&quot;</span>.departamentos</span>
<span id="cb6-13"><a href="#cb6-13" tabindex="-1"></a>(</span>
<span id="cb6-14"><a href="#cb6-14" tabindex="-1"></a>    sigla <span class="dt">integer</span> <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb6-15"><a href="#cb6-15" tabindex="-1"></a>    nome <span class="dt">varchar</span>(<span class="dv">200</span>)</span>
<span id="cb6-16"><a href="#cb6-16" tabindex="-1"></a>);</span>
<span id="cb6-17"><a href="#cb6-17" tabindex="-1"></a></span>
<span id="cb6-18"><a href="#cb6-18" tabindex="-1"></a><span class="co">-- Definindo a coluna &quot;cpf&quot; da tabela &quot;funcionÃ¡rios&quot; como chave primÃ¡ria</span></span>
<span id="cb6-19"><a href="#cb6-19" tabindex="-1"></a><span class="kw">alter</span> <span class="kw">table</span> <span class="ot">&quot;public&quot;</span>.funcionarios <span class="kw">add</span> <span class="kw">constraint</span> <span class="ot">&quot;chave_primaria_funcionarios&quot;</span> <span class="kw">primary</span> <span class="kw">key</span> (cpf);</span>
<span id="cb6-20"><a href="#cb6-20" tabindex="-1"></a></span>
<span id="cb6-21"><a href="#cb6-21" tabindex="-1"></a><span class="co">-- Definindo a coluna &quot;sigla&quot;&quot; da tabela &quot;departamentos&quot; como chave primÃ¡ria</span></span>
<span id="cb6-22"><a href="#cb6-22" tabindex="-1"></a><span class="kw">alter</span> <span class="kw">table</span> <span class="ot">&quot;public&quot;</span>.departamentos <span class="kw">add</span> <span class="kw">constraint</span> <span class="ot">&quot;chave_primaria_departamentos&quot;</span> <span class="kw">primary</span> <span class="kw">key</span> (sigla);</span>
<span id="cb6-23"><a href="#cb6-23" tabindex="-1"></a></span>
<span id="cb6-24"><a href="#cb6-24" tabindex="-1"></a><span class="co">-- Gerando a integridade referÃªncial </span></span>
<span id="cb6-25"><a href="#cb6-25" tabindex="-1"></a><span class="co">-- Importando a chave primÃ¡ria da tabela &quot;departamentos&quot; como &quot;chave estrangeira&quot;</span></span>
<span id="cb6-26"><a href="#cb6-26" tabindex="-1"></a><span class="co">-- na tabela &quot;funcionÃ¡rios&quot;</span></span>
<span id="cb6-27"><a href="#cb6-27" tabindex="-1"></a></span>
<span id="cb6-28"><a href="#cb6-28" tabindex="-1"></a><span class="co">-- primeiro adiciona-se a coluna estrageira &quot;sigla&quot; que Ã© coluna originalmente </span></span>
<span id="cb6-29"><a href="#cb6-29" tabindex="-1"></a><span class="co">-- pertencente a tabela departamentos</span></span>
<span id="cb6-30"><a href="#cb6-30" tabindex="-1"></a><span class="kw">alter</span> <span class="kw">table</span> <span class="ot">&quot;public&quot;</span>.funcionarios <span class="kw">add</span> <span class="kw">column</span> sigla <span class="dt">integer</span>;</span>
<span id="cb6-31"><a href="#cb6-31" tabindex="-1"></a></span>
<span id="cb6-32"><a href="#cb6-32" tabindex="-1"></a><span class="co">-- finalmente conecte a coluna sigla a chave primÃ¡ria da tabela &quot;departamento&quot;</span></span>
<span id="cb6-33"><a href="#cb6-33" tabindex="-1"></a><span class="co">-- criando entÃ£o uma chave estrageira na tabela &quot;funcionÃ¡rios&quot;.</span></span>
<span id="cb6-34"><a href="#cb6-34" tabindex="-1"></a><span class="kw">alter</span> <span class="kw">table</span> <span class="ot">&quot;public&quot;</span>.funcionarios <span class="kw">add</span> <span class="kw">constraint</span> <span class="ot">&quot;Chave_estrangeira_Departamento_funcionarios&quot;</span> <span class="kw">foreign</span> <span class="kw">key</span> (sigla) <span class="kw">references</span> <span class="ot">&quot;public&quot;</span>.departamentos(sigla);</span></code></pre></div>
</div>
</div>
<div id="exemplo-revenda-de-veÃ­culos-multi-marcas" class="section level2 hasAnchor" number="4.5">
<h2 class="hasAnchor"><span class="header-section-number">4.5</span> EXEMPLO: REVENDA DE VEÃCULOS MULTI-MARCAS<a href="#exemplo-revenda-de-ve%C3%ADculos-multi-marcas" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Uma revenda de veÃ­culos multimarcas deseja informatizar seu negÃ³cio e precisa de um banco de dados que registre informaÃ§Ãµes sobre veÃ­culos, fabricantes e clientes. Cada veÃ­culo deve ter cÃ³digo de identificaÃ§Ã£o, modelo, ano de fabricaÃ§Ã£o, cor, preÃ§o e chassi. Todo veÃ­culo pertence a um fabricante. O fabricante Ã© identificado por um cÃ³digo e deve ter armazenados seu nome e paÃ­s de origem. A revenda vende veÃ­culos para clientes, e cada venda deve registrar a data, o valor da negociaÃ§Ã£o e a forma de pagamento. Um cliente pode comprar mais de um veÃ­culo, mas cada veÃ­culo sÃ³ pode ser vendido uma vez. Cada cliente Ã© identificado por um cÃ³digo e deve ter armazenados seu nome, CPF/CNPJ, telefone e endereÃ§o.</p>
<div id="passo-1---visualizando-matemÃ¡ticamente-os-dados" class="section level3 hasAnchor" number="4.5.1">
<h3 class="hasAnchor"><span class="header-section-number">4.5.1</span> Passo 1 - Visualizando matemÃ¡ticamente os dados:<a href="#passo-1---visualizando-matem%C3%A1ticamente-os-dados" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Vejamos como ficaria representar matemÃ¡ticamente o enunciado acima:</p>
<ul>
<li><p>Teoria dos Conjuntos - Ajudaria a organizar e agrupar os dados em conjuntos;</p></li>
<li><p>Teoria das FunÃ§Ãµes - A idÃ©ia era fornecer um mecanismo de consistÃªncia aos dados de conjuntos diferentes relacionados. Por exemplo, haveria uma funÃ§Ã£o que mapeasse um um elemento do conjunto <code>veÃ­culo</code> a outro elemento do conjunto <code>montadora</code>.</p></li>
</ul>
<div id="representaÃ§Ã£o-matemÃ¡tica-em-conjuntos-e-seus-elementos" class="section level4 hasAnchor" number="4.5.1.1">
<h4 class="hasAnchor"><span class="header-section-number">4.5.1.1</span> RepresentaÃ§Ã£o MatemÃ¡tica em Conjuntos e seus Elementos :<a href="#representa%C3%A7%C3%A3o-matem%C3%A1tica-em-conjuntos-e-seus-elementos" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Vamos visualizar grÃ¡ficamente os conjuntos de <code>Marcas</code>, <code>modelos</code> e <code>proprietÃ¡rios</code> :</p>
<div class="figure">
<img src="2026-ADS-1sem-BancoDeDados_files/figure-html/tikz-diagrama1-1.png" alt="Diagrama de Montadoras, VeÃ­culos e ProprietÃ¡rios" width="672" />
<p class="caption">
(#fig:tikz-diagrama1)Diagrama de Montadoras, VeÃ­culos e ProprietÃ¡rios
</p>
</div>
</div>
<div id="gerando-os-relacionamentos-matemÃ¡ticamente---teoria-das-funÃ§Ãµes-domÃ­nios-e-imagens" class="section level4 hasAnchor" number="4.5.1.2">
<h4 class="hasAnchor"><span class="header-section-number">4.5.1.2</span> Gerando os Relacionamentos â€œMatemÃ¡ticamenteâ€ - (Teoria das FunÃ§Ãµes, DomÃ­nios e Imagens):<a href="#gerando-os-relacionamentos-matem%C3%A1ticamente---teoria-das-fun%C3%A7%C3%B5es-dom%C3%ADnios-e-imagens" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Vamos visualizar grÃ¡ficamente os relacionamentos entre os lementos dos conjuntos <code>Marcas</code>, <code>modelos</code> e <code>proprietÃ¡rios</code> :</p>
<div class="figure">
<img src="2026-ADS-1sem-BancoDeDados_files/figure-html/tikz-diagrama2-1.png" alt="Diagrama de Montadoras, VeÃ­culos e ProprietÃ¡rios" width="672" />
<p class="caption">
(#fig:tikz-diagrama2)Diagrama de Montadoras, VeÃ­culos e ProprietÃ¡rios
</p>
</div>
<p>A limitaÃ§Ã£o desta representaÃ§Ã£o grÃ¡fica logo fica evidente: por mais que na forma matemÃ¡tica se consiga representar os elementos dos conjuntos e o relacionamento entre eles, a representaÃ§Ã£o nÃ£o consegue representar os diferentes atributos (caracterÃ­sticas) que os elementos dos conjuntos compartilham.</p>
</div>
</div>
<div id="modelo-lÃ³gico-modelo-entidade-relacionamento" class="section level3 hasAnchor" number="4.5.2">
<h3 class="hasAnchor"><span class="header-section-number">4.5.2</span> Modelo LÃ³gico: Modelo Entidade Relacionamento<a href="#modelo-l%C3%B3gico-modelo-entidade-relacionamento" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Vamos agora converter a representaÃ§Ã£o matemÃ¡tica para uma representaÃ§Ã£o lÃ³gica utilizando o modelo M.E.R. (modelo entidade-relacionamento ) proposto pelo professor Peter Chen</p>
<div id="modelo-entidade-relacionamento" class="section level4 hasAnchor" number="4.5.2.1">
<h4 class="hasAnchor"><span class="header-section-number">4.5.2.1</span> Modelo Entidade Relacionamento<a href="#modelo-entidade-relacionamento" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>O modelo Entidade Relacionamento consistem em traduzir elementos morfolÃ³gicos da gramÃ¡tica da lÃ­ngua portuguesa em um texto para um modelo de Banco de dados utilizando a com a seguinte regra de montagem:</p>
<table>
<colgroup>
<col width="25%" />
<col width="25%" />
<col width="25%" />
<col width="25%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Classe morfolÃ³gica da palavra</td>
<td>CORRESPONDÃŠNCIA NO MODELO MATEMÃTICO</td>
<td>CORRESPONDÃŠNCIA NO MODELO LÃ“GICO</td>
<td>CORRESPONDÃŠNCIA NO MODELO FÃSICO-RELACIONAL</td>
</tr>
<tr class="even">
<td><code>Substantivos</code></td>
<td><code>CONJUNTOS</code></td>
<td><code>ENTIDADES</code></td>
<td><code>TABELAS</code></td>
</tr>
<tr class="odd">
<td><strong><code>Adjetivos</code></strong></td>
<td>N/A</td>
<td><strong><code>ATRIBUTO</code></strong></td>
<td><strong><code>COLUNAS</code></strong></td>
</tr>
<tr class="even">
<td><strong><code>Verbos</code></strong></td>
<td>IdÃ©ia de â€œfunÃ§Ãµes y=f(x)â€</td>
<td><strong><code>RELACIONAMENTOS</code></strong></td>
<td><strong><code>CHAVE ESTRANGEIRA</code></strong></td>
</tr>
</tbody>
</table>
<p>Tomando como exemplo a revenda de carros:</p>
<table>
<colgroup>
<col width="29%" />
<col width="70%" />
</colgroup>
<tbody>
<tr class="odd">
<td>Classe morfolÃ³gica da palavra</td>
<td></td>
</tr>
<tr class="even">
<td><code>Substantivos</code></td>
<td>VEÃCULOS, FABRICANTES, CLIENTES</td>
</tr>
<tr class="odd">
<td><strong><code>Adjetivos</code></strong></td>
<td><p>Referentes a veÃ­culos: <code>Modelo</code>, <code>Ano_Fabricacao</code>, <code>Cor</code>, <code>Preco</code>, <code>Chassi</code></p>
<p>Referentes a fabricante: <code>Nome</code>, <code>Pais_Origem</code></p>
<p>Referentes a cliente: <code>Nome</code>, <code>CPF_CNPJ</code>, <code>Telefone</code>, <code>Endereco</code></p></td>
</tr>
<tr class="even">
<td><strong><code>Verbos</code></strong></td>
<td><p>Fabricante - <code>PRODUZ</code>- VeÃ­culo</p>
<p>clinte - <code>COMPRA/VENDE</code> - VeÃ­culo</p></td>
</tr>
</tbody>
</table>
</div>
<div id="modelo-entidade-relacionamento---representaÃ§Ã£o-grÃ¡fica" class="section level4 hasAnchor" number="4.5.2.2">
<h4 class="hasAnchor"><span class="header-section-number">4.5.2.2</span> Modelo Entidade Relacionamento - representaÃ§Ã£o grÃ¡fica<a href="#modelo-entidade-relacionamento---representa%C3%A7%C3%A3o-gr%C3%A1fica" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<table>
<tbody>
<tr class="odd">
<td>Classe morfolÃ³gica da palavra</td>
<td>REPRESENTAÃ‡ÃƒO GRÃFICA</td>
</tr>
<tr class="even">
<td><code>Substantivos</code></td>
<td>RETÃ‚NGULOS</td>
</tr>
<tr class="odd">
<td><strong><code>Adjetivos</code></strong></td>
<td><strong>ELIPSES</strong></td>
</tr>
<tr class="even">
<td><strong><code>Verbos</code></strong></td>
<td><strong>LOSÃ‚NGULOS</strong></td>
</tr>
</tbody>
</table>
<p><img src="images/modelo01.svg" /><!-- --></p>
<div class="sourceCode" id="cb7"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb7-1"><a href="#cb7-1" tabindex="-1"></a></span>
<span id="cb7-2"><a href="#cb7-2" tabindex="-1"></a></span>
<span id="cb7-3"><a href="#cb7-3" tabindex="-1"></a><span class="co">-- ================================================</span></span>
<span id="cb7-4"><a href="#cb7-4" tabindex="-1"></a><span class="co">-- 1) TRANSFORME AS ENTIDADES E ATRIBUTOS EM </span></span>
<span id="cb7-5"><a href="#cb7-5" tabindex="-1"></a><span class="co">--    TABELAS E COLUNAS</span></span>
<span id="cb7-6"><a href="#cb7-6" tabindex="-1"></a><span class="co">-- ================================================</span></span>
<span id="cb7-7"><a href="#cb7-7" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> fabricantes</span>
<span id="cb7-8"><a href="#cb7-8" tabindex="-1"></a>(</span>
<span id="cb7-9"><a href="#cb7-9" tabindex="-1"></a>    codigo_fabricante  <span class="dt">INTEGER</span>      <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb7-10"><a href="#cb7-10" tabindex="-1"></a>    nome               <span class="dt">VARCHAR</span>(<span class="dv">100</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb7-11"><a href="#cb7-11" tabindex="-1"></a>    pais_origem        <span class="dt">VARCHAR</span>(<span class="dv">60</span>)  <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb7-12"><a href="#cb7-12" tabindex="-1"></a>);</span>
<span id="cb7-13"><a href="#cb7-13" tabindex="-1"></a></span>
<span id="cb7-14"><a href="#cb7-14" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> clientes</span>
<span id="cb7-15"><a href="#cb7-15" tabindex="-1"></a>(</span>
<span id="cb7-16"><a href="#cb7-16" tabindex="-1"></a>    codigo_cliente   <span class="dt">INTEGER</span>      <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb7-17"><a href="#cb7-17" tabindex="-1"></a>    nome             <span class="dt">VARCHAR</span>(<span class="dv">120</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb7-18"><a href="#cb7-18" tabindex="-1"></a>    cpf_cnpj         <span class="dt">VARCHAR</span>(<span class="dv">20</span>)  <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">UNIQUE</span>,</span>
<span id="cb7-19"><a href="#cb7-19" tabindex="-1"></a>    telefone         <span class="dt">VARCHAR</span>(<span class="dv">30</span>),</span>
<span id="cb7-20"><a href="#cb7-20" tabindex="-1"></a>    endereco         TEXT</span>
<span id="cb7-21"><a href="#cb7-21" tabindex="-1"></a>);</span>
<span id="cb7-22"><a href="#cb7-22" tabindex="-1"></a></span>
<span id="cb7-23"><a href="#cb7-23" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> veiculos </span>
<span id="cb7-24"><a href="#cb7-24" tabindex="-1"></a>(</span>
<span id="cb7-25"><a href="#cb7-25" tabindex="-1"></a>    codigo_veiculo      <span class="dt">INTEGER</span>       <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb7-26"><a href="#cb7-26" tabindex="-1"></a>    modelo              <span class="dt">VARCHAR</span>(<span class="dv">100</span>)  <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb7-27"><a href="#cb7-27" tabindex="-1"></a>    ano_fabricacao      <span class="dt">INTEGER</span>       <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb7-28"><a href="#cb7-28" tabindex="-1"></a>    cor                 <span class="dt">VARCHAR</span>(<span class="dv">40</span>),</span>
<span id="cb7-29"><a href="#cb7-29" tabindex="-1"></a>    preco               <span class="dt">NUMERIC</span>(<span class="dv">12</span>,<span class="dv">2</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb7-30"><a href="#cb7-30" tabindex="-1"></a>    chassi              <span class="dt">VARCHAR</span>(<span class="dv">30</span>)   <span class="kw">UNIQUE</span> <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb7-31"><a href="#cb7-31" tabindex="-1"></a>);</span>
<span id="cb7-32"><a href="#cb7-32" tabindex="-1"></a></span>
<span id="cb7-33"><a href="#cb7-33" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> vendas</span>
<span id="cb7-34"><a href="#cb7-34" tabindex="-1"></a>(</span>
<span id="cb7-35"><a href="#cb7-35" tabindex="-1"></a>    codigo_venda     <span class="dt">INTEGER</span>          <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb7-36"><a href="#cb7-36" tabindex="-1"></a>    data_venda       <span class="dt">DATE</span>             <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb7-37"><a href="#cb7-37" tabindex="-1"></a>    valor_negociado  <span class="dt">NUMERIC</span>(<span class="dv">12</span>,<span class="dv">2</span>)    <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb7-38"><a href="#cb7-38" tabindex="-1"></a>    forma_pagamento  <span class="dt">VARCHAR</span>(<span class="dv">50</span>)      <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb7-39"><a href="#cb7-39" tabindex="-1"></a>);</span>
<span id="cb7-40"><a href="#cb7-40" tabindex="-1"></a></span>
<span id="cb7-41"><a href="#cb7-41" tabindex="-1"></a><span class="co">-- ================================================</span></span>
<span id="cb7-42"><a href="#cb7-42" tabindex="-1"></a><span class="co">-- 2) TRANSFORME OS ATRIBUTOS CHAVE PRIMÃRIA</span></span>
<span id="cb7-43"><a href="#cb7-43" tabindex="-1"></a><span class="co">-- EM CHAVES-PRIMÃRIAS DAS TABELAS</span></span>
<span id="cb7-44"><a href="#cb7-44" tabindex="-1"></a><span class="co">-- ================================================</span></span>
<span id="cb7-45"><a href="#cb7-45" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> fabricantes <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> chave<span class="op">-</span>primaria_fabricante <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (codigo_fabricante);</span>
<span id="cb7-46"><a href="#cb7-46" tabindex="-1"></a></span>
<span id="cb7-47"><a href="#cb7-47" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> clientes    <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> chave<span class="op">-</span>primaria_cliente <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (codigo_cliente);</span>
<span id="cb7-48"><a href="#cb7-48" tabindex="-1"></a></span>
<span id="cb7-49"><a href="#cb7-49" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> veiculos    <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> chave<span class="op">-</span>primaria_veiculo <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (codigo_veiculo);</span>
<span id="cb7-50"><a href="#cb7-50" tabindex="-1"></a></span>
<span id="cb7-51"><a href="#cb7-51" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> vendas      <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> chave<span class="op">-</span>primaria_venda <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (codigo_venda);</span>
<span id="cb7-52"><a href="#cb7-52" tabindex="-1"></a></span>
<span id="cb7-53"><a href="#cb7-53" tabindex="-1"></a><span class="co">-- ================================================</span></span>
<span id="cb7-54"><a href="#cb7-54" tabindex="-1"></a><span class="co">-- 3) ADICIONAR NAS TABELAS AS COLUNAS EXTRAS</span></span>
<span id="cb7-55"><a href="#cb7-55" tabindex="-1"></a><span class="co">--    QUE VÃƒO RECEBER AS CHAVES ESTRANGEIRAS</span></span>
<span id="cb7-56"><a href="#cb7-56" tabindex="-1"></a><span class="co">-- ================================================</span></span>
<span id="cb7-57"><a href="#cb7-57" tabindex="-1"></a></span>
<span id="cb7-58"><a href="#cb7-58" tabindex="-1"></a><span class="co">-- adicione uma coluna que irÃ¡ acomodar a chave primÃ¡ria da tabela fabricantes como chave estrangeira</span></span>
<span id="cb7-59"><a href="#cb7-59" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> veiculos <span class="kw">add</span> cloumn  codigo_fabricante   <span class="dt">INTEGER</span> <span class="kw">NOT</span> <span class="kw">NULL</span>;</span>
<span id="cb7-60"><a href="#cb7-60" tabindex="-1"></a></span>
<span id="cb7-61"><a href="#cb7-61" tabindex="-1"></a><span class="co">-- adicione uma coluna que irÃ¡ acomodar a chave primÃ¡ria da tabela clientes como chave estrangeira</span></span>
<span id="cb7-62"><a href="#cb7-62" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> vendas   <span class="kw">add</span> cloumn  codigo_cliente      <span class="dt">INTEGER</span> <span class="kw">NOT</span> <span class="kw">NULL</span>;</span>
<span id="cb7-63"><a href="#cb7-63" tabindex="-1"></a></span>
<span id="cb7-64"><a href="#cb7-64" tabindex="-1"></a><span class="co">-- adicione uma coluna que irÃ¡ acomodar a chave primÃ¡ria da tabela veÃ­culos como chave estrangeira</span></span>
<span id="cb7-65"><a href="#cb7-65" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> vendas   <span class="kw">add</span> cloumn  codigo_veiculo      <span class="dt">INTEGER</span> <span class="kw">NOT</span> <span class="kw">NULL</span> <span class="kw">UNIQUE</span>;</span>
<span id="cb7-66"><a href="#cb7-66" tabindex="-1"></a></span>
<span id="cb7-67"><a href="#cb7-67" tabindex="-1"></a><span class="co">-- ================================================</span></span>
<span id="cb7-68"><a href="#cb7-68" tabindex="-1"></a><span class="co">-- 3) CRIE AS CHAVES ESTRANGEIRAS QUE FAZEM A LIGAÃ‡ÃƒO</span></span>
<span id="cb7-69"><a href="#cb7-69" tabindex="-1"></a><span class="co">-- DAS TABELAS &quot;LADO N&quot; DO RELACIONAMENTO NO </span></span>
<span id="cb7-70"><a href="#cb7-70" tabindex="-1"></a><span class="co">-- DIAGRAMA ENTIDADE-RELACIONAMENTO COM AS</span></span>
<span id="cb7-71"><a href="#cb7-71" tabindex="-1"></a><span class="co">-- COLUNAS DO LADO 1</span></span>
<span id="cb7-72"><a href="#cb7-72" tabindex="-1"></a><span class="co">-- ================================================</span></span>
<span id="cb7-73"><a href="#cb7-73" tabindex="-1"></a></span>
<span id="cb7-74"><a href="#cb7-74" tabindex="-1"></a><span class="co">-- utilizando chave estrangeira, faÃ§a esta tabela veÃ­culos referenciar a tabela fabricantes</span></span>
<span id="cb7-75"><a href="#cb7-75" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> veiculos</span>
<span id="cb7-76"><a href="#cb7-76" tabindex="-1"></a>    <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> chave<span class="op">-</span>estrageira_veiculo_fabricante</span>
<span id="cb7-77"><a href="#cb7-77" tabindex="-1"></a>    <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (codigo_fabricante)</span>
<span id="cb7-78"><a href="#cb7-78" tabindex="-1"></a>    <span class="kw">REFERENCES</span> fabricantes (codigo_fabricante)</span>
<span id="cb7-79"><a href="#cb7-79" tabindex="-1"></a>    <span class="kw">ON</span> <span class="kw">UPDATE</span> <span class="kw">CASCADE</span></span>
<span id="cb7-80"><a href="#cb7-80" tabindex="-1"></a>    <span class="kw">ON</span> <span class="kw">DELETE</span> <span class="kw">RESTRICT</span>;</span>
<span id="cb7-81"><a href="#cb7-81" tabindex="-1"></a></span>
<span id="cb7-82"><a href="#cb7-82" tabindex="-1"></a><span class="co">-- utilizando chave estrangeira, faÃ§a esta tabela vendas referenciar a tabela clientes</span></span>
<span id="cb7-83"><a href="#cb7-83" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> vendas</span>
<span id="cb7-84"><a href="#cb7-84" tabindex="-1"></a>    <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> chave<span class="op">-</span>estrageira_venda_cliente</span>
<span id="cb7-85"><a href="#cb7-85" tabindex="-1"></a>    <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (codigo_cliente)</span>
<span id="cb7-86"><a href="#cb7-86" tabindex="-1"></a>    <span class="kw">REFERENCES</span> clientes (codigo_cliente)</span>
<span id="cb7-87"><a href="#cb7-87" tabindex="-1"></a>    <span class="kw">ON</span> <span class="kw">UPDATE</span> <span class="kw">CASCADE</span></span>
<span id="cb7-88"><a href="#cb7-88" tabindex="-1"></a>    <span class="kw">ON</span> <span class="kw">DELETE</span> <span class="kw">RESTRICT</span>;</span>
<span id="cb7-89"><a href="#cb7-89" tabindex="-1"></a></span>
<span id="cb7-90"><a href="#cb7-90" tabindex="-1"></a><span class="co">-- utilizando chave estrangeira, faÃ§a esta tabela vendas referenciar a tabela veÃ­culos </span></span>
<span id="cb7-91"><a href="#cb7-91" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> vendas</span>
<span id="cb7-92"><a href="#cb7-92" tabindex="-1"></a>    <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> chave<span class="op">-</span>estrageira_venda_veiculo</span>
<span id="cb7-93"><a href="#cb7-93" tabindex="-1"></a>    <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (codigo_veiculo)</span>
<span id="cb7-94"><a href="#cb7-94" tabindex="-1"></a>    <span class="kw">REFERENCES</span> veiculos (codigo_veiculo)</span>
<span id="cb7-95"><a href="#cb7-95" tabindex="-1"></a>    <span class="kw">ON</span> <span class="kw">UPDATE</span> <span class="kw">CASCADE</span></span>
<span id="cb7-96"><a href="#cb7-96" tabindex="-1"></a>    <span class="kw">ON</span> <span class="kw">DELETE</span> <span class="kw">RESTRICT</span>;</span></code></pre></div>
</div>
</div>
</div>
<div id="verbos-relacionamentos-e-cardinalidade" class="section level2 hasAnchor" number="4.6">
<h2 class="hasAnchor"><span class="header-section-number">4.6</span> VERBOS: Relacionamentos e Cardinalidade<a href="#verbos-relacionamentos-e-cardinalidade" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>A <strong>cardinalidade</strong> define <strong>quantas ocorrÃªncias de uma entidade podem estar associadas</strong> a ocorrÃªncias de outra entidade em um relacionamento.</p>
<p>Ela Ã© fundamental para entender as regras de negÃ³cio do banco de dados e deve estar sempre representada no <strong>Diagrama Entidade-Relacionamento (DER)</strong>.</p>
<hr />
<div id="tipos-principais-de-cardinalidade" class="section level3 hasAnchor" number="4.6.1">
<h3 class="hasAnchor"><span class="header-section-number">4.6.1</span> ğŸ”¹ Tipos principais de cardinalidade<a href="#tipos-principais-de-cardinalidade" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ol style="list-style-type: decimal">
<li><strong>Um para Um (1:1)</strong><br />
</li>
<li><strong>Um para Muitos (1:N)</strong><br />
</li>
<li><strong>Muitos para Muitos (N:N)</strong></li>
</ol>
<p>A seguir, vamos detalhar cada caso.</p>
<hr />
</div>
<div id="relacionamento-11-um-para-um" class="section level3 hasAnchor" number="4.6.2">
<h3 class="hasAnchor"><span class="header-section-number">4.6.2</span> 1. Relacionamento <strong>1:1 (Um para Um)</strong><a href="#relacionamento-11-um-para-um" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Um exemplo clÃ¡ssico:<br />
- Cada MARIDO possui <strong>uma Ãºnica ESPOSA</strong>.<br />
- Cada ESPOSA pertence a <strong>um Ãºnico MARIDO</strong>.</p>
<div id="representaÃ§Ã£o-no-der" class="section level4 hasAnchor" number="4.6.2.1">
<h4 class="hasAnchor"><span class="header-section-number">4.6.2.1</span> RepresentaÃ§Ã£o no DER:<a href="#representa%C3%A7%C3%A3o-no-der" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/cardinalidade01.svg" /><!-- --></p>
</div>
</div>
<div id="relacionamento-1n-um-para-muitos" class="section level3 hasAnchor" number="4.6.3">
<h3 class="hasAnchor"><span class="header-section-number">4.6.3</span> Relacionamento <strong>1:N (Um para Muitos)</strong><a href="#relacionamento-1n-um-para-muitos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Exemplo:</p>
<p>Um <strong>Cliente</strong> pode fazer <strong>muitos Pedidos</strong>.</p>
<p>Mas cada <strong>Pedido</strong> sÃ³ pode pertencer a <strong>um Cliente</strong>.</p>
<div id="representaÃ§Ã£o-no-der-1" class="section level4 hasAnchor" number="4.6.3.1">
<h4 class="hasAnchor"><span class="header-section-number">4.6.3.1</span> RepresentaÃ§Ã£o no DER:<a href="#representa%C3%A7%C3%A3o-no-der-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/cardinalidade02.svg" /><!-- --></p>
</div>
</div>
<div id="relacionamento-nn-muitos-para-muitos" class="section level3 hasAnchor" number="4.6.4">
<h3 class="hasAnchor"><span class="header-section-number">4.6.4</span> Relacionamento N:N (Muitos para Muitos)<a href="#relacionamento-nn-muitos-para-muitos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Exemplo:</p>
<p>Um <strong>Aluno</strong> pode se matricular <strong>em muitas Disciplinas</strong>.</p>
<p>Cada <strong>Disciplina</strong> pode ter <strong>muitos Alunos</strong>.</p>
<p>( Esse tipo de relacionamento precisa de uma entidade associativa para ser implementado no banco (ex.: Matricula) )</p>
<div id="representaÃ§Ã£o-no-der-2" class="section level4 hasAnchor" number="4.6.4.1">
<h4 class="hasAnchor"><span class="header-section-number">4.6.4.1</span> RepresentaÃ§Ã£o no DER:<a href="#representa%C3%A7%C3%A3o-no-der-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/cardinalidade03.svg" /><!-- --></p>
</div>
</div>
</div>
<div id="entidade-dominante-e-entidade-subordinada" class="section level2 hasAnchor" number="4.7">
<h2 class="hasAnchor"><span class="header-section-number">4.7</span> Entidade Dominante e Entidade Subordinada<a href="#entidade-dominante-e-entidade-subordinada" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>No <strong>Modelo Entidade-Relacionamento (MER)</strong>, algumas entidades sÃ³ existem <strong>dependendo da existÃªncia de outra</strong>.<br />
Nesses casos, usamos os conceitos de <strong>Entidade Dominante</strong> e <strong>Entidade Subordinada</strong>.</p>
<hr />
<div id="definiÃ§Ãµes" class="section level3 hasAnchor" number="4.7.1">
<h3 class="hasAnchor"><span class="header-section-number">4.7.1</span> DefiniÃ§Ãµes:<a href="#defini%C3%A7%C3%B5es" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<ul>
<li><p><strong>Entidade Dominante (ou Forte):</strong><br />
Ã‰ uma entidade que <strong>existe por si sÃ³</strong>, sem depender de nenhuma outra.<br />
Ex.: Cliente, Produto, FuncionÃ¡rio.</p></li>
<li><p><strong>Entidade Subordinada (ou Fraca):</strong><br />
Ã‰ uma entidade que <strong>depende de outra</strong> para existir.<br />
Ela <strong>nÃ£o possui chave primÃ¡ria prÃ³pria</strong> completa e precisa da chave da entidade dominante.<br />
Ex.: ItemPedido, Dependente, Parcela.</p></li>
</ul>
<p>A entidade subordinada Ã© representada por um <strong>losango duplo</strong> (relacionamento identificador) em algumas notaÃ§Ãµes, ou simplesmente destacada como <strong>entidade fraca</strong>.</p>
<p><img src="images/EntidadeDominante01.svg" /><!-- --></p>
<p>Outro Exemplo:</p>
<p><img src="images/EntidadeDominante02.svg" /><!-- --></p>
<hr />
</div>
</div>
<div id="cardinalidade-do-modelo-lÃ³gico-e-a-criaÃ§Ã£o-de-chaves-estrangeiras-no-modelo-fÃ­sico-relacional" class="section level2 hasAnchor" number="4.8">
<h2 class="hasAnchor"><span class="header-section-number">4.8</span> CARDINALIDADE DO MODELO LÃ“GICO E A CRIAÃ‡ÃƒO DE CHAVES ESTRANGEIRAS NO MODELO FÃSICO-RELACIONAL<a href="#cardinalidade-do-modelo-l%C3%B3gico-e-a-cria%C3%A7%C3%A3o-de-chaves-estrangeiras-no-modelo-f%C3%ADsico-relacional" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Vai ser a cardinalidade que irÃ¡ ditar em quais tabelas criaremos chaves estrangeiras.</p>
</div>
<div id="normalizaÃ§Ã£o-em-bancos-de-dados-relaionais" class="section level2 hasAnchor" number="4.9">
<h2 class="hasAnchor"><span class="header-section-number">4.9</span> NormalizaÃ§Ã£o em Bancos de Dados Relaionais<a href="#normaliza%C3%A7%C3%A3o-em-bancos-de-dados-relaionais" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="tabela-desnormalizada" class="section level3 hasAnchor" number="4.9.1">
<h3 class="hasAnchor"><span class="header-section-number">4.9.1</span> Tabela Desnormalizada<a href="#tabela-desnormalizada" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p><img src="images/5-bi/01-montadora.jpg" width="343" /></p>
<p>Considere a tabela VeÃ­culos abaixo:</p>
<table>
<thead>
<tr class="header">
<th align="center">Modelo</th>
<th align="center">Montadora</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">Strada</td>
<td align="center">Fiat</td>
</tr>
<tr class="even">
<td align="center">Mobi</td>
<td align="center">Fiat</td>
</tr>
<tr class="odd">
<td align="center">Pulse</td>
<td align="center">Fiat</td>
</tr>
<tr class="even">
<td align="center">Onix</td>
<td align="center">Chevrolet</td>
</tr>
<tr class="odd">
<td align="center">Tracker</td>
<td align="center">Chevrolet</td>
</tr>
<tr class="even">
<td align="center">Onix Plus</td>
<td align="center">Chevrolet</td>
</tr>
<tr class="odd">
<td align="center">Polo</td>
<td align="center">Volkswagen</td>
</tr>
<tr class="even">
<td align="center">Nivus</td>
<td align="center">Volkswagen</td>
</tr>
<tr class="odd">
<td align="center">T-Cross</td>
<td align="center">Volkswagen</td>
</tr>
<tr class="even">
<td align="center">HB20</td>
<td align="center">Hyundai</td>
</tr>
<tr class="odd">
<td align="center">Creta</td>
<td align="center">Hyundai</td>
</tr>
</tbody>
</table>
<p>Separamos o conjunto de elemntos <em>Montadoras</em> e <em>Modelos</em>.</p>
<table>
<thead>
<tr class="header">
<th align="center">MontadoraID</th>
<th align="center">Montadora</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">Fiat</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">Chevrolet</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">Volkswagen</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">Hyundai</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">ModeloID</th>
<th align="center">Modelo</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">101</td>
<td align="center">Strada</td>
</tr>
<tr class="even">
<td align="center">102</td>
<td align="center">Mobi</td>
</tr>
<tr class="odd">
<td align="center">103</td>
<td align="center">Pulse</td>
</tr>
<tr class="even">
<td align="center">201</td>
<td align="center">Onix</td>
</tr>
<tr class="odd">
<td align="center">202</td>
<td align="center">Tracker</td>
</tr>
<tr class="even">
<td align="center">203</td>
<td align="center">Onix Plus</td>
</tr>
<tr class="odd">
<td align="center">301</td>
<td align="center">Polo</td>
</tr>
<tr class="even">
<td align="center">302</td>
<td align="center">Nivus</td>
</tr>
<tr class="odd">
<td align="center">303</td>
<td align="center">T-Cross</td>
</tr>
<tr class="even">
<td align="center">401</td>
<td align="center">HB20</td>
</tr>
<tr class="odd">
<td align="center">402</td>
<td align="center">Creta</td>
</tr>
</tbody>
</table>
<blockquote>
<p>O processo de fragmentar agrupamentos complexos de dados e simplifica-los a fim de minimizar redundÃ¢ncias e economizar espaÃ§o no Banco de Dados Relacional Ã© chamado de <strong>NORMALIZAÃ‡ÃƒO.</strong> [[1] - LAUDON, Kenneth C.; LAUDON, Jane P. *Sistemas de informaÃ§Ã£o gerenciais*. 11. ed.Â SÃ£o Paulo: Pearson Education do Brasil, 2010. p.Â 180.]</p>
</blockquote>
<p>Mas Como indicar que cada elemento da tabela â€œModeloâ€ estÃ¡ associado a um elemento da tabela â€œMontadoraâ€ ?</p>
</div>
<div id="tabela-normalizada" class="section level3 hasAnchor" number="4.9.2">
<h3 class="hasAnchor"><span class="header-section-number">4.9.2</span> Tabela Normalizada<a href="#tabela-normalizada" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Considere as tabelas abaixo:</p>
<table>
<thead>
<tr class="header">
<th align="center">MontadoraID</th>
<th align="center">Montadora</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">1</td>
<td align="center">Fiat</td>
</tr>
<tr class="even">
<td align="center">2</td>
<td align="center">Chevrolet</td>
</tr>
<tr class="odd">
<td align="center">3</td>
<td align="center">Volkswagen</td>
</tr>
<tr class="even">
<td align="center">4</td>
<td align="center">Hyundai</td>
</tr>
</tbody>
</table>
<table>
<thead>
<tr class="header">
<th align="center">ModeloID</th>
<th align="center">Modelo</th>
<th align="center">MontadoraID</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">101</td>
<td align="center">Strada</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">102</td>
<td align="center">Mobi</td>
<td align="center">1</td>
</tr>
<tr class="odd">
<td align="center">103</td>
<td align="center">Pulse</td>
<td align="center">1</td>
</tr>
<tr class="even">
<td align="center">201</td>
<td align="center">Onix</td>
<td align="center">2</td>
</tr>
<tr class="odd">
<td align="center">202</td>
<td align="center">Tracker</td>
<td align="center">2</td>
</tr>
<tr class="even">
<td align="center">203</td>
<td align="center">Onix Plus</td>
<td align="center">2</td>
</tr>
<tr class="odd">
<td align="center">301</td>
<td align="center">Polo</td>
<td align="center">3</td>
</tr>
<tr class="even">
<td align="center">302</td>
<td align="center">Nivus</td>
<td align="center">3</td>
</tr>
<tr class="odd">
<td align="center">303</td>
<td align="center">T-Cross</td>
<td align="center">3</td>
</tr>
<tr class="even">
<td align="center">401</td>
<td align="center">HB20</td>
<td align="center">4</td>
</tr>
<tr class="odd">
<td align="center">402</td>
<td align="center">Creta</td>
<td align="center">4</td>
</tr>
</tbody>
</table>
<p>Repare que:</p>
<ul>
<li><p>Ã‰ possÃ­vel identificar que nÃ£o existem montadoras repetidas na tabela â€œMontadorasâ€;</p></li>
<li><p>Ã‰ possÃ­vel identificar que nÃ£o existem modelos repetidos na tabela â€œMontadorasâ€;</p></li>
</ul>
<p>A coluna (atributo) <strong>ModeloID</strong> Ã© a <strong>chave primÃ¡ria</strong> da tabela <strong>Modelos.</strong> A coluna (atributo) <strong>MontadoraID</strong> Ã© a <strong>chave primÃ¡ria</strong> da tabela <strong>Montadoras.</strong></p>
<p>Na tabela <strong>Modelos</strong>, a coluna <strong>MontadoraID</strong>, acrescentada a tabela Modelos representa a ligaÃ§Ã£o de cada elemento da tabela Modelos e Montadoras. Essa coluna â€œimportadaâ€ da tabela Montadoras para a tabela Modelos se chama <strong>chave estrangeira</strong>.</p>
</div>
</div>
<div id="referÃªncias" class="section level2 hasAnchor" number="4.10">
<h2 class="hasAnchor"><span class="header-section-number">4.10</span> ReferÃªncias<a href="#refer%C3%AAncias" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>CHEN</strong>, Peter (1990).Â <strong><em>Gerenciando Banco de Dados</em>. A Abordagem Entidade-Relacionamento para Projeto LÃ³gico</strong>. SÃ£o Paulo: McGraw-Hill. 80Â pÃ¡ginas.Â <a href="https://pt.wikipedia.org/wiki/International_Standard_Book_Number" title="International Standard Book Number">ISBN</a>Â <a href="https://pt.wikipedia.org/wiki/Especial:Fontes_de_livros/0-07-460575-5" title="Especial:Fontes de livros/0-07-460575-5">0-07-460575-5</a></p>
<p><strong>DATE</strong>, C. J. <strong>An Introduction to Database Systems.</strong> 8. ed.Â Boston: Addison-Wesley, 2003.</p>
<p><strong>SILBERSCHATZ</strong>, Abraham; KORTH, Henry F.; SUDARSHAN, S. <strong>Database System Concepts.</strong> 6. ed.Â New York: McGraw-Hill, 2010.</p>
<p><strong>CODD</strong>, E. F. <strong>A Relational Model of Data for Large Shared Data Banks.</strong> Communications of the ACM, New York, v. 13, n.Â 6, p.Â 377â€“387, 1970.</p>
<!--chapter:end:03-2026-03-03_Modelagem_SGBD-aula.Rmd-->
</div>
<div id="exercÃ­cios-resolvidos" class="section level2 hasAnchor" number="4.11">
<h2 class="hasAnchor"><span class="header-section-number">4.11</span> ExercÃ­cios RESOLVIDOS<a href="#exerc%C3%ADcios-resolvidos" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<table>
<colgroup>
<col width="100%" />
</colgroup>
<thead>
<tr class="header">
<th>ExercÃ­cio 1 â€” Universidade</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Considere uma Universidade que possui vÃ¡rios Cursos. Cada curso tem um nome, uma duraÃ§Ã£o em semestres e um coordenador. A universidade possui Professores, cada um com um nome, tÃ­tulo e CPF. Um professor pode ministrar vÃ¡rias disciplinas, e cada disciplina pertence a um Ãºnico curso.</td>
</tr>
<tr class="even">
<td><ol style="list-style-type: lower-alpha">
<li>Identifique as entidades</li>
</ol></td>
</tr>
<tr class="odd">
<td><ol start="2" style="list-style-type: lower-alpha">
<li>Identifique os atributos de cada Entidade</li>
</ol></td>
</tr>
<tr class="even">
<td><ol start="3" style="list-style-type: lower-alpha">
<li>Identifique os relacionamentos entre as Entidades</li>
</ol></td>
</tr>
<tr class="odd">
<td><ol start="5" style="list-style-type: lower-alpha">
<li>FaÃ§a o diagrama DEM (Diagrama Entidade Relacionamento) contendo as entidades, atributos e relacionamentos que vocÃª mapeou.</li>
</ol></td>
</tr>
</tbody>
</table>
<div id="passo-1--" class="section level4 hasAnchor" number="4.11.0.1">
<h4 class="hasAnchor"><span class="header-section-number">4.11.0.1</span> Passo #1 -<a href="#passo-1--" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Identificar <strong>SUBSTANTIVOS</strong> no contexto; identificar os <strong>ADJETIVOS</strong> pertinentes a cada SUBSTANTIVO; identificar os <strong>VERBOS</strong> de relaÃ§Ã£o entre os substantivos.</p>
<table style="width:99%;">
<caption>Identificando SUBSTANTIVOS, ADJETIVOS referentes e VERBOS de relaÃ§Ã£o</caption>
<colgroup>
<col width="33%" />
<col width="30%" />
<col width="34%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"><code>Substantivos</code> <strong>do contexto</strong>: leve-os ao plural</th>
<th><code>Adjetivos</code></th>
<th><code>Verbos</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">UNIVERSIDADE -&gt; <strong><code>UNIVERSIDADES</code></strong></td>
<td><p><code>NOME</code> (implÃ­cito no enunciado)</p>
<p><code>CNPJ</code> (implÃ­cito no enunciado)</p></td>
<td>universidade <code>POSSUI</code> (vÃ¡rios) cursos</td>
</tr>
<tr class="even">
<td align="left">CURSO -&gt; <strong><code>CURSOS</code></strong></td>
<td><p><code>NOME</code> (explÃ­cito no enunciado)</p>
<p><code>DURAÃ‡ÃƒO</code> (explÃ­cito no enunciado)</p>
<p><code>COORDENADOR</code> (explÃ­cito no enunciado)</p>
<p><code>CODIGO_CURSO</code> (implÃ­cito no enunciado)</p></td>
<td>cursos sÃ£o <code>POSSUÃDOS</code> por (vÃ¡rios) universidades</td>
</tr>
<tr class="odd">
<td align="left">PROFESSOR -&gt; <strong><code>PROFESSORES</code></strong></td>
<td><p><code>CPF</code> (explÃ­cito no enunciado)</p>
<p><code>NOME</code> (explÃ­cito no enunciado)</p>
<p><code>TÃTULO</code> (explÃ­cito no enunciado)</p></td>
<td><p>universidade <code>POSSUI</code> (vÃ¡rios) professores</p>
<p>professor <code>MINISTRA</code> (vÃ¡rias) disciplinas</p></td>
</tr>
<tr class="even">
<td align="left">DISCIPLINA -&gt; <strong><code>DISCIPLINAS</code></strong></td>
<td><p><code>NOME</code> (implÃ­cito no enunciado)</p>
<p><code>CODIGO_DISCIPLINA</code> (implÃ­cito no enunciado)</p></td>
<td><p>disciplina <code>Ã‰ MINISTRADA</code> por (vÃ¡rios) professores</p>
<p>disciplina <code>PERTENCE</code> a (um Ãºnico) curso</p></td>
</tr>
</tbody>
</table>
</div>
<div id="passo-2" class="section level4 hasAnchor" number="4.11.0.2">
<h4 class="hasAnchor"><span class="header-section-number">4.11.0.2</span> Passo #2<a href="#passo-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Criar o <strong><code>MODELO ENTIDADE RELACIONAMENTO (M.E.R.)</code></strong> - Converter SUBSTANTIVO em <strong><code>ENTIDADES</code></strong>; converter ADJETIVOS em <strong><code>ATRIBUTOS</code></strong> e converter VERBOS em <strong><code>RELACIONAMENTOS</code></strong>.</p>
<ul>
<li><p>ENTIDADES identificadas: <strong><code>UNIVERSIDADES</code></strong>, <strong><code>CURSOS</code></strong>, <strong><code>PROFESSORES</code></strong> e <strong><code>DISCIPLINAS</code></strong></p></li>
<li><p>ATRIBUTOS identificados: UNIVERSIDADES [ nome,cnpj ] ; CURSOS [ nome, duraÃ§Ã£o, coordenador, codigo_curso] ; PROFESSORES [ cpf, nome e tÃ­tulo] ; DISCIPLINAS [nome e codigo_disciplina]</p></li>
<li><p>RELACIONAMENTOS: [universidade-<code>POSSUI</code>-curso] ; [universidade-<code>POSSUI</code>-professores]; [professor-<code>MINISTRA</code>-disciplina] ; [disciplina-<code>PERTENCE</code>-curso]</p></li>
</ul>
</div>
<div id="passo-3" class="section level4 hasAnchor" number="4.11.0.3">
<h4 class="hasAnchor"><span class="header-section-number">4.11.0.3</span> Passo #3<a href="#passo-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Criar um DIAGRAMA ENTIDADE-RELACIONAMENTO (D.E.R.) com as informaÃ§Ãµes levantadas:</p>
<p><img src="images/exercicio01-01.svg" /><!-- --></p>
<p><img src="images/exercicio01-02.svg" /><!-- --></p>
<p><img src="images/exercicio01-03.svg" /><!-- --></p>
<p><img src="images/exercicio01-04.svg" /><!-- --></p>
</div>
<div id="passo-4" class="section level4 hasAnchor" number="4.11.0.4">
<h4 class="hasAnchor"><span class="header-section-number">4.11.0.4</span> Passo #4<a href="#passo-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Identificar os Relacionamentos:</p>
<ul>
<li>[universidade-<code>POSSUI</code>-curso] ; [universidade-<code>POSSUI</code>-professores]; [professor-<code>MINISTRA</code>-disciplina] ; [disciplina-<code>PERTENCE</code>-curso]</li>
</ul>
<p><img src="images/exercicio01-05.svg" /><!-- --></p>
</div>
<div id="passo-5---crie-o-cÃ³digo-sql-referente-ao-diagrama-que-vocÃª-desenhou" class="section level4 hasAnchor" number="4.11.0.5">
<h4 class="hasAnchor"><span class="header-section-number">4.11.0.5</span> Passo #5 - Crie o cÃ³digo SQL referente ao diagrama que vocÃª desenhou:<a href="#passo-5---crie-o-c%C3%B3digo-sql-referente-ao-diagrama-que-voc%C3%AA-desenhou" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb8"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb8-1"><a href="#cb8-1" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb8-2"><a href="#cb8-2" tabindex="-1"></a><span class="co">   Passo 1ï¸- CRIAR TABELAS (somente colunas, sem PK nem FK)</span></span>
<span id="cb8-3"><a href="#cb8-3" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb8-4"><a href="#cb8-4" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> UNIVERSIDADES </span>
<span id="cb8-5"><a href="#cb8-5" tabindex="-1"></a>(</span>
<span id="cb8-6"><a href="#cb8-6" tabindex="-1"></a>    nome            <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb8-7"><a href="#cb8-7" tabindex="-1"></a>    CNPJ            <span class="dt">VARCHAR</span>(<span class="dv">14</span>)</span>
<span id="cb8-8"><a href="#cb8-8" tabindex="-1"></a>);</span>
<span id="cb8-9"><a href="#cb8-9" tabindex="-1"></a></span>
<span id="cb8-10"><a href="#cb8-10" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> CURSOS </span>
<span id="cb8-11"><a href="#cb8-11" tabindex="-1"></a>(</span>
<span id="cb8-12"><a href="#cb8-12" tabindex="-1"></a>    nome            <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb8-13"><a href="#cb8-13" tabindex="-1"></a>    duracao         <span class="dt">INT</span>,</span>
<span id="cb8-14"><a href="#cb8-14" tabindex="-1"></a>    coordenador     <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb8-15"><a href="#cb8-15" tabindex="-1"></a>    codigo_curso    <span class="dt">INTEGER</span></span>
<span id="cb8-16"><a href="#cb8-16" tabindex="-1"></a>);</span>
<span id="cb8-17"><a href="#cb8-17" tabindex="-1"></a></span>
<span id="cb8-18"><a href="#cb8-18" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> PROFESSORES </span>
<span id="cb8-19"><a href="#cb8-19" tabindex="-1"></a>(</span>
<span id="cb8-20"><a href="#cb8-20" tabindex="-1"></a>    cpf             <span class="dt">VARCHAR</span>(<span class="dv">11</span>),</span>
<span id="cb8-21"><a href="#cb8-21" tabindex="-1"></a>    nome            <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb8-22"><a href="#cb8-22" tabindex="-1"></a>    titulo          <span class="dt">VARCHAR</span>(<span class="dv">255</span>)</span>
<span id="cb8-23"><a href="#cb8-23" tabindex="-1"></a>);</span>
<span id="cb8-24"><a href="#cb8-24" tabindex="-1"></a></span>
<span id="cb8-25"><a href="#cb8-25" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> DISCIPLINAS </span>
<span id="cb8-26"><a href="#cb8-26" tabindex="-1"></a>(</span>
<span id="cb8-27"><a href="#cb8-27" tabindex="-1"></a>    nome                <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb8-28"><a href="#cb8-28" tabindex="-1"></a>    codigo_disciplina   <span class="dt">INTEGER</span></span>
<span id="cb8-29"><a href="#cb8-29" tabindex="-1"></a>);</span>
<span id="cb8-30"><a href="#cb8-30" tabindex="-1"></a></span>
<span id="cb8-31"><a href="#cb8-31" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb8-32"><a href="#cb8-32" tabindex="-1"></a><span class="co">   Passo 2- ADICIONAR CHAVES PRIMÃRIAS</span></span>
<span id="cb8-33"><a href="#cb8-33" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb8-34"><a href="#cb8-34" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> UNIVERSIDADES <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (CNPJ);</span>
<span id="cb8-35"><a href="#cb8-35" tabindex="-1"></a></span>
<span id="cb8-36"><a href="#cb8-36" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> CURSOS        <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (codigo_curso);</span>
<span id="cb8-37"><a href="#cb8-37" tabindex="-1"></a></span>
<span id="cb8-38"><a href="#cb8-38" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> PROFESSORES   <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (cpf);</span>
<span id="cb8-39"><a href="#cb8-39" tabindex="-1"></a></span>
<span id="cb8-40"><a href="#cb8-40" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> DISCIPLINAS   <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (codigo_disciplina);</span>
<span id="cb8-41"><a href="#cb8-41" tabindex="-1"></a></span>
<span id="cb8-42"><a href="#cb8-42" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb8-43"><a href="#cb8-43" tabindex="-1"></a><span class="co">   Passo 3- CRIAR COLUNAS PARA FUTURAS CHAVES ESTRANGEIRAS</span></span>
<span id="cb8-44"><a href="#cb8-44" tabindex="-1"></a><span class="co">   -- Sempre no lado N de cada relacionamento</span></span>
<span id="cb8-45"><a href="#cb8-45" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb8-46"><a href="#cb8-46" tabindex="-1"></a><span class="co">-- UNIVERSIDADES (1) â€”â€” (N) CURSOS  â†’ CURSOS precisa de CNPJ</span></span>
<span id="cb8-47"><a href="#cb8-47" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> CURSOS   <span class="kw">ADD</span> <span class="kw">COLUMN</span> CNPJ <span class="dt">VARCHAR</span>(<span class="dv">14</span>);</span>
<span id="cb8-48"><a href="#cb8-48" tabindex="-1"></a></span>
<span id="cb8-49"><a href="#cb8-49" tabindex="-1"></a><span class="co">-- UNIVERSIDADES (1) â€”â€” (N) PROFESSORES â†’ PROFESSORES precisa de CNPJ</span></span>
<span id="cb8-50"><a href="#cb8-50" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> PROFESSORES  <span class="kw">ADD</span> <span class="kw">COLUMN</span> CNPJ <span class="dt">VARCHAR</span>(<span class="dv">14</span>);</span>
<span id="cb8-51"><a href="#cb8-51" tabindex="-1"></a></span>
<span id="cb8-52"><a href="#cb8-52" tabindex="-1"></a><span class="co">-- PROFESSORES (1) â€”â€” (N) DISCIPLINAS â†’ DISCIPLINAS precisa de cpf</span></span>
<span id="cb8-53"><a href="#cb8-53" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> DISCIPLINAS <span class="kw">ADD</span> <span class="kw">COLUMN</span> cpf <span class="dt">VARCHAR</span>(<span class="dv">11</span>);</span>
<span id="cb8-54"><a href="#cb8-54" tabindex="-1"></a></span>
<span id="cb8-55"><a href="#cb8-55" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb8-56"><a href="#cb8-56" tabindex="-1"></a><span class="co">   Passo 4- CRIAR AS CHAVES ESTRANGEIRAS</span></span>
<span id="cb8-57"><a href="#cb8-57" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb8-58"><a href="#cb8-58" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> CURSOS      <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_cursos_universidade      <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (CNPJ) <span class="kw">REFERENCES</span> UNIVERSIDADES (CNPJ);</span>
<span id="cb8-59"><a href="#cb8-59" tabindex="-1"></a></span>
<span id="cb8-60"><a href="#cb8-60" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> PROFESSORES <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_professores_universidade <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (CNPJ) <span class="kw">REFERENCES</span> UNIVERSIDADES (CNPJ);</span>
<span id="cb8-61"><a href="#cb8-61" tabindex="-1"></a></span>
<span id="cb8-62"><a href="#cb8-62" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> DISCIPLINAS <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_disciplinas_professor    <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (cpf)  <span class="kw">REFERENCES</span> PROFESSORES (cpf);</span></code></pre></div>
<hr />
<table>
<colgroup>
<col width="100%" />
</colgroup>
<thead>
<tr class="header">
<th>ExercÃ­cio 2 â€” Um Projeto de e-commerce</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Um Cliente faz Pedidos em um sistema de e-commerce. Cada cliente tem um nome, endereÃ§o e telefone. Os pedidos possuem uma data, um valor total e podem conter vÃ¡rios Produtos. Cada produto tem um nome, uma descriÃ§Ã£o e um preÃ§o.</td>
</tr>
<tr class="even">
<td><ol style="list-style-type: lower-alpha">
<li>Identifique as <strong>entidades</strong></li>
</ol></td>
</tr>
<tr class="odd">
<td><ol start="2" style="list-style-type: lower-alpha">
<li>Identifique os <strong>atributos</strong> de cada Entidade</li>
</ol></td>
</tr>
<tr class="even">
<td><ol start="3" style="list-style-type: lower-alpha">
<li>Identifique os <strong>relacionamentos</strong> entre as Entidades</li>
</ol></td>
</tr>
<tr class="odd">
<td><ol start="5" style="list-style-type: lower-alpha">
<li>FaÃ§a o <strong>diagrama DEM (Diagrama Entidade Relacionamento)</strong> contendo as entidades, atributos e relacionamentos que vocÃª mapeou.</li>
</ol></td>
</tr>
</tbody>
</table>
</div>
<div id="passo-1---1" class="section level4 hasAnchor" number="4.11.0.6">
<h4 class="hasAnchor"><span class="header-section-number">4.11.0.6</span> Passo #1 -<a href="#passo-1---1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Identificar <strong>SUBSTANTIVOS</strong> no contexto; identificar os <strong>ADJETIVOS</strong> pertinentes a cada SUBSTANTIVO; identificar os <strong>VERBOS</strong> de relaÃ§Ã£o entre os substantivos.</p>
<table style="width:99%;">
<caption>Identificando SUBSTANTIVOS, ADJETIVOS referentes e VERBOS de relaÃ§Ã£o</caption>
<colgroup>
<col width="43%" />
<col width="23%" />
<col width="32%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"><code>Substantivos</code> <strong>do contexto</strong>: leve-os ao plural</th>
<th><code>Adjetivos</code></th>
<th><code>Verbos</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">CLIENTE -&gt; <strong><code>CLIENTES</code></strong></td>
<td><p><code>NOME</code> (explÃ­cito no enunciado)</p>
<p><code>ENDERECO</code> (explÃ­cito no enunciado)</p>
<p><code>TELEFONE</code> (explÃ­cito no enunciado)</p>
<p><code>CPF</code> (implÃ­cito no enunciado)</p></td>
<td>(vÃ¡rios) clientes <code>PEDEM</code> (vÃ¡rios) produtos</td>
</tr>
<tr class="even">
<td align="left"><p>PEDIDO -&gt; <strong><code>PEDIDOS ????</code></strong></p>
<p>PEDIDO NÃƒO Ã‰ SUBSTABNTIVO, MAS SIM O PARTICÃPIO PASSADO DO VERBO PEDIR.</p>
<p>(PEDIR Ã‰ VERBO !!!)</p></td>
<td><p><code>DATA</code> (explÃ­cito no enunciado)</p>
<p><code>VALOR_TOTAL</code> (explÃ­cito no enunciado)</p></td>
<td>(vÃ¡rios) clientes <code>PEDEM</code> (vÃ¡rios) produtos</td>
</tr>
<tr class="odd">
<td align="left">PRODUTO -&gt; <strong><code>PRODUTOS</code></strong></td>
<td><p><code>NOME</code> (implÃ­cito no enunciado)</p>
<p><code>DESCRICAO</code> (explÃ­cito no enunciado)</p>
<p><code>PRECO</code> (explÃ­cito no enunciado)</p>
<p><code>COD_PRODUTO</code> (implÃ­cito no enunciado)</p></td>
<td>(vÃ¡rios) produtos sÃ£o <code>PEDidos</code> por (vÃ¡rios) clientes</td>
</tr>
</tbody>
</table>
</div>
<div id="passo-2-1" class="section level4 hasAnchor" number="4.11.0.7">
<h4 class="hasAnchor"><span class="header-section-number">4.11.0.7</span> Passo #2<a href="#passo-2-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Criar o <strong><code>MODELO ENTIDADE RELACIONAMENTO (M.E.R.)</code></strong> - Converter SUBSTANTIVO em <strong><code>ENTIDADES</code></strong>; converter ADJETIVOS em <strong><code>ATRIBUTOS</code></strong> e converter VERBOS em <strong><code>RELACIONAMENTOS</code></strong>.</p>
<p>Normalmente apenas as ENTIDADES levam atributos. Quando aparece um relacionamento N-N entre duas entidades, tambÃ©m podem aparecer atributos atrelados aos relacionamentos (como Ã© o caso de PEDIDO aqui).</p>
<ul>
<li><p>ENTIDADES identificadas: <strong><code>CLIENTES</code></strong>, <strong><code>PRODUTOS</code></strong></p></li>
<li><p>ATRIBUTOS identificados: CLIENTES [ nome, endereco, telefone, cpf] ; PRODUTOS [ nome, descricao, preco, cod_produto] ; PEDIDO[data, valor_total]</p></li>
<li><p>RELACIONAMENTOS: [cliente-<code>PEDE</code>-produto] ; [produto-<code>PEDIDO</code>-cliente];</p></li>
</ul>
</div>
<div id="passo-3-1" class="section level4 hasAnchor" number="4.11.0.8">
<h4 class="hasAnchor"><span class="header-section-number">4.11.0.8</span> Passo #3<a href="#passo-3-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Criar um DIAGRAMA ENTIDADE-RELACIONAMENTO (D.E.R.) com as informaÃ§Ãµes levantadas:</p>
<p><img src="images/exercicio02-01.svg" /><!-- --></p>
</div>
<div id="passo-5---crie-o-cÃ³digo-sql-referente-ao-diagrama-que-vocÃª-desenhou-1" class="section level4 hasAnchor" number="4.11.0.9">
<h4 class="hasAnchor"><span class="header-section-number">4.11.0.9</span> Passo #5 - Crie o cÃ³digo SQL referente ao diagrama que vocÃª desenhou:<a href="#passo-5---crie-o-c%C3%B3digo-sql-referente-ao-diagrama-que-voc%C3%AA-desenhou-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb9"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb9-1"><a href="#cb9-1" tabindex="-1"></a></span>
<span id="cb9-2"><a href="#cb9-2" tabindex="-1"></a><span class="co">-- CRIAR AS TABELAS</span></span>
<span id="cb9-3"><a href="#cb9-3" tabindex="-1"></a></span>
<span id="cb9-4"><a href="#cb9-4" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> Cliente </span>
<span id="cb9-5"><a href="#cb9-5" tabindex="-1"></a>(</span>
<span id="cb9-6"><a href="#cb9-6" tabindex="-1"></a>    id_cliente <span class="dt">INT</span>,</span>
<span id="cb9-7"><a href="#cb9-7" tabindex="-1"></a>    nome <span class="dt">VARCHAR</span>(<span class="dv">255</span>)</span>
<span id="cb9-8"><a href="#cb9-8" tabindex="-1"></a>);</span>
<span id="cb9-9"><a href="#cb9-9" tabindex="-1"></a></span>
<span id="cb9-10"><a href="#cb9-10" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> CPF </span>
<span id="cb9-11"><a href="#cb9-11" tabindex="-1"></a>(</span>
<span id="cb9-12"><a href="#cb9-12" tabindex="-1"></a>    numero_cpf <span class="dt">CHAR</span>(<span class="dv">11</span>)</span>
<span id="cb9-13"><a href="#cb9-13" tabindex="-1"></a>);</span>
<span id="cb9-14"><a href="#cb9-14" tabindex="-1"></a></span>
<span id="cb9-15"><a href="#cb9-15" tabindex="-1"></a><span class="co">-- ADICIONAR AS CHAVES PRIMÃRIAS</span></span>
<span id="cb9-16"><a href="#cb9-16" tabindex="-1"></a></span>
<span id="cb9-17"><a href="#cb9-17" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> Cliente <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (id_cliente);</span>
<span id="cb9-18"><a href="#cb9-18" tabindex="-1"></a></span>
<span id="cb9-19"><a href="#cb9-19" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> CPF <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (numero_cpf);</span>
<span id="cb9-20"><a href="#cb9-20" tabindex="-1"></a></span>
<span id="cb9-21"><a href="#cb9-21" tabindex="-1"></a></span>
<span id="cb9-22"><a href="#cb9-22" tabindex="-1"></a><span class="co">-- O relacionamento Ã© 1:1. Podemos escolher um dos lados para armazenar a chave.</span></span>
<span id="cb9-23"><a href="#cb9-23" tabindex="-1"></a><span class="co">-- Aqui vamos seguir o diagrama, colocando a chave estrangeira de CPF em Cliente.</span></span>
<span id="cb9-24"><a href="#cb9-24" tabindex="-1"></a></span>
<span id="cb9-25"><a href="#cb9-25" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> Cliente <span class="kw">ADD</span> <span class="kw">COLUMN</span> numero_cpf <span class="dt">CHAR</span>(<span class="dv">11</span>);</span>
<span id="cb9-26"><a href="#cb9-26" tabindex="-1"></a></span>
<span id="cb9-27"><a href="#cb9-27" tabindex="-1"></a><span class="co">-- CRIAR AS CHAVES ESTRANGEIRAS</span></span>
<span id="cb9-28"><a href="#cb9-28" tabindex="-1"></a></span>
<span id="cb9-29"><a href="#cb9-29" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> Cliente <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_cliente_cpf <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (numero_cpf) <span class="kw">REFERENCES</span> CPF (numero_cpf);</span></code></pre></div>
<hr />
<table>
<colgroup>
<col width="100%" />
</colgroup>
<thead>
<tr class="header">
<th>ExercÃ­cio 3 â€” Hospital</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Um Hospital registra Pacientes, cada um com nome, idade, endereÃ§o e telefone. Os pacientes podem realizar vÃ¡rias Consultas com MÃ©dicos. Cada mÃ©dico possui um CRM, um nome e uma especialidade. Durante a consulta, o mÃ©dico pode prescrever Receitas, que possuem medicaÃ§Ã£o e dosagem.</td>
</tr>
<tr class="even">
<td><ol style="list-style-type: lower-alpha">
<li>Identifique as <strong>entidades</strong></li>
</ol></td>
</tr>
<tr class="odd">
<td><ol start="2" style="list-style-type: lower-alpha">
<li>Identifique os <strong>atributos</strong> de cada Entidade</li>
</ol></td>
</tr>
<tr class="even">
<td><ol start="3" style="list-style-type: lower-alpha">
<li>Identifique os <strong>relacionamentos</strong> entre as Entidades</li>
</ol></td>
</tr>
<tr class="odd">
<td><ol start="5" style="list-style-type: lower-alpha">
<li>FaÃ§a o <strong>diagrama DEM (Diagrama Entidade Relacionamento) contendo as entidades, atributos e relacionamentos</strong> que vocÃª mapeou.</li>
</ol></td>
</tr>
</tbody>
</table>
</div>
<div id="passo-1---2" class="section level4 hasAnchor" number="4.11.0.10">
<h4 class="hasAnchor"><span class="header-section-number">4.11.0.10</span> Passo #1 -<a href="#passo-1---2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Identificar <strong>SUBSTANTIVOS</strong> no contexto; identificar os <strong>ADJETIVOS</strong> pertinentes a cada SUBSTANTIVO; identificar os <strong>VERBOS</strong> de relaÃ§Ã£o entre os substantivos.</p>
<table style="width:99%;">
<caption>Identificando SUBSTANTIVOS, ADJETIVOS referentes e VERBOS de relaÃ§Ã£o</caption>
<colgroup>
<col width="31%" />
<col width="26%" />
<col width="41%" />
</colgroup>
<thead>
<tr class="header">
<th align="left"><code>Substantivos</code> <strong>do contexto</strong>: leve-os ao plural</th>
<th><code>Adjetivos</code></th>
<th><code>Verbos</code></th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="left">HOSPITAL -&gt; <strong><code>HOSPITAIS</code></strong></td>
<td><p><code>NOME</code> (implÃ­cito no enunciado)</p>
<p><code>CNPJ</code> (implÃ­cito no enunciado)</p></td>
<td><p>(explÃ­cito) hospital <code>REGISTRA</code> (vÃ¡rios) pacientes</p>
<p>(implÃ­cito) hospital <code>POSSUI</code> medicos</p></td>
</tr>
<tr class="even">
<td align="left">PACIENTE -&gt; <strong><code>PACIENTES</code></strong></td>
<td><p><code>NOME</code> (explÃ­cito no enunciado)</p>
<p><code>IDADE</code> (explÃ­cito no enunciado)</p>
<p><code>ENDERECO</code> (explÃ­cito no enunciado)</p>
<p><code>TELEFONE</code> (explÃ­cito no enunciado)</p>
<p><code>CPF</code> (implÃ­cito no enunciado)</p></td>
<td><p>pacientes sÃ£o <code>REGISTRADOS</code> em (um) hospital</p>
<p>(vÃ¡rios) pacientes <code>CONSULTAM</code> (vÃ¡rios) mÃ©dicos</p>
<p>(vÃ¡rios) pacientes <code>SÃƒO RECEITADOS</code> por (vÃ¡rios) mÃ©dicos</p></td>
</tr>
<tr class="odd">
<td align="left">MÃ‰DICO -&gt; <strong><code>MEDICOS</code></strong></td>
<td><p><code>CRM</code> (explÃ­cito no enunciado)</p>
<p><code>NOME</code> (explÃ­cito no enunciado)</p>
<p><code>ESPECIALIDADE</code> (explÃ­cito no enunciado)</p></td>
<td><p>(vÃ¡rios) mÃ©dico(s) <code>CONSULTA</code> (vÃ¡rios) pacientes</p>
<p>(vÃ¡rios) mÃ©dico(s) <code>RECEITAM</code> (vÃ¡rios) pacientes</p></td>
</tr>
<tr class="even">
<td align="left">RECEITA ?? -&gt; <strong><code>RECEITAR</code></strong> Ã© VERBO</td>
<td><p><code>MEDICACAO</code> (explÃ­cito no enunciado)</p>
<p><code>DOSAGEM</code>(explÃ­cito no enunciado)</p></td>
<td><p>mÃ©dico <code>RECEITA</code> ao paciente</p>
<p>(vÃ¡rios) paciente(s) <code>Ã‰(SÃƒO) RECEITADO(s)</code> por (vÃ¡rios) mÃ©dico(s)</p></td>
</tr>
<tr class="odd">
<td align="left">CONSULTA ?? -&gt; <strong><code>CONSULTAR</code></strong> Ã© VERBO</td>
<td><p><code>DATA</code> (implÃ­cito no enunciado)</p>
<p><code>HORA</code>(implÃ­cito no enunciado)</p>
<p><code>sala</code>(implÃ­cito no enunciado)</p></td>
<td>(vÃ¡rios) pacientes(s) <code>CONSULTA(M)</code> (vÃ¡rios) mÃ©dico(s)</td>
</tr>
</tbody>
</table>
</div>
<div id="passo-2-2" class="section level4 hasAnchor" number="4.11.0.11">
<h4 class="hasAnchor"><span class="header-section-number">4.11.0.11</span> Passo #2<a href="#passo-2-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Criar o <strong><code>MODELO ENTIDADE RELACIONAMENTO (M.E.R.)</code></strong> - Converter SUBSTANTIVO em <strong><code>ENTIDADES</code></strong>; converter ADJETIVOS em <strong><code>ATRIBUTOS</code></strong> e converter VERBOS em <strong><code>RELACIONAMENTOS</code></strong>.</p>
<ul>
<li><p>ENTIDADES identificadas: <strong><code>HOSPITAIS</code></strong>, <strong><code>PACIENTES</code></strong>, <strong><code>MEDICOS</code></strong></p></li>
<li><p>ATRIBUTOS identificados: HOSPITAIS [ nome,cnpj ] ; PACIENTES [ nome, idade, endereco, telefone, cpf] ; MEDICOS [ crm, nome e especialidade] ;</p></li>
<li><p>RELACIONAMENTOS: [medico-<code>consulta</code>-paciente] ; [medico-<code>receita</code>-paciente]; [hospital-registra-paciente] ; [hospital-<code>POSSUI</code>-medicos]</p></li>
</ul>
</div>
<div id="passo-3-2" class="section level4 hasAnchor" number="4.11.0.12">
<h4 class="hasAnchor"><span class="header-section-number">4.11.0.12</span> Passo #3<a href="#passo-3-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Criar um DIAGRAMA ENTIDADE-RELACIONAMENTO (D.E.R.) com as informaÃ§Ãµes levantadas:</p>
<p><img src="images/exercicio03-01.svg" /><!-- --></p>
</div>
<div id="passo-5---faÃ§a-o-cÃ³digo-sql-do-diagrama-acima" class="section level4 hasAnchor" number="4.11.0.13">
<h4 class="hasAnchor"><span class="header-section-number">4.11.0.13</span> Passo #5 - FaÃ§a o cÃ³digo SQL do diagrama acima<a href="#passo-5---fa%C3%A7a-o-c%C3%B3digo-sql-do-diagrama-acima" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb10"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb10-1"><a href="#cb10-1" tabindex="-1"></a></span>
<span id="cb10-2"><a href="#cb10-2" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb10-3"><a href="#cb10-3" tabindex="-1"></a><span class="co">   Passo 1- TABELAS (apenas colunas, sem PK ou FK)</span></span>
<span id="cb10-4"><a href="#cb10-4" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb10-5"><a href="#cb10-5" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> HOSPITAIS </span>
<span id="cb10-6"><a href="#cb10-6" tabindex="-1"></a>(</span>
<span id="cb10-7"><a href="#cb10-7" tabindex="-1"></a>    nome    <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb10-8"><a href="#cb10-8" tabindex="-1"></a>    cnpj    <span class="dt">CHAR</span>(<span class="dv">14</span>)</span>
<span id="cb10-9"><a href="#cb10-9" tabindex="-1"></a>);</span>
<span id="cb10-10"><a href="#cb10-10" tabindex="-1"></a></span>
<span id="cb10-11"><a href="#cb10-11" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> PACIENTES </span>
<span id="cb10-12"><a href="#cb10-12" tabindex="-1"></a>(</span>
<span id="cb10-13"><a href="#cb10-13" tabindex="-1"></a>    nome        <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb10-14"><a href="#cb10-14" tabindex="-1"></a>    idade       <span class="dt">INT</span>,</span>
<span id="cb10-15"><a href="#cb10-15" tabindex="-1"></a>    endereco    <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb10-16"><a href="#cb10-16" tabindex="-1"></a>    telefone    <span class="dt">VARCHAR</span>(<span class="dv">20</span>),</span>
<span id="cb10-17"><a href="#cb10-17" tabindex="-1"></a>    cpf         <span class="dt">CHAR</span>(<span class="dv">11</span>)</span>
<span id="cb10-18"><a href="#cb10-18" tabindex="-1"></a>);</span>
<span id="cb10-19"><a href="#cb10-19" tabindex="-1"></a></span>
<span id="cb10-20"><a href="#cb10-20" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> MEDICOS </span>
<span id="cb10-21"><a href="#cb10-21" tabindex="-1"></a>(</span>
<span id="cb10-22"><a href="#cb10-22" tabindex="-1"></a>    nome            <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb10-23"><a href="#cb10-23" tabindex="-1"></a>    especialidade   <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb10-24"><a href="#cb10-24" tabindex="-1"></a>    crm             <span class="dt">CHAR</span>(<span class="dv">15</span>)</span>
<span id="cb10-25"><a href="#cb10-25" tabindex="-1"></a>);</span>
<span id="cb10-26"><a href="#cb10-26" tabindex="-1"></a></span>
<span id="cb10-27"><a href="#cb10-27" tabindex="-1"></a><span class="co">/* As prÃ³ximas tabelas representam os relacionamentos N:N</span></span>
<span id="cb10-28"><a href="#cb10-28" tabindex="-1"></a><span class="co">   com atributos prÃ³prios (tabelas de junÃ§Ã£o) */</span></span>
<span id="cb10-29"><a href="#cb10-29" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> REGISTRAM </span>
<span id="cb10-30"><a href="#cb10-30" tabindex="-1"></a>(</span>
<span id="cb10-31"><a href="#cb10-31" tabindex="-1"></a>    <span class="co">-- sem colunas de FK por enquanto</span></span>
<span id="cb10-32"><a href="#cb10-32" tabindex="-1"></a>);</span>
<span id="cb10-33"><a href="#cb10-33" tabindex="-1"></a></span>
<span id="cb10-34"><a href="#cb10-34" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> CONSULTAM </span>
<span id="cb10-35"><a href="#cb10-35" tabindex="-1"></a>(</span>
<span id="cb10-36"><a href="#cb10-36" tabindex="-1"></a>    data_consulta   <span class="dt">DATE</span>,</span>
<span id="cb10-37"><a href="#cb10-37" tabindex="-1"></a>    hora            <span class="dt">TIME</span>,</span>
<span id="cb10-38"><a href="#cb10-38" tabindex="-1"></a>    sala            <span class="dt">VARCHAR</span>(<span class="dv">50</span>)</span>
<span id="cb10-39"><a href="#cb10-39" tabindex="-1"></a>);</span>
<span id="cb10-40"><a href="#cb10-40" tabindex="-1"></a></span>
<span id="cb10-41"><a href="#cb10-41" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> RECEITAM </span>
<span id="cb10-42"><a href="#cb10-42" tabindex="-1"></a>(</span>
<span id="cb10-43"><a href="#cb10-43" tabindex="-1"></a>    medicacao       <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb10-44"><a href="#cb10-44" tabindex="-1"></a>    dosagem         <span class="dt">VARCHAR</span>(<span class="dv">100</span>)</span>
<span id="cb10-45"><a href="#cb10-45" tabindex="-1"></a>);</span>
<span id="cb10-46"><a href="#cb10-46" tabindex="-1"></a></span>
<span id="cb10-47"><a href="#cb10-47" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb10-48"><a href="#cb10-48" tabindex="-1"></a><span class="co">   Passo 2- ADICIONAR CHAVES PRIMÃRIAS</span></span>
<span id="cb10-49"><a href="#cb10-49" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb10-50"><a href="#cb10-50" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> HOSPITAIS  <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (cnpj);</span>
<span id="cb10-51"><a href="#cb10-51" tabindex="-1"></a></span>
<span id="cb10-52"><a href="#cb10-52" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> PACIENTES  <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (cpf);</span>
<span id="cb10-53"><a href="#cb10-53" tabindex="-1"></a></span>
<span id="cb10-54"><a href="#cb10-54" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> MEDICOS    <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (crm);</span>
<span id="cb10-55"><a href="#cb10-55" tabindex="-1"></a></span>
<span id="cb10-56"><a href="#cb10-56" tabindex="-1"></a><span class="co">/* Para tabelas de relacionamento com atributos, a PK serÃ¡ composta</span></span>
<span id="cb10-57"><a href="#cb10-57" tabindex="-1"></a><span class="co">   (as FKs a serem criadas formarÃ£o a chave primÃ¡ria). Faremos isso depois</span></span>
<span id="cb10-58"><a href="#cb10-58" tabindex="-1"></a><span class="co">   de adicionar as colunas de FK. */</span></span>
<span id="cb10-59"><a href="#cb10-59" tabindex="-1"></a></span>
<span id="cb10-60"><a href="#cb10-60" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb10-61"><a href="#cb10-61" tabindex="-1"></a><span class="co">   Passo 3- CRIAR COLUNAS PARA FUTURAS CHAVES ESTRANGEIRAS</span></span>
<span id="cb10-62"><a href="#cb10-62" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb10-63"><a href="#cb10-63" tabindex="-1"></a><span class="co">-- REGISTRAM: HOSPITAIS (1) â€”â€” (N) PACIENTES</span></span>
<span id="cb10-64"><a href="#cb10-64" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> REGISTRAM <span class="kw">ADD</span> <span class="kw">COLUMN</span> cnpj <span class="dt">CHAR</span>(<span class="dv">14</span>), <span class="kw">ADD</span> <span class="kw">COLUMN</span> cpf  <span class="dt">CHAR</span>(<span class="dv">11</span>);</span>
<span id="cb10-65"><a href="#cb10-65" tabindex="-1"></a></span>
<span id="cb10-66"><a href="#cb10-66" tabindex="-1"></a><span class="co">-- CONSULTAM: MEDICOS (N) â€”â€” (N) PACIENTES</span></span>
<span id="cb10-67"><a href="#cb10-67" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> CONSULTAM <span class="kw">ADD</span> <span class="kw">COLUMN</span> crm  <span class="dt">CHAR</span>(<span class="dv">15</span>), <span class="kw">ADD</span> <span class="kw">COLUMN</span> cpf  <span class="dt">CHAR</span>(<span class="dv">11</span>);</span>
<span id="cb10-68"><a href="#cb10-68" tabindex="-1"></a></span>
<span id="cb10-69"><a href="#cb10-69" tabindex="-1"></a><span class="co">-- RECEITAM: MEDICOS (N) â€”â€” (N) PACIENTES</span></span>
<span id="cb10-70"><a href="#cb10-70" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> RECEITAM  <span class="kw">ADD</span> <span class="kw">COLUMN</span> crm  <span class="dt">CHAR</span>(<span class="dv">15</span>), <span class="kw">ADD</span> <span class="kw">COLUMN</span> cpf  <span class="dt">CHAR</span>(<span class="dv">11</span>);</span>
<span id="cb10-71"><a href="#cb10-71" tabindex="-1"></a></span>
<span id="cb10-72"><a href="#cb10-72" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb10-73"><a href="#cb10-73" tabindex="-1"></a><span class="co">   Passo 4- CRIAR CHAVES ESTRANGEIRAS</span></span>
<span id="cb10-74"><a href="#cb10-74" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb10-75"><a href="#cb10-75" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> REGISTRAM</span>
<span id="cb10-76"><a href="#cb10-76" tabindex="-1"></a>    <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_registram_hospitais</span>
<span id="cb10-77"><a href="#cb10-77" tabindex="-1"></a>        <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (cnpj)</span>
<span id="cb10-78"><a href="#cb10-78" tabindex="-1"></a>        <span class="kw">REFERENCES</span> HOSPITAIS (cnpj),</span>
<span id="cb10-79"><a href="#cb10-79" tabindex="-1"></a>    <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_registram_pacientes</span>
<span id="cb10-80"><a href="#cb10-80" tabindex="-1"></a>        <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (cpf)</span>
<span id="cb10-81"><a href="#cb10-81" tabindex="-1"></a>        <span class="kw">REFERENCES</span> PACIENTES (cpf);</span>
<span id="cb10-82"><a href="#cb10-82" tabindex="-1"></a></span>
<span id="cb10-83"><a href="#cb10-83" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> CONSULTAM</span>
<span id="cb10-84"><a href="#cb10-84" tabindex="-1"></a>    <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_consultam_medicos</span>
<span id="cb10-85"><a href="#cb10-85" tabindex="-1"></a>        <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (crm)</span>
<span id="cb10-86"><a href="#cb10-86" tabindex="-1"></a>        <span class="kw">REFERENCES</span> MEDICOS (crm),</span>
<span id="cb10-87"><a href="#cb10-87" tabindex="-1"></a>    <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_consultam_pacientes</span>
<span id="cb10-88"><a href="#cb10-88" tabindex="-1"></a>        <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (cpf)</span>
<span id="cb10-89"><a href="#cb10-89" tabindex="-1"></a>        <span class="kw">REFERENCES</span> PACIENTES (cpf);</span>
<span id="cb10-90"><a href="#cb10-90" tabindex="-1"></a></span>
<span id="cb10-91"><a href="#cb10-91" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> RECEITAM</span>
<span id="cb10-92"><a href="#cb10-92" tabindex="-1"></a>    <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_receitam_medicos</span>
<span id="cb10-93"><a href="#cb10-93" tabindex="-1"></a>        <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (crm)</span>
<span id="cb10-94"><a href="#cb10-94" tabindex="-1"></a>        <span class="kw">REFERENCES</span> MEDICOS (crm),</span>
<span id="cb10-95"><a href="#cb10-95" tabindex="-1"></a>    <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_receitam_pacientes</span>
<span id="cb10-96"><a href="#cb10-96" tabindex="-1"></a>        <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (cpf)</span>
<span id="cb10-97"><a href="#cb10-97" tabindex="-1"></a>        <span class="kw">REFERENCES</span> PACIENTES (cpf);</span>
<span id="cb10-98"><a href="#cb10-98" tabindex="-1"></a></span>
<span id="cb10-99"><a href="#cb10-99" tabindex="-1"></a><span class="co">/* Definir chaves primÃ¡rias compostas para tabelas de relacionamento */</span></span>
<span id="cb10-100"><a href="#cb10-100" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> REGISTRAM <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (cnpj, cpf);</span>
<span id="cb10-101"><a href="#cb10-101" tabindex="-1"></a></span>
<span id="cb10-102"><a href="#cb10-102" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> CONSULTAM <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (crm, cpf, data_consulta, hora);</span>
<span id="cb10-103"><a href="#cb10-103" tabindex="-1"></a></span>
<span id="cb10-104"><a href="#cb10-104" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> RECEITAM  <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (crm, cpf, medicacao);</span></code></pre></div>
<hr />
</div>
<div id="exercÃ­cios-1" class="section level3 hasAnchor" number="4.11.1">
<h3 class="hasAnchor"><span class="header-section-number">4.11.1</span> ExercÃ­cios<a href="#exerc%C3%ADcios-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
</div>
<div id="lista-de-exercÃ­cios-modelo-entidade-relacionamento-mer" class="section level3 hasAnchor" number="4.11.2">
<h3 class="hasAnchor"><span class="header-section-number">4.11.2</span> ğŸ“ Lista de ExercÃ­cios â€“ Modelo Entidade-Relacionamento (MER)<a href="#lista-de-exerc%C3%ADcios-modelo-entidade-relacionamento-mer" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="exercÃ­cio-1-cliente-e-cpf-11" class="section level4 hasAnchor" number="4.11.2.1">
<h4 class="hasAnchor"><span class="header-section-number">4.11.2.1</span> ExercÃ­cio 1 â€“ Cliente e CPF (1:1)<a href="#exerc%C3%ADcio-1-cliente-e-cpf-11" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Considere um projeto de Banco de Dados.FaÃ§a a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.).<br />
Cada <strong>Cliente</strong> possui exatamente <strong>um CPF</strong>, e cada CPF sÃ³ pode estar associado a um Ãºnico Cliente.<br />
- Identifique entidades, atributos e relacionamento.<br />
- Represente o MER com cardinalidade 1:1.</p>
<p><img src="images/exercicio-01.svg" /><!-- --></p>
<hr />
</div>
<div id="exercÃ­cio-2-cliente-e-pedidos-1n" class="section level4 hasAnchor" number="4.11.2.2">
<h4 class="hasAnchor"><span class="header-section-number">4.11.2.2</span> ExercÃ­cio 2 â€“ Cliente e Pedidos (1:N)<a href="#exerc%C3%ADcio-2-cliente-e-pedidos-1n" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Considere um projeto de Banco de Dados.FaÃ§a a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.).<br />
Um <strong>Cliente</strong> pode fazer <strong>vÃ¡rios Pedidos</strong>, mas cada Pedido pertence a apenas um Cliente.<br />
- Liste as entidades e atributos.<br />
- Defina o relacionamento e a cardinalidade.<br />
- Monte o DER.</p>
<p><img src="images/exercicio-02.svg" /><!-- --></p>
<hr />
</div>
<div id="exercÃ­cio-3-alunos-e-disciplinas-nn" class="section level4 hasAnchor" number="4.11.2.3">
<h4 class="hasAnchor"><span class="header-section-number">4.11.2.3</span> ExercÃ­cio 3 â€“ Alunos e Disciplinas (N:N)<a href="#exerc%C3%ADcio-3-alunos-e-disciplinas-nn" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Considere um projeto de Banco de Dados.FaÃ§a a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.).<br />
Um <strong>Aluno</strong> pode se matricular em vÃ¡rias <strong>Disciplinas</strong>, e cada Disciplina pode ter vÃ¡rios Alunos.<br />
- Identifique entidades e atributos. - Qual entidade associativa deve ser criada? - Desenhe o DER com a entidade associativa.</p>
<p><img src="images/exercicio-03.svg" /><!-- --></p>
<hr />
</div>
<div id="exercÃ­cio-4-funcionÃ¡rio-e-dependentes-entidade-fraca" class="section level4 hasAnchor" number="4.11.2.4">
<h4 class="hasAnchor"><span class="header-section-number">4.11.2.4</span> ExercÃ­cio 4 â€“ FuncionÃ¡rio e Dependentes (Entidade Fraca)<a href="#exerc%C3%ADcio-4-funcion%C3%A1rio-e-dependentes-entidade-fraca" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Considere um projeto de Banco de Dados.FaÃ§a a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.).<br />
Cada <strong>FuncionÃ¡rio</strong> pode ter <strong>vÃ¡rios Dependentes</strong>. Um Dependente nÃ£o existe sem um FuncionÃ¡rio.<br />
- Identifique a entidade forte e a entidade fraca.<br />
- Defina atributos e chaves.<br />
- Monte o DER indicando a dependÃªncia existencial.</p>
<p><img src="images/exercicio-04.svg" /><!-- --></p>
<div class="sourceCode" id="cb11"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb11-1"><a href="#cb11-1" tabindex="-1"></a><span class="co">-- Coloque aqui o cÃ³digo SQL criar as tabelas:</span></span>
<span id="cb11-2"><a href="#cb11-2" tabindex="-1"></a></span>
<span id="cb11-3"><a href="#cb11-3" tabindex="-1"></a></span></code></pre></div>
<hr />
</div>
<div id="exercÃ­cio-5-pedido-e-itens-de-pedido-entidade-associativa-fraca" class="section level4 hasAnchor" number="4.11.2.5">
<h4 class="hasAnchor"><span class="header-section-number">4.11.2.5</span> ExercÃ­cio 5 â€“ Pedido e Itens de Pedido (Entidade Associativa + Fraca)<a href="#exerc%C3%ADcio-5-pedido-e-itens-de-pedido-entidade-associativa-fraca" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Considere um projeto de Banco de Dados.FaÃ§a a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.).<br />
Um <strong>Pedido</strong> contÃ©m vÃ¡rios <strong>Itens</strong>, mas cada Item estÃ¡ sempre vinculado a apenas um Pedido.<br />
- Qual entidade Ã© dominante e qual Ã© subordinada?<br />
- Identifique atributos das duas entidades.<br />
- Represente o DER com cardinalidade 1:N.</p>
<p><img src="images/exercicio-05.svg" /><!-- --></p>
<div class="sourceCode" id="cb12"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb12-1"><a href="#cb12-1" tabindex="-1"></a><span class="co">-- Coloque aqui o cÃ³digo SQL criar as tabelas:</span></span>
<span id="cb12-2"><a href="#cb12-2" tabindex="-1"></a></span>
<span id="cb12-3"><a href="#cb12-3" tabindex="-1"></a></span></code></pre></div>
<hr />
</div>
<div id="exercÃ­cio-6-mÃ©dicos-e-consultas-1n" class="section level4 hasAnchor" number="4.11.2.6">
<h4 class="hasAnchor"><span class="header-section-number">4.11.2.6</span> ExercÃ­cio 6 â€“ MÃ©dicos e Consultas (1:N)<a href="#exerc%C3%ADcio-6-m%C3%A9dicos-e-consultas-1n" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Considere um projeto de Banco de Dados.FaÃ§a a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.).<br />
Um <strong>MÃ©dico</strong> pode realizar vÃ¡rias <strong>Consultas</strong>, mas cada Consulta estÃ¡ associada a apenas um MÃ©dico.<br />
- Identifique entidades e atributos.<br />
- Desenhe o DER.<br />
- Indique as cardinalidades.</p>
<p><img src="images/exercicio-06.svg" /><!-- --></p>
<div class="sourceCode" id="cb13"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb13-1"><a href="#cb13-1" tabindex="-1"></a><span class="co">-- Coloque aqui o cÃ³digo SQL criar as tabelas:</span></span>
<span id="cb13-2"><a href="#cb13-2" tabindex="-1"></a></span>
<span id="cb13-3"><a href="#cb13-3" tabindex="-1"></a></span></code></pre></div>
<hr />
</div>
<div id="exercÃ­cio-7-professor-e-departamento-11" class="section level4 hasAnchor" number="4.11.2.7">
<h4 class="hasAnchor"><span class="header-section-number">4.11.2.7</span> ExercÃ­cio 7 â€“ Professor e Departamento (1:1)<a href="#exerc%C3%ADcio-7-professor-e-departamento-11" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Considere um projeto de Banco de Dados.FaÃ§a a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.).<br />
Cada <strong>Professor</strong> dirige apenas <strong>um Departamento</strong>, e cada Departamento tem apenas um Professor responsÃ¡vel.<br />
- Identifique entidades, atributos e relacionamento.<br />
- Defina cardinalidade 1:1 no DER.</p>
<p><img src="images/exercicio-07.svg" /><!-- --></p>
<div class="sourceCode" id="cb14"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb14-1"><a href="#cb14-1" tabindex="-1"></a><span class="co">-- Coloque aqui o cÃ³digo SQL criar as tabelas:</span></span>
<span id="cb14-2"><a href="#cb14-2" tabindex="-1"></a></span>
<span id="cb14-3"><a href="#cb14-3" tabindex="-1"></a></span></code></pre></div>
<hr />
</div>
<div id="exercÃ­cio-8-livros-e-autores-nn" class="section level4 hasAnchor" number="4.11.2.8">
<h4 class="hasAnchor"><span class="header-section-number">4.11.2.8</span> ExercÃ­cio 8 â€“ Livros e Autores (N:N)<a href="#exerc%C3%ADcio-8-livros-e-autores-nn" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Considere um projeto de Banco de Dados.FaÃ§a a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.).<br />
Um <strong>Livro</strong> pode ter vÃ¡rios <strong>Autores</strong>, e cada Autor pode escrever vÃ¡rios Livros.<br />
- Identifique as entidades e atributos.<br />
- Qual entidade associativa deve ser criada?<br />
- Monte o DER em notaÃ§Ã£o conceitual.</p>
<p><img src="images/exercicio-08.svg" /><!-- --></p>
<div class="sourceCode" id="cb15"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb15-1"><a href="#cb15-1" tabindex="-1"></a><span class="co">-- Coloque aqui o cÃ³digo SQL criar as tabelas:</span></span>
<span id="cb15-2"><a href="#cb15-2" tabindex="-1"></a></span>
<span id="cb15-3"><a href="#cb15-3" tabindex="-1"></a></span></code></pre></div>
<hr />
</div>
<div id="exercÃ­cio-9-biblioteca-entidades-fortes-e-fracas" class="section level4 hasAnchor" number="4.11.2.9">
<h4 class="hasAnchor"><span class="header-section-number">4.11.2.9</span> ExercÃ­cio 9 â€“ Biblioteca (Entidades Fortes e Fracas)<a href="#exerc%C3%ADcio-9-biblioteca-entidades-fortes-e-fracas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Considere um projeto de Banco de Dados.FaÃ§a a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.).<br />
Um <strong>Livro</strong> pode ter vÃ¡rios <strong>Exemplares</strong>. Um Exemplar sÃ³ existe se estiver associado a um Livro.<br />
- Identifique entidades fortes e fracas.<br />
- Defina atributos (Livro: tÃ­tulo, ano; Exemplar: cÃ³digo_exemplar, status).<br />
- Monte o DER com a dependÃªncia existencial.</p>
<p><img src="images/exercicio-09.svg" /><!-- --></p>
<div class="sourceCode" id="cb16"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb16-1"><a href="#cb16-1" tabindex="-1"></a><span class="co">-- Coloque aqui o cÃ³digo SQL criar as tabelas:</span></span>
<span id="cb16-2"><a href="#cb16-2" tabindex="-1"></a></span>
<span id="cb16-3"><a href="#cb16-3" tabindex="-1"></a></span></code></pre></div>
<hr />
</div>
<div id="exercÃ­cio-10-empresa-funcionÃ¡rio-e-projeto-misto-1n-e-nn" class="section level4 hasAnchor" number="4.11.2.10">
<h4 class="hasAnchor"><span class="header-section-number">4.11.2.10</span> ExercÃ­cio 10 â€“ Empresa, FuncionÃ¡rio e Projeto (Misto 1:N e N:N)<a href="#exerc%C3%ADcio-10-empresa-funcion%C3%A1rio-e-projeto-misto-1n-e-nn" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Considere um projeto de Banco de Dados.FaÃ§a a modelagem utilizando o Modelo Entidade-Relacionamento de Peter Chen (M.E.R.).<br />
- Uma <strong>Empresa</strong> possui vÃ¡rios <strong>FuncionÃ¡rios</strong>.<br />
- Cada <strong>FuncionÃ¡rio</strong> pode participar de vÃ¡rios <strong>Projetos</strong>, e cada Projeto pode ter vÃ¡rios FuncionÃ¡rios.<br />
- Identifique todas as entidades, atributos e relacionamentos.<br />
- Determine cardinalidades corretas (Empresaâ€“FuncionÃ¡rio 1:N, FuncionÃ¡rioâ€“Projeto N:N).<br />
- Crie o DER completo.</p>
<p><img src="images/exercicio-10.svg" /><!-- --></p>
<div class="sourceCode" id="cb17"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb17-1"><a href="#cb17-1" tabindex="-1"></a><span class="co">-- Coloque aqui o cÃ³digo SQL criar as tabelas:</span></span>
<span id="cb17-2"><a href="#cb17-2" tabindex="-1"></a></span>
<span id="cb17-3"><a href="#cb17-3" tabindex="-1"></a></span></code></pre></div>
<hr />
</div>
<div id="tarefas-propostas-para-cada-exercÃ­cio" class="section level4 hasAnchor" number="4.11.2.11">
<h4 class="hasAnchor"><span class="header-section-number">4.11.2.11</span> Tarefas propostas para cada exercÃ­cio:<a href="#tarefas-propostas-para-cada-exerc%C3%ADcio" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ol style="list-style-type: decimal">
<li>Identificar entidades e atributos.<br />
</li>
<li>Definir relacionamentos.<br />
</li>
<li>Especificar cardinalidades.<br />
</li>
<li>Indicar entidades fortes e fracas (quando houver).<br />
</li>
<li>Representar graficamente o DER.</li>
</ol>
<hr />
</div>
</div>
<div id="respostas-dos-exercÃ­cios" class="section level3 hasAnchor" number="4.11.3">
<h3 class="hasAnchor"><span class="header-section-number">4.11.3</span> Respostas dos ExercÃ­cios:<a href="#respostas-dos-exerc%C3%ADcios" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="exercÃ­cio-1" class="section level4 hasAnchor" number="4.11.3.1">
<h4 class="hasAnchor"><span class="header-section-number">4.11.3.1</span> ExercÃ­cio #1<a href="#exerc%C3%ADcio-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/exercicio-01-resposta.svg" /><!-- --></p>
<div id="exercÃ­cio-1---sql-referÃªnte-ao-diagrama-anterior" class="section level5 hasAnchor" number="4.11.3.1.1">
<h5 class="hasAnchor"><span class="header-section-number">4.11.3.1.1</span> ExercÃ­cio 1 - SQL referÃªnte ao diagrama anterior<a href="#exerc%C3%ADcio-1---sql-refer%C3%AAnte-ao-diagrama-anterior" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb18"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb18-1"><a href="#cb18-1" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb18-2"><a href="#cb18-2" tabindex="-1"></a><span class="co">   TRANSFORMA AS ENTIDADES EM TABELAS E ATRIBUTOS EM COLUNAS</span></span>
<span id="cb18-3"><a href="#cb18-3" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb18-4"><a href="#cb18-4" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> CLIENTES </span>
<span id="cb18-5"><a href="#cb18-5" tabindex="-1"></a>(</span>
<span id="cb18-6"><a href="#cb18-6" tabindex="-1"></a>    id_cliente <span class="dt">INTEGER</span>,</span>
<span id="cb18-7"><a href="#cb18-7" tabindex="-1"></a>    nome <span class="dt">VARCHAR</span>(<span class="dv">255</span>)</span>
<span id="cb18-8"><a href="#cb18-8" tabindex="-1"></a>);</span>
<span id="cb18-9"><a href="#cb18-9" tabindex="-1"></a></span>
<span id="cb18-10"><a href="#cb18-10" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> CPFS</span>
<span id="cb18-11"><a href="#cb18-11" tabindex="-1"></a>(</span>
<span id="cb18-12"><a href="#cb18-12" tabindex="-1"></a>    numero_cpf <span class="dt">CHAR</span>(<span class="dv">11</span>)</span>
<span id="cb18-13"><a href="#cb18-13" tabindex="-1"></a>);</span>
<span id="cb18-14"><a href="#cb18-14" tabindex="-1"></a></span>
<span id="cb18-15"><a href="#cb18-15" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb18-16"><a href="#cb18-16" tabindex="-1"></a><span class="co">   Definir chaves primÃ¡rias</span></span>
<span id="cb18-17"><a href="#cb18-17" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb18-18"><a href="#cb18-18" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> CLIENTES <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (id_cliente);</span>
<span id="cb18-19"><a href="#cb18-19" tabindex="-1"></a></span>
<span id="cb18-20"><a href="#cb18-20" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> CPFS <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (numero_cpf);</span>
<span id="cb18-21"><a href="#cb18-21" tabindex="-1"></a></span>
<span id="cb18-22"><a href="#cb18-22" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb18-23"><a href="#cb18-23" tabindex="-1"></a><span class="co">    Criar coluna para futura chave estrangeira</span></span>
<span id="cb18-24"><a href="#cb18-24" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb18-25"><a href="#cb18-25" tabindex="-1"></a><span class="co">-- Relacionamento 1:1 (um cliente possui um CPF)</span></span>
<span id="cb18-26"><a href="#cb18-26" tabindex="-1"></a><span class="co">-- Vamos colocar a FK na tabela CLIENTES</span></span>
<span id="cb18-27"><a href="#cb18-27" tabindex="-1"></a></span>
<span id="cb18-28"><a href="#cb18-28" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> CLIENTES   <span class="kw">ADD</span> <span class="kw">COLUMN</span> numero_cpf <span class="dt">CHAR</span>(<span class="dv">11</span>);</span>
<span id="cb18-29"><a href="#cb18-29" tabindex="-1"></a></span>
<span id="cb18-30"><a href="#cb18-30" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb18-31"><a href="#cb18-31" tabindex="-1"></a><span class="co">    Criar chave estrangeira</span></span>
<span id="cb18-32"><a href="#cb18-32" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb18-33"><a href="#cb18-33" tabindex="-1"></a></span>
<span id="cb18-34"><a href="#cb18-34" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> CLIENTES <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_clientes_cpfs <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (numero_cpf) EFERENCES CPFS (numero_cpf);</span></code></pre></div>
<hr />
</div>
</div>
<div id="exercÃ­cio-2" class="section level4 hasAnchor" number="4.11.3.2">
<h4 class="hasAnchor"><span class="header-section-number">4.11.3.2</span> ExercÃ­cio #2<a href="#exerc%C3%ADcio-2" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/exercicio-02-resposta.svg" /><!-- --></p>
<div id="exercÃ­cio-2---sql-referÃªnte-ao-diagrama-anterior" class="section level5 hasAnchor" number="4.11.3.2.1">
<h5 class="hasAnchor"><span class="header-section-number">4.11.3.2.1</span> ExercÃ­cio 2 - SQL referÃªnte ao diagrama anterior<a href="#exerc%C3%ADcio-2---sql-refer%C3%AAnte-ao-diagrama-anterior" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb19"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb19-1"><a href="#cb19-1" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb19-2"><a href="#cb19-2" tabindex="-1"></a><span class="co">   Criar tabelas (sem PK ou FK)</span></span>
<span id="cb19-3"><a href="#cb19-3" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb19-4"><a href="#cb19-4" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> CLIENTES </span>
<span id="cb19-5"><a href="#cb19-5" tabindex="-1"></a>(</span>
<span id="cb19-6"><a href="#cb19-6" tabindex="-1"></a>    cpf <span class="dt">CHAR</span>(<span class="dv">11</span>),</span>
<span id="cb19-7"><a href="#cb19-7" tabindex="-1"></a>    nome <span class="dt">VARCHAR</span>(<span class="dv">255</span>)</span>
<span id="cb19-8"><a href="#cb19-8" tabindex="-1"></a>);</span>
<span id="cb19-9"><a href="#cb19-9" tabindex="-1"></a></span>
<span id="cb19-10"><a href="#cb19-10" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> PEDIDOS </span>
<span id="cb19-11"><a href="#cb19-11" tabindex="-1"></a>(</span>
<span id="cb19-12"><a href="#cb19-12" tabindex="-1"></a>    cod_pedido <span class="dt">INT</span>,</span>
<span id="cb19-13"><a href="#cb19-13" tabindex="-1"></a>    <span class="kw">data</span> <span class="dt">DATE</span>,</span>
<span id="cb19-14"><a href="#cb19-14" tabindex="-1"></a>    valor_total <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>)</span>
<span id="cb19-15"><a href="#cb19-15" tabindex="-1"></a>);</span>
<span id="cb19-16"><a href="#cb19-16" tabindex="-1"></a></span>
<span id="cb19-17"><a href="#cb19-17" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb19-18"><a href="#cb19-18" tabindex="-1"></a><span class="co">   Definir chaves primÃ¡rias</span></span>
<span id="cb19-19"><a href="#cb19-19" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb19-20"><a href="#cb19-20" tabindex="-1"></a></span>
<span id="cb19-21"><a href="#cb19-21" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> CLIENTES  <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (cpf);</span>
<span id="cb19-22"><a href="#cb19-22" tabindex="-1"></a></span>
<span id="cb19-23"><a href="#cb19-23" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> PEDIDOS   <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (cod_pedido);</span>
<span id="cb19-24"><a href="#cb19-24" tabindex="-1"></a></span>
<span id="cb19-25"><a href="#cb19-25" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb19-26"><a href="#cb19-26" tabindex="-1"></a><span class="co">   Criar coluna para futura chave estrangeira</span></span>
<span id="cb19-27"><a href="#cb19-27" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb19-28"><a href="#cb19-28" tabindex="-1"></a><span class="co">-- Relacionamento CLIENTES 1:N PEDIDOS </span></span>
<span id="cb19-29"><a href="#cb19-29" tabindex="-1"></a></span>
<span id="cb19-30"><a href="#cb19-30" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> PEDIDOS <span class="kw">ADD</span> <span class="kw">COLUMN</span> cpf_cliente <span class="dt">CHAR</span>(<span class="dv">11</span>);</span>
<span id="cb19-31"><a href="#cb19-31" tabindex="-1"></a></span>
<span id="cb19-32"><a href="#cb19-32" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb19-33"><a href="#cb19-33" tabindex="-1"></a><span class="co">   Criar chave estrangeira</span></span>
<span id="cb19-34"><a href="#cb19-34" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb19-35"><a href="#cb19-35" tabindex="-1"></a></span>
<span id="cb19-36"><a href="#cb19-36" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> PEDIDOS <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_pedidos_clientes  <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (cpf_cliente) <span class="kw">REFERENCES</span> CLIENTES (cpf);</span>
<span id="cb19-37"><a href="#cb19-37" tabindex="-1"></a></span></code></pre></div>
<hr />
</div>
</div>
<div id="exercÃ­cio-3" class="section level4 hasAnchor" number="4.11.3.3">
<h4 class="hasAnchor"><span class="header-section-number">4.11.3.3</span> ExercÃ­cio #3<a href="#exerc%C3%ADcio-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/exercicio-03-resposta.svg" /><!-- --></p>
<div id="exercÃ­cio-3---sql-referÃªnte-ao-diagrama-anterior" class="section level5 hasAnchor" number="4.11.3.3.1">
<h5 class="hasAnchor"><span class="header-section-number">4.11.3.3.1</span> ExercÃ­cio 3 - SQL referÃªnte ao diagrama anterior<a href="#exerc%C3%ADcio-3---sql-refer%C3%AAnte-ao-diagrama-anterior" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb20"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb20-1"><a href="#cb20-1" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb20-2"><a href="#cb20-2" tabindex="-1"></a><span class="co">   Criar tabelas (sem PK ou FK)</span></span>
<span id="cb20-3"><a href="#cb20-3" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb20-4"><a href="#cb20-4" tabindex="-1"></a></span>
<span id="cb20-5"><a href="#cb20-5" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> ALUNOS </span>
<span id="cb20-6"><a href="#cb20-6" tabindex="-1"></a>(</span>
<span id="cb20-7"><a href="#cb20-7" tabindex="-1"></a>    id_aluno <span class="dt">INT</span>,</span>
<span id="cb20-8"><a href="#cb20-8" tabindex="-1"></a>    nome <span class="dt">VARCHAR</span>(<span class="dv">255</span>)</span>
<span id="cb20-9"><a href="#cb20-9" tabindex="-1"></a>);</span>
<span id="cb20-10"><a href="#cb20-10" tabindex="-1"></a></span>
<span id="cb20-11"><a href="#cb20-11" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> DISCIPLINAS </span>
<span id="cb20-12"><a href="#cb20-12" tabindex="-1"></a>(</span>
<span id="cb20-13"><a href="#cb20-13" tabindex="-1"></a>    id_disciplina <span class="dt">INT</span>,</span>
<span id="cb20-14"><a href="#cb20-14" tabindex="-1"></a>    nome <span class="dt">VARCHAR</span>(<span class="dv">255</span>)</span>
<span id="cb20-15"><a href="#cb20-15" tabindex="-1"></a>);</span>
<span id="cb20-16"><a href="#cb20-16" tabindex="-1"></a></span>
<span id="cb20-17"><a href="#cb20-17" tabindex="-1"></a><span class="co">/* Tabela para o relacionamento N:N */</span></span>
<span id="cb20-18"><a href="#cb20-18" tabindex="-1"></a></span>
<span id="cb20-19"><a href="#cb20-19" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> MATRICULA </span>
<span id="cb20-20"><a href="#cb20-20" tabindex="-1"></a>(</span>
<span id="cb20-21"><a href="#cb20-21" tabindex="-1"></a>    semestre <span class="dt">VARCHAR</span>(<span class="dv">10</span>)</span>
<span id="cb20-22"><a href="#cb20-22" tabindex="-1"></a>);</span>
<span id="cb20-23"><a href="#cb20-23" tabindex="-1"></a></span>
<span id="cb20-24"><a href="#cb20-24" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb20-25"><a href="#cb20-25" tabindex="-1"></a><span class="co">   Definir chaves primÃ¡rias</span></span>
<span id="cb20-26"><a href="#cb20-26" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb20-27"><a href="#cb20-27" tabindex="-1"></a></span>
<span id="cb20-28"><a href="#cb20-28" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> ALUNOS  <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (id_aluno);</span>
<span id="cb20-29"><a href="#cb20-29" tabindex="-1"></a></span>
<span id="cb20-30"><a href="#cb20-30" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> DISCIPLINAS <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (id_disciplina);</span>
<span id="cb20-31"><a href="#cb20-31" tabindex="-1"></a></span>
<span id="cb20-32"><a href="#cb20-32" tabindex="-1"></a><span class="co">/* A PK da tabela MATRICULA serÃ¡ composta pelas FKs */</span></span>
<span id="cb20-33"><a href="#cb20-33" tabindex="-1"></a><span class="co">-- Definiremos depois de criar as colunas de FK</span></span>
<span id="cb20-34"><a href="#cb20-34" tabindex="-1"></a></span>
<span id="cb20-35"><a href="#cb20-35" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb20-36"><a href="#cb20-36" tabindex="-1"></a><span class="co">   Criar colunas para futuras chaves estrangeiras (lado N)</span></span>
<span id="cb20-37"><a href="#cb20-37" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb20-38"><a href="#cb20-38" tabindex="-1"></a></span>
<span id="cb20-39"><a href="#cb20-39" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> MATRICULA <span class="kw">ADD</span> <span class="kw">COLUMN</span> id_aluno <span class="dt">INT</span>, <span class="kw">ADD</span> <span class="kw">COLUMN</span> id_disciplina <span class="dt">INT</span>;</span>
<span id="cb20-40"><a href="#cb20-40" tabindex="-1"></a></span>
<span id="cb20-41"><a href="#cb20-41" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb20-42"><a href="#cb20-42" tabindex="-1"></a><span class="co">   Criar chaves estrangeiras</span></span>
<span id="cb20-43"><a href="#cb20-43" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb20-44"><a href="#cb20-44" tabindex="-1"></a></span>
<span id="cb20-45"><a href="#cb20-45" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> MATRICULA <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_matricula_aluno <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (id_aluno) <span class="kw">REFERENCES</span> ALUNOS (id_aluno);</span>
<span id="cb20-46"><a href="#cb20-46" tabindex="-1"></a></span>
<span id="cb20-47"><a href="#cb20-47" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> MATRICULA <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_matricula_disciplina <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (id_disciplina) <span class="kw">REFERENCES</span> DISCIPLINAS (id_disciplina);</span>
<span id="cb20-48"><a href="#cb20-48" tabindex="-1"></a></span>
<span id="cb20-49"><a href="#cb20-49" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb20-50"><a href="#cb20-50" tabindex="-1"></a><span class="co">   Definir chave primÃ¡ria composta da tabela MATRICULA</span></span>
<span id="cb20-51"><a href="#cb20-51" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb20-52"><a href="#cb20-52" tabindex="-1"></a></span>
<span id="cb20-53"><a href="#cb20-53" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> MATRICULA <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (id_aluno, id_disciplina);</span></code></pre></div>
<hr />
</div>
</div>
<div id="exercÃ­cio-4" class="section level4 hasAnchor" number="4.11.3.4">
<h4 class="hasAnchor"><span class="header-section-number">4.11.3.4</span> ExercÃ­cio #4<a href="#exerc%C3%ADcio-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/exercicio-04-resposta.svg" /><!-- --></p>
<div id="exercÃ­cio-4---sql-referÃªnte-ao-diagrama-anterior" class="section level5 hasAnchor" number="4.11.3.4.1">
<h5 class="hasAnchor"><span class="header-section-number">4.11.3.4.1</span> ExercÃ­cio 4 - SQL referÃªnte ao diagrama anterior<a href="#exerc%C3%ADcio-4---sql-refer%C3%AAnte-ao-diagrama-anterior" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb21"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb21-1"><a href="#cb21-1" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb21-2"><a href="#cb21-2" tabindex="-1"></a><span class="co">   Criar tabelas (sem PK ou FK)</span></span>
<span id="cb21-3"><a href="#cb21-3" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb21-4"><a href="#cb21-4" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> FUNCIONARIOS </span>
<span id="cb21-5"><a href="#cb21-5" tabindex="-1"></a>(</span>
<span id="cb21-6"><a href="#cb21-6" tabindex="-1"></a>    id_funcionario <span class="dt">INT</span>,</span>
<span id="cb21-7"><a href="#cb21-7" tabindex="-1"></a>    nome <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb21-8"><a href="#cb21-8" tabindex="-1"></a>    cargo <span class="dt">VARCHAR</span>(<span class="dv">100</span>),</span>
<span id="cb21-9"><a href="#cb21-9" tabindex="-1"></a>    salario <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>)</span>
<span id="cb21-10"><a href="#cb21-10" tabindex="-1"></a>);</span>
<span id="cb21-11"><a href="#cb21-11" tabindex="-1"></a></span>
<span id="cb21-12"><a href="#cb21-12" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> DEPENDENTES </span>
<span id="cb21-13"><a href="#cb21-13" tabindex="-1"></a>(</span>
<span id="cb21-14"><a href="#cb21-14" tabindex="-1"></a>    id_dependente <span class="dt">INT</span>,</span>
<span id="cb21-15"><a href="#cb21-15" tabindex="-1"></a>    nome <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb21-16"><a href="#cb21-16" tabindex="-1"></a>    parentesco <span class="dt">VARCHAR</span>(<span class="dv">50</span>),</span>
<span id="cb21-17"><a href="#cb21-17" tabindex="-1"></a>    data_nascimento <span class="dt">DATE</span></span>
<span id="cb21-18"><a href="#cb21-18" tabindex="-1"></a>);</span>
<span id="cb21-19"><a href="#cb21-19" tabindex="-1"></a></span>
<span id="cb21-20"><a href="#cb21-20" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb21-21"><a href="#cb21-21" tabindex="-1"></a><span class="co">   Definir chaves primÃ¡rias</span></span>
<span id="cb21-22"><a href="#cb21-22" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb21-23"><a href="#cb21-23" tabindex="-1"></a></span>
<span id="cb21-24"><a href="#cb21-24" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> FUNCIONARIOS <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (id_funcionario);</span>
<span id="cb21-25"><a href="#cb21-25" tabindex="-1"></a></span>
<span id="cb21-26"><a href="#cb21-26" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> DEPENDENTES <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (id_dependente);</span>
<span id="cb21-27"><a href="#cb21-27" tabindex="-1"></a></span>
<span id="cb21-28"><a href="#cb21-28" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb21-29"><a href="#cb21-29" tabindex="-1"></a><span class="co">   Criar coluna para futura chave estrangeira</span></span>
<span id="cb21-30"><a href="#cb21-30" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb21-31"><a href="#cb21-31" tabindex="-1"></a></span>
<span id="cb21-32"><a href="#cb21-32" tabindex="-1"></a><span class="co">-- Relacionamento FUNCIONARIOS 1:N DEPENDENTES</span></span>
<span id="cb21-33"><a href="#cb21-33" tabindex="-1"></a></span>
<span id="cb21-34"><a href="#cb21-34" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> DEPENDENTES <span class="kw">ADD</span> <span class="kw">COLUMN</span> id_funcionario <span class="dt">INT</span>;</span>
<span id="cb21-35"><a href="#cb21-35" tabindex="-1"></a></span>
<span id="cb21-36"><a href="#cb21-36" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb21-37"><a href="#cb21-37" tabindex="-1"></a><span class="co">   Criar chave estrangeira</span></span>
<span id="cb21-38"><a href="#cb21-38" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb21-39"><a href="#cb21-39" tabindex="-1"></a></span>
<span id="cb21-40"><a href="#cb21-40" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> DEPENDENTES <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_dependentes_funcionarios <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (id_funcionario) <span class="kw">REFERENCES</span> FUNCIONARIOS  (id_funcionario);</span>
<span id="cb21-41"><a href="#cb21-41" tabindex="-1"></a></span></code></pre></div>
<hr />
</div>
</div>
<div id="exercÃ­cio-5" class="section level4 hasAnchor" number="4.11.3.5">
<h4 class="hasAnchor"><span class="header-section-number">4.11.3.5</span> ExercÃ­cio #5<a href="#exerc%C3%ADcio-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/exercicio-05-resposta.svg" /><!-- --></p>
<div id="exercÃ­cio-5---sql-referÃªnte-ao-diagrama-anterior" class="section level5 hasAnchor" number="4.11.3.5.1">
<h5 class="hasAnchor"><span class="header-section-number">4.11.3.5.1</span> ExercÃ­cio 5 - SQL referÃªnte ao diagrama anterior<a href="#exerc%C3%ADcio-5---sql-refer%C3%AAnte-ao-diagrama-anterior" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb22"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb22-1"><a href="#cb22-1" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb22-2"><a href="#cb22-2" tabindex="-1"></a><span class="co">   Criar tabelas (sem PK ou FK)</span></span>
<span id="cb22-3"><a href="#cb22-3" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb22-4"><a href="#cb22-4" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> PEDIDOS </span>
<span id="cb22-5"><a href="#cb22-5" tabindex="-1"></a>(</span>
<span id="cb22-6"><a href="#cb22-6" tabindex="-1"></a>    id_pedido <span class="dt">INT</span>,</span>
<span id="cb22-7"><a href="#cb22-7" tabindex="-1"></a>    data_pedido <span class="dt">DATE</span>,</span>
<span id="cb22-8"><a href="#cb22-8" tabindex="-1"></a>    valor_total <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>),</span>
<span id="cb22-9"><a href="#cb22-9" tabindex="-1"></a>    status <span class="dt">VARCHAR</span>(<span class="dv">50</span>)</span>
<span id="cb22-10"><a href="#cb22-10" tabindex="-1"></a>);</span>
<span id="cb22-11"><a href="#cb22-11" tabindex="-1"></a></span>
<span id="cb22-12"><a href="#cb22-12" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> ITENS </span>
<span id="cb22-13"><a href="#cb22-13" tabindex="-1"></a>(</span>
<span id="cb22-14"><a href="#cb22-14" tabindex="-1"></a>    id_item <span class="dt">INT</span>,</span>
<span id="cb22-15"><a href="#cb22-15" tabindex="-1"></a>    descricao <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb22-16"><a href="#cb22-16" tabindex="-1"></a>    quantidade <span class="dt">INT</span>,</span>
<span id="cb22-17"><a href="#cb22-17" tabindex="-1"></a>    preco_unitario <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>)</span>
<span id="cb22-18"><a href="#cb22-18" tabindex="-1"></a>);</span>
<span id="cb22-19"><a href="#cb22-19" tabindex="-1"></a></span>
<span id="cb22-20"><a href="#cb22-20" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb22-21"><a href="#cb22-21" tabindex="-1"></a><span class="co">   Definir chaves primÃ¡rias</span></span>
<span id="cb22-22"><a href="#cb22-22" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb22-23"><a href="#cb22-23" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> PEDIDOS <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (id_pedido);</span>
<span id="cb22-24"><a href="#cb22-24" tabindex="-1"></a></span>
<span id="cb22-25"><a href="#cb22-25" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> ITENS <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (id_item);</span>
<span id="cb22-26"><a href="#cb22-26" tabindex="-1"></a></span>
<span id="cb22-27"><a href="#cb22-27" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb22-28"><a href="#cb22-28" tabindex="-1"></a><span class="co">   Criar coluna para futura chave estrangeira</span></span>
<span id="cb22-29"><a href="#cb22-29" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb22-30"><a href="#cb22-30" tabindex="-1"></a></span>
<span id="cb22-31"><a href="#cb22-31" tabindex="-1"></a><span class="co">-- Relacionamento PEDIDOS 1:N ITENS</span></span>
<span id="cb22-32"><a href="#cb22-32" tabindex="-1"></a></span>
<span id="cb22-33"><a href="#cb22-33" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> ITENS <span class="kw">ADD</span> <span class="kw">COLUMN</span> id_pedido <span class="dt">INT</span>;</span>
<span id="cb22-34"><a href="#cb22-34" tabindex="-1"></a></span>
<span id="cb22-35"><a href="#cb22-35" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb22-36"><a href="#cb22-36" tabindex="-1"></a><span class="co">   Criar chave estrangeira</span></span>
<span id="cb22-37"><a href="#cb22-37" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb22-38"><a href="#cb22-38" tabindex="-1"></a></span>
<span id="cb22-39"><a href="#cb22-39" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> ITENS <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_itens_pedidos <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (id_pedido) <span class="kw">REFERENCES</span> PEDIDOS (id_pedido);</span>
<span id="cb22-40"><a href="#cb22-40" tabindex="-1"></a></span></code></pre></div>
<hr />
</div>
</div>
<div id="exercÃ­cio-6" class="section level4 hasAnchor" number="4.11.3.6">
<h4 class="hasAnchor"><span class="header-section-number">4.11.3.6</span> ExercÃ­cio #6<a href="#exerc%C3%ADcio-6" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/exercicio-06-resposta.svg" /><!-- --></p>
<div id="exercÃ­cio-6---sql-referÃªnte-ao-diagrama-anterior" class="section level5 hasAnchor" number="4.11.3.6.1">
<h5 class="hasAnchor"><span class="header-section-number">4.11.3.6.1</span> ExercÃ­cio 6 - SQL referÃªnte ao diagrama anterior<a href="#exerc%C3%ADcio-6---sql-refer%C3%AAnte-ao-diagrama-anterior" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb23"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb23-1"><a href="#cb23-1" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb23-2"><a href="#cb23-2" tabindex="-1"></a><span class="co">   Criar tabelas (sem PK ou FK)</span></span>
<span id="cb23-3"><a href="#cb23-3" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb23-4"><a href="#cb23-4" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> MEDICOS </span>
<span id="cb23-5"><a href="#cb23-5" tabindex="-1"></a>(</span>
<span id="cb23-6"><a href="#cb23-6" tabindex="-1"></a>    id_medico <span class="dt">INT</span>,</span>
<span id="cb23-7"><a href="#cb23-7" tabindex="-1"></a>    nome <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb23-8"><a href="#cb23-8" tabindex="-1"></a>    especialidade <span class="dt">VARCHAR</span>(<span class="dv">100</span>),</span>
<span id="cb23-9"><a href="#cb23-9" tabindex="-1"></a>    crm <span class="dt">VARCHAR</span>(<span class="dv">20</span>)</span>
<span id="cb23-10"><a href="#cb23-10" tabindex="-1"></a>);</span>
<span id="cb23-11"><a href="#cb23-11" tabindex="-1"></a></span>
<span id="cb23-12"><a href="#cb23-12" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> CONSULTAS </span>
<span id="cb23-13"><a href="#cb23-13" tabindex="-1"></a>(</span>
<span id="cb23-14"><a href="#cb23-14" tabindex="-1"></a>    id_consulta <span class="dt">INT</span>,</span>
<span id="cb23-15"><a href="#cb23-15" tabindex="-1"></a>    data_consulta <span class="dt">DATE</span>,</span>
<span id="cb23-16"><a href="#cb23-16" tabindex="-1"></a>    hora <span class="dt">TIME</span>,</span>
<span id="cb23-17"><a href="#cb23-17" tabindex="-1"></a>    observacoes <span class="dt">VARCHAR</span>(<span class="dv">255</span>)</span>
<span id="cb23-18"><a href="#cb23-18" tabindex="-1"></a>);</span>
<span id="cb23-19"><a href="#cb23-19" tabindex="-1"></a></span>
<span id="cb23-20"><a href="#cb23-20" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb23-21"><a href="#cb23-21" tabindex="-1"></a><span class="co">   Definir chaves primÃ¡rias</span></span>
<span id="cb23-22"><a href="#cb23-22" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb23-23"><a href="#cb23-23" tabindex="-1"></a></span>
<span id="cb23-24"><a href="#cb23-24" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> MEDICOS <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (id_medico);</span>
<span id="cb23-25"><a href="#cb23-25" tabindex="-1"></a></span>
<span id="cb23-26"><a href="#cb23-26" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> CONSULTAS <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (id_consulta);</span>
<span id="cb23-27"><a href="#cb23-27" tabindex="-1"></a></span>
<span id="cb23-28"><a href="#cb23-28" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb23-29"><a href="#cb23-29" tabindex="-1"></a><span class="co">   Criar coluna para futura chave estrangeira</span></span>
<span id="cb23-30"><a href="#cb23-30" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb23-31"><a href="#cb23-31" tabindex="-1"></a><span class="co">-- Relacionamento MEDICOS 1:N CONSULTAS</span></span>
<span id="cb23-32"><a href="#cb23-32" tabindex="-1"></a></span>
<span id="cb23-33"><a href="#cb23-33" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> CONSULTAS <span class="kw">ADD</span> <span class="kw">COLUMN</span> id_medico <span class="dt">INT</span>;</span>
<span id="cb23-34"><a href="#cb23-34" tabindex="-1"></a></span>
<span id="cb23-35"><a href="#cb23-35" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb23-36"><a href="#cb23-36" tabindex="-1"></a><span class="co">   Criar chave estrangeira</span></span>
<span id="cb23-37"><a href="#cb23-37" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb23-38"><a href="#cb23-38" tabindex="-1"></a></span>
<span id="cb23-39"><a href="#cb23-39" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> CONSULTAS <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_consultas_medicos <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (id_medico) <span class="kw">REFERENCES</span> MEDICOS (id_medico);</span></code></pre></div>
<hr />
</div>
</div>
<div id="exercÃ­cio-7" class="section level4 hasAnchor" number="4.11.3.7">
<h4 class="hasAnchor"><span class="header-section-number">4.11.3.7</span> ExercÃ­cio #7<a href="#exerc%C3%ADcio-7" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/exercicio-07-resposta.svg" /><!-- --></p>
<div id="exercÃ­cio-7---sql-referÃªnte-ao-diagrama-anterior" class="section level5 hasAnchor" number="4.11.3.7.1">
<h5 class="hasAnchor"><span class="header-section-number">4.11.3.7.1</span> ExercÃ­cio 7 - SQL referÃªnte ao diagrama anterior<a href="#exerc%C3%ADcio-7---sql-refer%C3%AAnte-ao-diagrama-anterior" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb24"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb24-1"><a href="#cb24-1" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb24-2"><a href="#cb24-2" tabindex="-1"></a><span class="co">   Criar tabelas (sem PK ou FK)</span></span>
<span id="cb24-3"><a href="#cb24-3" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb24-4"><a href="#cb24-4" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> PROFESSORES </span>
<span id="cb24-5"><a href="#cb24-5" tabindex="-1"></a>(</span>
<span id="cb24-6"><a href="#cb24-6" tabindex="-1"></a>    id_professor <span class="dt">INT</span>,</span>
<span id="cb24-7"><a href="#cb24-7" tabindex="-1"></a>    nome <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb24-8"><a href="#cb24-8" tabindex="-1"></a>    titulacao <span class="dt">VARCHAR</span>(<span class="dv">100</span>),</span>
<span id="cb24-9"><a href="#cb24-9" tabindex="-1"></a>    email <span class="dt">VARCHAR</span>(<span class="dv">255</span>)</span>
<span id="cb24-10"><a href="#cb24-10" tabindex="-1"></a>);</span>
<span id="cb24-11"><a href="#cb24-11" tabindex="-1"></a></span>
<span id="cb24-12"><a href="#cb24-12" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> DEPARTAMENTOS </span>
<span id="cb24-13"><a href="#cb24-13" tabindex="-1"></a>(</span>
<span id="cb24-14"><a href="#cb24-14" tabindex="-1"></a>    id_departamento <span class="dt">INT</span>,</span>
<span id="cb24-15"><a href="#cb24-15" tabindex="-1"></a>    nome <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb24-16"><a href="#cb24-16" tabindex="-1"></a>    localizacao <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb24-17"><a href="#cb24-17" tabindex="-1"></a>    telefone <span class="dt">VARCHAR</span>(<span class="dv">20</span>)</span>
<span id="cb24-18"><a href="#cb24-18" tabindex="-1"></a>);</span>
<span id="cb24-19"><a href="#cb24-19" tabindex="-1"></a></span>
<span id="cb24-20"><a href="#cb24-20" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb24-21"><a href="#cb24-21" tabindex="-1"></a><span class="co">   Definir chaves primÃ¡rias</span></span>
<span id="cb24-22"><a href="#cb24-22" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb24-23"><a href="#cb24-23" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> PROFESSORES <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (id_professor);</span>
<span id="cb24-24"><a href="#cb24-24" tabindex="-1"></a></span>
<span id="cb24-25"><a href="#cb24-25" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> DEPARTAMENTOS <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (id_departamento);</span>
<span id="cb24-26"><a href="#cb24-26" tabindex="-1"></a></span>
<span id="cb24-27"><a href="#cb24-27" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb24-28"><a href="#cb24-28" tabindex="-1"></a><span class="co">   Criar coluna para futura chave estrangeira</span></span>
<span id="cb24-29"><a href="#cb24-29" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb24-30"><a href="#cb24-30" tabindex="-1"></a><span class="co">-- Relacionamento 1:1 entre PROFESSORES e DEPARTAMENTOS</span></span>
<span id="cb24-31"><a href="#cb24-31" tabindex="-1"></a><span class="co">-- Aqui vamos colocar a FK em DEPARTAMENTOS, vinculando ao professor responsÃ¡vel</span></span>
<span id="cb24-32"><a href="#cb24-32" tabindex="-1"></a></span>
<span id="cb24-33"><a href="#cb24-33" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> DEPARTAMENTOS <span class="kw">ADD</span> <span class="kw">COLUMN</span> id_professor <span class="dt">INT</span>;</span>
<span id="cb24-34"><a href="#cb24-34" tabindex="-1"></a></span>
<span id="cb24-35"><a href="#cb24-35" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb24-36"><a href="#cb24-36" tabindex="-1"></a><span class="co">   Criar chave estrangeira</span></span>
<span id="cb24-37"><a href="#cb24-37" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb24-38"><a href="#cb24-38" tabindex="-1"></a></span>
<span id="cb24-39"><a href="#cb24-39" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> DEPARTAMENTOS <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_departamentos_professores <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (id_professor) <span class="kw">REFERENCES</span> PROFESSORES (id_professor);</span></code></pre></div>
<hr />
</div>
</div>
<div id="exercÃ­cio-8" class="section level4 hasAnchor" number="4.11.3.8">
<h4 class="hasAnchor"><span class="header-section-number">4.11.3.8</span> ExercÃ­cio #8<a href="#exerc%C3%ADcio-8" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/exercicio-08-resposta.svg" /><!-- --></p>
<div id="exercÃ­cio-8---sql-referÃªnte-ao-diagrama-anterior" class="section level5 hasAnchor" number="4.11.3.8.1">
<h5 class="hasAnchor"><span class="header-section-number">4.11.3.8.1</span> ExercÃ­cio 8 - SQL referÃªnte ao diagrama anterior<a href="#exerc%C3%ADcio-8---sql-refer%C3%AAnte-ao-diagrama-anterior" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb25"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb25-1"><a href="#cb25-1" tabindex="-1"></a></span>
<span id="cb25-2"><a href="#cb25-2" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb25-3"><a href="#cb25-3" tabindex="-1"></a><span class="co">   Criar tabelas (sem PK ou FK)</span></span>
<span id="cb25-4"><a href="#cb25-4" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb25-5"><a href="#cb25-5" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> LIVROS </span>
<span id="cb25-6"><a href="#cb25-6" tabindex="-1"></a>(</span>
<span id="cb25-7"><a href="#cb25-7" tabindex="-1"></a>    id_livro <span class="dt">INT</span>,</span>
<span id="cb25-8"><a href="#cb25-8" tabindex="-1"></a>    titulo <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb25-9"><a href="#cb25-9" tabindex="-1"></a>    ano_publicacao <span class="dt">INT</span>,</span>
<span id="cb25-10"><a href="#cb25-10" tabindex="-1"></a>    editora <span class="dt">VARCHAR</span>(<span class="dv">255</span>)</span>
<span id="cb25-11"><a href="#cb25-11" tabindex="-1"></a>);</span>
<span id="cb25-12"><a href="#cb25-12" tabindex="-1"></a></span>
<span id="cb25-13"><a href="#cb25-13" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> AUTORES </span>
<span id="cb25-14"><a href="#cb25-14" tabindex="-1"></a>(</span>
<span id="cb25-15"><a href="#cb25-15" tabindex="-1"></a>    id_autor <span class="dt">INT</span>,</span>
<span id="cb25-16"><a href="#cb25-16" tabindex="-1"></a>    nome <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb25-17"><a href="#cb25-17" tabindex="-1"></a>    nacionalidade <span class="dt">VARCHAR</span>(<span class="dv">100</span>)</span>
<span id="cb25-18"><a href="#cb25-18" tabindex="-1"></a>);</span>
<span id="cb25-19"><a href="#cb25-19" tabindex="-1"></a></span>
<span id="cb25-20"><a href="#cb25-20" tabindex="-1"></a><span class="co">/* Tabela para relacionamento N:N com atributos */</span></span>
<span id="cb25-21"><a href="#cb25-21" tabindex="-1"></a></span>
<span id="cb25-22"><a href="#cb25-22" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> ESCREVEM </span>
<span id="cb25-23"><a href="#cb25-23" tabindex="-1"></a>(</span>
<span id="cb25-24"><a href="#cb25-24" tabindex="-1"></a>    data_participacao <span class="dt">DATE</span>,</span>
<span id="cb25-25"><a href="#cb25-25" tabindex="-1"></a>    ordem_autoria <span class="dt">INT</span></span>
<span id="cb25-26"><a href="#cb25-26" tabindex="-1"></a>);</span>
<span id="cb25-27"><a href="#cb25-27" tabindex="-1"></a></span>
<span id="cb25-28"><a href="#cb25-28" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb25-29"><a href="#cb25-29" tabindex="-1"></a><span class="co">   Definir chaves primÃ¡rias</span></span>
<span id="cb25-30"><a href="#cb25-30" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb25-31"><a href="#cb25-31" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> LIVROS <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (id_livro);</span>
<span id="cb25-32"><a href="#cb25-32" tabindex="-1"></a></span>
<span id="cb25-33"><a href="#cb25-33" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> AUTORES <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (id_autor);</span>
<span id="cb25-34"><a href="#cb25-34" tabindex="-1"></a></span>
<span id="cb25-35"><a href="#cb25-35" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb25-36"><a href="#cb25-36" tabindex="-1"></a><span class="co">   Criar colunas para futuras chaves estrangeiras</span></span>
<span id="cb25-37"><a href="#cb25-37" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb25-38"><a href="#cb25-38" tabindex="-1"></a></span>
<span id="cb25-39"><a href="#cb25-39" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> ESCREVEM <span class="kw">ADD</span> <span class="kw">COLUMN</span> id_livro <span class="dt">INT</span>, <span class="kw">ADD</span> <span class="kw">COLUMN</span> id_autor <span class="dt">INT</span>;</span>
<span id="cb25-40"><a href="#cb25-40" tabindex="-1"></a></span>
<span id="cb25-41"><a href="#cb25-41" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb25-42"><a href="#cb25-42" tabindex="-1"></a><span class="co">   Criar chaves estrangeiras</span></span>
<span id="cb25-43"><a href="#cb25-43" tabindex="-1"></a><span class="co">   =====================================</span></span>
<span id="cb25-44"><a href="#cb25-44" tabindex="-1"></a></span>
<span id="cb25-45"><a href="#cb25-45" tabindex="-1"></a><span class="co">ALTER TABLE ESCREVEM ADD CONSTRAINT fk_escrevem_livros   FOREIGN KEY (id_livro) REFERENCES LIVROS (id_livro);</span></span>
<span id="cb25-46"><a href="#cb25-46" tabindex="-1"></a></span>
<span id="cb25-47"><a href="#cb25-47" tabindex="-1"></a><span class="co">ALTER TABLE ESCREVEM ADD CONSTRAINT fk_escrevem_autores  FOREIGN KEY (id_autor) REFERENCES AUTORES (id_autor);</span></span>
<span id="cb25-48"><a href="#cb25-48" tabindex="-1"></a></span>
<span id="cb25-49"><a href="#cb25-49" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb25-50"><a href="#cb25-50" tabindex="-1"></a><span class="co">   Definir chave primÃ¡ria composta da tabela ESCREVEM</span></span>
<span id="cb25-51"><a href="#cb25-51" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb25-52"><a href="#cb25-52" tabindex="-1"></a></span>
<span id="cb25-53"><a href="#cb25-53" tabindex="-1"></a><span class="co">ALTER TABLE ESCREVEM  ADD PRIMARY KEY (id_livro, id_autor);</span></span></code></pre></div>
<hr />
</div>
</div>
<div id="exercÃ­cio-9" class="section level4 hasAnchor" number="4.11.3.9">
<h4 class="hasAnchor"><span class="header-section-number">4.11.3.9</span> ExercÃ­cio #9<a href="#exerc%C3%ADcio-9" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/exercicio-09-resposta.svg" /><!-- --></p>
<div id="exercÃ­cio-9---sql-referÃªnte-ao-diagrama-anterior" class="section level5 hasAnchor" number="4.11.3.9.1">
<h5 class="hasAnchor"><span class="header-section-number">4.11.3.9.1</span> ExercÃ­cio 9 - SQL referÃªnte ao diagrama anterior<a href="#exerc%C3%ADcio-9---sql-refer%C3%AAnte-ao-diagrama-anterior" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb26"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb26-1"><a href="#cb26-1" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb26-2"><a href="#cb26-2" tabindex="-1"></a><span class="co">   Criar tabelas (sem PK ou FK)</span></span>
<span id="cb26-3"><a href="#cb26-3" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb26-4"><a href="#cb26-4" tabindex="-1"></a></span>
<span id="cb26-5"><a href="#cb26-5" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> LIVROS </span>
<span id="cb26-6"><a href="#cb26-6" tabindex="-1"></a>(</span>
<span id="cb26-7"><a href="#cb26-7" tabindex="-1"></a>    id_livro <span class="dt">INT</span>,</span>
<span id="cb26-8"><a href="#cb26-8" tabindex="-1"></a>    titulo <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb26-9"><a href="#cb26-9" tabindex="-1"></a>    ano <span class="dt">INT</span></span>
<span id="cb26-10"><a href="#cb26-10" tabindex="-1"></a>);</span>
<span id="cb26-11"><a href="#cb26-11" tabindex="-1"></a></span>
<span id="cb26-12"><a href="#cb26-12" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> EXEMPLARES </span>
<span id="cb26-13"><a href="#cb26-13" tabindex="-1"></a>(</span>
<span id="cb26-14"><a href="#cb26-14" tabindex="-1"></a>    codigo_exemplar <span class="dt">INT</span>,</span>
<span id="cb26-15"><a href="#cb26-15" tabindex="-1"></a>    status <span class="dt">VARCHAR</span>(<span class="dv">50</span>)</span>
<span id="cb26-16"><a href="#cb26-16" tabindex="-1"></a>);</span>
<span id="cb26-17"><a href="#cb26-17" tabindex="-1"></a></span>
<span id="cb26-18"><a href="#cb26-18" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb26-19"><a href="#cb26-19" tabindex="-1"></a><span class="co">   Definir chaves primÃ¡rias</span></span>
<span id="cb26-20"><a href="#cb26-20" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb26-21"><a href="#cb26-21" tabindex="-1"></a></span>
<span id="cb26-22"><a href="#cb26-22" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> LIVROS <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (id_livro);</span>
<span id="cb26-23"><a href="#cb26-23" tabindex="-1"></a></span>
<span id="cb26-24"><a href="#cb26-24" tabindex="-1"></a><span class="co">/* A chave primÃ¡ria de EXEMPLARES serÃ¡ composta depois, usando FK + codigo_exemplar */</span></span>
<span id="cb26-25"><a href="#cb26-25" tabindex="-1"></a></span>
<span id="cb26-26"><a href="#cb26-26" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb26-27"><a href="#cb26-27" tabindex="-1"></a><span class="co">   Criar coluna para futura chave estrangeira</span></span>
<span id="cb26-28"><a href="#cb26-28" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb26-29"><a href="#cb26-29" tabindex="-1"></a><span class="co">-- Relacionamento LIVROS 1:N EXEMPLARES</span></span>
<span id="cb26-30"><a href="#cb26-30" tabindex="-1"></a></span>
<span id="cb26-31"><a href="#cb26-31" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> EXEMPLARES <span class="kw">ADD</span> <span class="kw">COLUMN</span> id_livro <span class="dt">INT</span>;</span>
<span id="cb26-32"><a href="#cb26-32" tabindex="-1"></a></span>
<span id="cb26-33"><a href="#cb26-33" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb26-34"><a href="#cb26-34" tabindex="-1"></a><span class="co">   Criar chave estrangeira</span></span>
<span id="cb26-35"><a href="#cb26-35" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb26-36"><a href="#cb26-36" tabindex="-1"></a></span>
<span id="cb26-37"><a href="#cb26-37" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> EXEMPLARES <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_exemplares_livros <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (id_livro) <span class="kw">REFERENCES</span> LIVROS (id_livro);</span>
<span id="cb26-38"><a href="#cb26-38" tabindex="-1"></a></span>
<span id="cb26-39"><a href="#cb26-39" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb26-40"><a href="#cb26-40" tabindex="-1"></a><span class="co">   Definir chave primÃ¡ria composta da tabela EXEMPLARES</span></span>
<span id="cb26-41"><a href="#cb26-41" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb26-42"><a href="#cb26-42" tabindex="-1"></a></span>
<span id="cb26-43"><a href="#cb26-43" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> EXEMPLARES <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (id_livro, codigo_exemplar);</span>
<span id="cb26-44"><a href="#cb26-44" tabindex="-1"></a></span></code></pre></div>
<hr />
</div>
</div>
<div id="exercÃ­cio-10" class="section level4 hasAnchor" number="4.11.3.10">
<h4 class="hasAnchor"><span class="header-section-number">4.11.3.10</span> ExercÃ­cio #10<a href="#exerc%C3%ADcio-10" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/exercicio-10-resposta.svg" /><!-- --></p>
<div id="exercÃ­cio-10---sql-referÃªnte-ao-diagrama-anterior" class="section level5 hasAnchor" number="4.11.3.10.1">
<h5 class="hasAnchor"><span class="header-section-number">4.11.3.10.1</span> ExercÃ­cio 10 - SQL referÃªnte ao diagrama anterior<a href="#exerc%C3%ADcio-10---sql-refer%C3%AAnte-ao-diagrama-anterior" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<div class="sourceCode" id="cb27"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb27-1"><a href="#cb27-1" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb27-2"><a href="#cb27-2" tabindex="-1"></a><span class="co">   Criar tabelas (sem PK ou FK)</span></span>
<span id="cb27-3"><a href="#cb27-3" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb27-4"><a href="#cb27-4" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> EMPRESAS (</span>
<span id="cb27-5"><a href="#cb27-5" tabindex="-1"></a>    id_empresa <span class="dt">INT</span>,</span>
<span id="cb27-6"><a href="#cb27-6" tabindex="-1"></a>    nome <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb27-7"><a href="#cb27-7" tabindex="-1"></a>    cnpj <span class="dt">CHAR</span>(<span class="dv">14</span>),</span>
<span id="cb27-8"><a href="#cb27-8" tabindex="-1"></a>    endereco <span class="dt">VARCHAR</span>(<span class="dv">255</span>)</span>
<span id="cb27-9"><a href="#cb27-9" tabindex="-1"></a>);</span>
<span id="cb27-10"><a href="#cb27-10" tabindex="-1"></a></span>
<span id="cb27-11"><a href="#cb27-11" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> FUNCIONARIOS (</span>
<span id="cb27-12"><a href="#cb27-12" tabindex="-1"></a>    id_funcionario <span class="dt">INT</span>,</span>
<span id="cb27-13"><a href="#cb27-13" tabindex="-1"></a>    nome <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb27-14"><a href="#cb27-14" tabindex="-1"></a>    cargo <span class="dt">VARCHAR</span>(<span class="dv">100</span>),</span>
<span id="cb27-15"><a href="#cb27-15" tabindex="-1"></a>    salario <span class="dt">DECIMAL</span>(<span class="dv">10</span>,<span class="dv">2</span>)</span>
<span id="cb27-16"><a href="#cb27-16" tabindex="-1"></a>);</span>
<span id="cb27-17"><a href="#cb27-17" tabindex="-1"></a></span>
<span id="cb27-18"><a href="#cb27-18" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> PROJETOS (</span>
<span id="cb27-19"><a href="#cb27-19" tabindex="-1"></a>    id_projeto <span class="dt">INT</span>,</span>
<span id="cb27-20"><a href="#cb27-20" tabindex="-1"></a>    nome <span class="dt">VARCHAR</span>(<span class="dv">255</span>),</span>
<span id="cb27-21"><a href="#cb27-21" tabindex="-1"></a>    data_inicio <span class="dt">DATE</span>,</span>
<span id="cb27-22"><a href="#cb27-22" tabindex="-1"></a>    data_fim <span class="dt">DATE</span>,</span>
<span id="cb27-23"><a href="#cb27-23" tabindex="-1"></a>    descricao <span class="dt">VARCHAR</span>(<span class="dv">255</span>)</span>
<span id="cb27-24"><a href="#cb27-24" tabindex="-1"></a>);</span>
<span id="cb27-25"><a href="#cb27-25" tabindex="-1"></a></span>
<span id="cb27-26"><a href="#cb27-26" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> PARTICIPAM (</span>
<span id="cb27-27"><a href="#cb27-27" tabindex="-1"></a>    data_inicio <span class="dt">DATE</span>,</span>
<span id="cb27-28"><a href="#cb27-28" tabindex="-1"></a>    data_fim <span class="dt">DATE</span>,</span>
<span id="cb27-29"><a href="#cb27-29" tabindex="-1"></a>    papel <span class="dt">VARCHAR</span>(<span class="dv">100</span>)</span>
<span id="cb27-30"><a href="#cb27-30" tabindex="-1"></a>);</span>
<span id="cb27-31"><a href="#cb27-31" tabindex="-1"></a></span>
<span id="cb27-32"><a href="#cb27-32" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb27-33"><a href="#cb27-33" tabindex="-1"></a><span class="co">   Definir chaves primÃ¡rias</span></span>
<span id="cb27-34"><a href="#cb27-34" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb27-35"><a href="#cb27-35" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> EMPRESAS <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (id_empresa);</span>
<span id="cb27-36"><a href="#cb27-36" tabindex="-1"></a></span>
<span id="cb27-37"><a href="#cb27-37" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> FUNCIONARIOS <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (id_funcionario);</span>
<span id="cb27-38"><a href="#cb27-38" tabindex="-1"></a></span>
<span id="cb27-39"><a href="#cb27-39" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> PROJETOS <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (id_projeto);</span>
<span id="cb27-40"><a href="#cb27-40" tabindex="-1"></a></span>
<span id="cb27-41"><a href="#cb27-41" tabindex="-1"></a><span class="co">/* A tabela PARTICIPAM terÃ¡ PK composta, definida depois */</span></span>
<span id="cb27-42"><a href="#cb27-42" tabindex="-1"></a></span>
<span id="cb27-43"><a href="#cb27-43" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb27-44"><a href="#cb27-44" tabindex="-1"></a><span class="co">   Criar colunas para futuras chaves estrangeiras</span></span>
<span id="cb27-45"><a href="#cb27-45" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb27-46"><a href="#cb27-46" tabindex="-1"></a><span class="co">-- Relacionamento EMPRESAS 1:N FUNCIONARIOS</span></span>
<span id="cb27-47"><a href="#cb27-47" tabindex="-1"></a></span>
<span id="cb27-48"><a href="#cb27-48" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> FUNCIONARIOS  <span class="kw">ADD</span> <span class="kw">COLUMN</span> id_empresa <span class="dt">INT</span>;</span>
<span id="cb27-49"><a href="#cb27-49" tabindex="-1"></a></span>
<span id="cb27-50"><a href="#cb27-50" tabindex="-1"></a><span class="co">-- Relacionamento FUNCIONARIOS N:N PROJETOS</span></span>
<span id="cb27-51"><a href="#cb27-51" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> PARTICIPAM <span class="kw">ADD</span> <span class="kw">COLUMN</span> id_funcionario <span class="dt">INT</span>, <span class="kw">ADD</span> <span class="kw">COLUMN</span> id_projeto <span class="dt">INT</span>;</span>
<span id="cb27-52"><a href="#cb27-52" tabindex="-1"></a></span>
<span id="cb27-53"><a href="#cb27-53" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb27-54"><a href="#cb27-54" tabindex="-1"></a><span class="co">   Criar chaves estrangeiras</span></span>
<span id="cb27-55"><a href="#cb27-55" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb27-56"><a href="#cb27-56" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> FUNCIONARIOS <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_funcionarios_empresas <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (id_empresa) <span class="kw">REFERENCES</span> EMPRESAS (id_empresa);</span>
<span id="cb27-57"><a href="#cb27-57" tabindex="-1"></a></span>
<span id="cb27-58"><a href="#cb27-58" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> PARTICIPAM <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_participam_funcionarios <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (id_funcionario) <span class="kw">REFERENCES</span> FUNCIONARIOS (id_funcionario);</span>
<span id="cb27-59"><a href="#cb27-59" tabindex="-1"></a></span>
<span id="cb27-60"><a href="#cb27-60" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> PARTICIPAM <span class="kw">ADD</span> <span class="kw">CONSTRAINT</span> fk_participam_projetos <span class="kw">FOREIGN</span> <span class="kw">KEY</span> (id_projeto) <span class="kw">REFERENCES</span> PROJETOS (id_projeto);</span>
<span id="cb27-61"><a href="#cb27-61" tabindex="-1"></a></span>
<span id="cb27-62"><a href="#cb27-62" tabindex="-1"></a><span class="co">/* =========================================================</span></span>
<span id="cb27-63"><a href="#cb27-63" tabindex="-1"></a><span class="co">   Definir chave primÃ¡ria composta da tabela PARTICIPAM</span></span>
<span id="cb27-64"><a href="#cb27-64" tabindex="-1"></a><span class="co">   ========================================================= */</span></span>
<span id="cb27-65"><a href="#cb27-65" tabindex="-1"></a></span>
<span id="cb27-66"><a href="#cb27-66" tabindex="-1"></a><span class="kw">ALTER</span> <span class="kw">TABLE</span> PARTICIPAM <span class="kw">ADD</span> <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (id_funcionario, id_projeto);</span>
<span id="cb27-67"><a href="#cb27-67" tabindex="-1"></a></span></code></pre></div>
<hr />
<!--chapter:end:03-2026-03-03_Modelagem_SGBD-exercicio.Rmd-->
</div>
</div>
</div>
</div>
</div>
<div id="administraÃ§Ã£o-e-gerenciamento-de-bancos-de-dados" class="section level1 hasAnchor" number="5">
<h1 class="hasAnchor"><span class="header-section-number">5</span> AdministraÃ§Ã£o e Gerenciamento de Bancos de Dados<a href="#administra%C3%A7%C3%A3o-e-gerenciamento-de-bancos-de-dados" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="section-3" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">25/08/2025<a href="#section-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="professor-miguÃ©l-suares-3" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">Professor MiguÃ©l Suares<a href="#professor-migu%C3%A9l-suares-3" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="administraÃ§Ã£o-e-gerenciamento-de-banco-de-dados" class="section level2 hasAnchor" number="5.1">
<h2 class="hasAnchor"><span class="header-section-number">5.1</span> AdministraÃ§Ã£o e Gerenciamento de Banco de Dados:<a href="#administra%C3%A7%C3%A3o-e-gerenciamento-de-banco-de-dados" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Por que administraÃ§Ã£o e gerenciamento sÃ£o fundamentais</p>
<ul>
<li><p>Integridade e consistÃªncia</p></li>
<li><p>Garantir que as regras de negÃ³cio (restriÃ§Ãµes, chaves, relacionamentos) sejam sempre respeitadas.</p></li>
<li><p>Evitar dados duplicados ou incoerentes.</p></li>
<li><p>Disponibilidade e recuperaÃ§Ã£o</p></li>
<li><p>Planejar backup e restore; criar polÃ­ticas de alta disponibilidade e contingÃªncia para falhas ou desastres.</p></li>
<li><p>SeguranÃ§a e controle de acesso</p></li>
<li><p>Definir quem pode ver, inserir, alterar ou excluir dados.</p></li>
<li><p>Atender requisitos de LGPD/privacidade e normas corporativas.</p></li>
<li><p>Desempenho e escalabilidade</p></li>
<li><p>Monitorar consultas lentas, criar Ã­ndices adequados, ajustar parÃ¢metros do SGBD para suportar crescimento do volume de dados.</p></li>
<li><p>ManutenÃ§Ã£o e evoluÃ§Ã£o</p></li>
<li><p>Atualizar versÃµes, aplicar patches, revisar modelos de dados Ã  medida que a aplicaÃ§Ã£o muda.</p></li>
</ul>
</div>
<div id="papel-do-dba-database-administrator" class="section level2 hasAnchor" number="5.2">
<h2 class="hasAnchor"><span class="header-section-number">5.2</span> Papel do DBA (Database Administrator)<a href="#papel-do-dba-database-administrator" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>O DBA Ã© o profissional responsÃ¡vel por orquestrar tudo isso.Principais atribuiÃ§Ãµes:</p>
<ul>
<li><p>Projeto fÃ­sico do banco (estrutura de tabelas, Ã­ndices, partiÃ§Ãµes).</p></li>
<li><p>GestÃ£o de usuÃ¡rios e permissÃµes â€“ criaÃ§Ã£o de contas, papÃ©is (roles), polÃ­ticas de seguranÃ§a.</p></li>
<li><p>Backup e recuperaÃ§Ã£o â€“ polÃ­ticas de backup, testes de restauraÃ§Ã£o.</p></li>
<li><p>Monitoramento de desempenho â€“ tuning de consultas, manutenÃ§Ã£o de Ã­ndices, anÃ¡lise de logs.</p></li>
<li><p>Planejamento de capacidade â€“ prever crescimento, escalabilidade e uso de recursos.</p></li>
<li><p>AtualizaÃ§Ãµes e patches â€“ manter o SGBD seguro e estÃ¡vel.</p></li>
</ul>
<p>Sem administraÃ§Ã£o e gerenciamento adequados, um banco de dados vira um â€œdepÃ³sito de riscosâ€: falhas, lentidÃ£o, vazamento de informaÃ§Ãµes ou perda definitiva de dados. O DBA atua como guardiÃ£o da informaÃ§Ã£o, garantindo que ela esteja correta, segura, disponÃ­vel e performÃ¡tica, sustentando todas as operaÃ§Ãµes da organizaÃ§Ã£o.</p>
</div>
<div id="usuÃ¡rios-grupos-e-esquemas-de-bancos-de-dados" class="section level2 hasAnchor" number="5.3">
<h2 class="hasAnchor"><span class="header-section-number">5.3</span> UsuÃ¡rios, Grupos e Esquemas de Bancos de Dados<a href="#usu%C3%A1rios-grupos-e-esquemas-de-bancos-de-dados" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="usuÃ¡rios" class="section level3 hasAnchor" number="5.3.1">
<h3 class="hasAnchor"><span class="header-section-number">5.3.1</span> UsuÃ¡rios<a href="#usu%C3%A1rios" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>O que sÃ£o ? Contas individuais que representam pessoas, aplicaÃ§Ãµes ou serviÃ§os que acessam o banco.Cada usuÃ¡rio possui um nome de login e, geralmente, uma senha ou outro mÃ©todo de autenticaÃ§Ã£o.</p>
<div id="funÃ§Ãµes-principal" class="section level4 hasAnchor" number="5.3.1.1">
<h4 class="hasAnchor"><span class="header-section-number">5.3.1.1</span> FunÃ§Ãµes principal<a href="#fun%C3%A7%C3%B5es-principal" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Conectar-se ao SGBD.</p></li>
<li><p>Executar operaÃ§Ãµes de leitura, escrita ou administraÃ§Ã£o conforme os privilÃ©gios concedidos.</p></li>
</ul>
</div>
<div id="privilÃ©gios" class="section level4 hasAnchor" number="5.3.1.2">
<h4 class="hasAnchor"><span class="header-section-number">5.3.1.2</span> PrivilÃ©gios:<a href="#privil%C3%A9gios" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Podem ser especÃ­ficos (ex.: SELECT em uma tabela) ou globais (ex.: CREATE DATABASE).</p>
<p>SÃ£o a base do controle de acesso.</p>
</div>
</div>
<div id="esquemas" class="section level3 hasAnchor" number="5.3.2">
<h3 class="hasAnchor"><span class="header-section-number">5.3.2</span> Esquemas<a href="#esquemas" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>O que sÃ£o ? Um esquema Ã© um container lÃ³gico de objetos do banco de dados. Ele organiza tabelas, views, funÃ§Ãµes, procedures, Ã­ndices, triggers etc.</p>
<div id="por-que-usar" class="section level4 hasAnchor" number="5.3.2.1">
<h4 class="hasAnchor"><span class="header-section-number">5.3.2.1</span> Por que usar<a href="#por-que-usar" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Facilita a organizaÃ§Ã£o (por projeto, por aplicaÃ§Ã£o, por departamento).</p></li>
<li><p>Permite gestÃ£o de permissÃµes mais granular: vocÃª pode conceder privilÃ©gios em nÃ­vel de esquema.</p></li>
<li><p>Evita conflitos de nomes, pois objetos com o mesmo nome podem existir em esquemas diferentes.</p></li>
</ul>
</div>
</div>
<div id="grupos-ou-roles" class="section level3 hasAnchor" number="5.3.3">
<h3 class="hasAnchor"><span class="header-section-number">5.3.3</span> Grupos ou Roles<a href="#grupos-ou-roles" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>O que sÃ£o ? PapÃ©is coletivos que agrupam permissÃµes e, muitas vezes, usuÃ¡rios.</p>
<p>No MySQL: CREATE ROLE â€¦</p>
<p>No PostgreSQL: roles podem ser usuÃ¡rios ou grupos.</p>
<div id="vantagens" class="section level4 hasAnchor" number="5.3.3.1">
<h4 class="hasAnchor"><span class="header-section-number">5.3.3.1</span> Vantagens<a href="#vantagens" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<ul>
<li><p>Gerenciamento simplificado: conceda privilÃ©gios ao grupo e depois apenas adicione/remova usuÃ¡rios.</p></li>
<li><p>ConsistÃªncia: garante que todos de uma equipe tenham as mesmas permissÃµes.</p></li>
<li><p>Escalabilidade: ao entrar um novo membro, basta associÃ¡-lo ao role, sem revisar dezenas de tabelas.</p></li>
</ul>
</div>
</div>
<div id="sistema-de-gerenciamento-de-banco-de-dados-s.g.b.d." class="section level3 hasAnchor" number="5.3.4">
<h3 class="hasAnchor"><span class="header-section-number">5.3.4</span> Sistema de Gerenciamento de Banco de Dados (S.G.B.D.)<a href="#sistema-de-gerenciamento-de-banco-de-dados-s.g.b.d." class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>O Sistema de Gerenciamento de Banco de Dados cuida nÃ£o sÃ³ de como as informaÃ§Ãµes sÃ£o armazenadas, mas tambÃ©m quem pode acessa-las, sob quais condiÃ§Ãµes.</p>
<p><img src="images/clipboard-497127793.png" /></p>
</div>
<div id="criaÃ§Ã£o-de-usuÃ¡rios-no-mysql" class="section level3 hasAnchor" number="5.3.5">
<h3 class="hasAnchor"><span class="header-section-number">5.3.5</span> CriaÃ§Ã£o de usuÃ¡rios no MySQL<a href="#cria%C3%A7%C3%A3o-de-usu%C3%A1rios-no-mysql" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Podemos criar um novo usuÃ¡rio no SGBD MySQL atravÃ©s do seguinte comando SQL-DCL:</p>
<div class="sourceCode" id="cb28"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb28-1"><a href="#cb28-1" tabindex="-1"></a><span class="kw">CREATE</span> <span class="fu">USER</span> <span class="st">&#39;nome_login&#39;</span>@<span class="st">&#39;host&#39;</span> <span class="kw">IDENTIFIED</span> <span class="kw">BY</span> <span class="st">&#39;senha&#39;</span> <span class="kw">COMMENT</span> <span class="st">&#39;descriÃ§Ã£o&#39;</span>;</span></code></pre></div>
<table>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th align="center">Parte</th>
<th align="center">FunÃ§Ã£o</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">â€˜nome_loginâ€™</td>
<td align="center">Nome de login do novo usuÃ¡rio.</td>
</tr>
<tr class="even">
<td align="center">â€˜hostâ€™</td>
<td align="center">Origem permitida de conexÃ£o.</td>
</tr>
<tr class="odd">
<td align="center">IDENTIFIED BY â€˜senhaâ€™</td>
<td align="center">Define a senha inicial.</td>
</tr>
<tr class="even">
<td align="center">COMMENT â€˜descriÃ§Ã£oâ€™</td>
<td align="center">(Opcional) Uma anotaÃ§Ã£o de texto para identificar o usuÃ¡rio.</td>
</tr>
</tbody>
</table>
<p>Exemplo 1:</p>
<p>Crie o usuÃ¡rio do aluno â€œBruno Marquesâ€. O usuÃ¡rio deve ser o RA do aluno e a sua senha deve ser <em>unip</em>.</p>
<div class="sourceCode" id="cb29"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb29-1"><a href="#cb29-1" tabindex="-1"></a><span class="kw">CREATE</span> <span class="fu">USER</span> <span class="st">&#39;f362bf0&#39;</span>@<span class="st">&#39;%&#39;</span> <span class="kw">IDENTIFIED</span> <span class="kw">BY</span> <span class="st">&#39;unip&#39;</span> <span class="kw">COMMENT</span> <span class="st">&#39;Bruno Antonio Marques&#39;</span>;</span></code></pre></div>
<p>Exemplo 2:</p>
<p>Crie os usuÃ¡rios de todos os alunos da sala. O usuÃ¡rio deve ser o RA do aluno e a sua senha deve ser <em>unip</em>.</p>
<div class="sourceCode" id="cb30"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb30-1"><a href="#cb30-1" tabindex="-1"></a></span>
<span id="cb30-2"><a href="#cb30-2" tabindex="-1"></a><span class="co">-- turma TI2P40</span></span>
<span id="cb30-3"><a href="#cb30-3" tabindex="-1"></a></span>
<span id="cb30-4"><a href="#cb30-4" tabindex="-1"></a><span class="co">-- usuÃ¡rios no MySQL</span></span>
<span id="cb30-5"><a href="#cb30-5" tabindex="-1"></a></span>
<span id="cb30-6"><a href="#cb30-6" tabindex="-1"></a><span class="kw">DROP</span> <span class="fu">USER</span> <span class="cf">IF</span> <span class="kw">EXISTS</span> <span class="st">&#39;f362bf0&#39;</span>@<span class="st">&#39;%&#39;</span>; <span class="co">-- apaga o &#39;Bruno Antonio Marques&#39;;</span></span>
<span id="cb30-7"><a href="#cb30-7" tabindex="-1"></a><span class="kw">DROP</span> <span class="fu">USER</span> <span class="cf">IF</span> <span class="kw">EXISTS</span> <span class="st">&#39;r536fa6&#39;</span>@<span class="st">&#39;%&#39;</span>; <span class="co">-- apaga o &#39;Caio Cesar Balbino Da Silva&#39;;</span></span>
<span id="cb30-8"><a href="#cb30-8" tabindex="-1"></a><span class="kw">DROP</span> <span class="fu">USER</span> <span class="cf">IF</span> <span class="kw">EXISTS</span> <span class="st">&#39;h756960&#39;</span>@<span class="st">&#39;%&#39;</span>; <span class="co">-- apaga o &#39;Heder Rodrigues Da Silva&#39;;</span></span>
<span id="cb30-9"><a href="#cb30-9" tabindex="-1"></a><span class="kw">DROP</span> <span class="fu">USER</span> <span class="cf">IF</span> <span class="kw">EXISTS</span> <span class="st">&#39;r8133g7&#39;</span>@<span class="st">&#39;%&#39;</span>; <span class="co">-- apaga o &#39;Ãtalo Kevin Rodrigues Da Silva&#39;;</span></span>
<span id="cb30-10"><a href="#cb30-10" tabindex="-1"></a><span class="kw">DROP</span> <span class="fu">USER</span> <span class="cf">IF</span> <span class="kw">EXISTS</span> <span class="st">&#39;r837aa0&#39;</span>@<span class="st">&#39;%&#39;</span>; <span class="co">-- apaga o &#39;Lucas Souza Rodrigues&#39;;</span></span>
<span id="cb30-11"><a href="#cb30-11" tabindex="-1"></a><span class="kw">DROP</span> <span class="fu">USER</span> <span class="cf">IF</span> <span class="kw">EXISTS</span> <span class="st">&#39;h714419&#39;</span>@<span class="st">&#39;%&#39;</span>; <span class="co">-- apaga o &#39;Marcos Paulo Cordeiro Goes&#39;;</span></span>
<span id="cb30-12"><a href="#cb30-12" tabindex="-1"></a><span class="kw">DROP</span> <span class="fu">USER</span> <span class="cf">IF</span> <span class="kw">EXISTS</span> <span class="st">&#39;r854124&#39;</span>@<span class="st">&#39;%&#39;</span>; <span class="co">-- apaga o &#39;Ramon Borges De Holanda&#39;;</span></span>
<span id="cb30-13"><a href="#cb30-13" tabindex="-1"></a></span>
<span id="cb30-14"><a href="#cb30-14" tabindex="-1"></a></span>
<span id="cb30-15"><a href="#cb30-15" tabindex="-1"></a><span class="kw">CREATE</span> <span class="fu">USER</span> <span class="st">&#39;f362bf0&#39;</span>@<span class="st">&#39;%&#39;</span> <span class="kw">IDENTIFIED</span> <span class="kw">BY</span> <span class="st">&#39;unip&#39;</span> <span class="kw">COMMENT</span>  <span class="st">&#39;Bruno Antonio Marques&#39;</span>;</span>
<span id="cb30-16"><a href="#cb30-16" tabindex="-1"></a><span class="kw">CREATE</span> <span class="fu">USER</span> <span class="st">&#39;r536fa6&#39;</span>@<span class="st">&#39;%&#39;</span> <span class="kw">IDENTIFIED</span> <span class="kw">BY</span> <span class="st">&#39;unip&#39;</span> <span class="kw">COMMENT</span>  <span class="st">&#39;Caio Cesar Balbino Da Silva&#39;</span>;</span>
<span id="cb30-17"><a href="#cb30-17" tabindex="-1"></a><span class="kw">CREATE</span> <span class="fu">USER</span> <span class="st">&#39;h756960&#39;</span>@<span class="st">&#39;%&#39;</span> <span class="kw">IDENTIFIED</span> <span class="kw">BY</span> <span class="st">&#39;unip&#39;</span> <span class="kw">COMMENT</span>  <span class="st">&#39;Heder Rodrigues Da Silva&#39;</span>;</span>
<span id="cb30-18"><a href="#cb30-18" tabindex="-1"></a><span class="kw">CREATE</span> <span class="fu">USER</span> <span class="st">&#39;r8133g7&#39;</span>@<span class="st">&#39;%&#39;</span> <span class="kw">IDENTIFIED</span> <span class="kw">BY</span> <span class="st">&#39;unip&#39;</span> <span class="kw">COMMENT</span>  <span class="st">&#39;Ãtalo Kevin Rodrigues Da Silva&#39;</span>;</span>
<span id="cb30-19"><a href="#cb30-19" tabindex="-1"></a><span class="kw">CREATE</span> <span class="fu">USER</span> <span class="st">&#39;r837aa0&#39;</span>@<span class="st">&#39;%&#39;</span> <span class="kw">IDENTIFIED</span> <span class="kw">BY</span> <span class="st">&#39;unip&#39;</span> <span class="kw">COMMENT</span>  <span class="st">&#39;Lucas Souza Rodrigues&#39;</span>;</span>
<span id="cb30-20"><a href="#cb30-20" tabindex="-1"></a><span class="kw">CREATE</span> <span class="fu">USER</span> <span class="st">&#39;h714419&#39;</span>@<span class="st">&#39;%&#39;</span> <span class="kw">IDENTIFIED</span> <span class="kw">BY</span> <span class="st">&#39;unip&#39;</span> <span class="kw">COMMENT</span>  <span class="st">&#39;Marcos Paulo Cordeiro Goes&#39;</span>;</span>
<span id="cb30-21"><a href="#cb30-21" tabindex="-1"></a><span class="kw">CREATE</span> <span class="fu">USER</span> <span class="st">&#39;r854124&#39;</span>@<span class="st">&#39;%&#39;</span> <span class="kw">IDENTIFIED</span> <span class="kw">BY</span> <span class="st">&#39;unip&#39;</span> <span class="kw">COMMENT</span>  <span class="st">&#39;Ramon Borges De Holanda&#39;</span>;</span>
<span id="cb30-22"><a href="#cb30-22" tabindex="-1"></a></span>
<span id="cb30-23"><a href="#cb30-23" tabindex="-1"></a><span class="co">-- turma TI1P40</span></span>
<span id="cb30-24"><a href="#cb30-24" tabindex="-1"></a></span>
<span id="cb30-25"><a href="#cb30-25" tabindex="-1"></a><span class="kw">DROP</span> <span class="fu">USER</span> <span class="cf">IF</span> <span class="kw">EXISTS</span> <span class="st">&#39;n0296a6&#39;</span>@<span class="st">&#39;%&#39;</span>; <span class="co">-- apaga o &#39;Bryan Lucena Barbosa Da Silva&#39;;</span></span>
<span id="cb30-26"><a href="#cb30-26" tabindex="-1"></a><span class="kw">DROP</span> <span class="fu">USER</span> <span class="cf">IF</span> <span class="kw">EXISTS</span> <span class="st">&#39;h788986&#39;</span>@<span class="st">&#39;%&#39;</span>; <span class="co">-- apaga o &#39;Igor Soares Lima Da Cunha&#39;;</span></span>
<span id="cb30-27"><a href="#cb30-27" tabindex="-1"></a><span class="kw">DROP</span> <span class="fu">USER</span> <span class="cf">IF</span> <span class="kw">EXISTS</span> <span class="st">&#39;h77gii5&#39;</span>@<span class="st">&#39;%&#39;</span>; <span class="co">-- apaga o &#39;Jessica Cristina De S Silva&#39;;</span></span>
<span id="cb30-28"><a href="#cb30-28" tabindex="-1"></a><span class="kw">DROP</span> <span class="fu">USER</span> <span class="cf">IF</span> <span class="kw">EXISTS</span> <span class="st">&#39;f3648i0&#39;</span>@<span class="st">&#39;%&#39;</span>; <span class="co">-- apaga o &#39;Maysa Kelly Dos Santos Freitas&#39;;</span></span>
<span id="cb30-29"><a href="#cb30-29" tabindex="-1"></a></span>
<span id="cb30-30"><a href="#cb30-30" tabindex="-1"></a></span>
<span id="cb30-31"><a href="#cb30-31" tabindex="-1"></a><span class="kw">CREATE</span> <span class="fu">USER</span> <span class="st">&#39;n0296a6&#39;</span>@<span class="st">&#39;%&#39;</span> <span class="kw">IDENTIFIED</span> <span class="kw">BY</span> <span class="st">&#39;unip&#39;</span> <span class="kw">COMMENT</span>  <span class="st">&#39;Bryan Lucena Barbosa Da Silva&#39;</span>;</span>
<span id="cb30-32"><a href="#cb30-32" tabindex="-1"></a><span class="kw">CREATE</span> <span class="fu">USER</span> <span class="st">&#39;h788986&#39;</span>@<span class="st">&#39;%&#39;</span> <span class="kw">IDENTIFIED</span> <span class="kw">BY</span> <span class="st">&#39;unip&#39;</span> <span class="kw">COMMENT</span>  <span class="st">&#39;Igor Soares Lima Da Cunha&#39;</span>;</span>
<span id="cb30-33"><a href="#cb30-33" tabindex="-1"></a><span class="kw">CREATE</span> <span class="fu">USER</span> <span class="st">&#39;h77gii5&#39;</span>@<span class="st">&#39;%&#39;</span> <span class="kw">IDENTIFIED</span> <span class="kw">BY</span> <span class="st">&#39;unip&#39;</span> <span class="kw">COMMENT</span>  <span class="st">&#39;Jessica Cristina De S Silva&#39;</span>;</span>
<span id="cb30-34"><a href="#cb30-34" tabindex="-1"></a><span class="kw">CREATE</span> <span class="fu">USER</span> <span class="st">&#39;f3648i0&#39;</span>@<span class="st">&#39;%&#39;</span> <span class="kw">IDENTIFIED</span> <span class="kw">BY</span> <span class="st">&#39;unip&#39;</span> <span class="kw">COMMENT</span>  <span class="st">&#39;Maysa Kelly Dos Santos Freitas&#39;</span>;</span></code></pre></div>
</div>
<div id="criaÃ§Ã£o-de-esquemas-de-banco-de-dados-no-mysql" class="section level3 hasAnchor" number="5.3.6">
<h3 class="hasAnchor"><span class="header-section-number">5.3.6</span> CriaÃ§Ã£o de Esquemas de Banco de Dados no MySQL<a href="#cria%C3%A7%C3%A3o-de-esquemas-de-banco-de-dados-no-mysql" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>No MySQL, schema e database sÃ£o sinÃ´nimos. Ã‰ o â€œcontÃªinerâ€ onde ficam tabelas, views, procedures, usuÃ¡rios com permissÃµes etc.</p>
<div class="sourceCode" id="cb31"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb31-1"><a href="#cb31-1" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> [<span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span>] nome_do_schema  [OPTIONS];</span></code></pre></div>
<table>
<thead>
<tr class="header">
<th>CREATE DATABASE: cria um novo banco.</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>IF NOT EXISTS: evita erro caso o schema jÃ¡ exista.</td>
</tr>
<tr class="even">
<td>nome_do_schema: nome do banco.</td>
</tr>
<tr class="odd">
<td>[OPTIONS]: parÃ¢metros opcionais como CHARACTER SET ou COLLATE</td>
</tr>
</tbody>
</table>
<p>Exemplo 1:</p>
<p>Crie um esquema de Banco de Dados onde chamado 11-rondonia para guardar a tabela â€œCidadesâ€;</p>
<div class="sourceCode" id="cb32"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb32-1"><a href="#cb32-1" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">11</span><span class="op">-</span>rondonia`;</span></code></pre></div>
<p>Exemplo 2:</p>
<p>Crie um esquema de Banco de Dados de todas as Unidades da FederaÃ§Ã£o para guardar tabelas â€œCidadesâ€ dentro de cada uma:</p>
<div class="sourceCode" id="cb33"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb33-1"><a href="#cb33-1" tabindex="-1"></a><span class="co">-- Script para criar um esquema (database) para cada UF brasileira</span></span>
<span id="cb33-2"><a href="#cb33-2" tabindex="-1"></a><span class="co">-- Nome do esquema: &lt;cÃ³digo IBGE&gt;-&lt;nome_uf&gt;</span></span>
<span id="cb33-3"><a href="#cb33-3" tabindex="-1"></a><span class="co">-- Ordenado pelo cÃ³digo IBGE</span></span>
<span id="cb33-4"><a href="#cb33-4" tabindex="-1"></a><span class="co">-- CompatÃ­vel com MySQL 8</span></span>
<span id="cb33-5"><a href="#cb33-5" tabindex="-1"></a></span>
<span id="cb33-6"><a href="#cb33-6" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">11</span><span class="op">-</span>rondonia`;</span>
<span id="cb33-7"><a href="#cb33-7" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">12</span><span class="op">-</span>acre`;</span>
<span id="cb33-8"><a href="#cb33-8" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">13</span><span class="op">-</span>amazonas`;</span>
<span id="cb33-9"><a href="#cb33-9" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">14</span><span class="op">-</span>roraima`;</span>
<span id="cb33-10"><a href="#cb33-10" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">15</span><span class="op">-</span>para`;</span>
<span id="cb33-11"><a href="#cb33-11" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">16</span><span class="op">-</span>amapa`;</span>
<span id="cb33-12"><a href="#cb33-12" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">17</span><span class="op">-</span>tocantins`;</span>
<span id="cb33-13"><a href="#cb33-13" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">21</span><span class="op">-</span>maranhao`;</span>
<span id="cb33-14"><a href="#cb33-14" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">22</span><span class="op">-</span>piaui`;</span>
<span id="cb33-15"><a href="#cb33-15" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">23</span><span class="op">-</span>ceara`;</span>
<span id="cb33-16"><a href="#cb33-16" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">24</span><span class="op">-</span>rio_grande_do_norte`;</span>
<span id="cb33-17"><a href="#cb33-17" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">25</span><span class="op">-</span>paraiba`;</span>
<span id="cb33-18"><a href="#cb33-18" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">26</span><span class="op">-</span>pernambuco`;</span>
<span id="cb33-19"><a href="#cb33-19" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">27</span><span class="op">-</span>alagoas`;</span>
<span id="cb33-20"><a href="#cb33-20" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">28</span><span class="op">-</span>sergipe`;</span>
<span id="cb33-21"><a href="#cb33-21" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">29</span><span class="op">-</span>bahia`;</span>
<span id="cb33-22"><a href="#cb33-22" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">31</span><span class="op">-</span>minas_gerais`;</span>
<span id="cb33-23"><a href="#cb33-23" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">32</span><span class="op">-</span>espiritosanto`;</span>
<span id="cb33-24"><a href="#cb33-24" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">33</span><span class="op">-</span>rio_de_janeiro`;</span>
<span id="cb33-25"><a href="#cb33-25" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">35</span><span class="op">-</span>sao_paulo`;</span>
<span id="cb33-26"><a href="#cb33-26" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">41</span><span class="op">-</span>parana`;</span>
<span id="cb33-27"><a href="#cb33-27" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">42</span><span class="op">-</span>santa_catarina`;</span>
<span id="cb33-28"><a href="#cb33-28" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">43</span><span class="op">-</span>rio_grande_do_sul`;</span>
<span id="cb33-29"><a href="#cb33-29" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">50</span><span class="op">-</span>mato_grosso_do_sul`;</span>
<span id="cb33-30"><a href="#cb33-30" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">51</span><span class="op">-</span>mato_grosso`;</span>
<span id="cb33-31"><a href="#cb33-31" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">52</span><span class="op">-</span>goias`;</span>
<span id="cb33-32"><a href="#cb33-32" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> `<span class="dv">53</span><span class="op">-</span>distrito_federal`;</span></code></pre></div>
</div>
<div id="criando-de-grupos-de-permissÃµes-no-mysql" class="section level3 hasAnchor" number="5.3.7">
<h3 class="hasAnchor"><span class="header-section-number">5.3.7</span> Criando de Grupos de PermissÃµes no MySQL:<a href="#criando-de-grupos-de-permiss%C3%B5es-no-mysql" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>No MySQL, roles (funÃ§Ãµes ou papÃ©is) sÃ£o grupos de permissÃµes que vocÃª define uma vez e pode atribuir a vÃ¡rios usuÃ¡rios. Eles funcionam como â€œgrupos de acessoâ€, facilitando o gerenciamento de privilÃ©gios. Em vez de conceder privilÃ©gios individualmente a cada usuÃ¡rio, vocÃª define tudo no role. Se precisar incluir um novo privilÃ©gio (ex.: UPDATE) para todos que jÃ¡ tÃªm o role, basta atualizar o role uma vez.</p>
<p>Como criar uma regra no MySQL utilizando SQL-DCL</p>
<div class="sourceCode" id="cb34"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb34-1"><a href="#cb34-1" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">ROLE</span> <span class="st">&#39;nome_grupo&#39;</span>;</span></code></pre></div>
<p>onde, obviamente, <em>nome_grupo</em> Ã© o nome do grupo a ser criado.</p>
<p>Exemplo 1:</p>
<p>Crie um grupo chamado <em>norte</em> para associar todas as unidades da federaÃ§Ã£o da regiÃ£o norte do Brasil:</p>
<div class="sourceCode" id="cb35"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb35-1"><a href="#cb35-1" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">ROLE</span> <span class="st">&#39;norte&#39;</span>;</span></code></pre></div>
<p>Exemplo 2:</p>
<p>Crie um grupos para associar todas as unidades da federaÃ§Ã£o de todas as regiÃµes do Brasil:</p>
<div class="sourceCode" id="cb36"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb36-1"><a href="#cb36-1" tabindex="-1"></a><span class="co">-- ===========================================</span></span>
<span id="cb36-2"><a href="#cb36-2" tabindex="-1"></a><span class="co">-- CriaÃ§Ã£o de roles para as 5 regiÃµes do Brasil</span></span>
<span id="cb36-3"><a href="#cb36-3" tabindex="-1"></a><span class="co">-- ===========================================</span></span>
<span id="cb36-4"><a href="#cb36-4" tabindex="-1"></a></span>
<span id="cb36-5"><a href="#cb36-5" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">ROLE</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb36-6"><a href="#cb36-6" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">ROLE</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb36-7"><a href="#cb36-7" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">ROLE</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb36-8"><a href="#cb36-8" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">ROLE</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb36-9"><a href="#cb36-9" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">ROLE</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb36-10"><a href="#cb36-10" tabindex="-1"></a></span>
<span id="cb36-11"><a href="#cb36-11" tabindex="-1"></a><span class="co">-- ===========================================</span></span>
<span id="cb36-12"><a href="#cb36-12" tabindex="-1"></a><span class="co">/*</span></span>
<span id="cb36-13"><a href="#cb36-13" tabindex="-1"></a><span class="co">Concedendo privilÃ©gios de leitura (SELECT) a cada grupo criado</span></span>
<span id="cb36-14"><a href="#cb36-14" tabindex="-1"></a><span class="co">*/</span></span>
<span id="cb36-15"><a href="#cb36-15" tabindex="-1"></a><span class="co">-- ===========================================</span></span>
<span id="cb36-16"><a href="#cb36-16" tabindex="-1"></a></span>
<span id="cb36-17"><a href="#cb36-17" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> <span class="op">*</span>.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb36-18"><a href="#cb36-18" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> <span class="op">*</span>.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb36-19"><a href="#cb36-19" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> <span class="op">*</span>.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb36-20"><a href="#cb36-20" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> <span class="op">*</span>.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb36-21"><a href="#cb36-21" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> <span class="op">*</span>.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb36-22"><a href="#cb36-22" tabindex="-1"></a></span>
<span id="cb36-23"><a href="#cb36-23" tabindex="-1"></a><span class="co">-- ===========================================</span></span>
<span id="cb36-24"><a href="#cb36-24" tabindex="-1"></a><span class="co">-- Para atribuir um role a um usuÃ¡rio:</span></span>
<span id="cb36-25"><a href="#cb36-25" tabindex="-1"></a><span class="co">-- ===========================================</span></span>
<span id="cb36-26"><a href="#cb36-26" tabindex="-1"></a><span class="co">-- GRANT &#39;norte&#39; TO &#39;usuario_exemplo&#39;@&#39;%&#39;;</span></span>
<span id="cb36-27"><a href="#cb36-27" tabindex="-1"></a><span class="co">-- SET DEFAULT ROLE &#39;norte&#39; TO &#39;usuario_exemplo&#39;@&#39;%&#39;;</span></span></code></pre></div>
</div>
</div>
<div id="fazendo-tudo-funcionar-colocando-usuÃ¡rios-em-grupos-e-concedendo-a-estes-acesso-a-esquemas-de-banco-de-dados" class="section level2 hasAnchor" number="5.4">
<h2 class="hasAnchor"><span class="header-section-number">5.4</span> Fazendo tudo funcionar: Colocando usuÃ¡rios em grupos e concedendo a estes acesso a Esquemas de Banco de Dados:<a href="#fazendo-tudo-funcionar-colocando-usu%C3%A1rios-em-grupos-e-concedendo-a-estes-acesso-a-esquemas-de-banco-de-dados" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="associando-os-esquemas-que-representam-cada-estado-a-cada-grupo-que-representa-cada-regiÃ§Ã£o" class="section level3 hasAnchor" number="5.4.1">
<h3 class="hasAnchor"><span class="header-section-number">5.4.1</span> Associando os esquemas que representam cada estado a cada grupo (que representa cada regiÃ§Ã£o):<a href="#associando-os-esquemas-que-representam-cada-estado-a-cada-grupo-que-representa-cada-regi%C3%A7%C3%A3o" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb37"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb37-1"><a href="#cb37-1" tabindex="-1"></a><span class="co">-- ================================================</span></span>
<span id="cb37-2"><a href="#cb37-2" tabindex="-1"></a><span class="co">-- AssociaÃ§Ã£o dos esquemas (databases) aos roles</span></span>
<span id="cb37-3"><a href="#cb37-3" tabindex="-1"></a><span class="co">-- Roles criadas previamente:</span></span>
<span id="cb37-4"><a href="#cb37-4" tabindex="-1"></a><span class="co">--   norte, nordeste, centro_oeste, sudeste, sul</span></span>
<span id="cb37-5"><a href="#cb37-5" tabindex="-1"></a><span class="co">-- ================================================</span></span>
<span id="cb37-6"><a href="#cb37-6" tabindex="-1"></a></span>
<span id="cb37-7"><a href="#cb37-7" tabindex="-1"></a><span class="co">-- &gt;&gt;&gt;&gt;&gt; REGIÃƒO NORTE &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span></span>
<span id="cb37-8"><a href="#cb37-8" tabindex="-1"></a></span>
<span id="cb37-9"><a href="#cb37-9" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">11</span><span class="op">-</span>rondonia`.<span class="op">*</span>       <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb37-10"><a href="#cb37-10" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">12</span><span class="op">-</span>acre`.<span class="op">*</span>           <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb37-11"><a href="#cb37-11" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">13</span><span class="op">-</span>amazonas`.<span class="op">*</span>       <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb37-12"><a href="#cb37-12" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">14</span><span class="op">-</span>roraima`.<span class="op">*</span>        <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb37-13"><a href="#cb37-13" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">15</span><span class="op">-</span>para`.<span class="op">*</span>           <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb37-14"><a href="#cb37-14" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">16</span><span class="op">-</span>amapa`.<span class="op">*</span>          <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb37-15"><a href="#cb37-15" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">17</span><span class="op">-</span>tocantins`.<span class="op">*</span>      <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb37-16"><a href="#cb37-16" tabindex="-1"></a></span>
<span id="cb37-17"><a href="#cb37-17" tabindex="-1"></a><span class="co">-- &gt;&gt;&gt;&gt;&gt; REGIÃƒO NORDESTE &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span></span>
<span id="cb37-18"><a href="#cb37-18" tabindex="-1"></a></span>
<span id="cb37-19"><a href="#cb37-19" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">21</span><span class="op">-</span>maranhao`.<span class="op">*</span>            <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb37-20"><a href="#cb37-20" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">22</span><span class="op">-</span>piaui`.<span class="op">*</span>               <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb37-21"><a href="#cb37-21" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">23</span><span class="op">-</span>ceara`.<span class="op">*</span>               <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb37-22"><a href="#cb37-22" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">24</span><span class="op">-</span>rio_grande_do_norte`.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb37-23"><a href="#cb37-23" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">25</span><span class="op">-</span>paraiba`.<span class="op">*</span>             <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb37-24"><a href="#cb37-24" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">26</span><span class="op">-</span>pernambuco`.<span class="op">*</span>          <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb37-25"><a href="#cb37-25" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">27</span><span class="op">-</span>alagoas`.<span class="op">*</span>             <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb37-26"><a href="#cb37-26" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">28</span><span class="op">-</span>sergipe`.<span class="op">*</span>             <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb37-27"><a href="#cb37-27" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">29</span><span class="op">-</span>bahia`.<span class="op">*</span>               <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb37-28"><a href="#cb37-28" tabindex="-1"></a></span>
<span id="cb37-29"><a href="#cb37-29" tabindex="-1"></a><span class="co">-- &gt;&gt;&gt;&gt;&gt; REGIÃƒO CENTRO_OESTE &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span></span>
<span id="cb37-30"><a href="#cb37-30" tabindex="-1"></a></span>
<span id="cb37-31"><a href="#cb37-31" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">50</span><span class="op">-</span>mato_grosso_do_sul`.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb37-32"><a href="#cb37-32" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">51</span><span class="op">-</span>mato_grosso`.<span class="op">*</span>       <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb37-33"><a href="#cb37-33" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">52</span><span class="op">-</span>goias`.<span class="op">*</span>             <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb37-34"><a href="#cb37-34" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">53</span><span class="op">-</span>distrito_federal`.<span class="op">*</span>  <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb37-35"><a href="#cb37-35" tabindex="-1"></a></span>
<span id="cb37-36"><a href="#cb37-36" tabindex="-1"></a><span class="co">-- &gt;&gt;&gt;&gt;&gt; REGIÃƒO SUDESTE &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span></span>
<span id="cb37-37"><a href="#cb37-37" tabindex="-1"></a></span>
<span id="cb37-38"><a href="#cb37-38" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">31</span><span class="op">-</span>minas_gerais`.<span class="op">*</span>   <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb37-39"><a href="#cb37-39" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">32</span><span class="op">-</span>espiritosanto`.<span class="op">*</span>  <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb37-40"><a href="#cb37-40" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">33</span><span class="op">-</span>rio_de_janeiro`.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb37-41"><a href="#cb37-41" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">35</span><span class="op">-</span>sao_paulo`.<span class="op">*</span>      <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb37-42"><a href="#cb37-42" tabindex="-1"></a></span>
<span id="cb37-43"><a href="#cb37-43" tabindex="-1"></a><span class="co">-- &gt;&gt;&gt;&gt;&gt; REGIÃƒO SUL &gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;&gt;</span></span>
<span id="cb37-44"><a href="#cb37-44" tabindex="-1"></a></span>
<span id="cb37-45"><a href="#cb37-45" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">41</span><span class="op">-</span>parana`.<span class="op">*</span>            <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb37-46"><a href="#cb37-46" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">42</span><span class="op">-</span>santa_catarina`.<span class="op">*</span>    <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb37-47"><a href="#cb37-47" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> `<span class="dv">43</span><span class="op">-</span>rio_grande_do_sul`.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span></code></pre></div>
</div>
<div id="associando-associando-alunos-a-cada-grupo-regiÃ£o" class="section level3 hasAnchor" number="5.4.2">
<h3 class="hasAnchor"><span class="header-section-number">5.4.2</span> Associando associando alunos a cada grupo (regiÃ£o):<a href="#associando-associando-alunos-a-cada-grupo-regi%C3%A3o" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<table>
<thead>
<tr class="header">
<th align="center">Role (grupo)</th>
<th align="center">UsuÃ¡rios (login)</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td align="center">norte</td>
<td align="center">f362bf0, r536fa6</td>
</tr>
<tr class="even">
<td align="center">nordeste</td>
<td align="center">h756960, r8133g7</td>
</tr>
<tr class="odd">
<td align="center">centro_oeste</td>
<td align="center">r837aa0, h714419</td>
</tr>
<tr class="even">
<td align="center">sudeste</td>
<td align="center">r854124, n0296a6</td>
</tr>
<tr class="odd">
<td align="center">sul</td>
<td align="center">h788986, h77gii5, f3648i0</td>
</tr>
</tbody>
</table>
<div id="regiÃ£o-norte" class="section level4 hasAnchor" number="5.4.2.1">
<h4 class="hasAnchor"><span class="header-section-number">5.4.2.1</span> RegiÃ£o Norte<a href="#regi%C3%A3o-norte" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/aula_04-Exemplo-01-grupos-01.svg" /><!-- --></p>
<p><img src="images/aula_04-Exemplo-01-grupos-02.svg" /><!-- --></p>
<p><img src="images/aula_04-Exemplo-01-grupos-03.svg" /><!-- --></p>
<p><img src="images/aula_04-Exemplo-01-grupos-04.svg" /><!-- --></p>
</div>
<div id="regiÃ£o-nordeste" class="section level4 hasAnchor" number="5.4.2.2">
<h4 class="hasAnchor"><span class="header-section-number">5.4.2.2</span> RegiÃ£o Nordeste<a href="#regi%C3%A3o-nordeste" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/aula_04-Exemplo-01-grupos-05.svg" /><!-- --></p>
<p><img src="images/aula_04-Exemplo-01-grupos-06.svg" /><!-- --></p>
<p><img src="images/aula_04-Exemplo-01-grupos-07.svg" /><!-- --></p>
<p><img src="images/aula_04-Exemplo-01-grupos-08.svg" /><!-- --></p>
<p><img src="images/aula_04-Exemplo-01-grupos-09.svg" /><!-- --></p>
</div>
<div id="regiÃ£o-centro-oeste" class="section level4 hasAnchor" number="5.4.2.3">
<h4 class="hasAnchor"><span class="header-section-number">5.4.2.3</span> RegiÃ£o Centro-Oeste<a href="#regi%C3%A3o-centro-oeste" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/aula_04-Exemplo-01-grupos-10.svg" /><!-- --></p>
<p><img src="images/aula_04-Exemplo-01-grupos-11.svg" /><!-- --></p>
</div>
<div id="regiÃ£o-sudeste" class="section level4 hasAnchor" number="5.4.2.4">
<h4 class="hasAnchor"><span class="header-section-number">5.4.2.4</span> RegiÃ£o Sudeste<a href="#regi%C3%A3o-sudeste" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/aula_04-Exemplo-01-grupos-12.svg" /><!-- --></p>
<p><img src="images/aula_04-Exemplo-01-grupos-13.svg" /><!-- --></p>
</div>
<div id="regiÃ£o-sul" class="section level4 hasAnchor" number="5.4.2.5">
<h4 class="hasAnchor"><span class="header-section-number">5.4.2.5</span> RegiÃ£o Sul<a href="#regi%C3%A3o-sul" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/aula_04-Exemplo-01-grupos-15.svg" /><!-- --></p>
<p><img src="images/aula_04-Exemplo-01-grupos-16.svg" /><!-- --></p>
</div>
</div>
<div id="associando-usuÃ¡rios-aos-grupos" class="section level3 hasAnchor" number="5.4.3">
<h3 class="hasAnchor"><span class="header-section-number">5.4.3</span> Associando usuÃ¡rios aos grupos<a href="#associando-usu%C3%A1rios-aos-grupos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb38"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb38-1"><a href="#cb38-1" tabindex="-1"></a><span class="co">-- =========================================</span></span>
<span id="cb38-2"><a href="#cb38-2" tabindex="-1"></a><span class="co">-- AssociaÃ§Ã£o de usuÃ¡rios aos roles (grupos)</span></span>
<span id="cb38-3"><a href="#cb38-3" tabindex="-1"></a><span class="co">-- =========================================</span></span>
<span id="cb38-4"><a href="#cb38-4" tabindex="-1"></a></span>
<span id="cb38-5"><a href="#cb38-5" tabindex="-1"></a><span class="co">-- Grupo Norte</span></span>
<span id="cb38-6"><a href="#cb38-6" tabindex="-1"></a><span class="kw">GRANT</span> <span class="st">&#39;norte&#39;</span> <span class="kw">TO</span> <span class="st">&#39;f362bf0&#39;</span>@<span class="st">&#39;%&#39;</span>;</span>
<span id="cb38-7"><a href="#cb38-7" tabindex="-1"></a><span class="kw">GRANT</span> <span class="st">&#39;norte&#39;</span> <span class="kw">TO</span> <span class="st">&#39;r536fa6&#39;</span>@<span class="st">&#39;%&#39;</span>;</span>
<span id="cb38-8"><a href="#cb38-8" tabindex="-1"></a></span>
<span id="cb38-9"><a href="#cb38-9" tabindex="-1"></a><span class="co">-- Grupo Nordeste</span></span>
<span id="cb38-10"><a href="#cb38-10" tabindex="-1"></a><span class="kw">GRANT</span> <span class="st">&#39;nordeste&#39;</span> <span class="kw">TO</span> <span class="st">&#39;h756960&#39;</span>@<span class="st">&#39;%&#39;</span>;</span>
<span id="cb38-11"><a href="#cb38-11" tabindex="-1"></a><span class="kw">GRANT</span> <span class="st">&#39;nordeste&#39;</span> <span class="kw">TO</span> <span class="st">&#39;r8133g7&#39;</span>@<span class="st">&#39;%&#39;</span>;</span>
<span id="cb38-12"><a href="#cb38-12" tabindex="-1"></a></span>
<span id="cb38-13"><a href="#cb38-13" tabindex="-1"></a><span class="co">-- Grupo Centro-Oeste</span></span>
<span id="cb38-14"><a href="#cb38-14" tabindex="-1"></a><span class="kw">GRANT</span> <span class="st">&#39;centro_oeste&#39;</span> <span class="kw">TO</span> <span class="st">&#39;r837aa0&#39;</span>@<span class="st">&#39;%&#39;</span>;</span>
<span id="cb38-15"><a href="#cb38-15" tabindex="-1"></a><span class="kw">GRANT</span> <span class="st">&#39;centro_oeste&#39;</span> <span class="kw">TO</span> <span class="st">&#39;h714419&#39;</span>@<span class="st">&#39;%&#39;</span>;</span>
<span id="cb38-16"><a href="#cb38-16" tabindex="-1"></a></span>
<span id="cb38-17"><a href="#cb38-17" tabindex="-1"></a><span class="co">-- Grupo Sudeste</span></span>
<span id="cb38-18"><a href="#cb38-18" tabindex="-1"></a><span class="kw">GRANT</span> <span class="st">&#39;sudeste&#39;</span> <span class="kw">TO</span> <span class="st">&#39;r854124&#39;</span>@<span class="st">&#39;%&#39;</span>;</span>
<span id="cb38-19"><a href="#cb38-19" tabindex="-1"></a><span class="kw">GRANT</span> <span class="st">&#39;sudeste&#39;</span> <span class="kw">TO</span> <span class="st">&#39;n0296a6&#39;</span>@<span class="st">&#39;%&#39;</span>;</span>
<span id="cb38-20"><a href="#cb38-20" tabindex="-1"></a></span>
<span id="cb38-21"><a href="#cb38-21" tabindex="-1"></a><span class="co">-- Grupo Sul</span></span>
<span id="cb38-22"><a href="#cb38-22" tabindex="-1"></a><span class="kw">GRANT</span> <span class="st">&#39;sul&#39;</span> <span class="kw">TO</span> <span class="st">&#39;h788986&#39;</span>@<span class="st">&#39;%&#39;</span>;</span>
<span id="cb38-23"><a href="#cb38-23" tabindex="-1"></a><span class="kw">GRANT</span> <span class="st">&#39;sul&#39;</span> <span class="kw">TO</span> <span class="st">&#39;h77gii5&#39;</span>@<span class="st">&#39;%&#39;</span>;</span>
<span id="cb38-24"><a href="#cb38-24" tabindex="-1"></a><span class="kw">GRANT</span> <span class="st">&#39;sul&#39;</span> <span class="kw">TO</span> <span class="st">&#39;f3648i0&#39;</span>@<span class="st">&#39;%&#39;</span>;</span>
<span id="cb38-25"><a href="#cb38-25" tabindex="-1"></a></span>
<span id="cb38-26"><a href="#cb38-26" tabindex="-1"></a><span class="co">-- (Opcional) Definir cada role como padrÃ£o para o usuÃ¡rio</span></span>
<span id="cb38-27"><a href="#cb38-27" tabindex="-1"></a><span class="kw">SET</span> <span class="kw">DEFAULT</span> <span class="kw">ROLE</span> <span class="kw">ALL</span> <span class="kw">TO</span></span>
<span id="cb38-28"><a href="#cb38-28" tabindex="-1"></a>    <span class="st">&#39;f362bf0&#39;</span>@<span class="st">&#39;%&#39;</span>,</span>
<span id="cb38-29"><a href="#cb38-29" tabindex="-1"></a>    <span class="st">&#39;r536fa6&#39;</span>@<span class="st">&#39;%&#39;</span>,</span>
<span id="cb38-30"><a href="#cb38-30" tabindex="-1"></a>    <span class="st">&#39;h756960&#39;</span>@<span class="st">&#39;%&#39;</span>,</span>
<span id="cb38-31"><a href="#cb38-31" tabindex="-1"></a>    <span class="st">&#39;r8133g7&#39;</span>@<span class="st">&#39;%&#39;</span>,</span>
<span id="cb38-32"><a href="#cb38-32" tabindex="-1"></a>    <span class="st">&#39;r837aa0&#39;</span>@<span class="st">&#39;%&#39;</span>,</span>
<span id="cb38-33"><a href="#cb38-33" tabindex="-1"></a>    <span class="st">&#39;h714419&#39;</span>@<span class="st">&#39;%&#39;</span>,</span>
<span id="cb38-34"><a href="#cb38-34" tabindex="-1"></a>    <span class="st">&#39;r854124&#39;</span>@<span class="st">&#39;%&#39;</span>,</span>
<span id="cb38-35"><a href="#cb38-35" tabindex="-1"></a>    <span class="st">&#39;n0296a6&#39;</span>@<span class="st">&#39;%&#39;</span>,</span>
<span id="cb38-36"><a href="#cb38-36" tabindex="-1"></a>    <span class="st">&#39;h788986&#39;</span>@<span class="st">&#39;%&#39;</span>,</span>
<span id="cb38-37"><a href="#cb38-37" tabindex="-1"></a>    <span class="st">&#39;h77gii5&#39;</span>@<span class="st">&#39;%&#39;</span>,</span>
<span id="cb38-38"><a href="#cb38-38" tabindex="-1"></a>    <span class="st">&#39;f3648i0&#39;</span>@<span class="st">&#39;%&#39;</span>;</span></code></pre></div>
</div>
<div id="concedendo-privilÃ©gios-aos-grupos" class="section level3 hasAnchor" number="5.4.4">
<h3 class="hasAnchor"><span class="header-section-number">5.4.4</span> Concedendo privilÃ©gios aos grupos:<a href="#concedendo-privil%C3%A9gios-aos-grupos" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb39"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb39-1"><a href="#cb39-1" tabindex="-1"></a><span class="co">-- ============================================</span></span>
<span id="cb39-2"><a href="#cb39-2" tabindex="-1"></a><span class="co">-- NORTE lÃª os demais grupos (Nordeste, Centro-Oeste, Sudeste, Sul)</span></span>
<span id="cb39-3"><a href="#cb39-3" tabindex="-1"></a><span class="co">-- ============================================</span></span>
<span id="cb39-4"><a href="#cb39-4" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">21</span><span class="op">-</span>maranhao`.<span class="op">*</span>            <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb39-5"><a href="#cb39-5" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">22</span><span class="op">-</span>piaui`.<span class="op">*</span>               <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb39-6"><a href="#cb39-6" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">23</span><span class="op">-</span>ceara`.<span class="op">*</span>               <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb39-7"><a href="#cb39-7" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">24</span><span class="op">-</span>rio_grande_do_norte`.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb39-8"><a href="#cb39-8" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">25</span><span class="op">-</span>paraiba`.<span class="op">*</span>             <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb39-9"><a href="#cb39-9" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">26</span><span class="op">-</span>pernambuco`.<span class="op">*</span>          <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb39-10"><a href="#cb39-10" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">27</span><span class="op">-</span>alagoas`.<span class="op">*</span>             <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb39-11"><a href="#cb39-11" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">28</span><span class="op">-</span>sergipe`.<span class="op">*</span>             <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb39-12"><a href="#cb39-12" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">29</span><span class="op">-</span>bahia`.<span class="op">*</span>               <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb39-13"><a href="#cb39-13" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">50</span><span class="op">-</span>mato_grosso_do_sul`.<span class="op">*</span>  <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb39-14"><a href="#cb39-14" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">51</span><span class="op">-</span>mato_grosso`.<span class="op">*</span>        <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb39-15"><a href="#cb39-15" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">52</span><span class="op">-</span>goias`.<span class="op">*</span>              <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb39-16"><a href="#cb39-16" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">53</span><span class="op">-</span>distrito_federal`.<span class="op">*</span>   <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb39-17"><a href="#cb39-17" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">31</span><span class="op">-</span>minas_gerais`.<span class="op">*</span>       <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb39-18"><a href="#cb39-18" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">32</span><span class="op">-</span>espiritosanto`.<span class="op">*</span>      <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb39-19"><a href="#cb39-19" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">33</span><span class="op">-</span>rio_de_janeiro`.<span class="op">*</span>     <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb39-20"><a href="#cb39-20" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">35</span><span class="op">-</span>sao_paulo`.<span class="op">*</span>          <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb39-21"><a href="#cb39-21" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">41</span><span class="op">-</span>parana`.<span class="op">*</span>             <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb39-22"><a href="#cb39-22" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">42</span><span class="op">-</span>santa_catarina`.<span class="op">*</span>     <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb39-23"><a href="#cb39-23" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">43</span><span class="op">-</span>rio_grande_do_sul`.<span class="op">*</span>  <span class="kw">TO</span> <span class="st">&#39;norte&#39;</span>;</span>
<span id="cb39-24"><a href="#cb39-24" tabindex="-1"></a></span>
<span id="cb39-25"><a href="#cb39-25" tabindex="-1"></a><span class="co">-- ============================================</span></span>
<span id="cb39-26"><a href="#cb39-26" tabindex="-1"></a><span class="co">-- NORDESTE lÃª os demais grupos (Norte, Centro-Oeste, Sudeste, Sul)</span></span>
<span id="cb39-27"><a href="#cb39-27" tabindex="-1"></a><span class="co">-- ============================================</span></span>
<span id="cb39-28"><a href="#cb39-28" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">11</span><span class="op">-</span>rondonia`.<span class="op">*</span>           <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb39-29"><a href="#cb39-29" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">12</span><span class="op">-</span>acre`.<span class="op">*</span>               <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb39-30"><a href="#cb39-30" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">13</span><span class="op">-</span>amazonas`.<span class="op">*</span>           <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb39-31"><a href="#cb39-31" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">14</span><span class="op">-</span>roraima`.<span class="op">*</span>            <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb39-32"><a href="#cb39-32" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">15</span><span class="op">-</span>para`.<span class="op">*</span>               <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb39-33"><a href="#cb39-33" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">16</span><span class="op">-</span>amapa`.<span class="op">*</span>              <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb39-34"><a href="#cb39-34" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">17</span><span class="op">-</span>tocantins`.<span class="op">*</span>          <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb39-35"><a href="#cb39-35" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">50</span><span class="op">-</span>mato_grosso_do_sul`.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb39-36"><a href="#cb39-36" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">51</span><span class="op">-</span>mato_grosso`.<span class="op">*</span>       <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb39-37"><a href="#cb39-37" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">52</span><span class="op">-</span>goias`.<span class="op">*</span>             <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb39-38"><a href="#cb39-38" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">53</span><span class="op">-</span>distrito_federal`.<span class="op">*</span>  <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb39-39"><a href="#cb39-39" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">31</span><span class="op">-</span>minas_gerais`.<span class="op">*</span>      <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb39-40"><a href="#cb39-40" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">32</span><span class="op">-</span>espiritosanto`.<span class="op">*</span>     <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb39-41"><a href="#cb39-41" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">33</span><span class="op">-</span>rio_de_janeiro`.<span class="op">*</span>    <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb39-42"><a href="#cb39-42" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">35</span><span class="op">-</span>sao_paulo`.<span class="op">*</span>         <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb39-43"><a href="#cb39-43" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">41</span><span class="op">-</span>parana`.<span class="op">*</span>            <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb39-44"><a href="#cb39-44" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">42</span><span class="op">-</span>santa_catarina`.<span class="op">*</span>    <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb39-45"><a href="#cb39-45" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">43</span><span class="op">-</span>rio_grande_do_sul`.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;nordeste&#39;</span>;</span>
<span id="cb39-46"><a href="#cb39-46" tabindex="-1"></a></span>
<span id="cb39-47"><a href="#cb39-47" tabindex="-1"></a><span class="co">-- ============================================</span></span>
<span id="cb39-48"><a href="#cb39-48" tabindex="-1"></a><span class="co">-- CENTRO-OESTE lÃª os demais grupos (Norte, Nordeste, Sudeste, Sul)</span></span>
<span id="cb39-49"><a href="#cb39-49" tabindex="-1"></a><span class="co">-- ============================================</span></span>
<span id="cb39-50"><a href="#cb39-50" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">11</span><span class="op">-</span>rondonia`.<span class="op">*</span>           <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-51"><a href="#cb39-51" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">12</span><span class="op">-</span>acre`.<span class="op">*</span>               <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-52"><a href="#cb39-52" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">13</span><span class="op">-</span>amazonas`.<span class="op">*</span>           <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-53"><a href="#cb39-53" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">14</span><span class="op">-</span>roraima`.<span class="op">*</span>            <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-54"><a href="#cb39-54" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">15</span><span class="op">-</span>para`.<span class="op">*</span>               <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-55"><a href="#cb39-55" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">16</span><span class="op">-</span>amapa`.<span class="op">*</span>              <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-56"><a href="#cb39-56" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">17</span><span class="op">-</span>tocantins`.<span class="op">*</span>          <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-57"><a href="#cb39-57" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">21</span><span class="op">-</span>maranhao`.<span class="op">*</span>           <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-58"><a href="#cb39-58" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">22</span><span class="op">-</span>piaui`.<span class="op">*</span>              <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-59"><a href="#cb39-59" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">23</span><span class="op">-</span>ceara`.<span class="op">*</span>              <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-60"><a href="#cb39-60" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">24</span><span class="op">-</span>rio_grande_do_norte`.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-61"><a href="#cb39-61" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">25</span><span class="op">-</span>paraiba`.<span class="op">*</span>            <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-62"><a href="#cb39-62" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">26</span><span class="op">-</span>pernambuco`.<span class="op">*</span>         <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-63"><a href="#cb39-63" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">27</span><span class="op">-</span>alagoas`.<span class="op">*</span>            <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-64"><a href="#cb39-64" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">28</span><span class="op">-</span>sergipe`.<span class="op">*</span>            <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-65"><a href="#cb39-65" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">29</span><span class="op">-</span>bahia`.<span class="op">*</span>              <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-66"><a href="#cb39-66" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">31</span><span class="op">-</span>minas_gerais`.<span class="op">*</span>       <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-67"><a href="#cb39-67" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">32</span><span class="op">-</span>espiritosanto`.<span class="op">*</span>      <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-68"><a href="#cb39-68" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">33</span><span class="op">-</span>rio_de_janeiro`.<span class="op">*</span>     <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-69"><a href="#cb39-69" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">35</span><span class="op">-</span>sao_paulo`.<span class="op">*</span>          <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-70"><a href="#cb39-70" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">41</span><span class="op">-</span>parana`.<span class="op">*</span>             <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-71"><a href="#cb39-71" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">42</span><span class="op">-</span>santa_catarina`.<span class="op">*</span>     <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-72"><a href="#cb39-72" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">43</span><span class="op">-</span>rio_grande_do_sul`.<span class="op">*</span>  <span class="kw">TO</span> <span class="st">&#39;centro_oeste&#39;</span>;</span>
<span id="cb39-73"><a href="#cb39-73" tabindex="-1"></a></span>
<span id="cb39-74"><a href="#cb39-74" tabindex="-1"></a><span class="co">-- ============================================</span></span>
<span id="cb39-75"><a href="#cb39-75" tabindex="-1"></a><span class="co">-- SUDESTE lÃª os demais grupos (Norte, Nordeste, Centro-Oeste, Sul)</span></span>
<span id="cb39-76"><a href="#cb39-76" tabindex="-1"></a><span class="co">-- ============================================</span></span>
<span id="cb39-77"><a href="#cb39-77" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">11</span><span class="op">-</span>rondonia`.<span class="op">*</span>           <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-78"><a href="#cb39-78" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">12</span><span class="op">-</span>acre`.<span class="op">*</span>               <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-79"><a href="#cb39-79" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">13</span><span class="op">-</span>amazonas`.<span class="op">*</span>           <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-80"><a href="#cb39-80" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">14</span><span class="op">-</span>roraima`.<span class="op">*</span>            <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-81"><a href="#cb39-81" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">15</span><span class="op">-</span>para`.<span class="op">*</span>               <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-82"><a href="#cb39-82" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">16</span><span class="op">-</span>amapa`.<span class="op">*</span>              <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-83"><a href="#cb39-83" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">17</span><span class="op">-</span>tocantins`.<span class="op">*</span>          <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-84"><a href="#cb39-84" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">21</span><span class="op">-</span>maranhao`.<span class="op">*</span>           <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-85"><a href="#cb39-85" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">22</span><span class="op">-</span>piaui`.<span class="op">*</span>              <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-86"><a href="#cb39-86" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">23</span><span class="op">-</span>ceara`.<span class="op">*</span>              <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-87"><a href="#cb39-87" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">24</span><span class="op">-</span>rio_grande_do_norte`.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-88"><a href="#cb39-88" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">25</span><span class="op">-</span>paraiba`.<span class="op">*</span>            <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-89"><a href="#cb39-89" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">26</span><span class="op">-</span>pernambuco`.<span class="op">*</span>         <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-90"><a href="#cb39-90" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">27</span><span class="op">-</span>alagoas`.<span class="op">*</span>            <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-91"><a href="#cb39-91" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">28</span><span class="op">-</span>sergipe`.<span class="op">*</span>            <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-92"><a href="#cb39-92" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">29</span><span class="op">-</span>bahia`.<span class="op">*</span>              <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-93"><a href="#cb39-93" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">50</span><span class="op">-</span>mato_grosso_do_sul`.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-94"><a href="#cb39-94" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">51</span><span class="op">-</span>mato_grosso`.<span class="op">*</span>       <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-95"><a href="#cb39-95" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">52</span><span class="op">-</span>goias`.<span class="op">*</span>             <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-96"><a href="#cb39-96" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">53</span><span class="op">-</span>distrito_federal`.<span class="op">*</span>  <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-97"><a href="#cb39-97" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">41</span><span class="op">-</span>parana`.<span class="op">*</span>            <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-98"><a href="#cb39-98" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">42</span><span class="op">-</span>santa_catarina`.<span class="op">*</span>    <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-99"><a href="#cb39-99" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">43</span><span class="op">-</span>rio_grande_do_sul`.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;sudeste&#39;</span>;</span>
<span id="cb39-100"><a href="#cb39-100" tabindex="-1"></a></span>
<span id="cb39-101"><a href="#cb39-101" tabindex="-1"></a><span class="co">-- ============================================</span></span>
<span id="cb39-102"><a href="#cb39-102" tabindex="-1"></a><span class="co">-- SUL lÃª os demais grupos (Norte, Nordeste, Centro-Oeste, Sudeste)</span></span>
<span id="cb39-103"><a href="#cb39-103" tabindex="-1"></a><span class="co">-- ============================================</span></span>
<span id="cb39-104"><a href="#cb39-104" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">11</span><span class="op">-</span>rondonia`.<span class="op">*</span>           <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-105"><a href="#cb39-105" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">12</span><span class="op">-</span>acre`.<span class="op">*</span>               <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-106"><a href="#cb39-106" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">13</span><span class="op">-</span>amazonas`.<span class="op">*</span>           <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-107"><a href="#cb39-107" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">14</span><span class="op">-</span>roraima`.<span class="op">*</span>            <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-108"><a href="#cb39-108" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">15</span><span class="op">-</span>para`.<span class="op">*</span>               <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-109"><a href="#cb39-109" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">16</span><span class="op">-</span>amapa`.<span class="op">*</span>              <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-110"><a href="#cb39-110" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">17</span><span class="op">-</span>tocantins`.<span class="op">*</span>          <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-111"><a href="#cb39-111" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">21</span><span class="op">-</span>maranhao`.<span class="op">*</span>           <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-112"><a href="#cb39-112" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">22</span><span class="op">-</span>piaui`.<span class="op">*</span>              <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-113"><a href="#cb39-113" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">23</span><span class="op">-</span>ceara`.<span class="op">*</span>              <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-114"><a href="#cb39-114" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">24</span><span class="op">-</span>rio_grande_do_norte`.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-115"><a href="#cb39-115" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">25</span><span class="op">-</span>paraiba`.<span class="op">*</span>            <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-116"><a href="#cb39-116" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">26</span><span class="op">-</span>pernambuco`.<span class="op">*</span>         <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-117"><a href="#cb39-117" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">27</span><span class="op">-</span>alagoas`.<span class="op">*</span>            <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-118"><a href="#cb39-118" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">28</span><span class="op">-</span>sergipe`.<span class="op">*</span>            <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-119"><a href="#cb39-119" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">29</span><span class="op">-</span>bahia`.<span class="op">*</span>              <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-120"><a href="#cb39-120" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">50</span><span class="op">-</span>mato_grosso_do_sul`.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-121"><a href="#cb39-121" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">51</span><span class="op">-</span>mato_grosso`.<span class="op">*</span>       <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-122"><a href="#cb39-122" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">52</span><span class="op">-</span>goias`.<span class="op">*</span>             <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-123"><a href="#cb39-123" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">53</span><span class="op">-</span>distrito_federal`.<span class="op">*</span>  <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-124"><a href="#cb39-124" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">31</span><span class="op">-</span>minas_gerais`.<span class="op">*</span>      <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-125"><a href="#cb39-125" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">32</span><span class="op">-</span>espiritosanto`.<span class="op">*</span>     <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-126"><a href="#cb39-126" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">33</span><span class="op">-</span>rio_de_janeiro`.<span class="op">*</span>    <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span>
<span id="cb39-127"><a href="#cb39-127" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">SELECT</span> <span class="kw">ON</span> `<span class="dv">35</span><span class="op">-</span>sao_paulo`.<span class="op">*</span>         <span class="kw">TO</span> <span class="st">&#39;sul&#39;</span>;</span></code></pre></div>
</div>
<div id="exemplo-no-mysql" class="section level3 hasAnchor" number="5.4.5">
<h3 class="hasAnchor"><span class="header-section-number">5.4.5</span> Exemplo no MySQL<a href="#exemplo-no-mysql" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Exemplo 01</p>
<p>Considere o cenÃ¡rio: um administrador de banco de dados irÃ¡ criar uma tabela chamada <strong>clientes</strong> com cpf, nome e data_nascimento. Essa tabela deverÃ¡ ficar no esquema <strong>compras</strong> e serÃ¡ acessada com <strong>todos os privilÃ©gios</strong> pelo usuÃ¡rio <strong>aluno</strong>. Considere que nosso SGBD Ã© o MySQL 9. faÃ§a passo-a-passo os cÃ³digos SQL para que o ambiente descrito seja gerado.</p>
<div id="passo-1---criar-o-esquema-de-banco-de-dados-compras" class="section level4 hasAnchor" number="5.4.5.1">
<h4 class="hasAnchor"><span class="header-section-number">5.4.5.1</span> Passo 1 - Criar o esquema de Banco de Dados â€œcomprasâ€<a href="#passo-1---criar-o-esquema-de-banco-de-dados-compras" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb40"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb40-1"><a href="#cb40-1" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> compras</span>
<span id="cb40-2"><a href="#cb40-2" tabindex="-1"></a>  <span class="kw">DEFAULT</span> <span class="dt">CHARACTER</span> <span class="kw">SET</span> utf8mb4</span>
<span id="cb40-3"><a href="#cb40-3" tabindex="-1"></a>  <span class="kw">DEFAULT</span> COLLATE utf8mb4_0900_ai_ci;</span></code></pre></div>
</div>
<div id="passo-2---criar-o-usuÃ¡rio-aluno" class="section level4 hasAnchor" number="5.4.5.2">
<h4 class="hasAnchor"><span class="header-section-number">5.4.5.2</span> Passo 2 - Criar o usuÃ¡rio â€œalunoâ€<a href="#passo-2---criar-o-usu%C3%A1rio-aluno" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb41"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb41-1"><a href="#cb41-1" tabindex="-1"></a><span class="co">-- Apenas local:</span></span>
<span id="cb41-2"><a href="#cb41-2" tabindex="-1"></a><span class="kw">CREATE</span> <span class="fu">USER</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> <span class="st">&#39;aluno&#39;</span>@<span class="st">&#39;localhost&#39;</span> <span class="kw">IDENTIFIED</span> <span class="kw">BY</span> <span class="st">&#39;TroqueEstaSenha!2025&#39;</span>;</span>
<span id="cb41-3"><a href="#cb41-3" tabindex="-1"></a></span>
<span id="cb41-4"><a href="#cb41-4" tabindex="-1"></a><span class="co">-- (Opcional) Acesso pela rede/WAN:</span></span>
<span id="cb41-5"><a href="#cb41-5" tabindex="-1"></a><span class="kw">CREATE</span> <span class="fu">USER</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> <span class="st">&#39;aluno&#39;</span>@<span class="st">&#39;%&#39;</span> <span class="kw">IDENTIFIED</span> <span class="kw">BY</span> <span class="st">&#39;TroqueEstaSenha!2025&#39;</span>;</span></code></pre></div>
</div>
<div id="passo-2---conceder-ao-usuÃ¡rio-aluno-privilÃ©gios-sobre-todas-os-objetos-tabelas-views-gatilhos-Ã­ndices-do-esquema-compras" class="section level4 hasAnchor" number="5.4.5.3">
<h4 class="hasAnchor"><span class="header-section-number">5.4.5.3</span> Passo 2 - Conceder ao usuÃ¡rio â€œalunoâ€ privilÃ©gios sobre todas os objetos (tabelas, views, gatilhos, Ã­ndices) do esquema â€œcomprasâ€<a href="#passo-2---conceder-ao-usu%C3%A1rio-aluno-privil%C3%A9gios-sobre-todas-os-objetos-tabelas-views-gatilhos-%C3%ADndices-do-esquema-compras" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb42"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb42-1"><a href="#cb42-1" tabindex="-1"></a><span class="co">-- Para acesso local:</span></span>
<span id="cb42-2"><a href="#cb42-2" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> compras.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;aluno&#39;</span>@<span class="st">&#39;localhost&#39;</span>;</span>
<span id="cb42-3"><a href="#cb42-3" tabindex="-1"></a></span>
<span id="cb42-4"><a href="#cb42-4" tabindex="-1"></a><span class="co">-- (Opcional) Para acesso via rede:</span></span>
<span id="cb42-5"><a href="#cb42-5" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> compras.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;aluno&#39;</span>@<span class="st">&#39;%&#39;</span>;</span>
<span id="cb42-6"><a href="#cb42-6" tabindex="-1"></a></span>
<span id="cb42-7"><a href="#cb42-7" tabindex="-1"></a><span class="co">-- Tornar os privilÃ©gios efetivos (costume; no MySQL moderno aplica na hora):</span></span>
<span id="cb42-8"><a href="#cb42-8" tabindex="-1"></a><span class="kw">FLUSH</span> <span class="kw">PRIVILEGES</span>;</span></code></pre></div>
</div>
<div id="passo-3---criar-a-tabela-clientes-dentro-do-esquema-compras" class="section level4 hasAnchor" number="5.4.5.4">
<h4 class="hasAnchor"><span class="header-section-number">5.4.5.4</span> Passo 3 - Criar a tabela â€œclientesâ€ dentro do esquema â€œcomprasâ€<a href="#passo-3---criar-a-tabela-clientes-dentro-do-esquema-compras" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb43"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb43-1"><a href="#cb43-1" tabindex="-1"></a><span class="kw">USE</span> compras;</span>
<span id="cb43-2"><a href="#cb43-2" tabindex="-1"></a></span>
<span id="cb43-3"><a href="#cb43-3" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> clientes (</span>
<span id="cb43-4"><a href="#cb43-4" tabindex="-1"></a>  cpf            <span class="dt">CHAR</span>(<span class="dv">11</span>)     <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb43-5"><a href="#cb43-5" tabindex="-1"></a>  nome           <span class="dt">VARCHAR</span>(<span class="dv">120</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb43-6"><a href="#cb43-6" tabindex="-1"></a>  data_nascimento <span class="dt">DATE</span>        <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb43-7"><a href="#cb43-7" tabindex="-1"></a>  <span class="kw">CONSTRAINT</span> pk_clientes <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (cpf)</span>
<span id="cb43-8"><a href="#cb43-8" tabindex="-1"></a>) ENGINE<span class="op">=</span>InnoDB;</span></code></pre></div>
</div>
</div>
<div id="exemplo-no-postgresql" class="section level3 hasAnchor" number="5.4.6">
<h3 class="hasAnchor"><span class="header-section-number">5.4.6</span> Exemplo no PostGreSQL<a href="#exemplo-no-postgresql" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Exemplo 03</p>
<p>Considere o cenÃ¡rio: um administrador de banco de dados irÃ¡ criar uma tabela chamada <strong>clientes</strong> com cpf, nome e data_nascimento. Essa tabela deverÃ¡ ficar no esquema <strong>compras</strong> e serÃ¡ acessada com <strong>todos os privilÃ©gios</strong> pelo usuÃ¡rio <strong>aluno</strong>. Considere que nosso SGBD Ã© o Postgresql 15. faÃ§a passo-a-passo os cÃ³digos SQL para que o ambiente descrito seja gerado.</p>
<div id="passo-0---crie-um-banco-de-dados-sistema_compras" class="section level4 hasAnchor" number="5.4.6.1">
<h4 class="hasAnchor"><span class="header-section-number">5.4.6.1</span> Passo 0 - Crie um Banco de Dados â€œsistema_comprasâ€<a href="#passo-0---crie-um-banco-de-dados-sistema_compras" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb44"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb44-1"><a href="#cb44-1" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> sistema_compras</span>
<span id="cb44-2"><a href="#cb44-2" tabindex="-1"></a>    <span class="kw">WITH</span> OWNER <span class="op">=</span> postgres</span>
<span id="cb44-3"><a href="#cb44-3" tabindex="-1"></a>    ENCODING <span class="op">=</span> <span class="st">&#39;UTF8&#39;</span></span>
<span id="cb44-4"><a href="#cb44-4" tabindex="-1"></a>    LC_COLLATE <span class="op">=</span> <span class="st">&#39;pt_BR.UTF-8&#39;</span></span>
<span id="cb44-5"><a href="#cb44-5" tabindex="-1"></a>    LC_CTYPE <span class="op">=</span> <span class="st">&#39;pt_BR.UTF-8&#39;</span></span>
<span id="cb44-6"><a href="#cb44-6" tabindex="-1"></a>    TEMPLATE <span class="op">=</span> template0;</span></code></pre></div>
</div>
<div id="passo-1---criar-o-esquema-de-banco-de-dados-compras-1" class="section level4 hasAnchor" number="5.4.6.2">
<h4 class="hasAnchor"><span class="header-section-number">5.4.6.2</span> Passo 1 - Criar o esquema de Banco de Dados â€œcomprasâ€<a href="#passo-1---criar-o-esquema-de-banco-de-dados-compras-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb45"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb45-1"><a href="#cb45-1" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">SCHEMA</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> compras <span class="kw">AUTHORIZATION</span> postgres;</span></code></pre></div>
</div>
<div id="passo-2---criar-o-usuÃ¡rio-aluno-1" class="section level4 hasAnchor" number="5.4.6.3">
<h4 class="hasAnchor"><span class="header-section-number">5.4.6.3</span> Passo 2 - Criar o usuÃ¡rio â€œalunoâ€<a href="#passo-2---criar-o-usu%C3%A1rio-aluno-1" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb46"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb46-1"><a href="#cb46-1" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">ROLE</span> aluno <span class="kw">WITH</span></span>
<span id="cb46-2"><a href="#cb46-2" tabindex="-1"></a>    LOGIN</span>
<span id="cb46-3"><a href="#cb46-3" tabindex="-1"></a>    <span class="kw">PASSWORD</span> <span class="st">&#39;TroqueEstaSenha!2025&#39;</span></span>
<span id="cb46-4"><a href="#cb46-4" tabindex="-1"></a>    NOSUPERUSER</span>
<span id="cb46-5"><a href="#cb46-5" tabindex="-1"></a>    NOCREATEDB</span>
<span id="cb46-6"><a href="#cb46-6" tabindex="-1"></a>    NOCREATEROLE</span>
<span id="cb46-7"><a href="#cb46-7" tabindex="-1"></a>    INHERIT;</span></code></pre></div>
</div>
<div id="passo-3---conceder-ao-usuÃ¡rio-aluno-privilÃ©gios-sobre-todas-os-objetos-tabelas-views-gatilhos-Ã­ndices-do-esquema-compras" class="section level4 hasAnchor" number="5.4.6.4">
<h4 class="hasAnchor"><span class="header-section-number">5.4.6.4</span> Passo 3 - Conceder ao usuÃ¡rio â€œalunoâ€ privilÃ©gios sobre todas os objetos (tabelas, views, gatilhos, Ã­ndices) do esquema â€œcomprasâ€<a href="#passo-3---conceder-ao-usu%C3%A1rio-aluno-privil%C3%A9gios-sobre-todas-os-objetos-tabelas-views-gatilhos-%C3%ADndices-do-esquema-compras" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb47"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb47-1"><a href="#cb47-1" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">USAGE</span> <span class="kw">ON</span> <span class="kw">SCHEMA</span> compras <span class="kw">TO</span> aluno;</span>
<span id="cb47-2"><a href="#cb47-2" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">CREATE</span> <span class="kw">ON</span> <span class="kw">SCHEMA</span> compras <span class="kw">TO</span> aluno;</span></code></pre></div>
</div>
<div id="passo-4---criar-a-tabela-clientes-dentro-do-esquema-compras" class="section level4 hasAnchor" number="5.4.6.5">
<h4 class="hasAnchor"><span class="header-section-number">5.4.6.5</span> Passo 4 - Criar a tabela â€œclientesâ€ dentro do esquema â€œcomprasâ€<a href="#passo-4---criar-a-tabela-clientes-dentro-do-esquema-compras" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb48"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb48-1"><a href="#cb48-1" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> compras.clientes (</span>
<span id="cb48-2"><a href="#cb48-2" tabindex="-1"></a>    cpf            <span class="dt">CHAR</span>(<span class="dv">11</span>)     <span class="kw">PRIMARY</span> <span class="kw">KEY</span>,</span>
<span id="cb48-3"><a href="#cb48-3" tabindex="-1"></a>    nome           <span class="dt">VARCHAR</span>(<span class="dv">120</span>) <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb48-4"><a href="#cb48-4" tabindex="-1"></a>    data_nascimento <span class="dt">DATE</span>        <span class="kw">NOT</span> <span class="kw">NULL</span></span>
<span id="cb48-5"><a href="#cb48-5" tabindex="-1"></a>);</span></code></pre></div>
</div>
<div id="passo-5---conceder-privilÃ©gios-da-tabela-clientes-do-esquema-compras-para-o-usuÃ¡rio-aluno" class="section level4 hasAnchor" number="5.4.6.6">
<h4 class="hasAnchor"><span class="header-section-number">5.4.6.6</span> Passo 5 - Conceder privilÃ©gios da tabela â€œclientesâ€ do esquema â€œcomprasâ€ para o usuÃ¡rio â€œalunoâ€<a href="#passo-5---conceder-privil%C3%A9gios-da-tabela-clientes-do-esquema-compras-para-o-usu%C3%A1rio-aluno" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div class="sourceCode" id="cb49"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb49-1"><a href="#cb49-1" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> <span class="kw">TABLE</span> compras.clientes <span class="kw">TO</span> aluno;</span></code></pre></div>
</div>
</div>
</div>
<div id="feito" class="section level2 hasAnchor" number="5.5">
<h2 class="hasAnchor"><span class="header-section-number">5.5</span> Feito<a href="#feito" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!--chapter:end:04-2026-03-10_Administracao_Gerenciamento-aula.Rmd-->
</div>
</div>
<div id="administraÃ§Ã£o-e-gerenciamento-de-bancos-de-dados-1" class="section level1 hasAnchor" number="6">
<h1 class="hasAnchor"><span class="header-section-number">6</span> AdministraÃ§Ã£o e Gerenciamento de Bancos de Dados<a href="#administra%C3%A7%C3%A3o-e-gerenciamento-de-bancos-de-dados-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="section-4" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">25/08/2025<a href="#section-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="professor-miguÃ©l-suares-4" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">Professor MiguÃ©l Suares<a href="#professor-migu%C3%A9l-suares-4" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/Exemplo-02-continua%C3%A7%C3%A3o.svg" /><!-- --></p>
<!--chapter:end:04-2026-03-10_Administracao_Gerenciamento-exercicio.Rmd-->
</div>
</div>
<div id="banco-de-dados-uma-aplicaÃ§Ã£o-crud" class="section level1 hasAnchor" number="7">
<h1 class="hasAnchor"><span class="header-section-number">7</span> Banco de Dados: Uma AplicaÃ§Ã£o CRUD<a href="#banco-de-dados-uma-aplica%C3%A7%C3%A3o-crud" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="section-5" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">01/09/2025<a href="#section-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="professor-miguÃ©l-suares-5" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">Professor MiguÃ©l Suares<a href="#professor-migu%C3%A9l-suares-5" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="o-que-Ã©-uma-aplicaÃ§Ã£o-crud" class="section level2 hasAnchor" number="7.1">
<h2 class="hasAnchor"><span class="header-section-number">7.1</span> O que Ã© uma AplicaÃ§Ã£o CRUD?<a href="#o-que-%C3%A9-uma-aplica%C3%A7%C3%A3o-crud" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Hoje vamos desenvolver um cadastro web simples e entender o que Ã© o acronimo C.R.U.D.</p>
</div>
<div id="conceito-de-crud" class="section level2 hasAnchor" number="7.2">
<h2 class="hasAnchor"><span class="header-section-number">7.2</span> Conceito de CRUD<a href="#conceito-de-crud" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><strong>CRUD</strong> Ã© um acrÃ´nimo para quatro operaÃ§Ãµes fundamentais que um sistema realiza sobre dados em um banco de dados:</p>
<p><img src="images/2025-09-01/01-CRUD.jpg" /></p>
<p>Essas quatro operaÃ§Ãµes compÃµem a base da maioria das <strong>aplicaÃ§Ãµes web</strong> que manipulam dados persistidos em um <strong>SGBD</strong> (Sistema Gerenciador de Banco de Dados).</p>
<hr />
</div>
<div id="o-padrÃ£o-de-design-de-sistemas-mvc-model-view-controller" class="section level2 hasAnchor" number="7.3">
<h2 class="hasAnchor"><span class="header-section-number">7.3</span> O padrÃ£o de Design de Sistemas MVC (Model View Controller)<a href="#o-padr%C3%A3o-de-design-de-sistemas-mvc-model-view-controller" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Uma aplicaÃ§Ã£o Cliente-Servidor (modelo 2 camadas) geralmente segue o <strong>padrÃ£o MVC</strong> â€” <strong>Model, View, Controller</strong>:</p>
<p><img src="images/2025-09-01/03-MVC.jpg" /></p>
</div>
<div id="construindo-uma-aplicaÃ§Ã£o-crud-para-interfacear-com-a-tabela-pessoa" class="section level2 hasAnchor" number="7.4">
<h2 class="hasAnchor"><span class="header-section-number">7.4</span> Construindo uma aplicaÃ§Ã£o CRUD para interfacear com a tabela â€œPessoaâ€<a href="#construindo-uma-aplica%C3%A7%C3%A3o-crud-para-interfacear-com-a-tabela-pessoa" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Considere o Diagrama Entidade-Relacionamento abaixo:</p>
<p><img src="images/aula-05-Exemplo-01-continua%C3%A7%C3%A3o.svg" /><!-- --></p>
<p>Vamos Converte-lo para o Modelo FÃ­sico-Relacional em linguagem SQL:</p>
<div id="representaÃ§Ã£o-grÃ¡fica-no-modelo-fÃ­sico-relacional" class="section level3 hasAnchor" number="7.4.1">
<h3 class="hasAnchor"><span class="header-section-number">7.4.1</span> RepresentaÃ§Ã£o grÃ¡fica no modelo FÃ­sico-Relacional<a href="#representa%C3%A7%C3%A3o-gr%C3%A1fica-no-modelo-f%C3%ADsico-relacional" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Vamos agora representa-lo em linguagem SQL:</p>
<p><img src="images/2025-09-01/02-TabelaPessoas.jpg" /></p>
</div>
</div>
<div id="criaÃ§Ã£o-de-uma-aplicaÃ§Ã£o-crud" class="section level2 hasAnchor" number="7.5">
<h2 class="hasAnchor"><span class="header-section-number">7.5</span> CriaÃ§Ã£o de uma aplicaÃ§Ã£o CRUD<a href="#cria%C3%A7%C3%A3o-de-uma-aplica%C3%A7%C3%A3o-crud" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>Vamos criar um <strong>microsas</strong> (micro Software As A Service) , ou seja, um site para inserir informaÃ§Ãµes dentro da tabela acima.</p>
<p><img src="images/2025-09-01/04-Aplicacao.jpg" /></p>
<table>
<caption>Criando um Esquema de Banco de Dados - CRUD tabela Pessoas</caption>
<colgroup>
<col width="50%" />
<col width="50%" />
</colgroup>
<thead>
<tr class="header">
<th>InformaÃ§Ãµes de Projeto</th>
<th>Tecnologias utilizadas no projeto CRUD</th>
</tr>
</thead>
<tbody>
<tr class="odd">
<td>Servidor de banco de dados SGBD</td>
<td>MySQL 8</td>
</tr>
<tr class="even">
<td>UsuÃ¡rio de Banco de Dados</td>
<td><strong>pessoas_user</strong></td>
</tr>
<tr class="odd">
<td>De onde pode ser acessado</td>
<td>Apenas MÃ¡quina Local (localhost)</td>
</tr>
<tr class="even">
<td>Esquema de Banco de Dados</td>
<td><strong>pessoasdb</strong></td>
</tr>
<tr class="odd">
<td>Servidor de AplicaÃ§Ã£o</td>
<td>Python 3</td>
</tr>
<tr class="even">
<td>Cliente da AplicaÃ§Ã£o</td>
<td>HTML + Javascript</td>
</tr>
<tr class="odd">
<td>Tecnologia de API</td>
<td>RestuFul</td>
</tr>
<tr class="even">
<td><strong>Biblioteca de Javascript</strong> para criar API <strong>RestFul</strong></td>
<td>MÃ©todo <strong>Fetch</strong> (Biblioteca PadrÃ£o do JavaScript para API RestFul)</td>
</tr>
<tr class="odd">
<td>Formato de Dados entre Servidor de AplicaÃ§Ã£o e Cliente de AplicaÃ§Ã£o</td>
<td><strong>JSON</strong></td>
</tr>
</tbody>
</table>
<div id="criaÃ§Ã£o-de-um-usuÃ¡rio-para-interagir-com-o-esquema-de-banco-de-dados" class="section level4 hasAnchor" number="7.5.0.1">
<h4 class="hasAnchor"><span class="header-section-number">7.5.0.1</span> CriaÃ§Ã£o de um usuÃ¡rio para Interagir com o Esquema de Banco de Dados<a href="#cria%C3%A7%C3%A3o-de-um-usu%C3%A1rio-para-interagir-com-o-esquema-de-banco-de-dados" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/2025-09-01/05-Usuario.jpg" /></p>
<div class="sourceCode" id="cb50"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb50-1"><a href="#cb50-1" tabindex="-1"></a></span>
<span id="cb50-2"><a href="#cb50-2" tabindex="-1"></a><span class="co">-- CRIAR USUÃRIO LOCAL E CONCEDER PERMISSÃ•ES</span></span>
<span id="cb50-3"><a href="#cb50-3" tabindex="-1"></a><span class="co">-- Troque &#39;MinhaSenhaForte&#39; por uma senha segura</span></span>
<span id="cb50-4"><a href="#cb50-4" tabindex="-1"></a></span>
<span id="cb50-5"><a href="#cb50-5" tabindex="-1"></a></span>
<span id="cb50-6"><a href="#cb50-6" tabindex="-1"></a><span class="kw">CREATE</span> <span class="fu">USER</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> <span class="st">&#39;pessoas_user&#39;</span>@<span class="st">&#39;localhost&#39;</span> <span class="kw">IDENTIFIED</span> <span class="kw">BY</span> <span class="st">&#39;MinhaSenhaForte&#39;</span>;</span>
<span id="cb50-7"><a href="#cb50-7" tabindex="-1"></a></span>
<span id="cb50-8"><a href="#cb50-8" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> pessoasdb.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;pessoas_user&#39;</span>@<span class="st">&#39;localhost&#39;</span>;</span>
<span id="cb50-9"><a href="#cb50-9" tabindex="-1"></a></span>
<span id="cb50-10"><a href="#cb50-10" tabindex="-1"></a><span class="kw">FLUSH</span> <span class="kw">PRIVILEGES</span>;</span></code></pre></div>
</div>
<div id="criaÃ§Ã£o-do-esquema-de-banco-de-dados-no-sgbd-mysql" class="section level4 hasAnchor" number="7.5.0.2">
<h4 class="hasAnchor"><span class="header-section-number">7.5.0.2</span> CriaÃ§Ã£o do Esquema de Banco de Dados no SGBD MySQL<a href="#cria%C3%A7%C3%A3o-do-esquema-de-banco-de-dados-no-sgbd-mysql" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Agora vamos criar um esquema de Banco de Dados para abrigar nossa futura tabela:</p>
<p><img src="images/2025-09-01/06-Esquema.jpg" /></p>
<div class="sourceCode" id="cb51"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb51-1"><a href="#cb51-1" tabindex="-1"></a><span class="co">-- 1) CRIAR BANCO (ajuste o nome se quiser)</span></span>
<span id="cb51-2"><a href="#cb51-2" tabindex="-1"></a></span>
<span id="cb51-3"><a href="#cb51-3" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> pessoasdb</span>
<span id="cb51-4"><a href="#cb51-4" tabindex="-1"></a>  <span class="dt">CHARACTER</span> <span class="kw">SET</span> utf8mb4</span>
<span id="cb51-5"><a href="#cb51-5" tabindex="-1"></a>  COLLATE utf8mb4_0900_ai_ci;</span>
<span id="cb51-6"><a href="#cb51-6" tabindex="-1"></a></span>
<span id="cb51-7"><a href="#cb51-7" tabindex="-1"></a><span class="kw">USE</span> pessoasdb;</span></code></pre></div>
</div>
<div id="criaÃ§Ã£o-da-tabela-pessoas" class="section level4 hasAnchor" number="7.5.0.3">
<h4 class="hasAnchor"><span class="header-section-number">7.5.0.3</span> CriaÃ§Ã£o da Tabela â€œpessoasâ€<a href="#cria%C3%A7%C3%A3o-da-tabela-pessoas" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/2025-09-01/07-Tabela_Pessoas.jpg" /></p>
<div class="sourceCode" id="cb52"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb52-1"><a href="#cb52-1" tabindex="-1"></a></span>
<span id="cb52-2"><a href="#cb52-2" tabindex="-1"></a><span class="co">-- 3) TABELA &#39;pessoas&#39; COMPATÃVEL COM O MODELO SQLAlchemy</span></span>
<span id="cb52-3"><a href="#cb52-3" tabindex="-1"></a><span class="co">--    - cpf: chave primÃ¡ria (String(14))</span></span>
<span id="cb52-4"><a href="#cb52-4" tabindex="-1"></a><span class="co">--    - nome, endereco, foto: TEXT</span></span>
<span id="cb52-5"><a href="#cb52-5" tabindex="-1"></a><span class="co">--    - data_nascimento: DATE</span></span>
<span id="cb52-6"><a href="#cb52-6" tabindex="-1"></a></span>
<span id="cb52-7"><a href="#cb52-7" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> pessoas </span>
<span id="cb52-8"><a href="#cb52-8" tabindex="-1"></a>(</span>
<span id="cb52-9"><a href="#cb52-9" tabindex="-1"></a>  cpf             <span class="dt">VARCHAR</span>(<span class="dv">14</span>)  <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb52-10"><a href="#cb52-10" tabindex="-1"></a>  nome            TEXT         <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb52-11"><a href="#cb52-11" tabindex="-1"></a>  endereco        TEXT         <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb52-12"><a href="#cb52-12" tabindex="-1"></a>  data_nascimento <span class="dt">DATE</span>         <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb52-13"><a href="#cb52-13" tabindex="-1"></a>  foto            TEXT         <span class="kw">NULL</span>,</span>
<span id="cb52-14"><a href="#cb52-14" tabindex="-1"></a>  <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (cpf)</span>
<span id="cb52-15"><a href="#cb52-15" tabindex="-1"></a>) ENGINE<span class="op">=</span>InnoDB <span class="kw">DEFAULT</span> CHARSET<span class="op">=</span>utf8mb4 COLLATE<span class="op">=</span>utf8mb4_0900_ai_ci;</span>
<span id="cb52-16"><a href="#cb52-16" tabindex="-1"></a></span>
<span id="cb52-17"><a href="#cb52-17" tabindex="-1"></a></span>
<span id="cb52-18"><a href="#cb52-18" tabindex="-1"></a><span class="co">-- 4) (OPCIONAL) ÃNDICES PARA BUSCA</span></span>
<span id="cb52-19"><a href="#cb52-19" tabindex="-1"></a><span class="co">-- Seu endpoint usa LIKE/ILIKE em nome e cpf; cpf jÃ¡ Ã© PK.</span></span>
<span id="cb52-20"><a href="#cb52-20" tabindex="-1"></a><span class="co">-- Para acelerar buscas por nome com LIKE, crie um Ã­ndice por prefixo.</span></span>
<span id="cb52-21"><a href="#cb52-21" tabindex="-1"></a><span class="co">-- OBS: Ã­ndices em TEXT precisam de comprimento; 128 costuma ser um bom compromisso.</span></span>
<span id="cb52-22"><a href="#cb52-22" tabindex="-1"></a></span>
<span id="cb52-23"><a href="#cb52-23" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_pessoas_nome_prefix <span class="kw">ON</span> pessoas (nome(<span class="dv">128</span>));</span></code></pre></div>
</div>
<div id="uma-aplicaÃ§Ã£o-cliente-servidor-no-formato-mvc-model-view-controller" class="section level4 hasAnchor" number="7.5.0.4">
<h4 class="hasAnchor"><span class="header-section-number">7.5.0.4</span> Uma aplicaÃ§Ã£o Cliente Servidor no formato MVC (Model View Controller)<a href="#uma-aplica%C3%A7%C3%A3o-cliente-servidor-no-formato-mvc-model-view-controller" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/Aplicacao-MVC-CRUD-Pessoas-01.svg" /><!-- --></p>
</div>
<div id="criaÃ§Ã£o-do-servidor-de-aplicaÃ§Ã£o-em-linguagem-python" class="section level4 hasAnchor" number="7.5.0.5">
<h4 class="hasAnchor"><span class="header-section-number">7.5.0.5</span> CriaÃ§Ã£o do Servidor de AplicaÃ§Ã£o em Linguagem Python<a href="#cria%C3%A7%C3%A3o-do-servidor-de-aplica%C3%A7%C3%A3o-em-linguagem-python" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Vejamos a representaÃ§Ã£o grÃ¡fica de nosso servidor utilizando o diagrama de classes da linguagem UML</p>
<p><img src="images/Servidor-CRUD-Pessoas-01.svg" /><!-- --></p>
<p>Para utilizar o MySQL como servidor, devemos instalar os drivers de MySQL para a biblioteca SQLAlchemy do Python atravÃ©s da ferramenta de linha de comando PIP do python</p>
<div class="sourceCode" id="cb53"><pre class="sourceCode cmd"><code class="sourceCode dosbat"><span id="cb53-1"><a href="#cb53-1" tabindex="-1"></a>pip install flask flask<span class="at">-cors</span> sqlalchemy <span class="st">&quot;pymysql&gt;=1.1&quot;</span></span>
<span id="cb53-2"><a href="#cb53-2" tabindex="-1"></a># (ou use mysqlclient: pip install mysqlclient e troque o driver para mysql+mysqlclient<span class="kw">)</span></span></code></pre></div>
<p>Agora vamos escrever o script python que criarÃ¡ o servidor de aplicaÃ§Ã£o para interfacear nosso Cliente no Navegador e nossa tabela pessoas dentro do SGBD MySQL:</p>
<div class="sourceCode" id="cb54"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb54-1"><a href="#cb54-1" tabindex="-1"></a><span class="im">from</span> flask <span class="im">import</span> Flask, request, jsonify</span>
<span id="cb54-2"><a href="#cb54-2" tabindex="-1"></a><span class="im">from</span> flask_cors <span class="im">import</span> CORS</span>
<span id="cb54-3"><a href="#cb54-3" tabindex="-1"></a><span class="im">from</span> sqlalchemy <span class="im">import</span> create_engine, Column, String, Date, Text</span>
<span id="cb54-4"><a href="#cb54-4" tabindex="-1"></a><span class="im">from</span> sqlalchemy.orm <span class="im">import</span> sessionmaker, declarative_base</span>
<span id="cb54-5"><a href="#cb54-5" tabindex="-1"></a><span class="im">from</span> datetime <span class="im">import</span> date</span>
<span id="cb54-6"><a href="#cb54-6" tabindex="-1"></a></span>
<span id="cb54-7"><a href="#cb54-7" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb54-8"><a href="#cb54-8" tabindex="-1"></a><span class="co"># Flask + CORS</span></span>
<span id="cb54-9"><a href="#cb54-9" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb54-10"><a href="#cb54-10" tabindex="-1"></a>app <span class="op">=</span> Flask(<span class="va">__name__</span>)</span>
<span id="cb54-11"><a href="#cb54-11" tabindex="-1"></a>CORS(app)  <span class="co"># em produÃ§Ã£o, restrinja as origens</span></span>
<span id="cb54-12"><a href="#cb54-12" tabindex="-1"></a></span>
<span id="cb54-13"><a href="#cb54-13" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb54-14"><a href="#cb54-14" tabindex="-1"></a><span class="co"># Banco de Dados MySQL (localhost)</span></span>
<span id="cb54-15"><a href="#cb54-15" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb54-16"><a href="#cb54-16" tabindex="-1"></a><span class="co"># ParÃ¢metros do projeto:</span></span>
<span id="cb54-17"><a href="#cb54-17" tabindex="-1"></a><span class="co">#   SGBD: MySQL 8</span></span>
<span id="cb54-18"><a href="#cb54-18" tabindex="-1"></a><span class="co">#   Host: localhost</span></span>
<span id="cb54-19"><a href="#cb54-19" tabindex="-1"></a><span class="co">#   UsuÃ¡rio: pessoas_user</span></span>
<span id="cb54-20"><a href="#cb54-20" tabindex="-1"></a><span class="co">#   DB/Schema: pessoasdb</span></span>
<span id="cb54-21"><a href="#cb54-21" tabindex="-1"></a><span class="co">#   Tabela: pessoas</span></span>
<span id="cb54-22"><a href="#cb54-22" tabindex="-1"></a>DATABASE_URL <span class="op">=</span> <span class="st">&quot;mysql+pymysql://pessoas_user:MinhaSenhaForte@localhost:3306/pessoasdb&quot;</span></span>
<span id="cb54-23"><a href="#cb54-23" tabindex="-1"></a></span>
<span id="cb54-24"><a href="#cb54-24" tabindex="-1"></a>engine <span class="op">=</span> create_engine(</span>
<span id="cb54-25"><a href="#cb54-25" tabindex="-1"></a>    DATABASE_URL,</span>
<span id="cb54-26"><a href="#cb54-26" tabindex="-1"></a>    pool_pre_ping<span class="op">=</span><span class="va">True</span>,        <span class="co"># evita &quot;MySQL server has gone away&quot;</span></span>
<span id="cb54-27"><a href="#cb54-27" tabindex="-1"></a>    future<span class="op">=</span><span class="va">True</span></span>
<span id="cb54-28"><a href="#cb54-28" tabindex="-1"></a>)</span>
<span id="cb54-29"><a href="#cb54-29" tabindex="-1"></a>SessionLocal <span class="op">=</span> sessionmaker(bind<span class="op">=</span>engine, autoflush<span class="op">=</span><span class="va">False</span>, autocommit<span class="op">=</span><span class="va">False</span>, future<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-30"><a href="#cb54-30" tabindex="-1"></a>Base <span class="op">=</span> declarative_base()</span>
<span id="cb54-31"><a href="#cb54-31" tabindex="-1"></a></span>
<span id="cb54-32"><a href="#cb54-32" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb54-33"><a href="#cb54-33" tabindex="-1"></a><span class="co"># Modelo Pessoa</span></span>
<span id="cb54-34"><a href="#cb54-34" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb54-35"><a href="#cb54-35" tabindex="-1"></a><span class="kw">class</span> Pessoa(Base):</span>
<span id="cb54-36"><a href="#cb54-36" tabindex="-1"></a>    __tablename__ <span class="op">=</span> <span class="st">&quot;pessoas&quot;</span></span>
<span id="cb54-37"><a href="#cb54-37" tabindex="-1"></a>    cpf <span class="op">=</span> Column(String(<span class="dv">14</span>), primary_key<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-38"><a href="#cb54-38" tabindex="-1"></a>    nome <span class="op">=</span> Column(Text, nullable<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb54-39"><a href="#cb54-39" tabindex="-1"></a>    endereco <span class="op">=</span> Column(Text, nullable<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb54-40"><a href="#cb54-40" tabindex="-1"></a>    data_nascimento <span class="op">=</span> Column(Date, nullable<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb54-41"><a href="#cb54-41" tabindex="-1"></a>    foto <span class="op">=</span> Column(Text)  <span class="co"># Base64 ou URL</span></span>
<span id="cb54-42"><a href="#cb54-42" tabindex="-1"></a></span>
<span id="cb54-43"><a href="#cb54-43" tabindex="-1"></a><span class="co"># Cria a tabela se nÃ£o existir (deve existir conforme seu script SQL)</span></span>
<span id="cb54-44"><a href="#cb54-44" tabindex="-1"></a>Base.metadata.create_all(engine)</span>
<span id="cb54-45"><a href="#cb54-45" tabindex="-1"></a></span>
<span id="cb54-46"><a href="#cb54-46" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb54-47"><a href="#cb54-47" tabindex="-1"></a><span class="co"># Helpers</span></span>
<span id="cb54-48"><a href="#cb54-48" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb54-49"><a href="#cb54-49" tabindex="-1"></a><span class="kw">def</span> to_dict(p: Pessoa):</span>
<span id="cb54-50"><a href="#cb54-50" tabindex="-1"></a>    <span class="cf">return</span> {</span>
<span id="cb54-51"><a href="#cb54-51" tabindex="-1"></a>        <span class="st">&quot;cpf&quot;</span>: p.cpf,</span>
<span id="cb54-52"><a href="#cb54-52" tabindex="-1"></a>        <span class="st">&quot;nome&quot;</span>: p.nome,</span>
<span id="cb54-53"><a href="#cb54-53" tabindex="-1"></a>        <span class="st">&quot;endereco&quot;</span>: p.endereco,</span>
<span id="cb54-54"><a href="#cb54-54" tabindex="-1"></a>        <span class="st">&quot;data_nascimento&quot;</span>: p.data_nascimento.isoformat(),</span>
<span id="cb54-55"><a href="#cb54-55" tabindex="-1"></a>        <span class="st">&quot;foto&quot;</span>: p.foto</span>
<span id="cb54-56"><a href="#cb54-56" tabindex="-1"></a>    }</span>
<span id="cb54-57"><a href="#cb54-57" tabindex="-1"></a></span>
<span id="cb54-58"><a href="#cb54-58" tabindex="-1"></a><span class="kw">def</span> parse_date_iso(value):</span>
<span id="cb54-59"><a href="#cb54-59" tabindex="-1"></a>    <span class="cf">if</span> <span class="bu">isinstance</span>(value, date):</span>
<span id="cb54-60"><a href="#cb54-60" tabindex="-1"></a>        <span class="cf">return</span> value</span>
<span id="cb54-61"><a href="#cb54-61" tabindex="-1"></a>    <span class="cf">return</span> date.fromisoformat(value)  <span class="co"># espera &quot;YYYY-MM-DD&quot;</span></span>
<span id="cb54-62"><a href="#cb54-62" tabindex="-1"></a></span>
<span id="cb54-63"><a href="#cb54-63" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb54-64"><a href="#cb54-64" tabindex="-1"></a><span class="co"># CRUD</span></span>
<span id="cb54-65"><a href="#cb54-65" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb54-66"><a href="#cb54-66" tabindex="-1"></a></span>
<span id="cb54-67"><a href="#cb54-67" tabindex="-1"></a><span class="co"># Listar todas as pessoas ou pesquisar por termo (?q=)</span></span>
<span id="cb54-68"><a href="#cb54-68" tabindex="-1"></a><span class="at">@app.route</span>(<span class="st">&#39;/pessoas&#39;</span>, methods<span class="op">=</span>[<span class="st">&#39;GET&#39;</span>])</span>
<span id="cb54-69"><a href="#cb54-69" tabindex="-1"></a><span class="kw">def</span> listar():</span>
<span id="cb54-70"><a href="#cb54-70" tabindex="-1"></a>    termo <span class="op">=</span> (request.args.get(<span class="st">&#39;q&#39;</span>) <span class="kw">or</span> <span class="st">&#39;&#39;</span>).strip()</span>
<span id="cb54-71"><a href="#cb54-71" tabindex="-1"></a>    <span class="cf">with</span> SessionLocal() <span class="im">as</span> session:</span>
<span id="cb54-72"><a href="#cb54-72" tabindex="-1"></a>        query <span class="op">=</span> session.query(Pessoa)</span>
<span id="cb54-73"><a href="#cb54-73" tabindex="-1"></a>        <span class="cf">if</span> termo:</span>
<span id="cb54-74"><a href="#cb54-74" tabindex="-1"></a>            like <span class="op">=</span> <span class="ss">f&quot;%</span><span class="sc">{</span>termo<span class="sc">}</span><span class="ss">%&quot;</span></span>
<span id="cb54-75"><a href="#cb54-75" tabindex="-1"></a>            <span class="co"># MySQL Ã© case-insensitive com collation *_ci; ilike Ã© traduzido para LIKE</span></span>
<span id="cb54-76"><a href="#cb54-76" tabindex="-1"></a>            query <span class="op">=</span> query.<span class="bu">filter</span>((Pessoa.nome.ilike(like)) <span class="op">|</span> (Pessoa.cpf.ilike(like)))</span>
<span id="cb54-77"><a href="#cb54-77" tabindex="-1"></a>        pessoas <span class="op">=</span> query.order_by(Pessoa.nome.asc()).<span class="bu">all</span>()</span>
<span id="cb54-78"><a href="#cb54-78" tabindex="-1"></a>        <span class="cf">return</span> jsonify([to_dict(p) <span class="cf">for</span> p <span class="kw">in</span> pessoas])</span>
<span id="cb54-79"><a href="#cb54-79" tabindex="-1"></a></span>
<span id="cb54-80"><a href="#cb54-80" tabindex="-1"></a><span class="co"># Inserir nova pessoa</span></span>
<span id="cb54-81"><a href="#cb54-81" tabindex="-1"></a><span class="at">@app.route</span>(<span class="st">&#39;/pessoas&#39;</span>, methods<span class="op">=</span>[<span class="st">&#39;POST&#39;</span>])</span>
<span id="cb54-82"><a href="#cb54-82" tabindex="-1"></a><span class="kw">def</span> inserir():</span>
<span id="cb54-83"><a href="#cb54-83" tabindex="-1"></a>    dados <span class="op">=</span> request.get_json(force<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-84"><a href="#cb54-84" tabindex="-1"></a>    required <span class="op">=</span> [<span class="st">&#39;cpf&#39;</span>, <span class="st">&#39;nome&#39;</span>, <span class="st">&#39;endereco&#39;</span>, <span class="st">&#39;data_nascimento&#39;</span>]</span>
<span id="cb54-85"><a href="#cb54-85" tabindex="-1"></a>    faltantes <span class="op">=</span> [k <span class="cf">for</span> k <span class="kw">in</span> required <span class="cf">if</span> <span class="kw">not</span> dados.get(k)]</span>
<span id="cb54-86"><a href="#cb54-86" tabindex="-1"></a>    <span class="cf">if</span> faltantes:</span>
<span id="cb54-87"><a href="#cb54-87" tabindex="-1"></a>        <span class="cf">return</span> jsonify({<span class="st">&quot;error&quot;</span>: <span class="st">&quot;Campos obrigatÃ³rios faltando&quot;</span>, <span class="st">&quot;fields&quot;</span>: faltantes}), <span class="dv">422</span></span>
<span id="cb54-88"><a href="#cb54-88" tabindex="-1"></a></span>
<span id="cb54-89"><a href="#cb54-89" tabindex="-1"></a>    <span class="cf">try</span>:</span>
<span id="cb54-90"><a href="#cb54-90" tabindex="-1"></a>        dn <span class="op">=</span> parse_date_iso(dados[<span class="st">&#39;data_nascimento&#39;</span>])</span>
<span id="cb54-91"><a href="#cb54-91" tabindex="-1"></a>    <span class="cf">except</span> <span class="pp">Exception</span>:</span>
<span id="cb54-92"><a href="#cb54-92" tabindex="-1"></a>        <span class="cf">return</span> jsonify({<span class="st">&quot;error&quot;</span>: <span class="st">&quot;data_nascimento invÃ¡lida. Use YYYY-MM-DD&quot;</span>}), <span class="dv">422</span></span>
<span id="cb54-93"><a href="#cb54-93" tabindex="-1"></a></span>
<span id="cb54-94"><a href="#cb54-94" tabindex="-1"></a>    <span class="cf">with</span> SessionLocal() <span class="im">as</span> session:</span>
<span id="cb54-95"><a href="#cb54-95" tabindex="-1"></a>        <span class="cf">if</span> session.query(Pessoa).filter_by(cpf<span class="op">=</span>dados[<span class="st">&#39;cpf&#39;</span>]).first():</span>
<span id="cb54-96"><a href="#cb54-96" tabindex="-1"></a>            <span class="cf">return</span> jsonify({<span class="st">&quot;error&quot;</span>: <span class="st">&quot;CPF jÃ¡ cadastrado&quot;</span>}), <span class="dv">409</span></span>
<span id="cb54-97"><a href="#cb54-97" tabindex="-1"></a>        pessoa <span class="op">=</span> Pessoa(</span>
<span id="cb54-98"><a href="#cb54-98" tabindex="-1"></a>            cpf<span class="op">=</span>dados[<span class="st">&#39;cpf&#39;</span>],</span>
<span id="cb54-99"><a href="#cb54-99" tabindex="-1"></a>            nome<span class="op">=</span>dados[<span class="st">&#39;nome&#39;</span>],</span>
<span id="cb54-100"><a href="#cb54-100" tabindex="-1"></a>            endereco<span class="op">=</span>dados[<span class="st">&#39;endereco&#39;</span>],</span>
<span id="cb54-101"><a href="#cb54-101" tabindex="-1"></a>            data_nascimento<span class="op">=</span>dn,</span>
<span id="cb54-102"><a href="#cb54-102" tabindex="-1"></a>            foto<span class="op">=</span>dados.get(<span class="st">&#39;foto&#39;</span>)</span>
<span id="cb54-103"><a href="#cb54-103" tabindex="-1"></a>        )</span>
<span id="cb54-104"><a href="#cb54-104" tabindex="-1"></a>        session.add(pessoa)</span>
<span id="cb54-105"><a href="#cb54-105" tabindex="-1"></a>        session.commit()</span>
<span id="cb54-106"><a href="#cb54-106" tabindex="-1"></a>        session.refresh(pessoa)</span>
<span id="cb54-107"><a href="#cb54-107" tabindex="-1"></a>        <span class="cf">return</span> jsonify(to_dict(pessoa)), <span class="dv">201</span></span>
<span id="cb54-108"><a href="#cb54-108" tabindex="-1"></a></span>
<span id="cb54-109"><a href="#cb54-109" tabindex="-1"></a><span class="co"># Alterar pessoa (PUT)</span></span>
<span id="cb54-110"><a href="#cb54-110" tabindex="-1"></a><span class="at">@app.route</span>(<span class="st">&#39;/pessoas/&lt;cpf&gt;&#39;</span>, methods<span class="op">=</span>[<span class="st">&#39;PUT&#39;</span>])</span>
<span id="cb54-111"><a href="#cb54-111" tabindex="-1"></a><span class="kw">def</span> alterar(cpf):</span>
<span id="cb54-112"><a href="#cb54-112" tabindex="-1"></a>    dados <span class="op">=</span> request.get_json(force<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb54-113"><a href="#cb54-113" tabindex="-1"></a>    <span class="cf">with</span> SessionLocal() <span class="im">as</span> session:</span>
<span id="cb54-114"><a href="#cb54-114" tabindex="-1"></a>        pessoa <span class="op">=</span> session.query(Pessoa).filter_by(cpf<span class="op">=</span>cpf).first()</span>
<span id="cb54-115"><a href="#cb54-115" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> pessoa:</span>
<span id="cb54-116"><a href="#cb54-116" tabindex="-1"></a>            <span class="cf">return</span> jsonify({<span class="st">&quot;error&quot;</span>: <span class="st">&quot;CPF nÃ£o encontrado&quot;</span>}), <span class="dv">404</span></span>
<span id="cb54-117"><a href="#cb54-117" tabindex="-1"></a></span>
<span id="cb54-118"><a href="#cb54-118" tabindex="-1"></a>        <span class="cf">if</span> <span class="st">&#39;nome&#39;</span> <span class="kw">in</span> dados <span class="kw">and</span> dados[<span class="st">&#39;nome&#39;</span>] <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb54-119"><a href="#cb54-119" tabindex="-1"></a>            pessoa.nome <span class="op">=</span> dados[<span class="st">&#39;nome&#39;</span>]</span>
<span id="cb54-120"><a href="#cb54-120" tabindex="-1"></a>        <span class="cf">if</span> <span class="st">&#39;endereco&#39;</span> <span class="kw">in</span> dados <span class="kw">and</span> dados[<span class="st">&#39;endereco&#39;</span>] <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb54-121"><a href="#cb54-121" tabindex="-1"></a>            pessoa.endereco <span class="op">=</span> dados[<span class="st">&#39;endereco&#39;</span>]</span>
<span id="cb54-122"><a href="#cb54-122" tabindex="-1"></a>        <span class="cf">if</span> <span class="st">&#39;data_nascimento&#39;</span> <span class="kw">in</span> dados <span class="kw">and</span> dados[<span class="st">&#39;data_nascimento&#39;</span>] <span class="kw">is</span> <span class="kw">not</span> <span class="va">None</span>:</span>
<span id="cb54-123"><a href="#cb54-123" tabindex="-1"></a>            <span class="cf">try</span>:</span>
<span id="cb54-124"><a href="#cb54-124" tabindex="-1"></a>                pessoa.data_nascimento <span class="op">=</span> parse_date_iso(dados[<span class="st">&#39;data_nascimento&#39;</span>])</span>
<span id="cb54-125"><a href="#cb54-125" tabindex="-1"></a>            <span class="cf">except</span> <span class="pp">Exception</span>:</span>
<span id="cb54-126"><a href="#cb54-126" tabindex="-1"></a>                <span class="cf">return</span> jsonify({<span class="st">&quot;error&quot;</span>: <span class="st">&quot;data_nascimento invÃ¡lida. Use YYYY-MM-DD&quot;</span>}), <span class="dv">422</span></span>
<span id="cb54-127"><a href="#cb54-127" tabindex="-1"></a>        <span class="cf">if</span> <span class="st">&#39;foto&#39;</span> <span class="kw">in</span> dados:</span>
<span id="cb54-128"><a href="#cb54-128" tabindex="-1"></a>            pessoa.foto <span class="op">=</span> dados[<span class="st">&#39;foto&#39;</span>]</span>
<span id="cb54-129"><a href="#cb54-129" tabindex="-1"></a></span>
<span id="cb54-130"><a href="#cb54-130" tabindex="-1"></a>        session.commit()</span>
<span id="cb54-131"><a href="#cb54-131" tabindex="-1"></a>        session.refresh(pessoa)</span>
<span id="cb54-132"><a href="#cb54-132" tabindex="-1"></a>        <span class="cf">return</span> jsonify(to_dict(pessoa)), <span class="dv">200</span></span>
<span id="cb54-133"><a href="#cb54-133" tabindex="-1"></a></span>
<span id="cb54-134"><a href="#cb54-134" tabindex="-1"></a><span class="co"># Remover pessoa</span></span>
<span id="cb54-135"><a href="#cb54-135" tabindex="-1"></a><span class="at">@app.route</span>(<span class="st">&#39;/pessoas/&lt;cpf&gt;&#39;</span>, methods<span class="op">=</span>[<span class="st">&#39;DELETE&#39;</span>])</span>
<span id="cb54-136"><a href="#cb54-136" tabindex="-1"></a><span class="kw">def</span> remover(cpf):</span>
<span id="cb54-137"><a href="#cb54-137" tabindex="-1"></a>    <span class="cf">with</span> SessionLocal() <span class="im">as</span> session:</span>
<span id="cb54-138"><a href="#cb54-138" tabindex="-1"></a>        pessoa <span class="op">=</span> session.query(Pessoa).filter_by(cpf<span class="op">=</span>cpf).first()</span>
<span id="cb54-139"><a href="#cb54-139" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> pessoa:</span>
<span id="cb54-140"><a href="#cb54-140" tabindex="-1"></a>            <span class="cf">return</span> jsonify({<span class="st">&quot;error&quot;</span>: <span class="st">&quot;CPF nÃ£o encontrado&quot;</span>}), <span class="dv">404</span></span>
<span id="cb54-141"><a href="#cb54-141" tabindex="-1"></a>        session.delete(pessoa)</span>
<span id="cb54-142"><a href="#cb54-142" tabindex="-1"></a>        session.commit()</span>
<span id="cb54-143"><a href="#cb54-143" tabindex="-1"></a>        <span class="cf">return</span> <span class="st">&#39;&#39;</span>, <span class="dv">204</span></span>
<span id="cb54-144"><a href="#cb54-144" tabindex="-1"></a></span>
<span id="cb54-145"><a href="#cb54-145" tabindex="-1"></a><span class="co"># Buscar pessoa por CPF</span></span>
<span id="cb54-146"><a href="#cb54-146" tabindex="-1"></a><span class="at">@app.route</span>(<span class="st">&#39;/pessoas/&lt;cpf&gt;&#39;</span>, methods<span class="op">=</span>[<span class="st">&#39;GET&#39;</span>])</span>
<span id="cb54-147"><a href="#cb54-147" tabindex="-1"></a><span class="kw">def</span> buscar(cpf):</span>
<span id="cb54-148"><a href="#cb54-148" tabindex="-1"></a>    <span class="cf">with</span> SessionLocal() <span class="im">as</span> session:</span>
<span id="cb54-149"><a href="#cb54-149" tabindex="-1"></a>        pessoa <span class="op">=</span> session.query(Pessoa).filter_by(cpf<span class="op">=</span>cpf).first()</span>
<span id="cb54-150"><a href="#cb54-150" tabindex="-1"></a>        <span class="cf">if</span> <span class="kw">not</span> pessoa:</span>
<span id="cb54-151"><a href="#cb54-151" tabindex="-1"></a>            <span class="cf">return</span> jsonify({<span class="st">&quot;error&quot;</span>: <span class="st">&quot;CPF nÃ£o encontrado&quot;</span>}), <span class="dv">404</span></span>
<span id="cb54-152"><a href="#cb54-152" tabindex="-1"></a>        <span class="cf">return</span> jsonify(to_dict(pessoa))</span>
<span id="cb54-153"><a href="#cb54-153" tabindex="-1"></a></span>
<span id="cb54-154"><a href="#cb54-154" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb54-155"><a href="#cb54-155" tabindex="-1"></a><span class="co"># Inicia o servidor</span></span>
<span id="cb54-156"><a href="#cb54-156" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb54-157"><a href="#cb54-157" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&#39;__main__&#39;</span>:</span>
<span id="cb54-158"><a href="#cb54-158" tabindex="-1"></a>    app.run(debug<span class="op">=</span><span class="va">True</span>, port<span class="op">=</span><span class="dv">5000</span>)</span></code></pre></div>
</div>
<div id="criaÃ§Ã£o-do-cliente-de-aplicaÃ§Ã£o-em-html-parte-grÃ¡fica-e-javascript-programaÃ§Ã£o-executÃ¡vel" class="section level4 hasAnchor" number="7.5.0.6">
<h4 class="hasAnchor"><span class="header-section-number">7.5.0.6</span> CriaÃ§Ã£o do Cliente de AplicaÃ§Ã£o em HTML (Parte GrÃ¡fica) e Javascript (ProgramaÃ§Ã£o ExecutÃ¡vel)<a href="#cria%C3%A7%C3%A3o-do-cliente-de-aplica%C3%A7%C3%A3o-em-html-parte-gr%C3%A1fica-e-javascript-programa%C3%A7%C3%A3o-execut%C3%A1vel" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p>Vamos verificar como Ã© o Diagrama de Classes do Cliente que vai conversar com o servidor que vimos anteriormente:</p>
<p><img src="images/2025-09-01/09-cliente.jpg" /></p>
<p>Agora vamos verificar o cÃ³digo-fonte.</p>
<p>Salve esse cÃ³digo em um arquivo chamado <strong>cliente.html</strong>, para poder abrir-lo no navegador, juntamente com o servidor rodando:</p>
<div class="sourceCode" id="cb55"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb55-1"><a href="#cb55-1" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb55-2"><a href="#cb55-2" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="ot"> lang</span><span class="op">=</span><span class="st">&quot;pt-BR&quot;</span><span class="dt">&gt;</span></span>
<span id="cb55-3"><a href="#cb55-3" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb55-4"><a href="#cb55-4" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> charset</span><span class="op">=</span><span class="st">&quot;UTF-8&quot;</span><span class="dt">&gt;</span></span>
<span id="cb55-5"><a href="#cb55-5" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Cadastro de Pessoas - Flask/MySQL<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb55-6"><a href="#cb55-6" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb55-7"><a href="#cb55-7" tabindex="-1"></a>  body { <span class="kw">font-family</span><span class="ch">:</span> <span class="dv">system-ui</span><span class="op">,</span> <span class="dv">-apple-system</span><span class="op">,</span> <span class="dv">Segoe UI</span><span class="op">,</span> <span class="dv">Roboto</span><span class="op">,</span> <span class="dv">Arial</span><span class="op">;</span> <span class="kw">max-width</span><span class="ch">:</span> <span class="dv">980</span><span class="dt">px</span><span class="op">;</span> <span class="kw">margin</span><span class="ch">:</span> <span class="dv">24</span><span class="dt">px</span> <span class="bu">auto</span><span class="op">;</span> }</span>
<span id="cb55-8"><a href="#cb55-8" tabindex="-1"></a>  label { <span class="kw">display</span><span class="ch">:</span> <span class="dv">block</span><span class="op">;</span> <span class="kw">margin-top</span><span class="ch">:</span> <span class="dv">10</span><span class="dt">px</span><span class="op">;</span> }</span>
<span id="cb55-9"><a href="#cb55-9" tabindex="-1"></a>  button { <span class="kw">margin-top</span><span class="ch">:</span> <span class="dv">10</span><span class="dt">px</span><span class="op">;</span> <span class="kw">margin-right</span><span class="ch">:</span> <span class="dv">6</span><span class="dt">px</span><span class="op">;</span> <span class="kw">padding</span><span class="ch">:</span> <span class="dv">8</span><span class="dt">px</span> <span class="dv">12</span><span class="dt">px</span><span class="op">;</span> }</span>
<span id="cb55-10"><a href="#cb55-10" tabindex="-1"></a>  table { <span class="kw">border-collapse</span><span class="ch">:</span> <span class="dv">collapse</span><span class="op">;</span> <span class="kw">width</span><span class="ch">:</span><span class="dv">100</span><span class="dt">%</span><span class="op">;</span> <span class="kw">margin-top</span><span class="ch">:</span><span class="dv">20</span><span class="dt">px</span><span class="op">;</span> }</span>
<span id="cb55-11"><a href="#cb55-11" tabindex="-1"></a>  th<span class="op">,</span> td { <span class="kw">border</span><span class="ch">:</span><span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#ddd</span><span class="op">;</span> <span class="kw">padding</span><span class="ch">:</span><span class="dv">8</span><span class="dt">px</span><span class="op">;</span> <span class="kw">text-align</span><span class="ch">:</span><span class="dv">left</span><span class="op">;</span> }</span>
<span id="cb55-12"><a href="#cb55-12" tabindex="-1"></a>  img<span class="fu">.thumb</span> { <span class="kw">width</span><span class="ch">:</span><span class="dv">60</span><span class="dt">px</span><span class="op">;</span> <span class="kw">height</span><span class="ch">:</span><span class="dv">60</span><span class="dt">px</span><span class="op">;</span> <span class="kw">object-fit</span><span class="ch">:</span><span class="dv">cover</span><span class="op">;</span> <span class="kw">border-radius</span><span class="ch">:</span><span class="dv">4</span><span class="dt">px</span><span class="op">;</span> }</span>
<span id="cb55-13"><a href="#cb55-13" tabindex="-1"></a>  <span class="fu">.row</span> { <span class="kw">display</span><span class="ch">:</span><span class="dv">flex</span><span class="op">;</span> <span class="kw">gap</span><span class="ch">:</span><span class="dv">8</span><span class="dt">px</span><span class="op">;</span> <span class="kw">align-items</span><span class="ch">:</span><span class="dv">center</span><span class="op">;</span> <span class="kw">flex-wrap</span><span class="ch">:</span><span class="dv">wrap</span><span class="op">;</span> }</span>
<span id="cb55-14"><a href="#cb55-14" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb55-15"><a href="#cb55-15" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb55-16"><a href="#cb55-16" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb55-17"><a href="#cb55-17" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>Cadastro de Pessoas (Flask/MySQL)<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb55-18"><a href="#cb55-18" tabindex="-1"></a></span>
<span id="cb55-19"><a href="#cb55-19" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">form</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;formPessoa&quot;</span><span class="dt">&gt;</span></span>
<span id="cb55-20"><a href="#cb55-20" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">label</span><span class="dt">&gt;</span>CPF (chave primÃ¡ria): <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;cpf&quot;</span><span class="ot"> required</span><span class="dt">&gt;&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb55-21"><a href="#cb55-21" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">label</span><span class="dt">&gt;</span>Nome: <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;nome&quot;</span><span class="ot"> required</span><span class="dt">&gt;&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb55-22"><a href="#cb55-22" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">label</span><span class="dt">&gt;</span>EndereÃ§o: <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;endereco&quot;</span><span class="ot"> required</span><span class="dt">&gt;&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb55-23"><a href="#cb55-23" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">label</span><span class="dt">&gt;</span>Data Nasc.: <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;date&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;data_nascimento&quot;</span><span class="ot"> required</span><span class="dt">&gt;&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb55-24"><a href="#cb55-24" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">label</span><span class="dt">&gt;</span>Foto: <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;file&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;foto&quot;</span><span class="ot"> accept</span><span class="op">=</span><span class="st">&quot;image/*&quot;</span><span class="dt">&gt;&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb55-25"><a href="#cb55-25" tabindex="-1"></a></span>
<span id="cb55-26"><a href="#cb55-26" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;row&quot;</span><span class="dt">&gt;</span></span>
<span id="cb55-27"><a href="#cb55-27" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;button&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;btnInserir&quot;</span><span class="ot"> onclick</span><span class="op">=</span><span class="st">&quot;inserir()&quot;</span><span class="dt">&gt;</span>Inserir<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb55-28"><a href="#cb55-28" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;button&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;btnAlterar&quot;</span><span class="ot"> onclick</span><span class="op">=</span><span class="st">&quot;alterar()&quot;</span><span class="dt">&gt;</span>Alterar<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb55-29"><a href="#cb55-29" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;button&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;btnRemover&quot;</span><span class="ot"> onclick</span><span class="op">=</span><span class="st">&quot;remover()&quot;</span><span class="dt">&gt;</span>Remover<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb55-30"><a href="#cb55-30" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb55-31"><a href="#cb55-31" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">form</span><span class="dt">&gt;</span></span>
<span id="cb55-32"><a href="#cb55-32" tabindex="-1"></a></span>
<span id="cb55-33"><a href="#cb55-33" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Pesquisar<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb55-34"><a href="#cb55-34" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;row&quot;</span><span class="dt">&gt;</span></span>
<span id="cb55-35"><a href="#cb55-35" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;pesquisa&quot;</span><span class="ot"> placeholder</span><span class="op">=</span><span class="st">&quot;Digite nome ou CPF&quot;</span><span class="ot"> style</span><span class="op">=</span><span class="st">&quot;flex:1&quot;</span><span class="dt">&gt;</span></span>
<span id="cb55-36"><a href="#cb55-36" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;button&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;btnPesquisar&quot;</span><span class="ot"> onclick</span><span class="op">=</span><span class="st">&quot;pesquisar()&quot;</span><span class="dt">&gt;</span>Pesquisar<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb55-37"><a href="#cb55-37" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;button&quot;</span><span class="ot"> onclick</span><span class="op">=</span><span class="st">&quot;listar()&quot;</span><span class="dt">&gt;</span>Listar tudo<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb55-38"><a href="#cb55-38" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb55-39"><a href="#cb55-39" tabindex="-1"></a></span>
<span id="cb55-40"><a href="#cb55-40" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">table</span><span class="dt">&gt;</span></span>
<span id="cb55-41"><a href="#cb55-41" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">thead</span><span class="dt">&gt;</span></span>
<span id="cb55-42"><a href="#cb55-42" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb55-43"><a href="#cb55-43" tabindex="-1"></a>      <span class="dt">&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>CPF<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>Foto<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>Nome<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;</span></span>
<span id="cb55-44"><a href="#cb55-44" tabindex="-1"></a>      <span class="dt">&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>EndereÃ§o<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>Nascimento<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;</span></span>
<span id="cb55-45"><a href="#cb55-45" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb55-46"><a href="#cb55-46" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">thead</span><span class="dt">&gt;</span></span>
<span id="cb55-47"><a href="#cb55-47" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">tbody</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;tabela&quot;</span><span class="dt">&gt;&lt;/</span><span class="kw">tbody</span><span class="dt">&gt;</span></span>
<span id="cb55-48"><a href="#cb55-48" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">table</span><span class="dt">&gt;</span></span>
<span id="cb55-49"><a href="#cb55-49" tabindex="-1"></a></span>
<span id="cb55-50"><a href="#cb55-50" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb55-51"><a href="#cb55-51" tabindex="-1"></a><span class="kw">const</span> API <span class="op">=</span> <span class="st">&#39;http://localhost:5000/pessoas&#39;</span><span class="op">;</span></span>
<span id="cb55-52"><a href="#cb55-52" tabindex="-1"></a></span>
<span id="cb55-53"><a href="#cb55-53" tabindex="-1"></a><span class="co">/* ---------- Helpers ---------- */</span></span>
<span id="cb55-54"><a href="#cb55-54" tabindex="-1"></a><span class="kw">function</span> <span class="fu">setBusy</span>(busy) {</span>
<span id="cb55-55"><a href="#cb55-55" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">const</span> id <span class="kw">of</span> [<span class="st">&#39;btnInserir&#39;</span><span class="op">,</span><span class="st">&#39;btnAlterar&#39;</span><span class="op">,</span><span class="st">&#39;btnRemover&#39;</span><span class="op">,</span><span class="st">&#39;btnPesquisar&#39;</span>]) {</span>
<span id="cb55-56"><a href="#cb55-56" tabindex="-1"></a>    <span class="kw">const</span> el <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(id)<span class="op">;</span></span>
<span id="cb55-57"><a href="#cb55-57" tabindex="-1"></a>    <span class="cf">if</span> (el) el<span class="op">.</span><span class="at">disabled</span> <span class="op">=</span> busy<span class="op">;</span></span>
<span id="cb55-58"><a href="#cb55-58" tabindex="-1"></a>  }</span>
<span id="cb55-59"><a href="#cb55-59" tabindex="-1"></a>}</span>
<span id="cb55-60"><a href="#cb55-60" tabindex="-1"></a></span>
<span id="cb55-61"><a href="#cb55-61" tabindex="-1"></a><span class="kw">function</span> <span class="fu">validaCampos</span>() {</span>
<span id="cb55-62"><a href="#cb55-62" tabindex="-1"></a>  <span class="kw">const</span> campos <span class="op">=</span> [<span class="st">&#39;cpf&#39;</span><span class="op">,</span><span class="st">&#39;nome&#39;</span><span class="op">,</span><span class="st">&#39;endereco&#39;</span><span class="op">,</span><span class="st">&#39;data_nascimento&#39;</span>]<span class="op">;</span></span>
<span id="cb55-63"><a href="#cb55-63" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">const</span> id <span class="kw">of</span> campos) {</span>
<span id="cb55-64"><a href="#cb55-64" tabindex="-1"></a>    <span class="kw">const</span> valor <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(id)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb55-65"><a href="#cb55-65" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>valor) {</span>
<span id="cb55-66"><a href="#cb55-66" tabindex="-1"></a>      <span class="fu">alert</span>(<span class="vs">`O campo &quot;</span><span class="sc">${</span>id<span class="sc">}</span><span class="vs">&quot; nÃ£o pode ficar em branco.`</span>)<span class="op">;</span></span>
<span id="cb55-67"><a href="#cb55-67" tabindex="-1"></a>      <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb55-68"><a href="#cb55-68" tabindex="-1"></a>    }</span>
<span id="cb55-69"><a href="#cb55-69" tabindex="-1"></a>  }</span>
<span id="cb55-70"><a href="#cb55-70" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb55-71"><a href="#cb55-71" tabindex="-1"></a>}</span>
<span id="cb55-72"><a href="#cb55-72" tabindex="-1"></a></span>
<span id="cb55-73"><a href="#cb55-73" tabindex="-1"></a><span class="kw">function</span> <span class="fu">getFotoBase64</span>() {</span>
<span id="cb55-74"><a href="#cb55-74" tabindex="-1"></a>  <span class="kw">const</span> file <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;foto&#39;</span>)<span class="op">.</span><span class="at">files</span>[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb55-75"><a href="#cb55-75" tabindex="-1"></a>  <span class="cf">if</span>(<span class="op">!</span>file) <span class="cf">return</span> <span class="bu">Promise</span><span class="op">.</span><span class="fu">resolve</span>(<span class="st">&#39;&#39;</span>)<span class="op">;</span></span>
<span id="cb55-76"><a href="#cb55-76" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">new</span> <span class="bu">Promise</span>((resolve<span class="op">,</span>reject)<span class="kw">=&gt;</span>{</span>
<span id="cb55-77"><a href="#cb55-77" tabindex="-1"></a>    <span class="kw">const</span> reader <span class="op">=</span> <span class="kw">new</span> <span class="bu">FileReader</span>()<span class="op">;</span></span>
<span id="cb55-78"><a href="#cb55-78" tabindex="-1"></a>    reader<span class="op">.</span><span class="at">onload</span> <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="fu">resolve</span>(reader<span class="op">.</span><span class="at">result</span>)<span class="op">;</span></span>
<span id="cb55-79"><a href="#cb55-79" tabindex="-1"></a>    reader<span class="op">.</span><span class="at">onerror</span> <span class="op">=</span> reject<span class="op">;</span></span>
<span id="cb55-80"><a href="#cb55-80" tabindex="-1"></a>    reader<span class="op">.</span><span class="fu">readAsDataURL</span>(file)<span class="op">;</span></span>
<span id="cb55-81"><a href="#cb55-81" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb55-82"><a href="#cb55-82" tabindex="-1"></a>}</span>
<span id="cb55-83"><a href="#cb55-83" tabindex="-1"></a></span>
<span id="cb55-84"><a href="#cb55-84" tabindex="-1"></a><span class="kw">function</span> <span class="fu">coletaDados</span>(base64Foto){</span>
<span id="cb55-85"><a href="#cb55-85" tabindex="-1"></a>  <span class="cf">return</span> {</span>
<span id="cb55-86"><a href="#cb55-86" tabindex="-1"></a>    <span class="dt">cpf</span><span class="op">:</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;cpf&#39;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">,</span></span>
<span id="cb55-87"><a href="#cb55-87" tabindex="-1"></a>    <span class="dt">nome</span><span class="op">:</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;nome&#39;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">,</span></span>
<span id="cb55-88"><a href="#cb55-88" tabindex="-1"></a>    <span class="dt">endereco</span><span class="op">:</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;endereco&#39;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">,</span></span>
<span id="cb55-89"><a href="#cb55-89" tabindex="-1"></a>    <span class="dt">data_nascimento</span><span class="op">:</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;data_nascimento&#39;</span>)<span class="op">.</span><span class="at">value</span><span class="op">,</span> <span class="co">// YYYY-MM-DD</span></span>
<span id="cb55-90"><a href="#cb55-90" tabindex="-1"></a>    <span class="dt">foto</span><span class="op">:</span> base64Foto <span class="op">||</span> <span class="st">&#39;&#39;</span></span>
<span id="cb55-91"><a href="#cb55-91" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb55-92"><a href="#cb55-92" tabindex="-1"></a>}</span>
<span id="cb55-93"><a href="#cb55-93" tabindex="-1"></a></span>
<span id="cb55-94"><a href="#cb55-94" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">readJsonSafe</span>(res) {</span>
<span id="cb55-95"><a href="#cb55-95" tabindex="-1"></a>  <span class="kw">const</span> ct <span class="op">=</span> res<span class="op">.</span><span class="at">headers</span><span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;content-type&#39;</span>) <span class="op">||</span> <span class="st">&#39;&#39;</span><span class="op">;</span></span>
<span id="cb55-96"><a href="#cb55-96" tabindex="-1"></a>  <span class="cf">if</span> (ct<span class="op">.</span><span class="fu">includes</span>(<span class="st">&#39;application/json&#39;</span>)) {</span>
<span id="cb55-97"><a href="#cb55-97" tabindex="-1"></a>    <span class="cf">try</span> { <span class="cf">return</span> <span class="cf">await</span> res<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span> } <span class="cf">catch</span> { <span class="cf">return</span> <span class="kw">null</span><span class="op">;</span> }</span>
<span id="cb55-98"><a href="#cb55-98" tabindex="-1"></a>  }</span>
<span id="cb55-99"><a href="#cb55-99" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb55-100"><a href="#cb55-100" tabindex="-1"></a>}</span>
<span id="cb55-101"><a href="#cb55-101" tabindex="-1"></a></span>
<span id="cb55-102"><a href="#cb55-102" tabindex="-1"></a><span class="co">/* ---------- CRUD ---------- */</span></span>
<span id="cb55-103"><a href="#cb55-103" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">inserir</span>() {</span>
<span id="cb55-104"><a href="#cb55-104" tabindex="-1"></a>  <span class="cf">if</span>(<span class="op">!</span><span class="fu">validaCampos</span>()) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb55-105"><a href="#cb55-105" tabindex="-1"></a>  <span class="fu">setBusy</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb55-106"><a href="#cb55-106" tabindex="-1"></a>  <span class="cf">try</span> {</span>
<span id="cb55-107"><a href="#cb55-107" tabindex="-1"></a>    <span class="kw">const</span> base64 <span class="op">=</span> <span class="cf">await</span> <span class="fu">getFotoBase64</span>()<span class="op">;</span></span>
<span id="cb55-108"><a href="#cb55-108" tabindex="-1"></a>    <span class="kw">const</span> pessoa <span class="op">=</span> <span class="fu">coletaDados</span>(base64)<span class="op">;</span></span>
<span id="cb55-109"><a href="#cb55-109" tabindex="-1"></a></span>
<span id="cb55-110"><a href="#cb55-110" tabindex="-1"></a>    <span class="kw">const</span> res <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(API<span class="op">,</span> {</span>
<span id="cb55-111"><a href="#cb55-111" tabindex="-1"></a>      <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span></span>
<span id="cb55-112"><a href="#cb55-112" tabindex="-1"></a>      <span class="dt">headers</span><span class="op">:</span> {<span class="st">&#39;Content-Type&#39;</span><span class="op">:</span> <span class="st">&#39;application/json&#39;</span>}<span class="op">,</span></span>
<span id="cb55-113"><a href="#cb55-113" tabindex="-1"></a>      <span class="dt">body</span><span class="op">:</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(pessoa)</span>
<span id="cb55-114"><a href="#cb55-114" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb55-115"><a href="#cb55-115" tabindex="-1"></a>    <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> <span class="fu">readJsonSafe</span>(res)<span class="op">;</span></span>
<span id="cb55-116"><a href="#cb55-116" tabindex="-1"></a>    <span class="cf">if</span>(res<span class="op">.</span><span class="at">ok</span>) {</span>
<span id="cb55-117"><a href="#cb55-117" tabindex="-1"></a>      <span class="fu">alert</span>(<span class="st">&#39;Inserido com sucesso!&#39;</span>)<span class="op">;</span></span>
<span id="cb55-118"><a href="#cb55-118" tabindex="-1"></a>      <span class="fu">listar</span>()<span class="op">;</span></span>
<span id="cb55-119"><a href="#cb55-119" tabindex="-1"></a>      <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;formPessoa&#39;</span>)<span class="op">.</span><span class="fu">reset</span>()<span class="op">;</span></span>
<span id="cb55-120"><a href="#cb55-120" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb55-121"><a href="#cb55-121" tabindex="-1"></a>      <span class="fu">alert</span>(<span class="st">&#39;Erro: &#39;</span> <span class="op">+</span> (data<span class="op">?.</span><span class="at">error</span> <span class="op">||</span> res<span class="op">.</span><span class="at">statusText</span>))<span class="op">;</span></span>
<span id="cb55-122"><a href="#cb55-122" tabindex="-1"></a>    }</span>
<span id="cb55-123"><a href="#cb55-123" tabindex="-1"></a>  } <span class="cf">catch</span> (e) {</span>
<span id="cb55-124"><a href="#cb55-124" tabindex="-1"></a>    <span class="fu">alert</span>(<span class="st">&#39;Falha ao inserir: &#39;</span> <span class="op">+</span> e<span class="op">.</span><span class="at">message</span>)<span class="op">;</span></span>
<span id="cb55-125"><a href="#cb55-125" tabindex="-1"></a>  } <span class="cf">finally</span> {</span>
<span id="cb55-126"><a href="#cb55-126" tabindex="-1"></a>    <span class="fu">setBusy</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb55-127"><a href="#cb55-127" tabindex="-1"></a>  }</span>
<span id="cb55-128"><a href="#cb55-128" tabindex="-1"></a>}</span>
<span id="cb55-129"><a href="#cb55-129" tabindex="-1"></a></span>
<span id="cb55-130"><a href="#cb55-130" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">alterar</span>() {</span>
<span id="cb55-131"><a href="#cb55-131" tabindex="-1"></a>  <span class="cf">if</span>(<span class="op">!</span><span class="fu">validaCampos</span>()) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb55-132"><a href="#cb55-132" tabindex="-1"></a>  <span class="kw">const</span> cpf <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;cpf&#39;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb55-133"><a href="#cb55-133" tabindex="-1"></a>  <span class="fu">setBusy</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb55-134"><a href="#cb55-134" tabindex="-1"></a>  <span class="cf">try</span> {</span>
<span id="cb55-135"><a href="#cb55-135" tabindex="-1"></a>    <span class="kw">const</span> base64 <span class="op">=</span> <span class="cf">await</span> <span class="fu">getFotoBase64</span>()<span class="op">;</span></span>
<span id="cb55-136"><a href="#cb55-136" tabindex="-1"></a>    <span class="kw">const</span> novosDados <span class="op">=</span> <span class="fu">coletaDados</span>()<span class="op">;</span></span>
<span id="cb55-137"><a href="#cb55-137" tabindex="-1"></a>    <span class="cf">if</span> (base64) novosDados<span class="op">.</span><span class="at">foto</span> <span class="op">=</span> base64<span class="op">;</span></span>
<span id="cb55-138"><a href="#cb55-138" tabindex="-1"></a></span>
<span id="cb55-139"><a href="#cb55-139" tabindex="-1"></a>    <span class="kw">const</span> res <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="vs">`</span><span class="sc">${</span>API<span class="sc">}</span><span class="vs">/</span><span class="sc">${</span><span class="pp">encodeURIComponent</span>(cpf)<span class="sc">}</span><span class="vs">`</span><span class="op">,</span> {</span>
<span id="cb55-140"><a href="#cb55-140" tabindex="-1"></a>      <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;PUT&#39;</span><span class="op">,</span></span>
<span id="cb55-141"><a href="#cb55-141" tabindex="-1"></a>      <span class="dt">headers</span><span class="op">:</span> {<span class="st">&#39;Content-Type&#39;</span><span class="op">:</span> <span class="st">&#39;application/json&#39;</span>}<span class="op">,</span></span>
<span id="cb55-142"><a href="#cb55-142" tabindex="-1"></a>      <span class="dt">body</span><span class="op">:</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(novosDados)</span>
<span id="cb55-143"><a href="#cb55-143" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb55-144"><a href="#cb55-144" tabindex="-1"></a>    <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> <span class="fu">readJsonSafe</span>(res)<span class="op">;</span></span>
<span id="cb55-145"><a href="#cb55-145" tabindex="-1"></a>    <span class="cf">if</span>(res<span class="op">.</span><span class="at">ok</span>) {</span>
<span id="cb55-146"><a href="#cb55-146" tabindex="-1"></a>      <span class="fu">alert</span>(<span class="st">&#39;Alterado com sucesso!&#39;</span>)<span class="op">;</span></span>
<span id="cb55-147"><a href="#cb55-147" tabindex="-1"></a>      <span class="fu">listar</span>()<span class="op">;</span></span>
<span id="cb55-148"><a href="#cb55-148" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb55-149"><a href="#cb55-149" tabindex="-1"></a>      <span class="fu">alert</span>(<span class="st">&#39;Erro: &#39;</span> <span class="op">+</span> (data<span class="op">?.</span><span class="at">error</span> <span class="op">||</span> res<span class="op">.</span><span class="at">statusText</span>))<span class="op">;</span></span>
<span id="cb55-150"><a href="#cb55-150" tabindex="-1"></a>    }</span>
<span id="cb55-151"><a href="#cb55-151" tabindex="-1"></a>  } <span class="cf">catch</span> (e) {</span>
<span id="cb55-152"><a href="#cb55-152" tabindex="-1"></a>    <span class="fu">alert</span>(<span class="st">&#39;Falha ao alterar: &#39;</span> <span class="op">+</span> e<span class="op">.</span><span class="at">message</span>)<span class="op">;</span></span>
<span id="cb55-153"><a href="#cb55-153" tabindex="-1"></a>  } <span class="cf">finally</span> {</span>
<span id="cb55-154"><a href="#cb55-154" tabindex="-1"></a>    <span class="fu">setBusy</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb55-155"><a href="#cb55-155" tabindex="-1"></a>  }</span>
<span id="cb55-156"><a href="#cb55-156" tabindex="-1"></a>}</span>
<span id="cb55-157"><a href="#cb55-157" tabindex="-1"></a></span>
<span id="cb55-158"><a href="#cb55-158" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">remover</span>() {</span>
<span id="cb55-159"><a href="#cb55-159" tabindex="-1"></a>  <span class="kw">const</span> cpf <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;cpf&#39;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb55-160"><a href="#cb55-160" tabindex="-1"></a>  <span class="cf">if</span>(<span class="op">!</span>cpf) <span class="cf">return</span> <span class="fu">alert</span>(<span class="st">&#39;Informe o CPF para remover.&#39;</span>)<span class="op">;</span></span>
<span id="cb55-161"><a href="#cb55-161" tabindex="-1"></a>  <span class="cf">if</span>(<span class="op">!</span><span class="fu">confirm</span>(<span class="st">&#39;Confirma a exclusÃ£o?&#39;</span>)) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb55-162"><a href="#cb55-162" tabindex="-1"></a></span>
<span id="cb55-163"><a href="#cb55-163" tabindex="-1"></a>  <span class="fu">setBusy</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb55-164"><a href="#cb55-164" tabindex="-1"></a>  <span class="cf">try</span> {</span>
<span id="cb55-165"><a href="#cb55-165" tabindex="-1"></a>    <span class="kw">const</span> res <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="vs">`</span><span class="sc">${</span>API<span class="sc">}</span><span class="vs">/</span><span class="sc">${</span><span class="pp">encodeURIComponent</span>(cpf)<span class="sc">}</span><span class="vs">`</span><span class="op">,</span> {<span class="dt">method</span><span class="op">:</span><span class="st">&#39;DELETE&#39;</span>})<span class="op">;</span></span>
<span id="cb55-166"><a href="#cb55-166" tabindex="-1"></a>    <span class="co">// 204 =&gt; sem corpo; nÃ£o tente parsear JSON aqui</span></span>
<span id="cb55-167"><a href="#cb55-167" tabindex="-1"></a>    <span class="cf">if</span>(res<span class="op">.</span><span class="at">status</span> <span class="op">===</span> <span class="dv">204</span>) {</span>
<span id="cb55-168"><a href="#cb55-168" tabindex="-1"></a>      <span class="fu">alert</span>(<span class="st">&#39;Removido com sucesso!&#39;</span>)<span class="op">;</span></span>
<span id="cb55-169"><a href="#cb55-169" tabindex="-1"></a>      <span class="fu">listar</span>()<span class="op">;</span></span>
<span id="cb55-170"><a href="#cb55-170" tabindex="-1"></a>      <span class="cf">return</span><span class="op">;</span></span>
<span id="cb55-171"><a href="#cb55-171" tabindex="-1"></a>    }</span>
<span id="cb55-172"><a href="#cb55-172" tabindex="-1"></a>    <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> <span class="fu">readJsonSafe</span>(res)<span class="op">;</span></span>
<span id="cb55-173"><a href="#cb55-173" tabindex="-1"></a>    <span class="cf">if</span>(res<span class="op">.</span><span class="at">ok</span>) {</span>
<span id="cb55-174"><a href="#cb55-174" tabindex="-1"></a>      <span class="fu">alert</span>(<span class="st">&#39;Removido com sucesso!&#39;</span>)<span class="op">;</span></span>
<span id="cb55-175"><a href="#cb55-175" tabindex="-1"></a>      <span class="fu">listar</span>()<span class="op">;</span></span>
<span id="cb55-176"><a href="#cb55-176" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb55-177"><a href="#cb55-177" tabindex="-1"></a>      <span class="fu">alert</span>(<span class="st">&#39;Erro: &#39;</span> <span class="op">+</span> (data<span class="op">?.</span><span class="at">error</span> <span class="op">||</span> res<span class="op">.</span><span class="at">statusText</span>))<span class="op">;</span></span>
<span id="cb55-178"><a href="#cb55-178" tabindex="-1"></a>    }</span>
<span id="cb55-179"><a href="#cb55-179" tabindex="-1"></a>  } <span class="cf">catch</span> (e) {</span>
<span id="cb55-180"><a href="#cb55-180" tabindex="-1"></a>    <span class="fu">alert</span>(<span class="st">&#39;Falha ao remover: &#39;</span> <span class="op">+</span> e<span class="op">.</span><span class="at">message</span>)<span class="op">;</span></span>
<span id="cb55-181"><a href="#cb55-181" tabindex="-1"></a>  } <span class="cf">finally</span> {</span>
<span id="cb55-182"><a href="#cb55-182" tabindex="-1"></a>    <span class="fu">setBusy</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb55-183"><a href="#cb55-183" tabindex="-1"></a>  }</span>
<span id="cb55-184"><a href="#cb55-184" tabindex="-1"></a>}</span>
<span id="cb55-185"><a href="#cb55-185" tabindex="-1"></a></span>
<span id="cb55-186"><a href="#cb55-186" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">pesquisar</span>() {</span>
<span id="cb55-187"><a href="#cb55-187" tabindex="-1"></a>  <span class="kw">const</span> termo <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;pesquisa&#39;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb55-188"><a href="#cb55-188" tabindex="-1"></a>  <span class="fu">setBusy</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb55-189"><a href="#cb55-189" tabindex="-1"></a>  <span class="cf">try</span> {</span>
<span id="cb55-190"><a href="#cb55-190" tabindex="-1"></a>    <span class="kw">const</span> url <span class="op">=</span> termo <span class="op">?</span> <span class="vs">`</span><span class="sc">${</span>API<span class="sc">}</span><span class="vs">?q=</span><span class="sc">${</span><span class="pp">encodeURIComponent</span>(termo)<span class="sc">}</span><span class="vs">`</span> <span class="op">:</span> API<span class="op">;</span></span>
<span id="cb55-191"><a href="#cb55-191" tabindex="-1"></a>    <span class="kw">const</span> res <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(url)<span class="op">;</span></span>
<span id="cb55-192"><a href="#cb55-192" tabindex="-1"></a>    <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> <span class="fu">readJsonSafe</span>(res)<span class="op">;</span></span>
<span id="cb55-193"><a href="#cb55-193" tabindex="-1"></a>    <span class="cf">if</span>(<span class="op">!</span>res<span class="op">.</span><span class="at">ok</span>) <span class="cf">return</span> <span class="fu">alert</span>(<span class="st">&#39;Falha na pesquisa: &#39;</span> <span class="op">+</span> (data<span class="op">?.</span><span class="at">error</span> <span class="op">||</span> res<span class="op">.</span><span class="at">statusText</span>))<span class="op">;</span></span>
<span id="cb55-194"><a href="#cb55-194" tabindex="-1"></a>    <span class="fu">preencheTabela</span>(<span class="bu">Array</span><span class="op">.</span><span class="fu">isArray</span>(data) <span class="op">?</span> data <span class="op">:</span> (data<span class="op">?.</span><span class="at">items</span> <span class="op">??</span> []))<span class="op">;</span></span>
<span id="cb55-195"><a href="#cb55-195" tabindex="-1"></a>  } <span class="cf">catch</span> (e) {</span>
<span id="cb55-196"><a href="#cb55-196" tabindex="-1"></a>    <span class="fu">alert</span>(<span class="st">&#39;Falha na pesquisa: &#39;</span> <span class="op">+</span> e<span class="op">.</span><span class="at">message</span>)<span class="op">;</span></span>
<span id="cb55-197"><a href="#cb55-197" tabindex="-1"></a>  } <span class="cf">finally</span> {</span>
<span id="cb55-198"><a href="#cb55-198" tabindex="-1"></a>    <span class="fu">setBusy</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb55-199"><a href="#cb55-199" tabindex="-1"></a>  }</span>
<span id="cb55-200"><a href="#cb55-200" tabindex="-1"></a>}</span>
<span id="cb55-201"><a href="#cb55-201" tabindex="-1"></a></span>
<span id="cb55-202"><a href="#cb55-202" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">listar</span>() {</span>
<span id="cb55-203"><a href="#cb55-203" tabindex="-1"></a>  <span class="fu">setBusy</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb55-204"><a href="#cb55-204" tabindex="-1"></a>  <span class="cf">try</span> {</span>
<span id="cb55-205"><a href="#cb55-205" tabindex="-1"></a>    <span class="kw">const</span> res <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(API)<span class="op">;</span></span>
<span id="cb55-206"><a href="#cb55-206" tabindex="-1"></a>    <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> <span class="fu">readJsonSafe</span>(res)<span class="op">;</span></span>
<span id="cb55-207"><a href="#cb55-207" tabindex="-1"></a>    <span class="cf">if</span>(<span class="op">!</span>res<span class="op">.</span><span class="at">ok</span>) <span class="cf">return</span> <span class="fu">alert</span>(<span class="st">&#39;Falha ao listar: &#39;</span> <span class="op">+</span> (data<span class="op">?.</span><span class="at">error</span> <span class="op">||</span> res<span class="op">.</span><span class="at">statusText</span>))<span class="op">;</span></span>
<span id="cb55-208"><a href="#cb55-208" tabindex="-1"></a>    <span class="fu">preencheTabela</span>(<span class="bu">Array</span><span class="op">.</span><span class="fu">isArray</span>(data) <span class="op">?</span> data <span class="op">:</span> (data<span class="op">?.</span><span class="at">items</span> <span class="op">??</span> []))<span class="op">;</span></span>
<span id="cb55-209"><a href="#cb55-209" tabindex="-1"></a>  } <span class="cf">catch</span> (e) {</span>
<span id="cb55-210"><a href="#cb55-210" tabindex="-1"></a>    <span class="fu">alert</span>(<span class="st">&#39;Falha ao listar: &#39;</span> <span class="op">+</span> e<span class="op">.</span><span class="at">message</span>)<span class="op">;</span></span>
<span id="cb55-211"><a href="#cb55-211" tabindex="-1"></a>  } <span class="cf">finally</span> {</span>
<span id="cb55-212"><a href="#cb55-212" tabindex="-1"></a>    <span class="fu">setBusy</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb55-213"><a href="#cb55-213" tabindex="-1"></a>  }</span>
<span id="cb55-214"><a href="#cb55-214" tabindex="-1"></a>}</span>
<span id="cb55-215"><a href="#cb55-215" tabindex="-1"></a></span>
<span id="cb55-216"><a href="#cb55-216" tabindex="-1"></a><span class="co">/* ---------- UI ---------- */</span></span>
<span id="cb55-217"><a href="#cb55-217" tabindex="-1"></a><span class="kw">function</span> <span class="fu">preencheTabela</span>(lista){</span>
<span id="cb55-218"><a href="#cb55-218" tabindex="-1"></a>  <span class="kw">const</span> tbody <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;tabela&#39;</span>)<span class="op">;</span></span>
<span id="cb55-219"><a href="#cb55-219" tabindex="-1"></a>  tbody<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span></span>
<span id="cb55-220"><a href="#cb55-220" tabindex="-1"></a>  (lista <span class="op">||</span> [])<span class="op">.</span><span class="fu">forEach</span>(p<span class="kw">=&gt;</span>{</span>
<span id="cb55-221"><a href="#cb55-221" tabindex="-1"></a>    <span class="kw">const</span> tr <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">&#39;tr&#39;</span>)<span class="op">;</span></span>
<span id="cb55-222"><a href="#cb55-222" tabindex="-1"></a>    tr<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb55-223"><a href="#cb55-223" tabindex="-1"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">cpf</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb55-224"><a href="#cb55-224" tabindex="-1"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">foto</span> <span class="op">?</span> <span class="vs">`&lt;img class=&quot;thumb&quot; src=&quot;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">foto</span><span class="sc">}</span><span class="vs">&quot; alt=&quot;foto&quot;&gt;`</span> <span class="op">:</span> <span class="st">&#39;&#39;</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb55-225"><a href="#cb55-225" tabindex="-1"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">nome</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb55-226"><a href="#cb55-226" tabindex="-1"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">endereco</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb55-227"><a href="#cb55-227" tabindex="-1"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">data_nascimento</span><span class="sc">}</span><span class="vs">&lt;/td&gt;`</span><span class="op">;</span></span>
<span id="cb55-228"><a href="#cb55-228" tabindex="-1"></a>    tr<span class="op">.</span><span class="at">onclick</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb55-229"><a href="#cb55-229" tabindex="-1"></a>      <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;cpf&#39;</span>)<span class="op">.</span><span class="at">value</span> <span class="op">=</span> p<span class="op">.</span><span class="at">cpf</span><span class="op">;</span></span>
<span id="cb55-230"><a href="#cb55-230" tabindex="-1"></a>      <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;nome&#39;</span>)<span class="op">.</span><span class="at">value</span> <span class="op">=</span> p<span class="op">.</span><span class="at">nome</span><span class="op">;</span></span>
<span id="cb55-231"><a href="#cb55-231" tabindex="-1"></a>      <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;endereco&#39;</span>)<span class="op">.</span><span class="at">value</span> <span class="op">=</span> p<span class="op">.</span><span class="at">endereco</span><span class="op">;</span></span>
<span id="cb55-232"><a href="#cb55-232" tabindex="-1"></a>      <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;data_nascimento&#39;</span>)<span class="op">.</span><span class="at">value</span> <span class="op">=</span> p<span class="op">.</span><span class="at">data_nascimento</span><span class="op">;</span></span>
<span id="cb55-233"><a href="#cb55-233" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb55-234"><a href="#cb55-234" tabindex="-1"></a>    tbody<span class="op">.</span><span class="fu">appendChild</span>(tr)<span class="op">;</span></span>
<span id="cb55-235"><a href="#cb55-235" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb55-236"><a href="#cb55-236" tabindex="-1"></a>}</span>
<span id="cb55-237"><a href="#cb55-237" tabindex="-1"></a></span>
<span id="cb55-238"><a href="#cb55-238" tabindex="-1"></a><span class="fu">listar</span>()<span class="op">;</span></span>
<span id="cb55-239"><a href="#cb55-239" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb55-240"><a href="#cb55-240" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb55-241"><a href="#cb55-241" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code></pre></div>
</div>
<div id="resultado-final" class="section level3 hasAnchor" number="7.5.1">
<h3 class="hasAnchor"><span class="header-section-number">7.5.1</span> Resultado final:<a href="#resultado-final" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div id="servidor-de-aplicaÃ§Ã£o-python-restful-rodando" class="section level4 hasAnchor" number="7.5.1.1">
<h4 class="hasAnchor"><span class="header-section-number">7.5.1.1</span> Servidor de aplicaÃ§Ã£o Python â€œRestfulâ€ rodando<a href="#servidor-de-aplica%C3%A7%C3%A3o-python-restful-rodando" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<p><img src="images/2025-09-01/10-servidor_rodando.jpg" /></p>
</div>
<div id="cliente-html-javascript-pÃ¡gina-estÃ¡tica-aberta-no-navegador" class="section level4 hasAnchor" number="7.5.1.2">
<h4 class="hasAnchor"><span class="header-section-number">7.5.1.2</span> Cliente HTML + Javascript ( pÃ¡gina ESTÃTICA ) aberta no navegador<a href="#cliente-html-javascript-p%C3%A1gina-est%C3%A1tica-aberta-no-navegador" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<div id="passo-1---preencher-dados-no-formulÃ¡rio-do-cliente" class="section level5 hasAnchor" number="7.5.1.2.1">
<h5 class="hasAnchor"><span class="header-section-number">7.5.1.2.1</span> Passo 1 - Preencher dados no formulÃ¡rio do cliente<a href="#passo-1---preencher-dados-no-formul%C3%A1rio-do-cliente" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p>Vamos inserir dados de exemplo no â€œcliente WEBâ€ abaixo</p>
<p><img src="images/2025-09-01/11-Cliente_Vazio.jpg" /></p>
</div>
<div id="passo-2---pressionar-o-botÃ£o-inserir" class="section level5 hasAnchor" number="7.5.1.2.2">
<h5 class="hasAnchor"><span class="header-section-number">7.5.1.2.2</span> Passo 2 - Pressionar o BotÃ£o INSERIR<a href="#passo-2---pressionar-o-bot%C3%A3o-inserir" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p><img src="images/2025-09-01/11-Cliente_Vazio-02.jpg" /></p>
<p>OBS: Na tela do servidor, Ã© possÃ­vel verificar as operaÃ§Ãµes HTTP Equivalentes ao SQL que foram executadas entre o Servidor e o Cliente</p>
<p><img src="images/2025-09-01/10-servidor_rodando-01.jpg" /></p>
</div>
<div id="passo-3---verificar-se-o-dbgrid-do-cliente-espelhando-a-linha-da-tabela-pessoas-no-esquema-pessoasdb-do-sqbg-mysql" class="section level5 hasAnchor" number="7.5.1.2.3">
<h5 class="hasAnchor"><span class="header-section-number">7.5.1.2.3</span> Passo 3 - Verificar se o â€œDBGRIDâ€ do cliente â€œespelhandoâ€ a linha da tabela â€œpessoasâ€ no esquema â€œpessoasdbâ€ do SQBG MySQL<a href="#passo-3---verificar-se-o-dbgrid-do-cliente-espelhando-a-linha-da-tabela-pessoas-no-esquema-pessoasdb-do-sqbg-mysql" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p><img src="images/2025-09-01/11-Cliente_03-Preenchido.jpg" /></p>
</div>
<div id="passo-4---verificar-na-tabela-pessoas-a-linha-que-o-cliente-preencheu-atravÃ©s-da-api-da-aplicaÃ§Ã£o-clienteservidor" class="section level5 hasAnchor" number="7.5.1.2.4">
<h5 class="hasAnchor"><span class="header-section-number">7.5.1.2.4</span> Passo 4 - Verificar na tabela pessoas a linha que o cliente preencheu atravÃ©s da API da aplicaÃ§Ã£o cliente/servidor<a href="#passo-4---verificar-na-tabela-pessoas-a-linha-que-o-cliente-preencheu-atrav%C3%A9s-da-api-da-aplica%C3%A7%C3%A3o-clienteservidor" class="anchor-section" aria-label="Anchor link to header"></a></h5>
<p><img src="images/2025-09-01/12-Dados_no_SGBD.jpg" /></p>
</div>
</div>
</div>
</div>
<div id="feito-1" class="section level2 hasAnchor" number="7.6">
<h2 class="hasAnchor"><span class="header-section-number">7.6</span> Feito<a href="#feito-1" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<!--chapter:end:05-2026-03-17_Aplicacao_CRUD-aula.Rmd-->
</div>
<div id="exercÃ­cios-2" class="section level2 hasAnchor" number="7.7">
<h2 class="hasAnchor"><span class="header-section-number">7.7</span> ExercÃ­cios<a href="#exerc%C3%ADcios-2" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<div id="section-6" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">01/09/2025<a href="#section-6" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="professor-miguÃ©l-suares-6" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">Professor MiguÃ©l Suares<a href="#professor-migu%C3%A9l-suares-6" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="banco-de-dados-utilizado-nos-exemplos-de-aplicaÃ§Ãµes-abaixo" class="section level3 hasAnchor" number="7.7.1">
<h3 class="hasAnchor"><span class="header-section-number">7.7.1</span> Banco de Dados utilizado nos exemplos de aplicaÃ§Ãµes abaixo<a href="#banco-de-dados-utilizado-nos-exemplos-de-aplica%C3%A7%C3%B5es-abaixo" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Crie o banco de dados abaixo em um servidor mysql 8 ou superior na sua mÃ¡quina antes de testar os exemplos abaixo:</p>
<div class="sourceCode" id="cb56"><pre class="sourceCode sql"><code class="sourceCode sql"><span id="cb56-1"><a href="#cb56-1" tabindex="-1"></a><span class="co">-- 1) CRIAR BANCO (ajuste o nome se quiser)</span></span>
<span id="cb56-2"><a href="#cb56-2" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">DATABASE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> pessoasdb</span>
<span id="cb56-3"><a href="#cb56-3" tabindex="-1"></a>  <span class="dt">CHARACTER</span> <span class="kw">SET</span> utf8mb4</span>
<span id="cb56-4"><a href="#cb56-4" tabindex="-1"></a>  COLLATE utf8mb4_0900_ai_ci;</span>
<span id="cb56-5"><a href="#cb56-5" tabindex="-1"></a></span>
<span id="cb56-6"><a href="#cb56-6" tabindex="-1"></a><span class="kw">USE</span> pessoasdb;</span>
<span id="cb56-7"><a href="#cb56-7" tabindex="-1"></a></span>
<span id="cb56-8"><a href="#cb56-8" tabindex="-1"></a><span class="co">-- 2) (OPCIONAL) CRIAR USUÃRIO LOCAL E CONCEDER PERMISSÃ•ES</span></span>
<span id="cb56-9"><a href="#cb56-9" tabindex="-1"></a><span class="co">--    Troque &#39;MinhaSenhaForte&#39; por uma senha segura</span></span>
<span id="cb56-10"><a href="#cb56-10" tabindex="-1"></a><span class="kw">CREATE</span> <span class="fu">USER</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> <span class="st">&#39;pessoas_user&#39;</span>@<span class="st">&#39;localhost&#39;</span> <span class="kw">IDENTIFIED</span> <span class="kw">BY</span> <span class="st">&#39;MinhaSenhaForte&#39;</span>;</span>
<span id="cb56-11"><a href="#cb56-11" tabindex="-1"></a><span class="kw">GRANT</span> <span class="kw">ALL</span> <span class="kw">PRIVILEGES</span> <span class="kw">ON</span> pessoasdb.<span class="op">*</span> <span class="kw">TO</span> <span class="st">&#39;pessoas_user&#39;</span>@<span class="st">&#39;localhost&#39;</span>;</span>
<span id="cb56-12"><a href="#cb56-12" tabindex="-1"></a><span class="kw">FLUSH</span> <span class="kw">PRIVILEGES</span>;</span>
<span id="cb56-13"><a href="#cb56-13" tabindex="-1"></a></span>
<span id="cb56-14"><a href="#cb56-14" tabindex="-1"></a><span class="co">-- 3) TABELA &#39;pessoas&#39; COMPATÃVEL COM O MODELO SQLAlchemy</span></span>
<span id="cb56-15"><a href="#cb56-15" tabindex="-1"></a><span class="co">--    - cpf: chave primÃ¡ria (String(14))</span></span>
<span id="cb56-16"><a href="#cb56-16" tabindex="-1"></a><span class="co">--    - nome, endereco, foto: TEXT</span></span>
<span id="cb56-17"><a href="#cb56-17" tabindex="-1"></a><span class="co">--    - data_nascimento: DATE</span></span>
<span id="cb56-18"><a href="#cb56-18" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">TABLE</span> <span class="cf">IF</span> <span class="kw">NOT</span> <span class="kw">EXISTS</span> pessoas (</span>
<span id="cb56-19"><a href="#cb56-19" tabindex="-1"></a>  cpf             <span class="dt">VARCHAR</span>(<span class="dv">14</span>)  <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb56-20"><a href="#cb56-20" tabindex="-1"></a>  nome            TEXT         <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb56-21"><a href="#cb56-21" tabindex="-1"></a>  endereco        TEXT         <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb56-22"><a href="#cb56-22" tabindex="-1"></a>  data_nascimento <span class="dt">DATE</span>         <span class="kw">NOT</span> <span class="kw">NULL</span>,</span>
<span id="cb56-23"><a href="#cb56-23" tabindex="-1"></a>  foto            TEXT         <span class="kw">NULL</span>,</span>
<span id="cb56-24"><a href="#cb56-24" tabindex="-1"></a>  <span class="kw">PRIMARY</span> <span class="kw">KEY</span> (cpf)</span>
<span id="cb56-25"><a href="#cb56-25" tabindex="-1"></a>) ENGINE<span class="op">=</span>InnoDB <span class="kw">DEFAULT</span> CHARSET<span class="op">=</span>utf8mb4 COLLATE<span class="op">=</span>utf8mb4_0900_ai_ci;</span>
<span id="cb56-26"><a href="#cb56-26" tabindex="-1"></a></span>
<span id="cb56-27"><a href="#cb56-27" tabindex="-1"></a><span class="co">-- 4) (OPCIONAL) ÃNDICES PARA BUSCA</span></span>
<span id="cb56-28"><a href="#cb56-28" tabindex="-1"></a><span class="co">-- Seu endpoint usa LIKE/ILIKE em nome e cpf; cpf jÃ¡ Ã© PK.</span></span>
<span id="cb56-29"><a href="#cb56-29" tabindex="-1"></a><span class="co">-- Para acelerar buscas por nome com LIKE, crie um Ã­ndice por prefixo.</span></span>
<span id="cb56-30"><a href="#cb56-30" tabindex="-1"></a><span class="co">-- OBS: Ã­ndices em TEXT precisam de comprimento; 128 costuma ser um bom compromisso.</span></span>
<span id="cb56-31"><a href="#cb56-31" tabindex="-1"></a><span class="kw">CREATE</span> <span class="kw">INDEX</span> idx_pessoas_nome_prefix <span class="kw">ON</span> pessoas (nome(<span class="dv">128</span>));</span></code></pre></div>
</div>
</div>
<div id="exemplo-01" class="section level2 hasAnchor" number="7.8">
<h2 class="hasAnchor"><span class="header-section-number">7.8</span> Exemplo 01<a href="#exemplo-01" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p>servidor SUPABASE â€¦. a fazer</p>
</div>
<div id="exemplo-02---servidor-de-aplicaÃ§Ã£o-python" class="section level2 hasAnchor" number="7.9">
<h2 class="hasAnchor"><span class="header-section-number">7.9</span> Exemplo 02 - SERVIDOR DE APLICAÃ‡ÃƒO PYTHON<a href="#exemplo-02---servidor-de-aplica%C3%A7%C3%A3o-python" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><img src="images/clipboard-3666283714.png" /></p>
<p>Neste exemplo, temos uma aplicaÃ§Ã£o cliente feita html e javascript</p>
<p>A interface do Cliente Ã© feita em HTML5</p>
<p>A conexÃ£o com o servidor Ã© feita pelo javascript incorporado no HTML:</p>
<p>CRUD no cliente Ã© feito peloa javascript utilizando metodologia Restful sobre protocolo HTTP 2.0</p>
<p>O servidor Restful Ã© feito em linguagem PYTHON</p>
<p>OBS: NÃƒO TEMOS CONTROLE DE SESSÃƒO DE CLIENTE IMPLEMENTADO.</p>
<div class="sourceCode" id="cb57"><pre class="sourceCode cmd"><code class="sourceCode dosbat"><span id="cb57-1"><a href="#cb57-1" tabindex="-1"></a>python <span class="at">-m</span> pip install -<span class="at">-user</span> -<span class="at">-upgrade</span> flask flask<span class="at">-cors</span> sqlalchemy psycopg2<span class="at">-binary</span></span></code></pre></div>
<div id="servidor-python" class="section level3 hasAnchor" number="7.9.1">
<h3 class="hasAnchor"><span class="header-section-number">7.9.1</span> Servidor python<a href="#servidor-python" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb58"><pre class="sourceCode python"><code class="sourceCode python"><span id="cb58-1"><a href="#cb58-1" tabindex="-1"></a><span class="im">from</span> flask <span class="im">import</span> Flask, request, jsonify</span>
<span id="cb58-2"><a href="#cb58-2" tabindex="-1"></a><span class="im">from</span> flask_cors <span class="im">import</span> CORS</span>
<span id="cb58-3"><a href="#cb58-3" tabindex="-1"></a><span class="im">from</span> sqlalchemy <span class="im">import</span> create_engine, Column, String, Date, Text</span>
<span id="cb58-4"><a href="#cb58-4" tabindex="-1"></a><span class="im">from</span> sqlalchemy.ext.declarative <span class="im">import</span> declarative_base</span>
<span id="cb58-5"><a href="#cb58-5" tabindex="-1"></a><span class="im">from</span> sqlalchemy.orm <span class="im">import</span> sessionmaker</span>
<span id="cb58-6"><a href="#cb58-6" tabindex="-1"></a></span>
<span id="cb58-7"><a href="#cb58-7" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb58-8"><a href="#cb58-8" tabindex="-1"></a><span class="co"># ConfiguraÃ§Ã£o do Flask e CORS</span></span>
<span id="cb58-9"><a href="#cb58-9" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb58-10"><a href="#cb58-10" tabindex="-1"></a>app <span class="op">=</span> Flask(<span class="va">__name__</span>)</span>
<span id="cb58-11"><a href="#cb58-11" tabindex="-1"></a>CORS(app)</span>
<span id="cb58-12"><a href="#cb58-12" tabindex="-1"></a></span>
<span id="cb58-13"><a href="#cb58-13" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb58-14"><a href="#cb58-14" tabindex="-1"></a><span class="co"># ConfiguraÃ§Ã£o do banco PostgreSQL</span></span>
<span id="cb58-15"><a href="#cb58-15" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb58-16"><a href="#cb58-16" tabindex="-1"></a>DATABASE_URL <span class="op">=</span> <span class="st">&quot;postgresql://postgres:MinhaSuperSenha@db.pbbtfwmydxmxdibmtbqq.supabase.co:5432/postgres&quot;</span></span>
<span id="cb58-17"><a href="#cb58-17" tabindex="-1"></a></span>
<span id="cb58-18"><a href="#cb58-18" tabindex="-1"></a>engine <span class="op">=</span> create_engine(DATABASE_URL)</span>
<span id="cb58-19"><a href="#cb58-19" tabindex="-1"></a>SessionLocal <span class="op">=</span> sessionmaker(bind<span class="op">=</span>engine)</span>
<span id="cb58-20"><a href="#cb58-20" tabindex="-1"></a>Base <span class="op">=</span> declarative_base()</span>
<span id="cb58-21"><a href="#cb58-21" tabindex="-1"></a></span>
<span id="cb58-22"><a href="#cb58-22" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb58-23"><a href="#cb58-23" tabindex="-1"></a><span class="co"># Modelo Pessoa</span></span>
<span id="cb58-24"><a href="#cb58-24" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb58-25"><a href="#cb58-25" tabindex="-1"></a><span class="kw">class</span> Pessoa(Base):</span>
<span id="cb58-26"><a href="#cb58-26" tabindex="-1"></a>    __tablename__ <span class="op">=</span> <span class="st">&quot;pessoas&quot;</span></span>
<span id="cb58-27"><a href="#cb58-27" tabindex="-1"></a>    cpf <span class="op">=</span> Column(String(<span class="dv">14</span>), primary_key<span class="op">=</span><span class="va">True</span>)</span>
<span id="cb58-28"><a href="#cb58-28" tabindex="-1"></a>    nome <span class="op">=</span> Column(Text, nullable<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb58-29"><a href="#cb58-29" tabindex="-1"></a>    endereco <span class="op">=</span> Column(Text, nullable<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb58-30"><a href="#cb58-30" tabindex="-1"></a>    data_nascimento <span class="op">=</span> Column(Date, nullable<span class="op">=</span><span class="va">False</span>)</span>
<span id="cb58-31"><a href="#cb58-31" tabindex="-1"></a>    foto <span class="op">=</span> Column(Text)  <span class="co"># Base64 ou URL</span></span>
<span id="cb58-32"><a href="#cb58-32" tabindex="-1"></a></span>
<span id="cb58-33"><a href="#cb58-33" tabindex="-1"></a><span class="co"># Cria a tabela se nÃ£o existir</span></span>
<span id="cb58-34"><a href="#cb58-34" tabindex="-1"></a>Base.metadata.create_all(engine)</span>
<span id="cb58-35"><a href="#cb58-35" tabindex="-1"></a></span>
<span id="cb58-36"><a href="#cb58-36" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb58-37"><a href="#cb58-37" tabindex="-1"></a><span class="co"># CRUD</span></span>
<span id="cb58-38"><a href="#cb58-38" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb58-39"><a href="#cb58-39" tabindex="-1"></a></span>
<span id="cb58-40"><a href="#cb58-40" tabindex="-1"></a><span class="co"># Listar todas as pessoas ou pesquisar por termo</span></span>
<span id="cb58-41"><a href="#cb58-41" tabindex="-1"></a><span class="at">@app.route</span>(<span class="st">&#39;/pessoas&#39;</span>, methods<span class="op">=</span>[<span class="st">&#39;GET&#39;</span>])</span>
<span id="cb58-42"><a href="#cb58-42" tabindex="-1"></a><span class="kw">def</span> listar():</span>
<span id="cb58-43"><a href="#cb58-43" tabindex="-1"></a>    termo <span class="op">=</span> request.args.get(<span class="st">&#39;q&#39;</span>, <span class="st">&#39;&#39;</span>).lower()</span>
<span id="cb58-44"><a href="#cb58-44" tabindex="-1"></a>    session <span class="op">=</span> SessionLocal()</span>
<span id="cb58-45"><a href="#cb58-45" tabindex="-1"></a>    <span class="cf">if</span> termo:</span>
<span id="cb58-46"><a href="#cb58-46" tabindex="-1"></a>        pessoas <span class="op">=</span> session.query(Pessoa).<span class="bu">filter</span>(</span>
<span id="cb58-47"><a href="#cb58-47" tabindex="-1"></a>            (Pessoa.nome.ilike(<span class="ss">f&quot;%</span><span class="sc">{</span>termo<span class="sc">}</span><span class="ss">%&quot;</span>)) <span class="op">|</span> (Pessoa.cpf.ilike(<span class="ss">f&quot;%</span><span class="sc">{</span>termo<span class="sc">}</span><span class="ss">%&quot;</span>))</span>
<span id="cb58-48"><a href="#cb58-48" tabindex="-1"></a>        ).<span class="bu">all</span>()</span>
<span id="cb58-49"><a href="#cb58-49" tabindex="-1"></a>    <span class="cf">else</span>:</span>
<span id="cb58-50"><a href="#cb58-50" tabindex="-1"></a>        pessoas <span class="op">=</span> session.query(Pessoa).<span class="bu">all</span>()</span>
<span id="cb58-51"><a href="#cb58-51" tabindex="-1"></a>    session.close()</span>
<span id="cb58-52"><a href="#cb58-52" tabindex="-1"></a>    <span class="cf">return</span> jsonify([{</span>
<span id="cb58-53"><a href="#cb58-53" tabindex="-1"></a>        <span class="st">&quot;cpf&quot;</span>: p.cpf,</span>
<span id="cb58-54"><a href="#cb58-54" tabindex="-1"></a>        <span class="st">&quot;nome&quot;</span>: p.nome,</span>
<span id="cb58-55"><a href="#cb58-55" tabindex="-1"></a>        <span class="st">&quot;endereco&quot;</span>: p.endereco,</span>
<span id="cb58-56"><a href="#cb58-56" tabindex="-1"></a>        <span class="st">&quot;data_nascimento&quot;</span>: p.data_nascimento.isoformat(),</span>
<span id="cb58-57"><a href="#cb58-57" tabindex="-1"></a>        <span class="st">&quot;foto&quot;</span>: p.foto</span>
<span id="cb58-58"><a href="#cb58-58" tabindex="-1"></a>    } <span class="cf">for</span> p <span class="kw">in</span> pessoas])</span>
<span id="cb58-59"><a href="#cb58-59" tabindex="-1"></a></span>
<span id="cb58-60"><a href="#cb58-60" tabindex="-1"></a><span class="co"># Inserir nova pessoa</span></span>
<span id="cb58-61"><a href="#cb58-61" tabindex="-1"></a><span class="at">@app.route</span>(<span class="st">&#39;/pessoas&#39;</span>, methods<span class="op">=</span>[<span class="st">&#39;POST&#39;</span>])</span>
<span id="cb58-62"><a href="#cb58-62" tabindex="-1"></a><span class="kw">def</span> inserir():</span>
<span id="cb58-63"><a href="#cb58-63" tabindex="-1"></a>    dados <span class="op">=</span> request.get_json()</span>
<span id="cb58-64"><a href="#cb58-64" tabindex="-1"></a>    session <span class="op">=</span> SessionLocal()</span>
<span id="cb58-65"><a href="#cb58-65" tabindex="-1"></a>    <span class="cf">if</span> session.query(Pessoa).filter_by(cpf<span class="op">=</span>dados[<span class="st">&#39;cpf&#39;</span>]).first():</span>
<span id="cb58-66"><a href="#cb58-66" tabindex="-1"></a>        session.close()</span>
<span id="cb58-67"><a href="#cb58-67" tabindex="-1"></a>        <span class="cf">return</span> jsonify({<span class="st">&quot;error&quot;</span>: <span class="st">&quot;CPF jÃ¡ cadastrado&quot;</span>}), <span class="dv">400</span></span>
<span id="cb58-68"><a href="#cb58-68" tabindex="-1"></a>    pessoa <span class="op">=</span> Pessoa(</span>
<span id="cb58-69"><a href="#cb58-69" tabindex="-1"></a>        cpf<span class="op">=</span>dados[<span class="st">&#39;cpf&#39;</span>],</span>
<span id="cb58-70"><a href="#cb58-70" tabindex="-1"></a>        nome<span class="op">=</span>dados[<span class="st">&#39;nome&#39;</span>],</span>
<span id="cb58-71"><a href="#cb58-71" tabindex="-1"></a>        endereco<span class="op">=</span>dados[<span class="st">&#39;endereco&#39;</span>],</span>
<span id="cb58-72"><a href="#cb58-72" tabindex="-1"></a>        data_nascimento<span class="op">=</span>dados[<span class="st">&#39;data_nascimento&#39;</span>],</span>
<span id="cb58-73"><a href="#cb58-73" tabindex="-1"></a>        foto<span class="op">=</span>dados.get(<span class="st">&#39;foto&#39;</span>)</span>
<span id="cb58-74"><a href="#cb58-74" tabindex="-1"></a>    )</span>
<span id="cb58-75"><a href="#cb58-75" tabindex="-1"></a>    session.add(pessoa)</span>
<span id="cb58-76"><a href="#cb58-76" tabindex="-1"></a>    session.commit()</span>
<span id="cb58-77"><a href="#cb58-77" tabindex="-1"></a>    session.close()</span>
<span id="cb58-78"><a href="#cb58-78" tabindex="-1"></a>    <span class="cf">return</span> jsonify({<span class="st">&quot;message&quot;</span>: <span class="st">&quot;Inserido com sucesso&quot;</span>}), <span class="dv">201</span></span>
<span id="cb58-79"><a href="#cb58-79" tabindex="-1"></a></span>
<span id="cb58-80"><a href="#cb58-80" tabindex="-1"></a><span class="co"># Alterar pessoa</span></span>
<span id="cb58-81"><a href="#cb58-81" tabindex="-1"></a><span class="at">@app.route</span>(<span class="st">&#39;/pessoas/&lt;cpf&gt;&#39;</span>, methods<span class="op">=</span>[<span class="st">&#39;PUT&#39;</span>])</span>
<span id="cb58-82"><a href="#cb58-82" tabindex="-1"></a><span class="kw">def</span> alterar(cpf):</span>
<span id="cb58-83"><a href="#cb58-83" tabindex="-1"></a>    dados <span class="op">=</span> request.get_json()</span>
<span id="cb58-84"><a href="#cb58-84" tabindex="-1"></a>    session <span class="op">=</span> SessionLocal()</span>
<span id="cb58-85"><a href="#cb58-85" tabindex="-1"></a>    pessoa <span class="op">=</span> session.query(Pessoa).filter_by(cpf<span class="op">=</span>cpf).first()</span>
<span id="cb58-86"><a href="#cb58-86" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> pessoa:</span>
<span id="cb58-87"><a href="#cb58-87" tabindex="-1"></a>        session.close()</span>
<span id="cb58-88"><a href="#cb58-88" tabindex="-1"></a>        <span class="cf">return</span> jsonify({<span class="st">&quot;error&quot;</span>: <span class="st">&quot;CPF nÃ£o encontrado&quot;</span>}), <span class="dv">404</span></span>
<span id="cb58-89"><a href="#cb58-89" tabindex="-1"></a>    pessoa.nome <span class="op">=</span> dados.get(<span class="st">&#39;nome&#39;</span>, pessoa.nome)</span>
<span id="cb58-90"><a href="#cb58-90" tabindex="-1"></a>    pessoa.endereco <span class="op">=</span> dados.get(<span class="st">&#39;endereco&#39;</span>, pessoa.endereco)</span>
<span id="cb58-91"><a href="#cb58-91" tabindex="-1"></a>    pessoa.data_nascimento <span class="op">=</span> dados.get(<span class="st">&#39;data_nascimento&#39;</span>, pessoa.data_nascimento)</span>
<span id="cb58-92"><a href="#cb58-92" tabindex="-1"></a>    pessoa.foto <span class="op">=</span> dados.get(<span class="st">&#39;foto&#39;</span>, pessoa.foto)</span>
<span id="cb58-93"><a href="#cb58-93" tabindex="-1"></a>    session.commit()</span>
<span id="cb58-94"><a href="#cb58-94" tabindex="-1"></a>    session.close()</span>
<span id="cb58-95"><a href="#cb58-95" tabindex="-1"></a>    <span class="cf">return</span> jsonify({<span class="st">&quot;message&quot;</span>: <span class="st">&quot;Alterado com sucesso&quot;</span>})</span>
<span id="cb58-96"><a href="#cb58-96" tabindex="-1"></a></span>
<span id="cb58-97"><a href="#cb58-97" tabindex="-1"></a><span class="co"># Remover pessoa</span></span>
<span id="cb58-98"><a href="#cb58-98" tabindex="-1"></a><span class="at">@app.route</span>(<span class="st">&#39;/pessoas/&lt;cpf&gt;&#39;</span>, methods<span class="op">=</span>[<span class="st">&#39;DELETE&#39;</span>])</span>
<span id="cb58-99"><a href="#cb58-99" tabindex="-1"></a><span class="kw">def</span> remover(cpf):</span>
<span id="cb58-100"><a href="#cb58-100" tabindex="-1"></a>    session <span class="op">=</span> SessionLocal()</span>
<span id="cb58-101"><a href="#cb58-101" tabindex="-1"></a>    pessoa <span class="op">=</span> session.query(Pessoa).filter_by(cpf<span class="op">=</span>cpf).first()</span>
<span id="cb58-102"><a href="#cb58-102" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> pessoa:</span>
<span id="cb58-103"><a href="#cb58-103" tabindex="-1"></a>        session.close()</span>
<span id="cb58-104"><a href="#cb58-104" tabindex="-1"></a>        <span class="cf">return</span> jsonify({<span class="st">&quot;error&quot;</span>: <span class="st">&quot;CPF nÃ£o encontrado&quot;</span>}), <span class="dv">404</span></span>
<span id="cb58-105"><a href="#cb58-105" tabindex="-1"></a>    session.delete(pessoa)</span>
<span id="cb58-106"><a href="#cb58-106" tabindex="-1"></a>    session.commit()</span>
<span id="cb58-107"><a href="#cb58-107" tabindex="-1"></a>    session.close()</span>
<span id="cb58-108"><a href="#cb58-108" tabindex="-1"></a>    <span class="cf">return</span> jsonify({<span class="st">&quot;message&quot;</span>: <span class="st">&quot;Removido com sucesso&quot;</span>})</span>
<span id="cb58-109"><a href="#cb58-109" tabindex="-1"></a></span>
<span id="cb58-110"><a href="#cb58-110" tabindex="-1"></a><span class="co"># Buscar pessoa por CPF</span></span>
<span id="cb58-111"><a href="#cb58-111" tabindex="-1"></a><span class="at">@app.route</span>(<span class="st">&#39;/pessoas/&lt;cpf&gt;&#39;</span>, methods<span class="op">=</span>[<span class="st">&#39;GET&#39;</span>])</span>
<span id="cb58-112"><a href="#cb58-112" tabindex="-1"></a><span class="kw">def</span> buscar(cpf):</span>
<span id="cb58-113"><a href="#cb58-113" tabindex="-1"></a>    session <span class="op">=</span> SessionLocal()</span>
<span id="cb58-114"><a href="#cb58-114" tabindex="-1"></a>    pessoa <span class="op">=</span> session.query(Pessoa).filter_by(cpf<span class="op">=</span>cpf).first()</span>
<span id="cb58-115"><a href="#cb58-115" tabindex="-1"></a>    session.close()</span>
<span id="cb58-116"><a href="#cb58-116" tabindex="-1"></a>    <span class="cf">if</span> <span class="kw">not</span> pessoa:</span>
<span id="cb58-117"><a href="#cb58-117" tabindex="-1"></a>        <span class="cf">return</span> jsonify({<span class="st">&quot;error&quot;</span>: <span class="st">&quot;CPF nÃ£o encontrado&quot;</span>}), <span class="dv">404</span></span>
<span id="cb58-118"><a href="#cb58-118" tabindex="-1"></a>    <span class="cf">return</span> jsonify({</span>
<span id="cb58-119"><a href="#cb58-119" tabindex="-1"></a>        <span class="st">&quot;cpf&quot;</span>: pessoa.cpf,</span>
<span id="cb58-120"><a href="#cb58-120" tabindex="-1"></a>        <span class="st">&quot;nome&quot;</span>: pessoa.nome,</span>
<span id="cb58-121"><a href="#cb58-121" tabindex="-1"></a>        <span class="st">&quot;endereco&quot;</span>: pessoa.endereco,</span>
<span id="cb58-122"><a href="#cb58-122" tabindex="-1"></a>        <span class="st">&quot;data_nascimento&quot;</span>: pessoa.data_nascimento.isoformat(),</span>
<span id="cb58-123"><a href="#cb58-123" tabindex="-1"></a>        <span class="st">&quot;foto&quot;</span>: pessoa.foto</span>
<span id="cb58-124"><a href="#cb58-124" tabindex="-1"></a>    })</span>
<span id="cb58-125"><a href="#cb58-125" tabindex="-1"></a></span>
<span id="cb58-126"><a href="#cb58-126" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb58-127"><a href="#cb58-127" tabindex="-1"></a><span class="co"># Inicia o servidor</span></span>
<span id="cb58-128"><a href="#cb58-128" tabindex="-1"></a><span class="co"># ------------------------------</span></span>
<span id="cb58-129"><a href="#cb58-129" tabindex="-1"></a><span class="cf">if</span> <span class="va">__name__</span> <span class="op">==</span> <span class="st">&#39;__main__&#39;</span>:</span>
<span id="cb58-130"><a href="#cb58-130" tabindex="-1"></a>    app.run(debug<span class="op">=</span><span class="va">True</span>, port<span class="op">=</span><span class="dv">5000</span>)</span></code></pre></div>
<p>servidor estarÃ¡ rodando na porta 5000 e EXPÃ•E A API de operaÃ§Ãµes na URI <a href="http://localhost:5000/pessoas" class="uri">http://localhost:5000/pessoas</a> sem senha</p>
<div class="sourceCode" id="cb59"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb59-1"><a href="#cb59-1" tabindex="-1"></a>http<span class="in">:</span><span class="er">//localhost:5000/pessoas</span></span></code></pre></div>
</div>
<div id="cliente-html-conexÃ£o-restful" class="section level3 hasAnchor" number="7.9.2">
<h3 class="hasAnchor"><span class="header-section-number">7.9.2</span> Cliente HTML (conexÃ£o Restful)<a href="#cliente-html-conex%C3%A3o-restful" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>crie o arquivo index.html e abra-o no navegador</p>
<div class="sourceCode" id="cb60"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb60-1"><a href="#cb60-1" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb60-2"><a href="#cb60-2" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="ot"> lang</span><span class="op">=</span><span class="st">&quot;pt-BR&quot;</span><span class="dt">&gt;</span></span>
<span id="cb60-3"><a href="#cb60-3" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb60-4"><a href="#cb60-4" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> charset</span><span class="op">=</span><span class="st">&quot;UTF-8&quot;</span><span class="dt">&gt;</span></span>
<span id="cb60-5"><a href="#cb60-5" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Cadastro de Pessoas - Flask/MySQL<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb60-6"><a href="#cb60-6" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb60-7"><a href="#cb60-7" tabindex="-1"></a>  body { <span class="kw">font-family</span><span class="ch">:</span> <span class="dv">system-ui</span><span class="op">,</span> <span class="dv">-apple-system</span><span class="op">,</span> <span class="dv">Segoe UI</span><span class="op">,</span> <span class="dv">Roboto</span><span class="op">,</span> <span class="dv">Arial</span><span class="op">;</span> <span class="kw">max-width</span><span class="ch">:</span> <span class="dv">980</span><span class="dt">px</span><span class="op">;</span> <span class="kw">margin</span><span class="ch">:</span> <span class="dv">24</span><span class="dt">px</span> <span class="bu">auto</span><span class="op">;</span> }</span>
<span id="cb60-8"><a href="#cb60-8" tabindex="-1"></a>  label { <span class="kw">display</span><span class="ch">:</span> <span class="dv">block</span><span class="op">;</span> <span class="kw">margin-top</span><span class="ch">:</span> <span class="dv">10</span><span class="dt">px</span><span class="op">;</span> }</span>
<span id="cb60-9"><a href="#cb60-9" tabindex="-1"></a>  button { <span class="kw">margin-top</span><span class="ch">:</span> <span class="dv">10</span><span class="dt">px</span><span class="op">;</span> <span class="kw">margin-right</span><span class="ch">:</span> <span class="dv">6</span><span class="dt">px</span><span class="op">;</span> <span class="kw">padding</span><span class="ch">:</span> <span class="dv">8</span><span class="dt">px</span> <span class="dv">12</span><span class="dt">px</span><span class="op">;</span> }</span>
<span id="cb60-10"><a href="#cb60-10" tabindex="-1"></a>  table { <span class="kw">border-collapse</span><span class="ch">:</span> <span class="dv">collapse</span><span class="op">;</span> <span class="kw">width</span><span class="ch">:</span><span class="dv">100</span><span class="dt">%</span><span class="op">;</span> <span class="kw">margin-top</span><span class="ch">:</span><span class="dv">20</span><span class="dt">px</span><span class="op">;</span> }</span>
<span id="cb60-11"><a href="#cb60-11" tabindex="-1"></a>  th<span class="op">,</span> td { <span class="kw">border</span><span class="ch">:</span><span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#ddd</span><span class="op">;</span> <span class="kw">padding</span><span class="ch">:</span><span class="dv">8</span><span class="dt">px</span><span class="op">;</span> <span class="kw">text-align</span><span class="ch">:</span><span class="dv">left</span><span class="op">;</span> }</span>
<span id="cb60-12"><a href="#cb60-12" tabindex="-1"></a>  img<span class="fu">.thumb</span> { <span class="kw">width</span><span class="ch">:</span><span class="dv">60</span><span class="dt">px</span><span class="op">;</span> <span class="kw">height</span><span class="ch">:</span><span class="dv">60</span><span class="dt">px</span><span class="op">;</span> <span class="kw">object-fit</span><span class="ch">:</span><span class="dv">cover</span><span class="op">;</span> <span class="kw">border-radius</span><span class="ch">:</span><span class="dv">4</span><span class="dt">px</span><span class="op">;</span> }</span>
<span id="cb60-13"><a href="#cb60-13" tabindex="-1"></a>  <span class="fu">.row</span> { <span class="kw">display</span><span class="ch">:</span><span class="dv">flex</span><span class="op">;</span> <span class="kw">gap</span><span class="ch">:</span><span class="dv">8</span><span class="dt">px</span><span class="op">;</span> <span class="kw">align-items</span><span class="ch">:</span><span class="dv">center</span><span class="op">;</span> <span class="kw">flex-wrap</span><span class="ch">:</span><span class="dv">wrap</span><span class="op">;</span> }</span>
<span id="cb60-14"><a href="#cb60-14" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb60-15"><a href="#cb60-15" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb60-16"><a href="#cb60-16" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb60-17"><a href="#cb60-17" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>Cadastro de Pessoas (Flask/MySQL)<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb60-18"><a href="#cb60-18" tabindex="-1"></a></span>
<span id="cb60-19"><a href="#cb60-19" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">form</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;formPessoa&quot;</span><span class="dt">&gt;</span></span>
<span id="cb60-20"><a href="#cb60-20" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">label</span><span class="dt">&gt;</span>CPF (chave primÃ¡ria): <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;cpf&quot;</span><span class="ot"> required</span><span class="dt">&gt;&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb60-21"><a href="#cb60-21" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">label</span><span class="dt">&gt;</span>Nome: <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;nome&quot;</span><span class="ot"> required</span><span class="dt">&gt;&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb60-22"><a href="#cb60-22" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">label</span><span class="dt">&gt;</span>EndereÃ§o: <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;endereco&quot;</span><span class="ot"> required</span><span class="dt">&gt;&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb60-23"><a href="#cb60-23" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">label</span><span class="dt">&gt;</span>Data Nasc.: <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;date&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;data_nascimento&quot;</span><span class="ot"> required</span><span class="dt">&gt;&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb60-24"><a href="#cb60-24" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">label</span><span class="dt">&gt;</span>Foto: <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;file&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;foto&quot;</span><span class="ot"> accept</span><span class="op">=</span><span class="st">&quot;image/*&quot;</span><span class="dt">&gt;&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb60-25"><a href="#cb60-25" tabindex="-1"></a></span>
<span id="cb60-26"><a href="#cb60-26" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;row&quot;</span><span class="dt">&gt;</span></span>
<span id="cb60-27"><a href="#cb60-27" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;button&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;btnInserir&quot;</span><span class="ot"> onclick</span><span class="op">=</span><span class="st">&quot;inserir()&quot;</span><span class="dt">&gt;</span>Inserir<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb60-28"><a href="#cb60-28" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;button&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;btnAlterar&quot;</span><span class="ot"> onclick</span><span class="op">=</span><span class="st">&quot;alterar()&quot;</span><span class="dt">&gt;</span>Alterar<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb60-29"><a href="#cb60-29" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;button&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;btnRemover&quot;</span><span class="ot"> onclick</span><span class="op">=</span><span class="st">&quot;remover()&quot;</span><span class="dt">&gt;</span>Remover<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb60-30"><a href="#cb60-30" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb60-31"><a href="#cb60-31" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">form</span><span class="dt">&gt;</span></span>
<span id="cb60-32"><a href="#cb60-32" tabindex="-1"></a></span>
<span id="cb60-33"><a href="#cb60-33" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Pesquisar<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb60-34"><a href="#cb60-34" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">div</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;row&quot;</span><span class="dt">&gt;</span></span>
<span id="cb60-35"><a href="#cb60-35" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;pesquisa&quot;</span><span class="ot"> placeholder</span><span class="op">=</span><span class="st">&quot;Digite nome ou CPF&quot;</span><span class="ot"> style</span><span class="op">=</span><span class="st">&quot;flex:1&quot;</span><span class="dt">&gt;</span></span>
<span id="cb60-36"><a href="#cb60-36" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;button&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;btnPesquisar&quot;</span><span class="ot"> onclick</span><span class="op">=</span><span class="st">&quot;pesquisar()&quot;</span><span class="dt">&gt;</span>Pesquisar<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb60-37"><a href="#cb60-37" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;button&quot;</span><span class="ot"> onclick</span><span class="op">=</span><span class="st">&quot;listar()&quot;</span><span class="dt">&gt;</span>Listar tudo<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb60-38"><a href="#cb60-38" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb60-39"><a href="#cb60-39" tabindex="-1"></a></span>
<span id="cb60-40"><a href="#cb60-40" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">table</span><span class="dt">&gt;</span></span>
<span id="cb60-41"><a href="#cb60-41" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">thead</span><span class="dt">&gt;</span></span>
<span id="cb60-42"><a href="#cb60-42" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb60-43"><a href="#cb60-43" tabindex="-1"></a>      <span class="dt">&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>CPF<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>Foto<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>Nome<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;</span></span>
<span id="cb60-44"><a href="#cb60-44" tabindex="-1"></a>      <span class="dt">&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>EndereÃ§o<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>Nascimento<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;</span></span>
<span id="cb60-45"><a href="#cb60-45" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb60-46"><a href="#cb60-46" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">thead</span><span class="dt">&gt;</span></span>
<span id="cb60-47"><a href="#cb60-47" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">tbody</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;tabela&quot;</span><span class="dt">&gt;&lt;/</span><span class="kw">tbody</span><span class="dt">&gt;</span></span>
<span id="cb60-48"><a href="#cb60-48" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">table</span><span class="dt">&gt;</span></span>
<span id="cb60-49"><a href="#cb60-49" tabindex="-1"></a></span>
<span id="cb60-50"><a href="#cb60-50" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb60-51"><a href="#cb60-51" tabindex="-1"></a><span class="kw">const</span> API <span class="op">=</span> <span class="st">&#39;http://localhost:5000/pessoas&#39;</span><span class="op">;</span></span>
<span id="cb60-52"><a href="#cb60-52" tabindex="-1"></a></span>
<span id="cb60-53"><a href="#cb60-53" tabindex="-1"></a><span class="co">/* ---------- Helpers ---------- */</span></span>
<span id="cb60-54"><a href="#cb60-54" tabindex="-1"></a><span class="kw">function</span> <span class="fu">setBusy</span>(busy) {</span>
<span id="cb60-55"><a href="#cb60-55" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">const</span> id <span class="kw">of</span> [<span class="st">&#39;btnInserir&#39;</span><span class="op">,</span><span class="st">&#39;btnAlterar&#39;</span><span class="op">,</span><span class="st">&#39;btnRemover&#39;</span><span class="op">,</span><span class="st">&#39;btnPesquisar&#39;</span>]) {</span>
<span id="cb60-56"><a href="#cb60-56" tabindex="-1"></a>    <span class="kw">const</span> el <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(id)<span class="op">;</span></span>
<span id="cb60-57"><a href="#cb60-57" tabindex="-1"></a>    <span class="cf">if</span> (el) el<span class="op">.</span><span class="at">disabled</span> <span class="op">=</span> busy<span class="op">;</span></span>
<span id="cb60-58"><a href="#cb60-58" tabindex="-1"></a>  }</span>
<span id="cb60-59"><a href="#cb60-59" tabindex="-1"></a>}</span>
<span id="cb60-60"><a href="#cb60-60" tabindex="-1"></a></span>
<span id="cb60-61"><a href="#cb60-61" tabindex="-1"></a><span class="kw">function</span> <span class="fu">validaCampos</span>() {</span>
<span id="cb60-62"><a href="#cb60-62" tabindex="-1"></a>  <span class="kw">const</span> campos <span class="op">=</span> [<span class="st">&#39;cpf&#39;</span><span class="op">,</span><span class="st">&#39;nome&#39;</span><span class="op">,</span><span class="st">&#39;endereco&#39;</span><span class="op">,</span><span class="st">&#39;data_nascimento&#39;</span>]<span class="op">;</span></span>
<span id="cb60-63"><a href="#cb60-63" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">const</span> id <span class="kw">of</span> campos) {</span>
<span id="cb60-64"><a href="#cb60-64" tabindex="-1"></a>    <span class="kw">const</span> valor <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(id)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb60-65"><a href="#cb60-65" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>valor) {</span>
<span id="cb60-66"><a href="#cb60-66" tabindex="-1"></a>      <span class="fu">alert</span>(<span class="vs">`O campo &quot;</span><span class="sc">${</span>id<span class="sc">}</span><span class="vs">&quot; nÃ£o pode ficar em branco.`</span>)<span class="op">;</span></span>
<span id="cb60-67"><a href="#cb60-67" tabindex="-1"></a>      <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb60-68"><a href="#cb60-68" tabindex="-1"></a>    }</span>
<span id="cb60-69"><a href="#cb60-69" tabindex="-1"></a>  }</span>
<span id="cb60-70"><a href="#cb60-70" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb60-71"><a href="#cb60-71" tabindex="-1"></a>}</span>
<span id="cb60-72"><a href="#cb60-72" tabindex="-1"></a></span>
<span id="cb60-73"><a href="#cb60-73" tabindex="-1"></a><span class="kw">function</span> <span class="fu">getFotoBase64</span>() {</span>
<span id="cb60-74"><a href="#cb60-74" tabindex="-1"></a>  <span class="kw">const</span> file <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;foto&#39;</span>)<span class="op">.</span><span class="at">files</span>[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb60-75"><a href="#cb60-75" tabindex="-1"></a>  <span class="cf">if</span>(<span class="op">!</span>file) <span class="cf">return</span> <span class="bu">Promise</span><span class="op">.</span><span class="fu">resolve</span>(<span class="st">&#39;&#39;</span>)<span class="op">;</span></span>
<span id="cb60-76"><a href="#cb60-76" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">new</span> <span class="bu">Promise</span>((resolve<span class="op">,</span>reject)<span class="kw">=&gt;</span>{</span>
<span id="cb60-77"><a href="#cb60-77" tabindex="-1"></a>    <span class="kw">const</span> reader <span class="op">=</span> <span class="kw">new</span> <span class="bu">FileReader</span>()<span class="op">;</span></span>
<span id="cb60-78"><a href="#cb60-78" tabindex="-1"></a>    reader<span class="op">.</span><span class="at">onload</span> <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="fu">resolve</span>(reader<span class="op">.</span><span class="at">result</span>)<span class="op">;</span></span>
<span id="cb60-79"><a href="#cb60-79" tabindex="-1"></a>    reader<span class="op">.</span><span class="at">onerror</span> <span class="op">=</span> reject<span class="op">;</span></span>
<span id="cb60-80"><a href="#cb60-80" tabindex="-1"></a>    reader<span class="op">.</span><span class="fu">readAsDataURL</span>(file)<span class="op">;</span></span>
<span id="cb60-81"><a href="#cb60-81" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb60-82"><a href="#cb60-82" tabindex="-1"></a>}</span>
<span id="cb60-83"><a href="#cb60-83" tabindex="-1"></a></span>
<span id="cb60-84"><a href="#cb60-84" tabindex="-1"></a><span class="kw">function</span> <span class="fu">coletaDados</span>(base64Foto){</span>
<span id="cb60-85"><a href="#cb60-85" tabindex="-1"></a>  <span class="cf">return</span> {</span>
<span id="cb60-86"><a href="#cb60-86" tabindex="-1"></a>    <span class="dt">cpf</span><span class="op">:</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;cpf&#39;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">,</span></span>
<span id="cb60-87"><a href="#cb60-87" tabindex="-1"></a>    <span class="dt">nome</span><span class="op">:</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;nome&#39;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">,</span></span>
<span id="cb60-88"><a href="#cb60-88" tabindex="-1"></a>    <span class="dt">endereco</span><span class="op">:</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;endereco&#39;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">,</span></span>
<span id="cb60-89"><a href="#cb60-89" tabindex="-1"></a>    <span class="dt">data_nascimento</span><span class="op">:</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;data_nascimento&#39;</span>)<span class="op">.</span><span class="at">value</span><span class="op">,</span> <span class="co">// YYYY-MM-DD</span></span>
<span id="cb60-90"><a href="#cb60-90" tabindex="-1"></a>    <span class="dt">foto</span><span class="op">:</span> base64Foto <span class="op">||</span> <span class="st">&#39;&#39;</span></span>
<span id="cb60-91"><a href="#cb60-91" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb60-92"><a href="#cb60-92" tabindex="-1"></a>}</span>
<span id="cb60-93"><a href="#cb60-93" tabindex="-1"></a></span>
<span id="cb60-94"><a href="#cb60-94" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">readJsonSafe</span>(res) {</span>
<span id="cb60-95"><a href="#cb60-95" tabindex="-1"></a>  <span class="kw">const</span> ct <span class="op">=</span> res<span class="op">.</span><span class="at">headers</span><span class="op">.</span><span class="fu">get</span>(<span class="st">&#39;content-type&#39;</span>) <span class="op">||</span> <span class="st">&#39;&#39;</span><span class="op">;</span></span>
<span id="cb60-96"><a href="#cb60-96" tabindex="-1"></a>  <span class="cf">if</span> (ct<span class="op">.</span><span class="fu">includes</span>(<span class="st">&#39;application/json&#39;</span>)) {</span>
<span id="cb60-97"><a href="#cb60-97" tabindex="-1"></a>    <span class="cf">try</span> { <span class="cf">return</span> <span class="cf">await</span> res<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span> } <span class="cf">catch</span> { <span class="cf">return</span> <span class="kw">null</span><span class="op">;</span> }</span>
<span id="cb60-98"><a href="#cb60-98" tabindex="-1"></a>  }</span>
<span id="cb60-99"><a href="#cb60-99" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">null</span><span class="op">;</span></span>
<span id="cb60-100"><a href="#cb60-100" tabindex="-1"></a>}</span>
<span id="cb60-101"><a href="#cb60-101" tabindex="-1"></a></span>
<span id="cb60-102"><a href="#cb60-102" tabindex="-1"></a><span class="co">/* ---------- CRUD ---------- */</span></span>
<span id="cb60-103"><a href="#cb60-103" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">inserir</span>() {</span>
<span id="cb60-104"><a href="#cb60-104" tabindex="-1"></a>  <span class="cf">if</span>(<span class="op">!</span><span class="fu">validaCampos</span>()) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb60-105"><a href="#cb60-105" tabindex="-1"></a>  <span class="fu">setBusy</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb60-106"><a href="#cb60-106" tabindex="-1"></a>  <span class="cf">try</span> {</span>
<span id="cb60-107"><a href="#cb60-107" tabindex="-1"></a>    <span class="kw">const</span> base64 <span class="op">=</span> <span class="cf">await</span> <span class="fu">getFotoBase64</span>()<span class="op">;</span></span>
<span id="cb60-108"><a href="#cb60-108" tabindex="-1"></a>    <span class="kw">const</span> pessoa <span class="op">=</span> <span class="fu">coletaDados</span>(base64)<span class="op">;</span></span>
<span id="cb60-109"><a href="#cb60-109" tabindex="-1"></a></span>
<span id="cb60-110"><a href="#cb60-110" tabindex="-1"></a>    <span class="kw">const</span> res <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(API<span class="op">,</span> {</span>
<span id="cb60-111"><a href="#cb60-111" tabindex="-1"></a>      <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span></span>
<span id="cb60-112"><a href="#cb60-112" tabindex="-1"></a>      <span class="dt">headers</span><span class="op">:</span> {<span class="st">&#39;Content-Type&#39;</span><span class="op">:</span> <span class="st">&#39;application/json&#39;</span>}<span class="op">,</span></span>
<span id="cb60-113"><a href="#cb60-113" tabindex="-1"></a>      <span class="dt">body</span><span class="op">:</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(pessoa)</span>
<span id="cb60-114"><a href="#cb60-114" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb60-115"><a href="#cb60-115" tabindex="-1"></a>    <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> <span class="fu">readJsonSafe</span>(res)<span class="op">;</span></span>
<span id="cb60-116"><a href="#cb60-116" tabindex="-1"></a>    <span class="cf">if</span>(res<span class="op">.</span><span class="at">ok</span>) {</span>
<span id="cb60-117"><a href="#cb60-117" tabindex="-1"></a>      <span class="fu">alert</span>(<span class="st">&#39;Inserido com sucesso!&#39;</span>)<span class="op">;</span></span>
<span id="cb60-118"><a href="#cb60-118" tabindex="-1"></a>      <span class="fu">listar</span>()<span class="op">;</span></span>
<span id="cb60-119"><a href="#cb60-119" tabindex="-1"></a>      <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;formPessoa&#39;</span>)<span class="op">.</span><span class="fu">reset</span>()<span class="op">;</span></span>
<span id="cb60-120"><a href="#cb60-120" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb60-121"><a href="#cb60-121" tabindex="-1"></a>      <span class="fu">alert</span>(<span class="st">&#39;Erro: &#39;</span> <span class="op">+</span> (data<span class="op">?.</span><span class="at">error</span> <span class="op">||</span> res<span class="op">.</span><span class="at">statusText</span>))<span class="op">;</span></span>
<span id="cb60-122"><a href="#cb60-122" tabindex="-1"></a>    }</span>
<span id="cb60-123"><a href="#cb60-123" tabindex="-1"></a>  } <span class="cf">catch</span> (e) {</span>
<span id="cb60-124"><a href="#cb60-124" tabindex="-1"></a>    <span class="fu">alert</span>(<span class="st">&#39;Falha ao inserir: &#39;</span> <span class="op">+</span> e<span class="op">.</span><span class="at">message</span>)<span class="op">;</span></span>
<span id="cb60-125"><a href="#cb60-125" tabindex="-1"></a>  } <span class="cf">finally</span> {</span>
<span id="cb60-126"><a href="#cb60-126" tabindex="-1"></a>    <span class="fu">setBusy</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb60-127"><a href="#cb60-127" tabindex="-1"></a>  }</span>
<span id="cb60-128"><a href="#cb60-128" tabindex="-1"></a>}</span>
<span id="cb60-129"><a href="#cb60-129" tabindex="-1"></a></span>
<span id="cb60-130"><a href="#cb60-130" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">alterar</span>() {</span>
<span id="cb60-131"><a href="#cb60-131" tabindex="-1"></a>  <span class="cf">if</span>(<span class="op">!</span><span class="fu">validaCampos</span>()) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb60-132"><a href="#cb60-132" tabindex="-1"></a>  <span class="kw">const</span> cpf <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;cpf&#39;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb60-133"><a href="#cb60-133" tabindex="-1"></a>  <span class="fu">setBusy</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb60-134"><a href="#cb60-134" tabindex="-1"></a>  <span class="cf">try</span> {</span>
<span id="cb60-135"><a href="#cb60-135" tabindex="-1"></a>    <span class="kw">const</span> base64 <span class="op">=</span> <span class="cf">await</span> <span class="fu">getFotoBase64</span>()<span class="op">;</span></span>
<span id="cb60-136"><a href="#cb60-136" tabindex="-1"></a>    <span class="kw">const</span> novosDados <span class="op">=</span> <span class="fu">coletaDados</span>()<span class="op">;</span></span>
<span id="cb60-137"><a href="#cb60-137" tabindex="-1"></a>    <span class="cf">if</span> (base64) novosDados<span class="op">.</span><span class="at">foto</span> <span class="op">=</span> base64<span class="op">;</span></span>
<span id="cb60-138"><a href="#cb60-138" tabindex="-1"></a></span>
<span id="cb60-139"><a href="#cb60-139" tabindex="-1"></a>    <span class="kw">const</span> res <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="vs">`</span><span class="sc">${</span>API<span class="sc">}</span><span class="vs">/</span><span class="sc">${</span><span class="pp">encodeURIComponent</span>(cpf)<span class="sc">}</span><span class="vs">`</span><span class="op">,</span> {</span>
<span id="cb60-140"><a href="#cb60-140" tabindex="-1"></a>      <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;PUT&#39;</span><span class="op">,</span></span>
<span id="cb60-141"><a href="#cb60-141" tabindex="-1"></a>      <span class="dt">headers</span><span class="op">:</span> {<span class="st">&#39;Content-Type&#39;</span><span class="op">:</span> <span class="st">&#39;application/json&#39;</span>}<span class="op">,</span></span>
<span id="cb60-142"><a href="#cb60-142" tabindex="-1"></a>      <span class="dt">body</span><span class="op">:</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(novosDados)</span>
<span id="cb60-143"><a href="#cb60-143" tabindex="-1"></a>    })<span class="op">;</span></span>
<span id="cb60-144"><a href="#cb60-144" tabindex="-1"></a>    <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> <span class="fu">readJsonSafe</span>(res)<span class="op">;</span></span>
<span id="cb60-145"><a href="#cb60-145" tabindex="-1"></a>    <span class="cf">if</span>(res<span class="op">.</span><span class="at">ok</span>) {</span>
<span id="cb60-146"><a href="#cb60-146" tabindex="-1"></a>      <span class="fu">alert</span>(<span class="st">&#39;Alterado com sucesso!&#39;</span>)<span class="op">;</span></span>
<span id="cb60-147"><a href="#cb60-147" tabindex="-1"></a>      <span class="fu">listar</span>()<span class="op">;</span></span>
<span id="cb60-148"><a href="#cb60-148" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb60-149"><a href="#cb60-149" tabindex="-1"></a>      <span class="fu">alert</span>(<span class="st">&#39;Erro: &#39;</span> <span class="op">+</span> (data<span class="op">?.</span><span class="at">error</span> <span class="op">||</span> res<span class="op">.</span><span class="at">statusText</span>))<span class="op">;</span></span>
<span id="cb60-150"><a href="#cb60-150" tabindex="-1"></a>    }</span>
<span id="cb60-151"><a href="#cb60-151" tabindex="-1"></a>  } <span class="cf">catch</span> (e) {</span>
<span id="cb60-152"><a href="#cb60-152" tabindex="-1"></a>    <span class="fu">alert</span>(<span class="st">&#39;Falha ao alterar: &#39;</span> <span class="op">+</span> e<span class="op">.</span><span class="at">message</span>)<span class="op">;</span></span>
<span id="cb60-153"><a href="#cb60-153" tabindex="-1"></a>  } <span class="cf">finally</span> {</span>
<span id="cb60-154"><a href="#cb60-154" tabindex="-1"></a>    <span class="fu">setBusy</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb60-155"><a href="#cb60-155" tabindex="-1"></a>  }</span>
<span id="cb60-156"><a href="#cb60-156" tabindex="-1"></a>}</span>
<span id="cb60-157"><a href="#cb60-157" tabindex="-1"></a></span>
<span id="cb60-158"><a href="#cb60-158" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">remover</span>() {</span>
<span id="cb60-159"><a href="#cb60-159" tabindex="-1"></a>  <span class="kw">const</span> cpf <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;cpf&#39;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb60-160"><a href="#cb60-160" tabindex="-1"></a>  <span class="cf">if</span>(<span class="op">!</span>cpf) <span class="cf">return</span> <span class="fu">alert</span>(<span class="st">&#39;Informe o CPF para remover.&#39;</span>)<span class="op">;</span></span>
<span id="cb60-161"><a href="#cb60-161" tabindex="-1"></a>  <span class="cf">if</span>(<span class="op">!</span><span class="fu">confirm</span>(<span class="st">&#39;Confirma a exclusÃ£o?&#39;</span>)) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb60-162"><a href="#cb60-162" tabindex="-1"></a></span>
<span id="cb60-163"><a href="#cb60-163" tabindex="-1"></a>  <span class="fu">setBusy</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb60-164"><a href="#cb60-164" tabindex="-1"></a>  <span class="cf">try</span> {</span>
<span id="cb60-165"><a href="#cb60-165" tabindex="-1"></a>    <span class="kw">const</span> res <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="vs">`</span><span class="sc">${</span>API<span class="sc">}</span><span class="vs">/</span><span class="sc">${</span><span class="pp">encodeURIComponent</span>(cpf)<span class="sc">}</span><span class="vs">`</span><span class="op">,</span> {<span class="dt">method</span><span class="op">:</span><span class="st">&#39;DELETE&#39;</span>})<span class="op">;</span></span>
<span id="cb60-166"><a href="#cb60-166" tabindex="-1"></a>    <span class="co">// 204 =&gt; sem corpo; nÃ£o tente parsear JSON aqui</span></span>
<span id="cb60-167"><a href="#cb60-167" tabindex="-1"></a>    <span class="cf">if</span>(res<span class="op">.</span><span class="at">status</span> <span class="op">===</span> <span class="dv">204</span>) {</span>
<span id="cb60-168"><a href="#cb60-168" tabindex="-1"></a>      <span class="fu">alert</span>(<span class="st">&#39;Removido com sucesso!&#39;</span>)<span class="op">;</span></span>
<span id="cb60-169"><a href="#cb60-169" tabindex="-1"></a>      <span class="fu">listar</span>()<span class="op">;</span></span>
<span id="cb60-170"><a href="#cb60-170" tabindex="-1"></a>      <span class="cf">return</span><span class="op">;</span></span>
<span id="cb60-171"><a href="#cb60-171" tabindex="-1"></a>    }</span>
<span id="cb60-172"><a href="#cb60-172" tabindex="-1"></a>    <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> <span class="fu">readJsonSafe</span>(res)<span class="op">;</span></span>
<span id="cb60-173"><a href="#cb60-173" tabindex="-1"></a>    <span class="cf">if</span>(res<span class="op">.</span><span class="at">ok</span>) {</span>
<span id="cb60-174"><a href="#cb60-174" tabindex="-1"></a>      <span class="fu">alert</span>(<span class="st">&#39;Removido com sucesso!&#39;</span>)<span class="op">;</span></span>
<span id="cb60-175"><a href="#cb60-175" tabindex="-1"></a>      <span class="fu">listar</span>()<span class="op">;</span></span>
<span id="cb60-176"><a href="#cb60-176" tabindex="-1"></a>    } <span class="cf">else</span> {</span>
<span id="cb60-177"><a href="#cb60-177" tabindex="-1"></a>      <span class="fu">alert</span>(<span class="st">&#39;Erro: &#39;</span> <span class="op">+</span> (data<span class="op">?.</span><span class="at">error</span> <span class="op">||</span> res<span class="op">.</span><span class="at">statusText</span>))<span class="op">;</span></span>
<span id="cb60-178"><a href="#cb60-178" tabindex="-1"></a>    }</span>
<span id="cb60-179"><a href="#cb60-179" tabindex="-1"></a>  } <span class="cf">catch</span> (e) {</span>
<span id="cb60-180"><a href="#cb60-180" tabindex="-1"></a>    <span class="fu">alert</span>(<span class="st">&#39;Falha ao remover: &#39;</span> <span class="op">+</span> e<span class="op">.</span><span class="at">message</span>)<span class="op">;</span></span>
<span id="cb60-181"><a href="#cb60-181" tabindex="-1"></a>  } <span class="cf">finally</span> {</span>
<span id="cb60-182"><a href="#cb60-182" tabindex="-1"></a>    <span class="fu">setBusy</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb60-183"><a href="#cb60-183" tabindex="-1"></a>  }</span>
<span id="cb60-184"><a href="#cb60-184" tabindex="-1"></a>}</span>
<span id="cb60-185"><a href="#cb60-185" tabindex="-1"></a></span>
<span id="cb60-186"><a href="#cb60-186" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">pesquisar</span>() {</span>
<span id="cb60-187"><a href="#cb60-187" tabindex="-1"></a>  <span class="kw">const</span> termo <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;pesquisa&#39;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb60-188"><a href="#cb60-188" tabindex="-1"></a>  <span class="fu">setBusy</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb60-189"><a href="#cb60-189" tabindex="-1"></a>  <span class="cf">try</span> {</span>
<span id="cb60-190"><a href="#cb60-190" tabindex="-1"></a>    <span class="kw">const</span> url <span class="op">=</span> termo <span class="op">?</span> <span class="vs">`</span><span class="sc">${</span>API<span class="sc">}</span><span class="vs">?q=</span><span class="sc">${</span><span class="pp">encodeURIComponent</span>(termo)<span class="sc">}</span><span class="vs">`</span> <span class="op">:</span> API<span class="op">;</span></span>
<span id="cb60-191"><a href="#cb60-191" tabindex="-1"></a>    <span class="kw">const</span> res <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(url)<span class="op">;</span></span>
<span id="cb60-192"><a href="#cb60-192" tabindex="-1"></a>    <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> <span class="fu">readJsonSafe</span>(res)<span class="op">;</span></span>
<span id="cb60-193"><a href="#cb60-193" tabindex="-1"></a>    <span class="cf">if</span>(<span class="op">!</span>res<span class="op">.</span><span class="at">ok</span>) <span class="cf">return</span> <span class="fu">alert</span>(<span class="st">&#39;Falha na pesquisa: &#39;</span> <span class="op">+</span> (data<span class="op">?.</span><span class="at">error</span> <span class="op">||</span> res<span class="op">.</span><span class="at">statusText</span>))<span class="op">;</span></span>
<span id="cb60-194"><a href="#cb60-194" tabindex="-1"></a>    <span class="fu">preencheTabela</span>(<span class="bu">Array</span><span class="op">.</span><span class="fu">isArray</span>(data) <span class="op">?</span> data <span class="op">:</span> (data<span class="op">?.</span><span class="at">items</span> <span class="op">??</span> []))<span class="op">;</span></span>
<span id="cb60-195"><a href="#cb60-195" tabindex="-1"></a>  } <span class="cf">catch</span> (e) {</span>
<span id="cb60-196"><a href="#cb60-196" tabindex="-1"></a>    <span class="fu">alert</span>(<span class="st">&#39;Falha na pesquisa: &#39;</span> <span class="op">+</span> e<span class="op">.</span><span class="at">message</span>)<span class="op">;</span></span>
<span id="cb60-197"><a href="#cb60-197" tabindex="-1"></a>  } <span class="cf">finally</span> {</span>
<span id="cb60-198"><a href="#cb60-198" tabindex="-1"></a>    <span class="fu">setBusy</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb60-199"><a href="#cb60-199" tabindex="-1"></a>  }</span>
<span id="cb60-200"><a href="#cb60-200" tabindex="-1"></a>}</span>
<span id="cb60-201"><a href="#cb60-201" tabindex="-1"></a></span>
<span id="cb60-202"><a href="#cb60-202" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">listar</span>() {</span>
<span id="cb60-203"><a href="#cb60-203" tabindex="-1"></a>  <span class="fu">setBusy</span>(<span class="kw">true</span>)<span class="op">;</span></span>
<span id="cb60-204"><a href="#cb60-204" tabindex="-1"></a>  <span class="cf">try</span> {</span>
<span id="cb60-205"><a href="#cb60-205" tabindex="-1"></a>    <span class="kw">const</span> res <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(API)<span class="op">;</span></span>
<span id="cb60-206"><a href="#cb60-206" tabindex="-1"></a>    <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> <span class="fu">readJsonSafe</span>(res)<span class="op">;</span></span>
<span id="cb60-207"><a href="#cb60-207" tabindex="-1"></a>    <span class="cf">if</span>(<span class="op">!</span>res<span class="op">.</span><span class="at">ok</span>) <span class="cf">return</span> <span class="fu">alert</span>(<span class="st">&#39;Falha ao listar: &#39;</span> <span class="op">+</span> (data<span class="op">?.</span><span class="at">error</span> <span class="op">||</span> res<span class="op">.</span><span class="at">statusText</span>))<span class="op">;</span></span>
<span id="cb60-208"><a href="#cb60-208" tabindex="-1"></a>    <span class="fu">preencheTabela</span>(<span class="bu">Array</span><span class="op">.</span><span class="fu">isArray</span>(data) <span class="op">?</span> data <span class="op">:</span> (data<span class="op">?.</span><span class="at">items</span> <span class="op">??</span> []))<span class="op">;</span></span>
<span id="cb60-209"><a href="#cb60-209" tabindex="-1"></a>  } <span class="cf">catch</span> (e) {</span>
<span id="cb60-210"><a href="#cb60-210" tabindex="-1"></a>    <span class="fu">alert</span>(<span class="st">&#39;Falha ao listar: &#39;</span> <span class="op">+</span> e<span class="op">.</span><span class="at">message</span>)<span class="op">;</span></span>
<span id="cb60-211"><a href="#cb60-211" tabindex="-1"></a>  } <span class="cf">finally</span> {</span>
<span id="cb60-212"><a href="#cb60-212" tabindex="-1"></a>    <span class="fu">setBusy</span>(<span class="kw">false</span>)<span class="op">;</span></span>
<span id="cb60-213"><a href="#cb60-213" tabindex="-1"></a>  }</span>
<span id="cb60-214"><a href="#cb60-214" tabindex="-1"></a>}</span>
<span id="cb60-215"><a href="#cb60-215" tabindex="-1"></a></span>
<span id="cb60-216"><a href="#cb60-216" tabindex="-1"></a><span class="co">/* ---------- UI ---------- */</span></span>
<span id="cb60-217"><a href="#cb60-217" tabindex="-1"></a><span class="kw">function</span> <span class="fu">preencheTabela</span>(lista){</span>
<span id="cb60-218"><a href="#cb60-218" tabindex="-1"></a>  <span class="kw">const</span> tbody <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;tabela&#39;</span>)<span class="op">;</span></span>
<span id="cb60-219"><a href="#cb60-219" tabindex="-1"></a>  tbody<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span></span>
<span id="cb60-220"><a href="#cb60-220" tabindex="-1"></a>  (lista <span class="op">||</span> [])<span class="op">.</span><span class="fu">forEach</span>(p<span class="kw">=&gt;</span>{</span>
<span id="cb60-221"><a href="#cb60-221" tabindex="-1"></a>    <span class="kw">const</span> tr <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">&#39;tr&#39;</span>)<span class="op">;</span></span>
<span id="cb60-222"><a href="#cb60-222" tabindex="-1"></a>    tr<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb60-223"><a href="#cb60-223" tabindex="-1"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">cpf</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb60-224"><a href="#cb60-224" tabindex="-1"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">foto</span> <span class="op">?</span> <span class="vs">`&lt;img class=&quot;thumb&quot; src=&quot;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">foto</span><span class="sc">}</span><span class="vs">&quot; alt=&quot;foto&quot;&gt;`</span> <span class="op">:</span> <span class="st">&#39;&#39;</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb60-225"><a href="#cb60-225" tabindex="-1"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">nome</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb60-226"><a href="#cb60-226" tabindex="-1"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">endereco</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb60-227"><a href="#cb60-227" tabindex="-1"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">data_nascimento</span><span class="sc">}</span><span class="vs">&lt;/td&gt;`</span><span class="op">;</span></span>
<span id="cb60-228"><a href="#cb60-228" tabindex="-1"></a>    tr<span class="op">.</span><span class="at">onclick</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb60-229"><a href="#cb60-229" tabindex="-1"></a>      <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;cpf&#39;</span>)<span class="op">.</span><span class="at">value</span> <span class="op">=</span> p<span class="op">.</span><span class="at">cpf</span><span class="op">;</span></span>
<span id="cb60-230"><a href="#cb60-230" tabindex="-1"></a>      <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;nome&#39;</span>)<span class="op">.</span><span class="at">value</span> <span class="op">=</span> p<span class="op">.</span><span class="at">nome</span><span class="op">;</span></span>
<span id="cb60-231"><a href="#cb60-231" tabindex="-1"></a>      <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;endereco&#39;</span>)<span class="op">.</span><span class="at">value</span> <span class="op">=</span> p<span class="op">.</span><span class="at">endereco</span><span class="op">;</span></span>
<span id="cb60-232"><a href="#cb60-232" tabindex="-1"></a>      <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;data_nascimento&#39;</span>)<span class="op">.</span><span class="at">value</span> <span class="op">=</span> p<span class="op">.</span><span class="at">data_nascimento</span><span class="op">;</span></span>
<span id="cb60-233"><a href="#cb60-233" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb60-234"><a href="#cb60-234" tabindex="-1"></a>    tbody<span class="op">.</span><span class="fu">appendChild</span>(tr)<span class="op">;</span></span>
<span id="cb60-235"><a href="#cb60-235" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb60-236"><a href="#cb60-236" tabindex="-1"></a>}</span>
<span id="cb60-237"><a href="#cb60-237" tabindex="-1"></a></span>
<span id="cb60-238"><a href="#cb60-238" tabindex="-1"></a><span class="fu">listar</span>()<span class="op">;</span></span>
<span id="cb60-239"><a href="#cb60-239" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb60-240"><a href="#cb60-240" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb60-241"><a href="#cb60-241" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code></pre></div>
<hr />
</div>
</div>
<div id="exemplo-03---servidor-de-aplicaÃ§Ã£o-perl" class="section level2 hasAnchor" number="7.10">
<h2 class="hasAnchor"><span class="header-section-number">7.10</span> Exemplo 03 - SERVIDOR DE APLICAÃ‡ÃƒO PERL<a href="#exemplo-03---servidor-de-aplica%C3%A7%C3%A3o-perl" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><img src="images/clipboard-2372699820.png" /></p>
<p>Neste exemplo, temos uma aplicaÃ§Ã£o cliente feita html e javascript</p>
<p>A interface do Cliente Ã© feita em HTML5</p>
<p>A conexÃ£o com o servidor Ã© feita pelo javascript incorporado no HTML:</p>
<p>CRUD no cliente Ã© feito peloa javascript utilizando metodologia Restful sobre protocolo HTTP 2.0</p>
<p>O servidor Restful Ã© feito em linguagem PERL</p>
<p>OBS: NÃƒO TEMOS CONTROLE DE SESSÃƒO DE CLIENTE IMPLEMENTADO.</p>
<div class="sourceCode" id="cb61"><pre class="sourceCode cmd"><code class="sourceCode dosbat"><span id="cb61-1"><a href="#cb61-1" tabindex="-1"></a>cpan Dancer2 DBI DBD::Pg JSON</span></code></pre></div>
<div id="servidor-perl" class="section level3 hasAnchor" number="7.10.1">
<h3 class="hasAnchor"><span class="header-section-number">7.10.1</span> Servidor Perl<a href="#servidor-perl" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb62"><pre class="sourceCode perl"><code class="sourceCode perl"><span id="cb62-1"><a href="#cb62-1" tabindex="-1"></a><span class="kw">#!/usr/bin/perl</span></span>
<span id="cb62-2"><a href="#cb62-2" tabindex="-1"></a><span class="fu">use</span> <span class="kw">strict</span>;</span>
<span id="cb62-3"><a href="#cb62-3" tabindex="-1"></a><span class="fu">use</span> <span class="kw">warnings</span>;</span>
<span id="cb62-4"><a href="#cb62-4" tabindex="-1"></a><span class="fu">use</span> Dancer2;</span>
<span id="cb62-5"><a href="#cb62-5" tabindex="-1"></a><span class="fu">use</span> DBI;</span>
<span id="cb62-6"><a href="#cb62-6" tabindex="-1"></a><span class="fu">use</span> JSON;</span>
<span id="cb62-7"><a href="#cb62-7" tabindex="-1"></a></span>
<span id="cb62-8"><a href="#cb62-8" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb62-9"><a href="#cb62-9" tabindex="-1"></a><span class="co"># ConfiguraÃ§Ãµes do banco</span></span>
<span id="cb62-10"><a href="#cb62-10" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb62-11"><a href="#cb62-11" tabindex="-1"></a><span class="kw">my</span> <span class="dt">$dsn</span> = <span class="ot">&quot;</span><span class="st">dbi:Pg:dbname=postgres;host=db.pbbtfwmydxmxdibmtbqq.supabase.co;port=5432</span><span class="ot">&quot;</span>;</span>
<span id="cb62-12"><a href="#cb62-12" tabindex="-1"></a><span class="kw">my</span> <span class="dt">$db_user</span> = <span class="ot">&quot;</span><span class="st">postgres</span><span class="ot">&quot;</span>;</span>
<span id="cb62-13"><a href="#cb62-13" tabindex="-1"></a><span class="kw">my</span> <span class="dt">$db_pass</span> = <span class="ot">&quot;</span><span class="st">MinhaSuperSenha</span><span class="ot">&quot;</span>;</span>
<span id="cb62-14"><a href="#cb62-14" tabindex="-1"></a></span>
<span id="cb62-15"><a href="#cb62-15" tabindex="-1"></a><span class="kw">my</span> <span class="dt">$dbh</span> = DBI-&gt;<span class="fu">connect</span>(<span class="dt">$dsn</span>, <span class="dt">$db_user</span>, <span class="dt">$db_pass</span>, { RaiseError =&gt; <span class="dv">1</span>, AutoCommit =&gt; <span class="dv">1</span> });</span>
<span id="cb62-16"><a href="#cb62-16" tabindex="-1"></a></span>
<span id="cb62-17"><a href="#cb62-17" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb62-18"><a href="#cb62-18" tabindex="-1"></a><span class="co"># Helpers</span></span>
<span id="cb62-19"><a href="#cb62-19" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb62-20"><a href="#cb62-20" tabindex="-1"></a><span class="kw">sub </span><span class="fu">json_response</span> {</span>
<span id="cb62-21"><a href="#cb62-21" tabindex="-1"></a>    content_type <span class="ot">&#39;</span><span class="ss">application/json</span><span class="ot">&#39;</span>;</span>
<span id="cb62-22"><a href="#cb62-22" tabindex="-1"></a>    <span class="kw">return</span> encode_json(<span class="wa">$_</span>[<span class="dv">0</span>]);</span>
<span id="cb62-23"><a href="#cb62-23" tabindex="-1"></a>}</span>
<span id="cb62-24"><a href="#cb62-24" tabindex="-1"></a></span>
<span id="cb62-25"><a href="#cb62-25" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb62-26"><a href="#cb62-26" tabindex="-1"></a><span class="co"># Endpoints REST</span></span>
<span id="cb62-27"><a href="#cb62-27" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb62-28"><a href="#cb62-28" tabindex="-1"></a></span>
<span id="cb62-29"><a href="#cb62-29" tabindex="-1"></a><span class="co"># Listar todas ou pesquisar</span></span>
<span id="cb62-30"><a href="#cb62-30" tabindex="-1"></a>get <span class="ot">&#39;</span><span class="ss">/pessoas</span><span class="ot">&#39;</span> =&gt; <span class="kw">sub </span>{</span>
<span id="cb62-31"><a href="#cb62-31" tabindex="-1"></a>    <span class="kw">my</span> <span class="dt">$q</span> = query_parameters-&gt;get(<span class="ot">&#39;</span><span class="ss">q</span><span class="ot">&#39;</span>) || <span class="ot">&#39;&#39;</span>;</span>
<span id="cb62-32"><a href="#cb62-32" tabindex="-1"></a>    <span class="kw">my</span> <span class="dt">$sql</span> = <span class="ot">&quot;</span><span class="st">SELECT * FROM pessoas</span><span class="ot">&quot;</span>;</span>
<span id="cb62-33"><a href="#cb62-33" tabindex="-1"></a>    <span class="kw">my</span> <span class="dt">@params</span>;</span>
<span id="cb62-34"><a href="#cb62-34" tabindex="-1"></a>    <span class="kw">if</span> (<span class="dt">$q</span> <span class="ot">ne</span> <span class="ot">&#39;&#39;</span>) {</span>
<span id="cb62-35"><a href="#cb62-35" tabindex="-1"></a>        <span class="dt">$sql</span> .= <span class="ot">&quot;</span><span class="st"> WHERE cpf ILIKE ? OR nome ILIKE ?</span><span class="ot">&quot;</span>;</span>
<span id="cb62-36"><a href="#cb62-36" tabindex="-1"></a>        <span class="dt">@params</span> = (<span class="ot">&quot;</span><span class="st">%</span><span class="dt">$q</span><span class="st">%</span><span class="ot">&quot;</span>, <span class="ot">&quot;</span><span class="st">%</span><span class="dt">$q</span><span class="st">%</span><span class="ot">&quot;</span>);</span>
<span id="cb62-37"><a href="#cb62-37" tabindex="-1"></a>    }</span>
<span id="cb62-38"><a href="#cb62-38" tabindex="-1"></a>    <span class="kw">my</span> <span class="dt">$sth</span> = <span class="dt">$dbh</span>-&gt;<span class="dt">prepare</span>(<span class="dt">$sql</span>);</span>
<span id="cb62-39"><a href="#cb62-39" tabindex="-1"></a>    <span class="dt">$sth</span>-&gt;<span class="dt">execute</span>(<span class="dt">@params</span>);</span>
<span id="cb62-40"><a href="#cb62-40" tabindex="-1"></a>    <span class="kw">my</span> <span class="dt">@rows</span>;</span>
<span id="cb62-41"><a href="#cb62-41" tabindex="-1"></a>    <span class="kw">while</span> (<span class="kw">my</span> <span class="dt">$row</span> = <span class="dt">$sth</span>-&gt;<span class="dt">fetchrow_hashref</span>) {</span>
<span id="cb62-42"><a href="#cb62-42" tabindex="-1"></a>        <span class="fu">push</span> <span class="dt">@rows</span>, <span class="dt">$row</span>;</span>
<span id="cb62-43"><a href="#cb62-43" tabindex="-1"></a>    }</span>
<span id="cb62-44"><a href="#cb62-44" tabindex="-1"></a>    <span class="kw">return</span> json_response(\<span class="dt">@rows</span>);</span>
<span id="cb62-45"><a href="#cb62-45" tabindex="-1"></a>};</span>
<span id="cb62-46"><a href="#cb62-46" tabindex="-1"></a></span>
<span id="cb62-47"><a href="#cb62-47" tabindex="-1"></a><span class="co"># Buscar por CPF</span></span>
<span id="cb62-48"><a href="#cb62-48" tabindex="-1"></a>get <span class="ot">&#39;</span><span class="ss">/pessoas/:cpf</span><span class="ot">&#39;</span> =&gt; <span class="kw">sub </span>{</span>
<span id="cb62-49"><a href="#cb62-49" tabindex="-1"></a>    <span class="kw">my</span> <span class="dt">$cpf</span> = route_parameters-&gt;get(<span class="ot">&#39;</span><span class="ss">cpf</span><span class="ot">&#39;</span>);</span>
<span id="cb62-50"><a href="#cb62-50" tabindex="-1"></a>    <span class="kw">my</span> <span class="dt">$sth</span> = <span class="dt">$dbh</span>-&gt;<span class="dt">prepare</span>(<span class="ot">&quot;</span><span class="st">SELECT * FROM pessoas WHERE cpf = ?</span><span class="ot">&quot;</span>);</span>
<span id="cb62-51"><a href="#cb62-51" tabindex="-1"></a>    <span class="dt">$sth</span>-&gt;<span class="dt">execute</span>(<span class="dt">$cpf</span>);</span>
<span id="cb62-52"><a href="#cb62-52" tabindex="-1"></a>    <span class="kw">my</span> <span class="dt">$row</span> = <span class="dt">$sth</span>-&gt;<span class="dt">fetchrow_hashref</span>;</span>
<span id="cb62-53"><a href="#cb62-53" tabindex="-1"></a>    <span class="kw">return</span> <span class="dt">$row</span> ? json_response(<span class="dt">$row</span>) : status(<span class="dv">404</span>)-&gt;json_response({ error =&gt; <span class="ot">&quot;</span><span class="st">CPF nÃ£o encontrado</span><span class="ot">&quot;</span> });</span>
<span id="cb62-54"><a href="#cb62-54" tabindex="-1"></a>};</span>
<span id="cb62-55"><a href="#cb62-55" tabindex="-1"></a></span>
<span id="cb62-56"><a href="#cb62-56" tabindex="-1"></a><span class="co"># Inserir</span></span>
<span id="cb62-57"><a href="#cb62-57" tabindex="-1"></a>post <span class="ot">&#39;</span><span class="ss">/pessoas</span><span class="ot">&#39;</span> =&gt; <span class="kw">sub </span>{</span>
<span id="cb62-58"><a href="#cb62-58" tabindex="-1"></a>    <span class="kw">my</span> <span class="dt">$data</span> = from_json(request-&gt;body);</span>
<span id="cb62-59"><a href="#cb62-59" tabindex="-1"></a>    <span class="kw">my</span> <span class="dt">$cpf</span> = <span class="dt">$data</span>-&gt;{cpf};</span>
<span id="cb62-60"><a href="#cb62-60" tabindex="-1"></a>    <span class="co"># Verifica se existe</span></span>
<span id="cb62-61"><a href="#cb62-61" tabindex="-1"></a>    <span class="kw">my</span> <span class="dt">$check</span> = <span class="dt">$dbh</span>-&gt;<span class="dt">prepare</span>(<span class="ot">&quot;</span><span class="st">SELECT cpf FROM pessoas WHERE cpf = ?</span><span class="ot">&quot;</span>);</span>
<span id="cb62-62"><a href="#cb62-62" tabindex="-1"></a>    <span class="dt">$check</span>-&gt;<span class="dt">execute</span>(<span class="dt">$cpf</span>);</span>
<span id="cb62-63"><a href="#cb62-63" tabindex="-1"></a>    <span class="kw">if</span> (<span class="dt">$check</span>-&gt;<span class="dt">fetchrow_array</span>) {</span>
<span id="cb62-64"><a href="#cb62-64" tabindex="-1"></a>        status(<span class="dv">400</span>);</span>
<span id="cb62-65"><a href="#cb62-65" tabindex="-1"></a>        <span class="kw">return</span> json_response({ error =&gt; <span class="ot">&quot;</span><span class="st">CPF jÃ¡ cadastrado</span><span class="ot">&quot;</span> });</span>
<span id="cb62-66"><a href="#cb62-66" tabindex="-1"></a>    }</span>
<span id="cb62-67"><a href="#cb62-67" tabindex="-1"></a>    <span class="kw">my</span> <span class="dt">$sth</span> = <span class="dt">$dbh</span>-&gt;<span class="dt">prepare</span>(<span class="ot">&quot;</span><span class="st">INSERT INTO pessoas (cpf, nome, endereco, data_nascimento, foto) VALUES (?, ?, ?, ?, ?)</span><span class="ot">&quot;</span>);</span>
<span id="cb62-68"><a href="#cb62-68" tabindex="-1"></a>    <span class="dt">$sth</span>-&gt;<span class="dt">execute</span>(<span class="dt">$cpf</span>, <span class="dt">$data</span>-&gt;{nome}, <span class="dt">$data</span>-&gt;{endereco}, <span class="dt">$data</span>-&gt;{data_nascimento}, <span class="dt">$data</span>-&gt;{foto});</span>
<span id="cb62-69"><a href="#cb62-69" tabindex="-1"></a>    status(<span class="dv">201</span>);</span>
<span id="cb62-70"><a href="#cb62-70" tabindex="-1"></a>    <span class="kw">return</span> json_response({ message =&gt; <span class="ot">&quot;</span><span class="st">Inserido com sucesso</span><span class="ot">&quot;</span> });</span>
<span id="cb62-71"><a href="#cb62-71" tabindex="-1"></a>};</span>
<span id="cb62-72"><a href="#cb62-72" tabindex="-1"></a></span>
<span id="cb62-73"><a href="#cb62-73" tabindex="-1"></a><span class="co"># Alterar</span></span>
<span id="cb62-74"><a href="#cb62-74" tabindex="-1"></a>put <span class="ot">&#39;</span><span class="ss">/pessoas/:cpf</span><span class="ot">&#39;</span> =&gt; <span class="kw">sub </span>{</span>
<span id="cb62-75"><a href="#cb62-75" tabindex="-1"></a>    <span class="kw">my</span> <span class="dt">$cpf</span> = route_parameters-&gt;get(<span class="ot">&#39;</span><span class="ss">cpf</span><span class="ot">&#39;</span>);</span>
<span id="cb62-76"><a href="#cb62-76" tabindex="-1"></a>    <span class="kw">my</span> <span class="dt">$data</span> = from_json(request-&gt;body);</span>
<span id="cb62-77"><a href="#cb62-77" tabindex="-1"></a>    <span class="co"># Verifica se existe</span></span>
<span id="cb62-78"><a href="#cb62-78" tabindex="-1"></a>    <span class="kw">my</span> <span class="dt">$check</span> = <span class="dt">$dbh</span>-&gt;<span class="dt">prepare</span>(<span class="ot">&quot;</span><span class="st">SELECT cpf FROM pessoas WHERE cpf = ?</span><span class="ot">&quot;</span>);</span>
<span id="cb62-79"><a href="#cb62-79" tabindex="-1"></a>    <span class="dt">$check</span>-&gt;<span class="dt">execute</span>(<span class="dt">$cpf</span>);</span>
<span id="cb62-80"><a href="#cb62-80" tabindex="-1"></a>    <span class="kw">unless</span> (<span class="dt">$check</span>-&gt;<span class="dt">fetchrow_array</span>) {</span>
<span id="cb62-81"><a href="#cb62-81" tabindex="-1"></a>        status(<span class="dv">404</span>);</span>
<span id="cb62-82"><a href="#cb62-82" tabindex="-1"></a>        <span class="kw">return</span> json_response({ error =&gt; <span class="ot">&quot;</span><span class="st">CPF nÃ£o encontrado</span><span class="ot">&quot;</span> });</span>
<span id="cb62-83"><a href="#cb62-83" tabindex="-1"></a>    }</span>
<span id="cb62-84"><a href="#cb62-84" tabindex="-1"></a>    <span class="kw">my</span> <span class="dt">$sth</span> = <span class="dt">$dbh</span>-&gt;<span class="dt">prepare</span>(<span class="ot">&quot;</span><span class="st">UPDATE pessoas SET nome=?, endereco=?, data_nascimento=?, foto=? WHERE cpf=?</span><span class="ot">&quot;</span>);</span>
<span id="cb62-85"><a href="#cb62-85" tabindex="-1"></a>    <span class="dt">$sth</span>-&gt;<span class="dt">execute</span>(<span class="dt">$data</span>-&gt;{nome}, <span class="dt">$data</span>-&gt;{endereco}, <span class="dt">$data</span>-&gt;{data_nascimento}, <span class="dt">$data</span>-&gt;{foto}, <span class="dt">$cpf</span>);</span>
<span id="cb62-86"><a href="#cb62-86" tabindex="-1"></a>    <span class="kw">return</span> json_response({ message =&gt; <span class="ot">&quot;</span><span class="st">Alterado com sucesso</span><span class="ot">&quot;</span> });</span>
<span id="cb62-87"><a href="#cb62-87" tabindex="-1"></a>};</span>
<span id="cb62-88"><a href="#cb62-88" tabindex="-1"></a></span>
<span id="cb62-89"><a href="#cb62-89" tabindex="-1"></a><span class="co"># Remover</span></span>
<span id="cb62-90"><a href="#cb62-90" tabindex="-1"></a>del <span class="ot">&#39;</span><span class="ss">/pessoas/:cpf</span><span class="ot">&#39;</span> =&gt; <span class="kw">sub </span>{</span>
<span id="cb62-91"><a href="#cb62-91" tabindex="-1"></a>    <span class="kw">my</span> <span class="dt">$cpf</span> = route_parameters-&gt;get(<span class="ot">&#39;</span><span class="ss">cpf</span><span class="ot">&#39;</span>);</span>
<span id="cb62-92"><a href="#cb62-92" tabindex="-1"></a>    <span class="kw">my</span> <span class="dt">$sth</span> = <span class="dt">$dbh</span>-&gt;<span class="dt">prepare</span>(<span class="ot">&quot;</span><span class="st">DELETE FROM pessoas WHERE cpf=?</span><span class="ot">&quot;</span>);</span>
<span id="cb62-93"><a href="#cb62-93" tabindex="-1"></a>    <span class="kw">my</span> <span class="dt">$rows</span> = <span class="dt">$sth</span>-&gt;<span class="dt">execute</span>(<span class="dt">$cpf</span>);</span>
<span id="cb62-94"><a href="#cb62-94" tabindex="-1"></a>    <span class="kw">if</span> (<span class="dt">$rows</span>) {</span>
<span id="cb62-95"><a href="#cb62-95" tabindex="-1"></a>        <span class="kw">return</span> json_response({ message =&gt; <span class="ot">&quot;</span><span class="st">Removido com sucesso</span><span class="ot">&quot;</span> });</span>
<span id="cb62-96"><a href="#cb62-96" tabindex="-1"></a>    } <span class="kw">else</span> {</span>
<span id="cb62-97"><a href="#cb62-97" tabindex="-1"></a>        status(<span class="dv">404</span>);</span>
<span id="cb62-98"><a href="#cb62-98" tabindex="-1"></a>        <span class="kw">return</span> json_response({ error =&gt; <span class="ot">&quot;</span><span class="st">CPF nÃ£o encontrado</span><span class="ot">&quot;</span> });</span>
<span id="cb62-99"><a href="#cb62-99" tabindex="-1"></a>    }</span>
<span id="cb62-100"><a href="#cb62-100" tabindex="-1"></a>};</span>
<span id="cb62-101"><a href="#cb62-101" tabindex="-1"></a></span>
<span id="cb62-102"><a href="#cb62-102" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb62-103"><a href="#cb62-103" tabindex="-1"></a><span class="co"># Inicializa o servidor</span></span>
<span id="cb62-104"><a href="#cb62-104" tabindex="-1"></a><span class="co"># -----------------------------</span></span>
<span id="cb62-105"><a href="#cb62-105" tabindex="-1"></a>set port =&gt; <span class="dv">5000</span>;</span>
<span id="cb62-106"><a href="#cb62-106" tabindex="-1"></a>set serializer =&gt; <span class="ot">&#39;</span><span class="ss">JSON</span><span class="ot">&#39;</span>;</span>
<span id="cb62-107"><a href="#cb62-107" tabindex="-1"></a></span>
<span id="cb62-108"><a href="#cb62-108" tabindex="-1"></a>start;</span></code></pre></div>
<p>servidor estarÃ¡ rodando na porta 5000 e EXPÃ•E A API de operaÃ§Ãµes na URI <a href="http://localhost:5000/pessoas" class="uri">http://localhost:5000/pessoas</a> sem senha</p>
<div class="sourceCode" id="cb63"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb63-1"><a href="#cb63-1" tabindex="-1"></a>http<span class="in">:</span><span class="er">//localhost:5000/pessoas</span></span></code></pre></div>
</div>
<div id="cliente-html-conexÃ£o-restful-1" class="section level3 hasAnchor" number="7.10.2">
<h3 class="hasAnchor"><span class="header-section-number">7.10.2</span> Cliente HTML (conexÃ£o Restful)<a href="#cliente-html-conex%C3%A3o-restful-1" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>crie o arquivo index.html e abra-o no navegador</p>
<div class="sourceCode" id="cb64"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb64-1"><a href="#cb64-1" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb64-2"><a href="#cb64-2" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="ot"> lang</span><span class="op">=</span><span class="st">&quot;pt-BR&quot;</span><span class="dt">&gt;</span></span>
<span id="cb64-3"><a href="#cb64-3" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb64-4"><a href="#cb64-4" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> charset</span><span class="op">=</span><span class="st">&quot;UTF-8&quot;</span><span class="dt">&gt;</span></span>
<span id="cb64-5"><a href="#cb64-5" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Cadastro de Pessoas - Perl/PostgreSQL<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb64-6"><a href="#cb64-6" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb64-7"><a href="#cb64-7" tabindex="-1"></a>  body { <span class="kw">font-family</span><span class="ch">:</span> <span class="dv">sans-serif</span><span class="op">;</span> <span class="kw">max-width</span><span class="ch">:</span> <span class="dv">800</span><span class="dt">px</span><span class="op">;</span> <span class="kw">margin</span><span class="ch">:</span> <span class="dv">20</span><span class="dt">px</span> <span class="bu">auto</span><span class="op">;</span> }</span>
<span id="cb64-8"><a href="#cb64-8" tabindex="-1"></a>  label { <span class="kw">display</span><span class="ch">:</span> <span class="dv">block</span><span class="op">;</span> <span class="kw">margin-top</span><span class="ch">:</span> <span class="dv">10</span><span class="dt">px</span><span class="op">;</span> }</span>
<span id="cb64-9"><a href="#cb64-9" tabindex="-1"></a>  button { <span class="kw">margin-top</span><span class="ch">:</span> <span class="dv">10</span><span class="dt">px</span><span class="op">;</span> <span class="kw">margin-right</span><span class="ch">:</span> <span class="dv">5</span><span class="dt">px</span><span class="op">;</span> }</span>
<span id="cb64-10"><a href="#cb64-10" tabindex="-1"></a>  table { <span class="kw">border-collapse</span><span class="ch">:</span> <span class="dv">collapse</span><span class="op">;</span> <span class="kw">width</span><span class="ch">:</span><span class="dv">100</span><span class="dt">%</span><span class="op">;</span> <span class="kw">margin-top</span><span class="ch">:</span><span class="dv">20</span><span class="dt">px</span><span class="op">;</span> }</span>
<span id="cb64-11"><a href="#cb64-11" tabindex="-1"></a>  th<span class="op">,</span> td { <span class="kw">border</span><span class="ch">:</span><span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#ccc</span><span class="op">;</span> <span class="kw">padding</span><span class="ch">:</span><span class="dv">6</span><span class="dt">px</span><span class="op">;</span> <span class="kw">text-align</span><span class="ch">:</span><span class="dv">left</span><span class="op">;</span> }</span>
<span id="cb64-12"><a href="#cb64-12" tabindex="-1"></a>  img<span class="fu">.thumb</span> { <span class="kw">width</span><span class="ch">:</span><span class="dv">60</span><span class="dt">px</span><span class="op">;</span> <span class="kw">height</span><span class="ch">:</span><span class="dv">60</span><span class="dt">px</span><span class="op">;</span> <span class="kw">object-fit</span><span class="ch">:</span><span class="dv">cover</span><span class="op">;</span> <span class="kw">border-radius</span><span class="ch">:</span><span class="dv">4</span><span class="dt">px</span><span class="op">;</span> }</span>
<span id="cb64-13"><a href="#cb64-13" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb64-14"><a href="#cb64-14" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb64-15"><a href="#cb64-15" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb64-16"><a href="#cb64-16" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>Cadastro de Pessoas (Perl/PostgreSQL)<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb64-17"><a href="#cb64-17" tabindex="-1"></a></span>
<span id="cb64-18"><a href="#cb64-18" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">form</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;formPessoa&quot;</span><span class="dt">&gt;</span></span>
<span id="cb64-19"><a href="#cb64-19" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">label</span><span class="dt">&gt;</span>CPF (chave primÃ¡ria): <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;cpf&quot;</span><span class="ot"> required</span><span class="dt">&gt;&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb64-20"><a href="#cb64-20" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">label</span><span class="dt">&gt;</span>Nome: <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;nome&quot;</span><span class="ot"> required</span><span class="dt">&gt;&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb64-21"><a href="#cb64-21" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">label</span><span class="dt">&gt;</span>EndereÃ§o: <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;endereco&quot;</span><span class="ot"> required</span><span class="dt">&gt;&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb64-22"><a href="#cb64-22" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">label</span><span class="dt">&gt;</span>Data Nasc.: <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;date&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;data_nascimento&quot;</span><span class="ot"> required</span><span class="dt">&gt;&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb64-23"><a href="#cb64-23" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">label</span><span class="dt">&gt;</span>Foto: <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;file&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;foto&quot;</span><span class="ot"> accept</span><span class="op">=</span><span class="st">&quot;image/*&quot;</span><span class="dt">&gt;&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb64-24"><a href="#cb64-24" tabindex="-1"></a></span>
<span id="cb64-25"><a href="#cb64-25" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;button&quot;</span><span class="ot"> onclick</span><span class="op">=</span><span class="st">&quot;inserir()&quot;</span><span class="dt">&gt;</span>Inserir<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb64-26"><a href="#cb64-26" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;button&quot;</span><span class="ot"> onclick</span><span class="op">=</span><span class="st">&quot;alterar()&quot;</span><span class="dt">&gt;</span>Alterar<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb64-27"><a href="#cb64-27" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;button&quot;</span><span class="ot"> onclick</span><span class="op">=</span><span class="st">&quot;remover()&quot;</span><span class="dt">&gt;</span>Remover<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb64-28"><a href="#cb64-28" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">form</span><span class="dt">&gt;</span></span>
<span id="cb64-29"><a href="#cb64-29" tabindex="-1"></a></span>
<span id="cb64-30"><a href="#cb64-30" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">h2</span><span class="dt">&gt;</span>Pesquisar<span class="dt">&lt;/</span><span class="kw">h2</span><span class="dt">&gt;</span></span>
<span id="cb64-31"><a href="#cb64-31" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;pesquisa&quot;</span><span class="ot"> placeholder</span><span class="op">=</span><span class="st">&quot;Digite nome ou CPF&quot;</span><span class="dt">&gt;</span></span>
<span id="cb64-32"><a href="#cb64-32" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;button&quot;</span><span class="ot"> onclick</span><span class="op">=</span><span class="st">&quot;pesquisar()&quot;</span><span class="dt">&gt;</span>Pesquisar<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb64-33"><a href="#cb64-33" tabindex="-1"></a></span>
<span id="cb64-34"><a href="#cb64-34" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">table</span><span class="dt">&gt;</span></span>
<span id="cb64-35"><a href="#cb64-35" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">thead</span><span class="dt">&gt;</span></span>
<span id="cb64-36"><a href="#cb64-36" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb64-37"><a href="#cb64-37" tabindex="-1"></a>      <span class="dt">&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>CPF<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>Foto<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>Nome<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;</span></span>
<span id="cb64-38"><a href="#cb64-38" tabindex="-1"></a>      <span class="dt">&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>EndereÃ§o<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>Nascimento<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;</span></span>
<span id="cb64-39"><a href="#cb64-39" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb64-40"><a href="#cb64-40" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">thead</span><span class="dt">&gt;</span></span>
<span id="cb64-41"><a href="#cb64-41" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">tbody</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;tabela&quot;</span><span class="dt">&gt;&lt;/</span><span class="kw">tbody</span><span class="dt">&gt;</span></span>
<span id="cb64-42"><a href="#cb64-42" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">table</span><span class="dt">&gt;</span></span>
<span id="cb64-43"><a href="#cb64-43" tabindex="-1"></a></span>
<span id="cb64-44"><a href="#cb64-44" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb64-45"><a href="#cb64-45" tabindex="-1"></a><span class="kw">const</span> API <span class="op">=</span> <span class="st">&#39;http://localhost:5000/pessoas&#39;</span><span class="op">;</span></span>
<span id="cb64-46"><a href="#cb64-46" tabindex="-1"></a></span>
<span id="cb64-47"><a href="#cb64-47" tabindex="-1"></a><span class="co">/* ---------- FunÃ§Ãµes utilitÃ¡rias ---------- */</span></span>
<span id="cb64-48"><a href="#cb64-48" tabindex="-1"></a><span class="kw">function</span> <span class="fu">validaCampos</span>() {</span>
<span id="cb64-49"><a href="#cb64-49" tabindex="-1"></a>  <span class="kw">const</span> campos <span class="op">=</span> [<span class="st">&#39;cpf&#39;</span><span class="op">,</span><span class="st">&#39;nome&#39;</span><span class="op">,</span><span class="st">&#39;endereco&#39;</span><span class="op">,</span><span class="st">&#39;data_nascimento&#39;</span>]<span class="op">;</span></span>
<span id="cb64-50"><a href="#cb64-50" tabindex="-1"></a>  <span class="cf">for</span> (<span class="kw">const</span> id <span class="kw">of</span> campos) {</span>
<span id="cb64-51"><a href="#cb64-51" tabindex="-1"></a>    <span class="kw">const</span> valor <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(id)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb64-52"><a href="#cb64-52" tabindex="-1"></a>    <span class="cf">if</span> (<span class="op">!</span>valor) {</span>
<span id="cb64-53"><a href="#cb64-53" tabindex="-1"></a>      <span class="fu">alert</span>(<span class="vs">`O campo &quot;</span><span class="sc">${</span>id<span class="sc">}</span><span class="vs">&quot; nÃ£o pode ficar em branco.`</span>)<span class="op">;</span></span>
<span id="cb64-54"><a href="#cb64-54" tabindex="-1"></a>      <span class="cf">return</span> <span class="kw">false</span><span class="op">;</span></span>
<span id="cb64-55"><a href="#cb64-55" tabindex="-1"></a>    }</span>
<span id="cb64-56"><a href="#cb64-56" tabindex="-1"></a>  }</span>
<span id="cb64-57"><a href="#cb64-57" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">true</span><span class="op">;</span></span>
<span id="cb64-58"><a href="#cb64-58" tabindex="-1"></a>}</span>
<span id="cb64-59"><a href="#cb64-59" tabindex="-1"></a></span>
<span id="cb64-60"><a href="#cb64-60" tabindex="-1"></a><span class="kw">function</span> <span class="fu">getFotoBase64</span>() {</span>
<span id="cb64-61"><a href="#cb64-61" tabindex="-1"></a>  <span class="kw">const</span> file <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;foto&#39;</span>)<span class="op">.</span><span class="at">files</span>[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb64-62"><a href="#cb64-62" tabindex="-1"></a>  <span class="cf">if</span>(<span class="op">!</span>file) <span class="cf">return</span> <span class="bu">Promise</span><span class="op">.</span><span class="fu">resolve</span>(<span class="st">&#39;&#39;</span>)<span class="op">;</span></span>
<span id="cb64-63"><a href="#cb64-63" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">new</span> <span class="bu">Promise</span>((resolve<span class="op">,</span>reject)<span class="kw">=&gt;</span>{</span>
<span id="cb64-64"><a href="#cb64-64" tabindex="-1"></a>    <span class="kw">const</span> reader <span class="op">=</span> <span class="kw">new</span> <span class="bu">FileReader</span>()<span class="op">;</span></span>
<span id="cb64-65"><a href="#cb64-65" tabindex="-1"></a>    reader<span class="op">.</span><span class="at">onload</span> <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="fu">resolve</span>(reader<span class="op">.</span><span class="at">result</span>)<span class="op">;</span></span>
<span id="cb64-66"><a href="#cb64-66" tabindex="-1"></a>    reader<span class="op">.</span><span class="at">onerror</span> <span class="op">=</span> reject<span class="op">;</span></span>
<span id="cb64-67"><a href="#cb64-67" tabindex="-1"></a>    reader<span class="op">.</span><span class="fu">readAsDataURL</span>(file)<span class="op">;</span></span>
<span id="cb64-68"><a href="#cb64-68" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb64-69"><a href="#cb64-69" tabindex="-1"></a>}</span>
<span id="cb64-70"><a href="#cb64-70" tabindex="-1"></a></span>
<span id="cb64-71"><a href="#cb64-71" tabindex="-1"></a><span class="kw">function</span> <span class="fu">coletaDados</span>(base64Foto){</span>
<span id="cb64-72"><a href="#cb64-72" tabindex="-1"></a>  <span class="cf">return</span> {</span>
<span id="cb64-73"><a href="#cb64-73" tabindex="-1"></a>    <span class="dt">cpf</span><span class="op">:</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;cpf&#39;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">,</span></span>
<span id="cb64-74"><a href="#cb64-74" tabindex="-1"></a>    <span class="dt">nome</span><span class="op">:</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;nome&#39;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">,</span></span>
<span id="cb64-75"><a href="#cb64-75" tabindex="-1"></a>    <span class="dt">endereco</span><span class="op">:</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;endereco&#39;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">,</span></span>
<span id="cb64-76"><a href="#cb64-76" tabindex="-1"></a>    <span class="dt">data_nascimento</span><span class="op">:</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;data_nascimento&#39;</span>)<span class="op">.</span><span class="at">value</span><span class="op">,</span></span>
<span id="cb64-77"><a href="#cb64-77" tabindex="-1"></a>    <span class="dt">foto</span><span class="op">:</span> base64Foto <span class="op">||</span> <span class="st">&#39;&#39;</span></span>
<span id="cb64-78"><a href="#cb64-78" tabindex="-1"></a>  }<span class="op">;</span></span>
<span id="cb64-79"><a href="#cb64-79" tabindex="-1"></a>}</span>
<span id="cb64-80"><a href="#cb64-80" tabindex="-1"></a></span>
<span id="cb64-81"><a href="#cb64-81" tabindex="-1"></a><span class="co">/* ---------- CRUD ---------- */</span></span>
<span id="cb64-82"><a href="#cb64-82" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">inserir</span>() {</span>
<span id="cb64-83"><a href="#cb64-83" tabindex="-1"></a>  <span class="cf">if</span>(<span class="op">!</span><span class="fu">validaCampos</span>()) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb64-84"><a href="#cb64-84" tabindex="-1"></a>  <span class="kw">const</span> base64 <span class="op">=</span> <span class="cf">await</span> <span class="fu">getFotoBase64</span>()<span class="op">;</span></span>
<span id="cb64-85"><a href="#cb64-85" tabindex="-1"></a>  <span class="kw">const</span> pessoa <span class="op">=</span> <span class="fu">coletaDados</span>(base64)<span class="op">;</span></span>
<span id="cb64-86"><a href="#cb64-86" tabindex="-1"></a></span>
<span id="cb64-87"><a href="#cb64-87" tabindex="-1"></a>  <span class="kw">const</span> res <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(API<span class="op">,</span> {</span>
<span id="cb64-88"><a href="#cb64-88" tabindex="-1"></a>    <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;POST&#39;</span><span class="op">,</span></span>
<span id="cb64-89"><a href="#cb64-89" tabindex="-1"></a>    <span class="dt">headers</span><span class="op">:</span> {<span class="st">&#39;Content-Type&#39;</span><span class="op">:</span> <span class="st">&#39;application/json&#39;</span>}<span class="op">,</span></span>
<span id="cb64-90"><a href="#cb64-90" tabindex="-1"></a>    <span class="dt">body</span><span class="op">:</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(pessoa)</span>
<span id="cb64-91"><a href="#cb64-91" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb64-92"><a href="#cb64-92" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> res<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb64-93"><a href="#cb64-93" tabindex="-1"></a>  <span class="cf">if</span>(res<span class="op">.</span><span class="at">ok</span>) <span class="fu">alert</span>(<span class="st">&#39;Inserido com sucesso!&#39;</span>)<span class="op">;</span></span>
<span id="cb64-94"><a href="#cb64-94" tabindex="-1"></a>  <span class="cf">else</span> <span class="fu">alert</span>(<span class="st">&#39;Erro: &#39;</span> <span class="op">+</span> (data<span class="op">.</span><span class="at">error</span> <span class="op">||</span> <span class="st">&#39;&#39;</span>))<span class="op">;</span></span>
<span id="cb64-95"><a href="#cb64-95" tabindex="-1"></a>  <span class="fu">listar</span>()<span class="op">;</span></span>
<span id="cb64-96"><a href="#cb64-96" tabindex="-1"></a>}</span>
<span id="cb64-97"><a href="#cb64-97" tabindex="-1"></a></span>
<span id="cb64-98"><a href="#cb64-98" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">alterar</span>() {</span>
<span id="cb64-99"><a href="#cb64-99" tabindex="-1"></a>  <span class="cf">if</span>(<span class="op">!</span><span class="fu">validaCampos</span>()) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb64-100"><a href="#cb64-100" tabindex="-1"></a>  <span class="kw">const</span> cpf <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;cpf&#39;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb64-101"><a href="#cb64-101" tabindex="-1"></a>  <span class="kw">const</span> base64 <span class="op">=</span> <span class="cf">await</span> <span class="fu">getFotoBase64</span>()<span class="op">;</span></span>
<span id="cb64-102"><a href="#cb64-102" tabindex="-1"></a>  <span class="kw">const</span> novosDados <span class="op">=</span> <span class="fu">coletaDados</span>()<span class="op">;</span></span>
<span id="cb64-103"><a href="#cb64-103" tabindex="-1"></a>  <span class="cf">if</span>(base64) novosDados<span class="op">.</span><span class="at">foto</span> <span class="op">=</span> base64<span class="op">;</span></span>
<span id="cb64-104"><a href="#cb64-104" tabindex="-1"></a></span>
<span id="cb64-105"><a href="#cb64-105" tabindex="-1"></a>  <span class="kw">const</span> res <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="vs">`</span><span class="sc">${</span>API<span class="sc">}</span><span class="vs">/</span><span class="sc">${</span><span class="pp">encodeURIComponent</span>(cpf)<span class="sc">}</span><span class="vs">`</span><span class="op">,</span> {</span>
<span id="cb64-106"><a href="#cb64-106" tabindex="-1"></a>    <span class="dt">method</span><span class="op">:</span> <span class="st">&#39;PUT&#39;</span><span class="op">,</span></span>
<span id="cb64-107"><a href="#cb64-107" tabindex="-1"></a>    <span class="dt">headers</span><span class="op">:</span> {<span class="st">&#39;Content-Type&#39;</span><span class="op">:</span> <span class="st">&#39;application/json&#39;</span>}<span class="op">,</span></span>
<span id="cb64-108"><a href="#cb64-108" tabindex="-1"></a>    <span class="dt">body</span><span class="op">:</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>(novosDados)</span>
<span id="cb64-109"><a href="#cb64-109" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb64-110"><a href="#cb64-110" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> res<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb64-111"><a href="#cb64-111" tabindex="-1"></a>  <span class="cf">if</span>(res<span class="op">.</span><span class="at">ok</span>) <span class="fu">alert</span>(<span class="st">&#39;Alterado com sucesso!&#39;</span>)<span class="op">;</span></span>
<span id="cb64-112"><a href="#cb64-112" tabindex="-1"></a>  <span class="cf">else</span> <span class="fu">alert</span>(<span class="st">&#39;Erro: &#39;</span> <span class="op">+</span> (data<span class="op">.</span><span class="at">error</span> <span class="op">||</span> <span class="st">&#39;&#39;</span>))<span class="op">;</span></span>
<span id="cb64-113"><a href="#cb64-113" tabindex="-1"></a>  <span class="fu">listar</span>()<span class="op">;</span></span>
<span id="cb64-114"><a href="#cb64-114" tabindex="-1"></a>}</span>
<span id="cb64-115"><a href="#cb64-115" tabindex="-1"></a></span>
<span id="cb64-116"><a href="#cb64-116" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">remover</span>() {</span>
<span id="cb64-117"><a href="#cb64-117" tabindex="-1"></a>  <span class="kw">const</span> cpf <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;cpf&#39;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb64-118"><a href="#cb64-118" tabindex="-1"></a>  <span class="cf">if</span>(<span class="op">!</span>cpf) <span class="cf">return</span> <span class="fu">alert</span>(<span class="st">&#39;Informe o CPF para remover.&#39;</span>)<span class="op">;</span></span>
<span id="cb64-119"><a href="#cb64-119" tabindex="-1"></a>  <span class="cf">if</span>(<span class="fu">confirm</span>(<span class="st">&#39;Confirma a exclusÃ£o?&#39;</span>)){</span>
<span id="cb64-120"><a href="#cb64-120" tabindex="-1"></a>    <span class="kw">const</span> res <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="vs">`</span><span class="sc">${</span>API<span class="sc">}</span><span class="vs">/</span><span class="sc">${</span><span class="pp">encodeURIComponent</span>(cpf)<span class="sc">}</span><span class="vs">`</span><span class="op">,</span> {<span class="dt">method</span><span class="op">:</span><span class="st">&#39;DELETE&#39;</span>})<span class="op">;</span></span>
<span id="cb64-121"><a href="#cb64-121" tabindex="-1"></a>    <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> res<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb64-122"><a href="#cb64-122" tabindex="-1"></a>    <span class="cf">if</span>(res<span class="op">.</span><span class="at">ok</span>) <span class="fu">alert</span>(<span class="st">&#39;Removido com sucesso!&#39;</span>)<span class="op">;</span></span>
<span id="cb64-123"><a href="#cb64-123" tabindex="-1"></a>    <span class="cf">else</span> <span class="fu">alert</span>(<span class="st">&#39;Erro: &#39;</span> <span class="op">+</span> (data<span class="op">.</span><span class="at">error</span> <span class="op">||</span> <span class="st">&#39;&#39;</span>))<span class="op">;</span></span>
<span id="cb64-124"><a href="#cb64-124" tabindex="-1"></a>    <span class="fu">listar</span>()<span class="op">;</span></span>
<span id="cb64-125"><a href="#cb64-125" tabindex="-1"></a>  }</span>
<span id="cb64-126"><a href="#cb64-126" tabindex="-1"></a>}</span>
<span id="cb64-127"><a href="#cb64-127" tabindex="-1"></a></span>
<span id="cb64-128"><a href="#cb64-128" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">pesquisar</span>() {</span>
<span id="cb64-129"><a href="#cb64-129" tabindex="-1"></a>  <span class="kw">const</span> termo <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;pesquisa&#39;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb64-130"><a href="#cb64-130" tabindex="-1"></a>  <span class="cf">if</span>(<span class="op">!</span>termo){ <span class="fu">listar</span>()<span class="op">;</span> <span class="cf">return</span><span class="op">;</span> }</span>
<span id="cb64-131"><a href="#cb64-131" tabindex="-1"></a>  <span class="kw">const</span> res <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="vs">`</span><span class="sc">${</span>API<span class="sc">}</span><span class="vs">?q=</span><span class="sc">${</span><span class="pp">encodeURIComponent</span>(termo)<span class="sc">}</span><span class="vs">`</span>)<span class="op">;</span></span>
<span id="cb64-132"><a href="#cb64-132" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> res<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb64-133"><a href="#cb64-133" tabindex="-1"></a>  <span class="fu">preencheTabela</span>(data)<span class="op">;</span></span>
<span id="cb64-134"><a href="#cb64-134" tabindex="-1"></a>}</span>
<span id="cb64-135"><a href="#cb64-135" tabindex="-1"></a></span>
<span id="cb64-136"><a href="#cb64-136" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">listar</span>() {</span>
<span id="cb64-137"><a href="#cb64-137" tabindex="-1"></a>  <span class="kw">const</span> res <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(API)<span class="op">;</span></span>
<span id="cb64-138"><a href="#cb64-138" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> res<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb64-139"><a href="#cb64-139" tabindex="-1"></a>  <span class="fu">preencheTabela</span>(data)<span class="op">;</span></span>
<span id="cb64-140"><a href="#cb64-140" tabindex="-1"></a>}</span>
<span id="cb64-141"><a href="#cb64-141" tabindex="-1"></a></span>
<span id="cb64-142"><a href="#cb64-142" tabindex="-1"></a><span class="co">/* ---------- UI ---------- */</span></span>
<span id="cb64-143"><a href="#cb64-143" tabindex="-1"></a><span class="kw">function</span> <span class="fu">preencheTabela</span>(lista){</span>
<span id="cb64-144"><a href="#cb64-144" tabindex="-1"></a>  <span class="kw">const</span> tbody <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;tabela&#39;</span>)<span class="op">;</span></span>
<span id="cb64-145"><a href="#cb64-145" tabindex="-1"></a>  tbody<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> <span class="st">&#39;&#39;</span><span class="op">;</span></span>
<span id="cb64-146"><a href="#cb64-146" tabindex="-1"></a>  lista<span class="op">.</span><span class="fu">forEach</span>(p<span class="kw">=&gt;</span>{</span>
<span id="cb64-147"><a href="#cb64-147" tabindex="-1"></a>    <span class="kw">const</span> tr <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">&#39;tr&#39;</span>)<span class="op">;</span></span>
<span id="cb64-148"><a href="#cb64-148" tabindex="-1"></a>    tr<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb64-149"><a href="#cb64-149" tabindex="-1"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">cpf</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb64-150"><a href="#cb64-150" tabindex="-1"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">foto</span> <span class="op">?</span> <span class="vs">`&lt;img class=&quot;thumb&quot; src=&quot;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">foto</span><span class="sc">}</span><span class="vs">&quot; alt=&quot;foto&quot;&gt;`</span> <span class="op">:</span> <span class="st">&#39;&#39;</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb64-151"><a href="#cb64-151" tabindex="-1"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">nome</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb64-152"><a href="#cb64-152" tabindex="-1"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">endereco</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb64-153"><a href="#cb64-153" tabindex="-1"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">data_nascimento</span><span class="sc">}</span><span class="vs">&lt;/td&gt;`</span><span class="op">;</span></span>
<span id="cb64-154"><a href="#cb64-154" tabindex="-1"></a>    tr<span class="op">.</span><span class="at">onclick</span> <span class="op">=</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb64-155"><a href="#cb64-155" tabindex="-1"></a>      <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;cpf&#39;</span>)<span class="op">.</span><span class="at">value</span> <span class="op">=</span> p<span class="op">.</span><span class="at">cpf</span><span class="op">;</span></span>
<span id="cb64-156"><a href="#cb64-156" tabindex="-1"></a>      <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;nome&#39;</span>)<span class="op">.</span><span class="at">value</span> <span class="op">=</span> p<span class="op">.</span><span class="at">nome</span><span class="op">;</span></span>
<span id="cb64-157"><a href="#cb64-157" tabindex="-1"></a>      <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;endereco&#39;</span>)<span class="op">.</span><span class="at">value</span> <span class="op">=</span> p<span class="op">.</span><span class="at">endereco</span><span class="op">;</span></span>
<span id="cb64-158"><a href="#cb64-158" tabindex="-1"></a>      <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&#39;data_nascimento&#39;</span>)<span class="op">.</span><span class="at">value</span> <span class="op">=</span> p<span class="op">.</span><span class="at">data_nascimento</span><span class="op">;</span></span>
<span id="cb64-159"><a href="#cb64-159" tabindex="-1"></a>    }<span class="op">;</span></span>
<span id="cb64-160"><a href="#cb64-160" tabindex="-1"></a>    tbody<span class="op">.</span><span class="fu">appendChild</span>(tr)<span class="op">;</span></span>
<span id="cb64-161"><a href="#cb64-161" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb64-162"><a href="#cb64-162" tabindex="-1"></a>}</span>
<span id="cb64-163"><a href="#cb64-163" tabindex="-1"></a></span>
<span id="cb64-164"><a href="#cb64-164" tabindex="-1"></a><span class="fu">listar</span>()<span class="op">;</span></span>
<span id="cb64-165"><a href="#cb64-165" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb64-166"><a href="#cb64-166" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb64-167"><a href="#cb64-167" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code></pre></div>
</div>
</div>
<div id="exemplo-04---servidor-de-aplicaÃ§Ã£o-java" class="section level2 hasAnchor" number="7.11">
<h2 class="hasAnchor"><span class="header-section-number">7.11</span> Exemplo 04 - SERVIDOR DE APLICAÃ‡ÃƒO JAVA<a href="#exemplo-04---servidor-de-aplica%C3%A7%C3%A3o-java" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><img src="images/clipboard-3162947411.png" /></p>
<p>[ Vou refazer estes exemplo ]</p>
</div>
<div id="exemplo-05---servidor-de-aplicaÃ§Ã£o-c" class="section level2 hasAnchor" number="7.12">
<h2 class="hasAnchor"><span class="header-section-number">7.12</span> Exemplo 05 - SERVIDOR DE APLICAÃ‡ÃƒO C++<a href="#exemplo-05---servidor-de-aplica%C3%A7%C3%A3o-c" class="anchor-section" aria-label="Anchor link to header"></a></h2>
<p><img src="images/clipboard-2416235942.png" /></p>
<p>Neste exemplo, temos uma aplicaÃ§Ã£o cliente feita html e javascript</p>
<p>A interface do Cliente Ã© feita em HTML5</p>
<p>A conexÃ£o com o servidor Ã© feita pelo javascript incorporado no HTML:</p>
<p>CRUD no cliente Ã© feito peloa javascript utilizando metodologia Restful sobre protocolo HTTP 2.0</p>
<p>O servidor Restful Ã© feito em linguagem C++</p>
<p>A linguagem C++ precisa ser compilada.</p>
<p>PORTANTO O CÃ“DIGO DO SERVIDOR PRECISARÃ SER COMPILADO.</p>
<p>EM C++ VAMOS USAR BIBLIOTECAS EXTERNAS libpqxx e crow</p>
<p>OBS: NÃƒO TEMOS CONTROLE DE SESSÃƒO DE CLIENTE IMPLEMENTADO.</p>
<p>estrutura de diretÃ³rios:</p>
<div class="sourceCode" id="cb65"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb65-1"><a href="#cb65-1" tabindex="-1"></a>pessoas-rest-cpp/</span>
<span id="cb65-2"><a href="#cb65-2" tabindex="-1"></a>â”œâ”€ CMakeLists<span class="fu">.txt</span></span>
<span id="cb65-3"><a href="#cb65-3" tabindex="-1"></a>â”œâ”€ src/</span>
<span id="cb65-4"><a href="#cb65-4" tabindex="-1"></a>â”‚   â””â”€ main<span class="fu">.cpp</span></span>
<span id="cb65-5"><a href="#cb65-5" tabindex="-1"></a>â””â”€ include/</span>
<span id="cb65-6"><a href="#cb65-6" tabindex="-1"></a>    â””â”€ crow_all<span class="fu">.h</span>        â† header Ãºnico da biblioteca Crow</span></code></pre></div>
<div id="criando-o-arquivo-c-do-servidor" class="section level3 hasAnchor" number="7.12.1">
<h3 class="hasAnchor"><span class="header-section-number">7.12.1</span> Criando o arquivo C++ do servidor<a href="#criando-o-arquivo-c-do-servidor" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<div class="sourceCode" id="cb66"><pre class="sourceCode cpp"><code class="sourceCode cpp"><span id="cb66-1"><a href="#cb66-1" tabindex="-1"></a><span class="pp">#include </span><span class="im">&quot;crow_all.h&quot;</span></span>
<span id="cb66-2"><a href="#cb66-2" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;pqxx/pqxx&gt;</span></span>
<span id="cb66-3"><a href="#cb66-3" tabindex="-1"></a><span class="pp">#include </span><span class="im">&lt;iostream&gt;</span></span>
<span id="cb66-4"><a href="#cb66-4" tabindex="-1"></a></span>
<span id="cb66-5"><a href="#cb66-5" tabindex="-1"></a><span class="at">const</span> <span class="bu">std::</span>string CONN_STR <span class="op">=</span></span>
<span id="cb66-6"><a href="#cb66-6" tabindex="-1"></a>    <span class="st">&quot;postgresql://postgres:MinhaSuperSenha@db.pbbtfwmydxmxdibmtbqq.supabase.co:5432/postgres&quot;</span><span class="op">;</span></span>
<span id="cb66-7"><a href="#cb66-7" tabindex="-1"></a></span>
<span id="cb66-8"><a href="#cb66-8" tabindex="-1"></a><span class="dt">int</span> main<span class="op">()</span> <span class="op">{</span></span>
<span id="cb66-9"><a href="#cb66-9" tabindex="-1"></a>    crow<span class="op">::</span>SimpleApp app<span class="op">;</span></span>
<span id="cb66-10"><a href="#cb66-10" tabindex="-1"></a></span>
<span id="cb66-11"><a href="#cb66-11" tabindex="-1"></a>    <span class="co">// GET /pessoas</span></span>
<span id="cb66-12"><a href="#cb66-12" tabindex="-1"></a>    CROW_ROUTE<span class="op">(</span>app<span class="op">,</span> <span class="st">&quot;/pessoas&quot;</span><span class="op">).</span>methods<span class="op">(</span><span class="st">&quot;GET&quot;</span><span class="op">_method)</span></span>
<span id="cb66-13"><a href="#cb66-13" tabindex="-1"></a>    <span class="op">([](</span><span class="at">const</span> crow<span class="op">::</span>request<span class="op">&amp;</span> req<span class="op">){</span></span>
<span id="cb66-14"><a href="#cb66-14" tabindex="-1"></a>        pqxx<span class="op">::</span>connection c<span class="op">(</span>CONN_STR<span class="op">);</span></span>
<span id="cb66-15"><a href="#cb66-15" tabindex="-1"></a>        pqxx<span class="op">::</span>work w<span class="op">(</span>c<span class="op">);</span></span>
<span id="cb66-16"><a href="#cb66-16" tabindex="-1"></a>        <span class="bu">std::</span>string q <span class="op">=</span> req<span class="op">.</span>url_params<span class="op">.</span>get<span class="op">(</span><span class="st">&quot;q&quot;</span><span class="op">)</span> <span class="op">?</span> req<span class="op">.</span>url_params<span class="op">.</span>get<span class="op">(</span><span class="st">&quot;q&quot;</span><span class="op">)</span> <span class="op">:</span> <span class="st">&quot;&quot;</span><span class="op">;</span></span>
<span id="cb66-17"><a href="#cb66-17" tabindex="-1"></a>        pqxx<span class="op">::</span>result r<span class="op">;</span></span>
<span id="cb66-18"><a href="#cb66-18" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(!</span>q<span class="op">.</span>empty<span class="op">())</span> <span class="op">{</span></span>
<span id="cb66-19"><a href="#cb66-19" tabindex="-1"></a>            r <span class="op">=</span> w<span class="op">.</span>exec_params<span class="op">(</span></span>
<span id="cb66-20"><a href="#cb66-20" tabindex="-1"></a>                <span class="st">&quot;SELECT cpf,nome,endereco,data_nascimento,foto &quot;</span></span>
<span id="cb66-21"><a href="#cb66-21" tabindex="-1"></a>                <span class="st">&quot;FROM pessoas WHERE lower(nome) LIKE lower(&#39;%&#39;||$1||&#39;%&#39;) OR cpf LIKE &#39;%&#39;||$1||&#39;%&#39;&quot;</span><span class="op">,</span></span>
<span id="cb66-22"><a href="#cb66-22" tabindex="-1"></a>                q<span class="op">);</span></span>
<span id="cb66-23"><a href="#cb66-23" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">else</span> <span class="op">{</span></span>
<span id="cb66-24"><a href="#cb66-24" tabindex="-1"></a>            r <span class="op">=</span> w<span class="op">.</span>exec<span class="op">(</span><span class="st">&quot;SELECT cpf,nome,endereco,data_nascimento,foto FROM pessoas&quot;</span><span class="op">);</span></span>
<span id="cb66-25"><a href="#cb66-25" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb66-26"><a href="#cb66-26" tabindex="-1"></a>        crow<span class="op">::</span>json<span class="op">::</span>wvalue out<span class="op">;</span></span>
<span id="cb66-27"><a href="#cb66-27" tabindex="-1"></a>        <span class="dt">size_t</span> i<span class="op">=</span><span class="dv">0</span><span class="op">;</span></span>
<span id="cb66-28"><a href="#cb66-28" tabindex="-1"></a>        <span class="cf">for</span><span class="op">(</span><span class="kw">auto</span> row <span class="op">:</span> r<span class="op">)</span> <span class="op">{</span></span>
<span id="cb66-29"><a href="#cb66-29" tabindex="-1"></a>            out<span class="op">[</span>i<span class="op">][</span><span class="st">&quot;cpf&quot;</span><span class="op">]</span> <span class="op">=</span> row<span class="op">[</span><span class="st">&quot;cpf&quot;</span><span class="op">].</span>c_str<span class="op">();</span></span>
<span id="cb66-30"><a href="#cb66-30" tabindex="-1"></a>            out<span class="op">[</span>i<span class="op">][</span><span class="st">&quot;nome&quot;</span><span class="op">]</span> <span class="op">=</span> row<span class="op">[</span><span class="st">&quot;nome&quot;</span><span class="op">].</span>c_str<span class="op">();</span></span>
<span id="cb66-31"><a href="#cb66-31" tabindex="-1"></a>            out<span class="op">[</span>i<span class="op">][</span><span class="st">&quot;endereco&quot;</span><span class="op">]</span> <span class="op">=</span> row<span class="op">[</span><span class="st">&quot;endereco&quot;</span><span class="op">].</span>c_str<span class="op">();</span></span>
<span id="cb66-32"><a href="#cb66-32" tabindex="-1"></a>            out<span class="op">[</span>i<span class="op">][</span><span class="st">&quot;dataNascimento&quot;</span><span class="op">]</span> <span class="op">=</span> row<span class="op">[</span><span class="st">&quot;data_nascimento&quot;</span><span class="op">].</span>c_str<span class="op">();</span></span>
<span id="cb66-33"><a href="#cb66-33" tabindex="-1"></a>            out<span class="op">[</span>i<span class="op">][</span><span class="st">&quot;foto&quot;</span><span class="op">]</span> <span class="op">=</span> row<span class="op">[</span><span class="st">&quot;foto&quot;</span><span class="op">].</span>is_null<span class="op">()</span> <span class="op">?</span> <span class="st">&quot;&quot;</span> <span class="op">:</span> row<span class="op">[</span><span class="st">&quot;foto&quot;</span><span class="op">].</span>c_str<span class="op">();</span></span>
<span id="cb66-34"><a href="#cb66-34" tabindex="-1"></a>            <span class="op">++</span>i<span class="op">;</span></span>
<span id="cb66-35"><a href="#cb66-35" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb66-36"><a href="#cb66-36" tabindex="-1"></a>        <span class="cf">return</span> crow<span class="op">::</span>response<span class="op">(</span>out<span class="op">);</span></span>
<span id="cb66-37"><a href="#cb66-37" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb66-38"><a href="#cb66-38" tabindex="-1"></a></span>
<span id="cb66-39"><a href="#cb66-39" tabindex="-1"></a>    <span class="co">// POST /pessoas</span></span>
<span id="cb66-40"><a href="#cb66-40" tabindex="-1"></a>    CROW_ROUTE<span class="op">(</span>app<span class="op">,</span> <span class="st">&quot;/pessoas&quot;</span><span class="op">).</span>methods<span class="op">(</span><span class="st">&quot;POST&quot;</span><span class="op">_method)</span></span>
<span id="cb66-41"><a href="#cb66-41" tabindex="-1"></a>    <span class="op">([](</span><span class="at">const</span> crow<span class="op">::</span>request<span class="op">&amp;</span> req<span class="op">){</span></span>
<span id="cb66-42"><a href="#cb66-42" tabindex="-1"></a>        <span class="kw">auto</span> body <span class="op">=</span> crow<span class="op">::</span>json<span class="op">::</span>load<span class="op">(</span>req<span class="op">.</span>body<span class="op">);</span></span>
<span id="cb66-43"><a href="#cb66-43" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(!</span>body <span class="op">||</span> <span class="op">!</span>body<span class="op">.</span>has<span class="op">(</span><span class="st">&quot;cpf&quot;</span><span class="op">))</span></span>
<span id="cb66-44"><a href="#cb66-44" tabindex="-1"></a>            <span class="cf">return</span> crow<span class="op">::</span>response<span class="op">(</span><span class="dv">400</span><span class="op">,</span> <span class="st">&quot;CPF Ã© obrigatÃ³rio&quot;</span><span class="op">);</span></span>
<span id="cb66-45"><a href="#cb66-45" tabindex="-1"></a></span>
<span id="cb66-46"><a href="#cb66-46" tabindex="-1"></a>        <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb66-47"><a href="#cb66-47" tabindex="-1"></a>            pqxx<span class="op">::</span>connection c<span class="op">(</span>CONN_STR<span class="op">);</span></span>
<span id="cb66-48"><a href="#cb66-48" tabindex="-1"></a>            pqxx<span class="op">::</span>work w<span class="op">(</span>c<span class="op">);</span></span>
<span id="cb66-49"><a href="#cb66-49" tabindex="-1"></a>            w<span class="op">.</span>exec_params<span class="op">(</span></span>
<span id="cb66-50"><a href="#cb66-50" tabindex="-1"></a>                <span class="st">&quot;INSERT INTO pessoas (cpf,nome,endereco,data_nascimento,foto) &quot;</span></span>
<span id="cb66-51"><a href="#cb66-51" tabindex="-1"></a>                <span class="st">&quot;VALUES ($1,$2,$3,$4,$5)&quot;</span><span class="op">,</span></span>
<span id="cb66-52"><a href="#cb66-52" tabindex="-1"></a>                body<span class="op">[</span><span class="st">&quot;cpf&quot;</span><span class="op">].</span>s<span class="op">(),</span></span>
<span id="cb66-53"><a href="#cb66-53" tabindex="-1"></a>                body<span class="op">[</span><span class="st">&quot;nome&quot;</span><span class="op">].</span><span class="va">s_or</span><span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">),</span></span>
<span id="cb66-54"><a href="#cb66-54" tabindex="-1"></a>                body<span class="op">[</span><span class="st">&quot;endereco&quot;</span><span class="op">].</span><span class="va">s_or</span><span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">),</span></span>
<span id="cb66-55"><a href="#cb66-55" tabindex="-1"></a>                body<span class="op">[</span><span class="st">&quot;dataNascimento&quot;</span><span class="op">].</span><span class="va">s_or</span><span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">),</span></span>
<span id="cb66-56"><a href="#cb66-56" tabindex="-1"></a>                body<span class="op">[</span><span class="st">&quot;foto&quot;</span><span class="op">].</span><span class="va">s_or</span><span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">)</span></span>
<span id="cb66-57"><a href="#cb66-57" tabindex="-1"></a>            <span class="op">);</span></span>
<span id="cb66-58"><a href="#cb66-58" tabindex="-1"></a>            w<span class="op">.</span>commit<span class="op">();</span></span>
<span id="cb66-59"><a href="#cb66-59" tabindex="-1"></a>            <span class="cf">return</span> crow<span class="op">::</span>response<span class="op">(</span><span class="dv">201</span><span class="op">,</span> <span class="st">&quot;Inserido&quot;</span><span class="op">);</span></span>
<span id="cb66-60"><a href="#cb66-60" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">catch</span><span class="op">(</span><span class="at">const</span> <span class="bu">std::</span>exception <span class="op">&amp;</span>e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb66-61"><a href="#cb66-61" tabindex="-1"></a>            <span class="cf">return</span> crow<span class="op">::</span>response<span class="op">(</span><span class="dv">400</span><span class="op">,</span> e<span class="op">.</span>what<span class="op">());</span></span>
<span id="cb66-62"><a href="#cb66-62" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb66-63"><a href="#cb66-63" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb66-64"><a href="#cb66-64" tabindex="-1"></a></span>
<span id="cb66-65"><a href="#cb66-65" tabindex="-1"></a>    <span class="co">// PUT /pessoas/&lt;cpf&gt;</span></span>
<span id="cb66-66"><a href="#cb66-66" tabindex="-1"></a>    CROW_ROUTE<span class="op">(</span>app<span class="op">,</span> <span class="st">&quot;/pessoas/&lt;string&gt;&quot;</span><span class="op">).</span>methods<span class="op">(</span><span class="st">&quot;PUT&quot;</span><span class="op">_method)</span></span>
<span id="cb66-67"><a href="#cb66-67" tabindex="-1"></a>    <span class="op">([](</span><span class="at">const</span> crow<span class="op">::</span>request<span class="op">&amp;</span> req<span class="op">,</span> <span class="bu">std::</span>string cpf<span class="op">){</span></span>
<span id="cb66-68"><a href="#cb66-68" tabindex="-1"></a>        <span class="kw">auto</span> body <span class="op">=</span> crow<span class="op">::</span>json<span class="op">::</span>load<span class="op">(</span>req<span class="op">.</span>body<span class="op">);</span></span>
<span id="cb66-69"><a href="#cb66-69" tabindex="-1"></a>        <span class="cf">if</span><span class="op">(!</span>body<span class="op">)</span></span>
<span id="cb66-70"><a href="#cb66-70" tabindex="-1"></a>            <span class="cf">return</span> crow<span class="op">::</span>response<span class="op">(</span><span class="dv">400</span><span class="op">,</span> <span class="st">&quot;JSON invÃ¡lido&quot;</span><span class="op">);</span></span>
<span id="cb66-71"><a href="#cb66-71" tabindex="-1"></a>        <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb66-72"><a href="#cb66-72" tabindex="-1"></a>            pqxx<span class="op">::</span>connection c<span class="op">(</span>CONN_STR<span class="op">);</span></span>
<span id="cb66-73"><a href="#cb66-73" tabindex="-1"></a>            pqxx<span class="op">::</span>work w<span class="op">(</span>c<span class="op">);</span></span>
<span id="cb66-74"><a href="#cb66-74" tabindex="-1"></a>            w<span class="op">.</span>exec_params<span class="op">(</span></span>
<span id="cb66-75"><a href="#cb66-75" tabindex="-1"></a>                <span class="st">&quot;UPDATE pessoas SET nome=$1,endereco=$2,data_nascimento=$3,foto=$4 WHERE cpf=$5&quot;</span><span class="op">,</span></span>
<span id="cb66-76"><a href="#cb66-76" tabindex="-1"></a>                body<span class="op">[</span><span class="st">&quot;nome&quot;</span><span class="op">].</span><span class="va">s_or</span><span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">),</span></span>
<span id="cb66-77"><a href="#cb66-77" tabindex="-1"></a>                body<span class="op">[</span><span class="st">&quot;endereco&quot;</span><span class="op">].</span><span class="va">s_or</span><span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">),</span></span>
<span id="cb66-78"><a href="#cb66-78" tabindex="-1"></a>                body<span class="op">[</span><span class="st">&quot;dataNascimento&quot;</span><span class="op">].</span><span class="va">s_or</span><span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">),</span></span>
<span id="cb66-79"><a href="#cb66-79" tabindex="-1"></a>                body<span class="op">[</span><span class="st">&quot;foto&quot;</span><span class="op">].</span><span class="va">s_or</span><span class="op">(</span><span class="st">&quot;&quot;</span><span class="op">),</span></span>
<span id="cb66-80"><a href="#cb66-80" tabindex="-1"></a>                cpf</span>
<span id="cb66-81"><a href="#cb66-81" tabindex="-1"></a>            <span class="op">);</span></span>
<span id="cb66-82"><a href="#cb66-82" tabindex="-1"></a>            <span class="cf">if</span><span class="op">(</span>w<span class="op">.</span>affected_rows<span class="op">()</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> crow<span class="op">::</span>response<span class="op">(</span><span class="dv">404</span><span class="op">,</span> <span class="st">&quot;CPF nÃ£o encontrado&quot;</span><span class="op">);</span></span>
<span id="cb66-83"><a href="#cb66-83" tabindex="-1"></a>            w<span class="op">.</span>commit<span class="op">();</span></span>
<span id="cb66-84"><a href="#cb66-84" tabindex="-1"></a>            <span class="cf">return</span> crow<span class="op">::</span>response<span class="op">(</span><span class="dv">200</span><span class="op">,</span> <span class="st">&quot;Alterado&quot;</span><span class="op">);</span></span>
<span id="cb66-85"><a href="#cb66-85" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">catch</span><span class="op">(</span><span class="at">const</span> <span class="bu">std::</span>exception <span class="op">&amp;</span>e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb66-86"><a href="#cb66-86" tabindex="-1"></a>            <span class="cf">return</span> crow<span class="op">::</span>response<span class="op">(</span><span class="dv">400</span><span class="op">,</span> e<span class="op">.</span>what<span class="op">());</span></span>
<span id="cb66-87"><a href="#cb66-87" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb66-88"><a href="#cb66-88" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb66-89"><a href="#cb66-89" tabindex="-1"></a></span>
<span id="cb66-90"><a href="#cb66-90" tabindex="-1"></a>    <span class="co">// DELETE /pessoas/&lt;cpf&gt;</span></span>
<span id="cb66-91"><a href="#cb66-91" tabindex="-1"></a>    CROW_ROUTE<span class="op">(</span>app<span class="op">,</span> <span class="st">&quot;/pessoas/&lt;string&gt;&quot;</span><span class="op">).</span>methods<span class="op">(</span><span class="st">&quot;DELETE&quot;</span><span class="op">_method)</span></span>
<span id="cb66-92"><a href="#cb66-92" tabindex="-1"></a>    <span class="op">([](</span><span class="at">const</span> crow<span class="op">::</span>request<span class="op">&amp;,</span> <span class="bu">std::</span>string cpf<span class="op">){</span></span>
<span id="cb66-93"><a href="#cb66-93" tabindex="-1"></a>        <span class="cf">try</span> <span class="op">{</span></span>
<span id="cb66-94"><a href="#cb66-94" tabindex="-1"></a>            pqxx<span class="op">::</span>connection c<span class="op">(</span>CONN_STR<span class="op">);</span></span>
<span id="cb66-95"><a href="#cb66-95" tabindex="-1"></a>            pqxx<span class="op">::</span>work w<span class="op">(</span>c<span class="op">);</span></span>
<span id="cb66-96"><a href="#cb66-96" tabindex="-1"></a>            w<span class="op">.</span>exec_params<span class="op">(</span><span class="st">&quot;DELETE FROM pessoas WHERE cpf=$1&quot;</span><span class="op">,</span> cpf<span class="op">);</span></span>
<span id="cb66-97"><a href="#cb66-97" tabindex="-1"></a>            <span class="cf">if</span><span class="op">(</span>w<span class="op">.</span>affected_rows<span class="op">()</span> <span class="op">==</span> <span class="dv">0</span><span class="op">)</span> <span class="cf">return</span> crow<span class="op">::</span>response<span class="op">(</span><span class="dv">404</span><span class="op">,</span> <span class="st">&quot;CPF nÃ£o encontrado&quot;</span><span class="op">);</span></span>
<span id="cb66-98"><a href="#cb66-98" tabindex="-1"></a>            w<span class="op">.</span>commit<span class="op">();</span></span>
<span id="cb66-99"><a href="#cb66-99" tabindex="-1"></a>            <span class="cf">return</span> crow<span class="op">::</span>response<span class="op">(</span><span class="dv">200</span><span class="op">,</span> <span class="st">&quot;Removido&quot;</span><span class="op">);</span></span>
<span id="cb66-100"><a href="#cb66-100" tabindex="-1"></a>        <span class="op">}</span> <span class="cf">catch</span><span class="op">(</span><span class="at">const</span> <span class="bu">std::</span>exception <span class="op">&amp;</span>e<span class="op">)</span> <span class="op">{</span></span>
<span id="cb66-101"><a href="#cb66-101" tabindex="-1"></a>            <span class="cf">return</span> crow<span class="op">::</span>response<span class="op">(</span><span class="dv">400</span><span class="op">,</span> e<span class="op">.</span>what<span class="op">());</span></span>
<span id="cb66-102"><a href="#cb66-102" tabindex="-1"></a>        <span class="op">}</span></span>
<span id="cb66-103"><a href="#cb66-103" tabindex="-1"></a>    <span class="op">});</span></span>
<span id="cb66-104"><a href="#cb66-104" tabindex="-1"></a></span>
<span id="cb66-105"><a href="#cb66-105" tabindex="-1"></a>    <span class="bu">std::</span>cout <span class="op">&lt;&lt;</span> <span class="st">&quot;Servidor rodando em http://0.0.0.0:8080</span><span class="sc">\n</span><span class="st">&quot;</span><span class="op">;</span></span>
<span id="cb66-106"><a href="#cb66-106" tabindex="-1"></a>    app<span class="op">.</span>port<span class="op">(</span><span class="dv">8080</span><span class="op">).</span>multithreaded<span class="op">().</span>run<span class="op">();</span></span>
<span id="cb66-107"><a href="#cb66-107" tabindex="-1"></a><span class="op">}</span></span></code></pre></div>
</div>
<div id="ferramenta-de-compilaÃ§Ã£o-cmake" class="section level3 hasAnchor" number="7.12.2">
<h3 class="hasAnchor"><span class="header-section-number">7.12.2</span> Ferramenta de compilaÃ§Ã£o CMAKE<a href="#ferramenta-de-compila%C3%A7%C3%A3o-cmake" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>Preparando o arquivo de instruÃ§Ãµes da ferramenta de projeto CMAKE</p>
<div class="sourceCode" id="cb67"><pre class="sourceCode txt"><code class="sourceCode default"><span id="cb67-1"><a href="#cb67-1" tabindex="-1"></a>cmake_minimum_required(VERSION 3.20)</span>
<span id="cb67-2"><a href="#cb67-2" tabindex="-1"></a>project(PessoasRestCpp LANGUAGES CXX)</span>
<span id="cb67-3"><a href="#cb67-3" tabindex="-1"></a></span>
<span id="cb67-4"><a href="#cb67-4" tabindex="-1"></a>set(CMAKE_CXX_STANDARD 17)</span>
<span id="cb67-5"><a href="#cb67-5" tabindex="-1"></a>set(CMAKE_CXX_STANDARD_REQUIRED ON)</span>
<span id="cb67-6"><a href="#cb67-6" tabindex="-1"></a></span>
<span id="cb67-7"><a href="#cb67-7" tabindex="-1"></a># Caminho para os headers (Crow e outros)</span>
<span id="cb67-8"><a href="#cb67-8" tabindex="-1"></a>include_directories(${CMAKE_SOURCE_DIR}/include)</span>
<span id="cb67-9"><a href="#cb67-9" tabindex="-1"></a></span>
<span id="cb67-10"><a href="#cb67-10" tabindex="-1"></a># LocalizaÃ§Ã£o de libpqxx (ajuste se estiver em pasta diferente)</span>
<span id="cb67-11"><a href="#cb67-11" tabindex="-1"></a>find_package(PostgreSQL REQUIRED)</span>
<span id="cb67-12"><a href="#cb67-12" tabindex="-1"></a>find_path(PQXX_INCLUDE_DIR pqxx/pqxx)</span>
<span id="cb67-13"><a href="#cb67-13" tabindex="-1"></a>find_library(PQXX_LIBRARY pqxx)</span>
<span id="cb67-14"><a href="#cb67-14" tabindex="-1"></a></span>
<span id="cb67-15"><a href="#cb67-15" tabindex="-1"></a>if(NOT PQXX_INCLUDE_DIR OR NOT PQXX_LIBRARY)</span>
<span id="cb67-16"><a href="#cb67-16" tabindex="-1"></a>    message(FATAL_ERROR &quot;libpqxx nÃ£o encontrada. Instale com vcpkg ou aponte manualmente.&quot;)</span>
<span id="cb67-17"><a href="#cb67-17" tabindex="-1"></a>endif()</span>
<span id="cb67-18"><a href="#cb67-18" tabindex="-1"></a></span>
<span id="cb67-19"><a href="#cb67-19" tabindex="-1"></a>add_executable(pessoas-rest</span>
<span id="cb67-20"><a href="#cb67-20" tabindex="-1"></a>    src/main.cpp</span>
<span id="cb67-21"><a href="#cb67-21" tabindex="-1"></a>)</span>
<span id="cb67-22"><a href="#cb67-22" tabindex="-1"></a></span>
<span id="cb67-23"><a href="#cb67-23" tabindex="-1"></a>target_include_directories(pessoas-rest PRIVATE ${PQXX_INCLUDE_DIR})</span>
<span id="cb67-24"><a href="#cb67-24" tabindex="-1"></a>target_link_libraries(pessoas-rest</span>
<span id="cb67-25"><a href="#cb67-25" tabindex="-1"></a>    ${PQXX_LIBRARY}</span>
<span id="cb67-26"><a href="#cb67-26" tabindex="-1"></a>    PostgreSQL::PostgreSQL</span>
<span id="cb67-27"><a href="#cb67-27" tabindex="-1"></a>)</span></code></pre></div>
<p>Adicionando biblioteca extra no compilador C++ do windows</p>
<div class="sourceCode" id="cb68"><pre class="sourceCode cmd"><code class="sourceCode dosbat"><span id="cb68-1"><a href="#cb68-1" tabindex="-1"></a>vcpkg install libpqxx</span></code></pre></div>
<p>Gere o projeto do servidor para â€œVisual Studio 17 2022â€ E ARQUITETURA x64</p>
<div class="sourceCode" id="cb69"><pre class="sourceCode cmd"><code class="sourceCode dosbat"><span id="cb69-1"><a href="#cb69-1" tabindex="-1"></a>cmake <span class="at">-B</span> build <span class="at">-G</span> <span class="st">&quot;Visual Studio 17 2022&quot;</span> <span class="at">-A</span> x64  <span class="at">-DCMAKE_TOOLCHAIN_FILE</span>=C:<span class="at">/path/to/vcpkg/scripts/buildsystems/vcpkg</span>.cmake</span></code></pre></div>
<p>Compile e linque todo o projeto</p>
<div class="sourceCode" id="cb70"><pre class="sourceCode cmd"><code class="sourceCode dosbat"><span id="cb70-1"><a href="#cb70-1" tabindex="-1"></a>cmake -<span class="at">-build</span> build -<span class="at">-config</span> Release</span></code></pre></div>
<p>execute o servidor</p>
<div class="sourceCode" id="cb71"><pre class="sourceCode cmd"><code class="sourceCode dosbat"><span id="cb71-1"><a href="#cb71-1" tabindex="-1"></a>build/Release/pessoas-rest.exe</span></code></pre></div>
<p>servidor estarÃ¡ rodando na porta 8080 e EXPÃ•E A API de operaÃ§Ãµes na URI <a href="http://localhost:8080/pessoas" class="uri">http://localhost:8080/pessoas</a> sem senha</p>
<div class="sourceCode" id="cb72"><pre class="sourceCode css"><code class="sourceCode css"><span id="cb72-1"><a href="#cb72-1" tabindex="-1"></a>http<span class="in">:</span><span class="er">//localhost:8080/pessoas</span></span></code></pre></div>
</div>
<div id="cliente-html-conexÃ£o-restful-2" class="section level3 hasAnchor" number="7.12.3">
<h3 class="hasAnchor"><span class="header-section-number">7.12.3</span> Cliente HTML (conexÃ£o Restful)<a href="#cliente-html-conex%C3%A3o-restful-2" class="anchor-section" aria-label="Anchor link to header"></a></h3>
<p>crie o arquivo index.html e abra-o no navegador</p>
<div class="sourceCode" id="cb73"><pre class="sourceCode html"><code class="sourceCode html"><span id="cb73-1"><a href="#cb73-1" tabindex="-1"></a><span class="dt">&lt;!DOCTYPE</span> html<span class="dt">&gt;</span></span>
<span id="cb73-2"><a href="#cb73-2" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">html</span><span class="ot"> lang</span><span class="op">=</span><span class="st">&quot;pt-BR&quot;</span><span class="dt">&gt;</span></span>
<span id="cb73-3"><a href="#cb73-3" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb73-4"><a href="#cb73-4" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">meta</span><span class="ot"> charset</span><span class="op">=</span><span class="st">&quot;UTF-8&quot;</span><span class="dt">&gt;</span></span>
<span id="cb73-5"><a href="#cb73-5" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">title</span><span class="dt">&gt;</span>Cadastro de Pessoas<span class="dt">&lt;/</span><span class="kw">title</span><span class="dt">&gt;</span></span>
<span id="cb73-6"><a href="#cb73-6" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb73-7"><a href="#cb73-7" tabindex="-1"></a>  body { <span class="kw">font-family</span><span class="ch">:</span> <span class="dv">Arial</span><span class="op">,</span> <span class="dv">sans-serif</span><span class="op">;</span> <span class="kw">margin</span><span class="ch">:</span> <span class="dv">20</span><span class="dt">px</span><span class="op">;</span> }</span>
<span id="cb73-8"><a href="#cb73-8" tabindex="-1"></a>  h1 { <span class="kw">color</span><span class="ch">:</span> <span class="cn">#333</span><span class="op">;</span> }</span>
<span id="cb73-9"><a href="#cb73-9" tabindex="-1"></a>  form { <span class="kw">margin-bottom</span><span class="ch">:</span> <span class="dv">20</span><span class="dt">px</span><span class="op">;</span> }</span>
<span id="cb73-10"><a href="#cb73-10" tabindex="-1"></a>  label { <span class="kw">display</span><span class="ch">:</span> <span class="dv">block</span><span class="op">;</span> <span class="kw">margin-top</span><span class="ch">:</span> <span class="dv">10</span><span class="dt">px</span><span class="op">;</span> }</span>
<span id="cb73-11"><a href="#cb73-11" tabindex="-1"></a>  input<span class="ex">[</span><span class="ss">type</span><span class="op">=</span><span class="st">text</span><span class="ex">]</span><span class="op">,</span> input<span class="ex">[</span><span class="ss">type</span><span class="op">=</span><span class="st">date</span><span class="ex">]</span><span class="op">,</span> input<span class="ex">[</span><span class="ss">type</span><span class="op">=</span><span class="st">file</span><span class="ex">]</span> {</span>
<span id="cb73-12"><a href="#cb73-12" tabindex="-1"></a>    <span class="kw">width</span><span class="ch">:</span> <span class="dv">300</span><span class="dt">px</span><span class="op">;</span> <span class="kw">padding</span><span class="ch">:</span> <span class="dv">5</span><span class="dt">px</span><span class="op">;</span></span>
<span id="cb73-13"><a href="#cb73-13" tabindex="-1"></a>  }</span>
<span id="cb73-14"><a href="#cb73-14" tabindex="-1"></a>  table { <span class="kw">border-collapse</span><span class="ch">:</span> <span class="dv">collapse</span><span class="op">;</span> <span class="kw">width</span><span class="ch">:</span> <span class="dv">100</span><span class="dt">%</span><span class="op">;</span> <span class="kw">margin-top</span><span class="ch">:</span> <span class="dv">20</span><span class="dt">px</span><span class="op">;</span> }</span>
<span id="cb73-15"><a href="#cb73-15" tabindex="-1"></a>  th<span class="op">,</span> td { <span class="kw">border</span><span class="ch">:</span> <span class="dv">1</span><span class="dt">px</span> <span class="dv">solid</span> <span class="cn">#aaa</span><span class="op">;</span> <span class="kw">padding</span><span class="ch">:</span> <span class="dv">6</span><span class="dt">px</span><span class="op">;</span> <span class="kw">text-align</span><span class="ch">:</span> <span class="dv">left</span><span class="op">;</span> }</span>
<span id="cb73-16"><a href="#cb73-16" tabindex="-1"></a>  img { <span class="kw">max-width</span><span class="ch">:</span> <span class="dv">80</span><span class="dt">px</span><span class="op">;</span> <span class="kw">max-height</span><span class="ch">:</span> <span class="dv">80</span><span class="dt">px</span><span class="op">;</span> }</span>
<span id="cb73-17"><a href="#cb73-17" tabindex="-1"></a>  <span class="fu">.btn</span> { <span class="kw">padding</span><span class="ch">:</span> <span class="dv">4</span><span class="dt">px</span> <span class="dv">8</span><span class="dt">px</span><span class="op">;</span> <span class="kw">cursor</span><span class="ch">:</span> <span class="dv">pointer</span><span class="op">;</span> <span class="kw">margin</span><span class="ch">:</span> <span class="dv">0</span> <span class="dv">2</span><span class="dt">px</span><span class="op">;</span> }</span>
<span id="cb73-18"><a href="#cb73-18" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">style</span><span class="dt">&gt;</span></span>
<span id="cb73-19"><a href="#cb73-19" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">head</span><span class="dt">&gt;</span></span>
<span id="cb73-20"><a href="#cb73-20" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb73-21"><a href="#cb73-21" tabindex="-1"></a></span>
<span id="cb73-22"><a href="#cb73-22" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">h1</span><span class="dt">&gt;</span>Cadastro de Pessoas<span class="dt">&lt;/</span><span class="kw">h1</span><span class="dt">&gt;</span></span>
<span id="cb73-23"><a href="#cb73-23" tabindex="-1"></a></span>
<span id="cb73-24"><a href="#cb73-24" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">form</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;pessoaForm&quot;</span><span class="dt">&gt;</span></span>
<span id="cb73-25"><a href="#cb73-25" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">label</span><span class="dt">&gt;</span>CPF*:</span>
<span id="cb73-26"><a href="#cb73-26" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;text&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;cpf&quot;</span><span class="ot"> required</span><span class="dt">&gt;</span></span>
<span id="cb73-27"><a href="#cb73-27" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb73-28"><a href="#cb73-28" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">label</span><span class="dt">&gt;</span>Nome:</span>
<span id="cb73-29"><a href="#cb73-29" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;text&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;nome&quot;</span><span class="dt">&gt;</span></span>
<span id="cb73-30"><a href="#cb73-30" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb73-31"><a href="#cb73-31" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">label</span><span class="dt">&gt;</span>EndereÃ§o:</span>
<span id="cb73-32"><a href="#cb73-32" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;text&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;endereco&quot;</span><span class="dt">&gt;</span></span>
<span id="cb73-33"><a href="#cb73-33" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb73-34"><a href="#cb73-34" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">label</span><span class="dt">&gt;</span>Data de Nascimento:</span>
<span id="cb73-35"><a href="#cb73-35" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;date&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;dataNascimento&quot;</span><span class="dt">&gt;</span></span>
<span id="cb73-36"><a href="#cb73-36" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb73-37"><a href="#cb73-37" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">label</span><span class="dt">&gt;</span>Foto:</span>
<span id="cb73-38"><a href="#cb73-38" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;file&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;foto&quot;</span><span class="dt">&gt;</span></span>
<span id="cb73-39"><a href="#cb73-39" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">label</span><span class="dt">&gt;</span></span>
<span id="cb73-40"><a href="#cb73-40" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;submit&quot;</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;btn&quot;</span><span class="dt">&gt;</span>Salvar<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb73-41"><a href="#cb73-41" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">form</span><span class="dt">&gt;</span></span>
<span id="cb73-42"><a href="#cb73-42" tabindex="-1"></a></span>
<span id="cb73-43"><a href="#cb73-43" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb73-44"><a href="#cb73-44" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">input</span><span class="ot"> type</span><span class="op">=</span><span class="st">&quot;text&quot;</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;search&quot;</span><span class="ot"> placeholder</span><span class="op">=</span><span class="st">&quot;Buscar por CPF ou Nome&quot;</span><span class="dt">&gt;</span></span>
<span id="cb73-45"><a href="#cb73-45" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;btnBuscar&quot;</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;btn&quot;</span><span class="dt">&gt;</span>Buscar<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb73-46"><a href="#cb73-46" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">button</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;btnListar&quot;</span><span class="ot"> class</span><span class="op">=</span><span class="st">&quot;btn&quot;</span><span class="dt">&gt;</span>Listar Todos<span class="dt">&lt;/</span><span class="kw">button</span><span class="dt">&gt;</span></span>
<span id="cb73-47"><a href="#cb73-47" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">div</span><span class="dt">&gt;</span></span>
<span id="cb73-48"><a href="#cb73-48" tabindex="-1"></a></span>
<span id="cb73-49"><a href="#cb73-49" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">table</span><span class="ot"> id</span><span class="op">=</span><span class="st">&quot;tabelaPessoas&quot;</span><span class="dt">&gt;</span></span>
<span id="cb73-50"><a href="#cb73-50" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">thead</span><span class="dt">&gt;</span></span>
<span id="cb73-51"><a href="#cb73-51" tabindex="-1"></a>    <span class="dt">&lt;</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb73-52"><a href="#cb73-52" tabindex="-1"></a>      <span class="dt">&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>CPF<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>Nome<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>EndereÃ§o<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>Nascimento<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>Foto<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;&lt;</span><span class="kw">th</span><span class="dt">&gt;</span>AÃ§Ãµes<span class="dt">&lt;/</span><span class="kw">th</span><span class="dt">&gt;</span></span>
<span id="cb73-53"><a href="#cb73-53" tabindex="-1"></a>    <span class="dt">&lt;/</span><span class="kw">tr</span><span class="dt">&gt;</span></span>
<span id="cb73-54"><a href="#cb73-54" tabindex="-1"></a>  <span class="dt">&lt;/</span><span class="kw">thead</span><span class="dt">&gt;</span></span>
<span id="cb73-55"><a href="#cb73-55" tabindex="-1"></a>  <span class="dt">&lt;</span><span class="kw">tbody</span><span class="dt">&gt;&lt;/</span><span class="kw">tbody</span><span class="dt">&gt;</span></span>
<span id="cb73-56"><a href="#cb73-56" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">table</span><span class="dt">&gt;</span></span>
<span id="cb73-57"><a href="#cb73-57" tabindex="-1"></a></span>
<span id="cb73-58"><a href="#cb73-58" tabindex="-1"></a><span class="dt">&lt;</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb73-59"><a href="#cb73-59" tabindex="-1"></a><span class="kw">const</span> API_URL <span class="op">=</span> <span class="st">&quot;http://localhost:8080/pessoas&quot;</span><span class="op">;</span></span>
<span id="cb73-60"><a href="#cb73-60" tabindex="-1"></a></span>
<span id="cb73-61"><a href="#cb73-61" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">carregarPessoas</span>(query<span class="op">=</span><span class="st">&quot;&quot;</span>) {</span>
<span id="cb73-62"><a href="#cb73-62" tabindex="-1"></a>  <span class="kw">const</span> url <span class="op">=</span> query <span class="op">?</span> <span class="vs">`</span><span class="sc">${</span>API_URL<span class="sc">}</span><span class="vs">?q=</span><span class="sc">${</span><span class="pp">encodeURIComponent</span>(query)<span class="sc">}</span><span class="vs">`</span> <span class="op">:</span> API_URL<span class="op">;</span></span>
<span id="cb73-63"><a href="#cb73-63" tabindex="-1"></a>  <span class="kw">const</span> resp <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(url)<span class="op">;</span></span>
<span id="cb73-64"><a href="#cb73-64" tabindex="-1"></a>  <span class="kw">const</span> data <span class="op">=</span> <span class="cf">await</span> resp<span class="op">.</span><span class="fu">json</span>()<span class="op">;</span></span>
<span id="cb73-65"><a href="#cb73-65" tabindex="-1"></a>  <span class="kw">const</span> tbody <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">querySelector</span>(<span class="st">&quot;#tabelaPessoas tbody&quot;</span>)<span class="op">;</span></span>
<span id="cb73-66"><a href="#cb73-66" tabindex="-1"></a>  tbody<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span></span>
<span id="cb73-67"><a href="#cb73-67" tabindex="-1"></a>  data<span class="op">.</span><span class="fu">forEach</span>(p <span class="kw">=&gt;</span> {</span>
<span id="cb73-68"><a href="#cb73-68" tabindex="-1"></a>    <span class="kw">const</span> tr <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">createElement</span>(<span class="st">&quot;tr&quot;</span>)<span class="op">;</span></span>
<span id="cb73-69"><a href="#cb73-69" tabindex="-1"></a>    tr<span class="op">.</span><span class="at">innerHTML</span> <span class="op">=</span> <span class="vs">`</span></span>
<span id="cb73-70"><a href="#cb73-70" tabindex="-1"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">cpf</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb73-71"><a href="#cb73-71" tabindex="-1"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">nome</span> <span class="op">||</span> <span class="st">&quot;&quot;</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb73-72"><a href="#cb73-72" tabindex="-1"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">endereco</span> <span class="op">||</span> <span class="st">&quot;&quot;</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb73-73"><a href="#cb73-73" tabindex="-1"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">dataNascimento</span> <span class="op">||</span> <span class="st">&quot;&quot;</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb73-74"><a href="#cb73-74" tabindex="-1"></a><span class="vs">      &lt;td&gt;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">foto</span> <span class="op">?</span> <span class="vs">`&lt;img src=&quot;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">foto</span><span class="sc">}</span><span class="vs">&quot; alt=&quot;foto&quot;&gt;`</span> <span class="op">:</span> <span class="st">&quot;&quot;</span><span class="sc">}</span><span class="vs">&lt;/td&gt;</span></span>
<span id="cb73-75"><a href="#cb73-75" tabindex="-1"></a><span class="vs">      &lt;td&gt;</span></span>
<span id="cb73-76"><a href="#cb73-76" tabindex="-1"></a><span class="vs">        &lt;button class=&quot;btn&quot; onclick=&quot;editar(&#39;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">cpf</span><span class="sc">}</span><span class="vs">&#39;)&quot;&gt;Editar&lt;/button&gt;</span></span>
<span id="cb73-77"><a href="#cb73-77" tabindex="-1"></a><span class="vs">        &lt;button class=&quot;btn&quot; onclick=&quot;excluir(&#39;</span><span class="sc">${</span>p<span class="op">.</span><span class="at">cpf</span><span class="sc">}</span><span class="vs">&#39;)&quot;&gt;Excluir&lt;/button&gt;</span></span>
<span id="cb73-78"><a href="#cb73-78" tabindex="-1"></a><span class="vs">      &lt;/td&gt;</span></span>
<span id="cb73-79"><a href="#cb73-79" tabindex="-1"></a><span class="vs">    `</span><span class="op">;</span></span>
<span id="cb73-80"><a href="#cb73-80" tabindex="-1"></a>    tbody<span class="op">.</span><span class="fu">appendChild</span>(tr)<span class="op">;</span></span>
<span id="cb73-81"><a href="#cb73-81" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb73-82"><a href="#cb73-82" tabindex="-1"></a>}</span>
<span id="cb73-83"><a href="#cb73-83" tabindex="-1"></a></span>
<span id="cb73-84"><a href="#cb73-84" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">toBase64</span>(file) {</span>
<span id="cb73-85"><a href="#cb73-85" tabindex="-1"></a>  <span class="cf">return</span> <span class="kw">new</span> <span class="bu">Promise</span>((resolve<span class="op">,</span> reject) <span class="kw">=&gt;</span> {</span>
<span id="cb73-86"><a href="#cb73-86" tabindex="-1"></a>    <span class="kw">const</span> reader <span class="op">=</span> <span class="kw">new</span> <span class="bu">FileReader</span>()<span class="op">;</span></span>
<span id="cb73-87"><a href="#cb73-87" tabindex="-1"></a>    reader<span class="op">.</span><span class="at">onload</span> <span class="op">=</span> () <span class="kw">=&gt;</span> <span class="fu">resolve</span>(reader<span class="op">.</span><span class="at">result</span>)<span class="op">;</span></span>
<span id="cb73-88"><a href="#cb73-88" tabindex="-1"></a>    reader<span class="op">.</span><span class="at">onerror</span> <span class="op">=</span> reject<span class="op">;</span></span>
<span id="cb73-89"><a href="#cb73-89" tabindex="-1"></a>    reader<span class="op">.</span><span class="fu">readAsDataURL</span>(file)<span class="op">;</span></span>
<span id="cb73-90"><a href="#cb73-90" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb73-91"><a href="#cb73-91" tabindex="-1"></a>}</span>
<span id="cb73-92"><a href="#cb73-92" tabindex="-1"></a></span>
<span id="cb73-93"><a href="#cb73-93" tabindex="-1"></a><span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;pessoaForm&quot;</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&quot;submit&quot;</span><span class="op">,</span> <span class="kw">async</span> e <span class="kw">=&gt;</span> {</span>
<span id="cb73-94"><a href="#cb73-94" tabindex="-1"></a>  e<span class="op">.</span><span class="fu">preventDefault</span>()<span class="op">;</span></span>
<span id="cb73-95"><a href="#cb73-95" tabindex="-1"></a>  <span class="kw">const</span> cpf <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;cpf&quot;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb73-96"><a href="#cb73-96" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span>cpf) { <span class="fu">alert</span>(<span class="st">&quot;CPF Ã© obrigatÃ³rio.&quot;</span>)<span class="op">;</span> <span class="cf">return</span><span class="op">;</span> }</span>
<span id="cb73-97"><a href="#cb73-97" tabindex="-1"></a></span>
<span id="cb73-98"><a href="#cb73-98" tabindex="-1"></a>  <span class="kw">const</span> nome <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;nome&quot;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb73-99"><a href="#cb73-99" tabindex="-1"></a>  <span class="kw">const</span> endereco <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;endereco&quot;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb73-100"><a href="#cb73-100" tabindex="-1"></a>  <span class="kw">const</span> dataNascimento <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;dataNascimento&quot;</span>)<span class="op">.</span><span class="at">value</span><span class="op">;</span></span>
<span id="cb73-101"><a href="#cb73-101" tabindex="-1"></a>  <span class="kw">const</span> fotoFile <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;foto&quot;</span>)<span class="op">.</span><span class="at">files</span>[<span class="dv">0</span>]<span class="op">;</span></span>
<span id="cb73-102"><a href="#cb73-102" tabindex="-1"></a>  <span class="kw">let</span> fotoBase64 <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span></span>
<span id="cb73-103"><a href="#cb73-103" tabindex="-1"></a>  <span class="cf">if</span> (fotoFile) {</span>
<span id="cb73-104"><a href="#cb73-104" tabindex="-1"></a>    fotoBase64 <span class="op">=</span> <span class="cf">await</span> <span class="fu">toBase64</span>(fotoFile)<span class="op">;</span></span>
<span id="cb73-105"><a href="#cb73-105" tabindex="-1"></a>  }</span>
<span id="cb73-106"><a href="#cb73-106" tabindex="-1"></a></span>
<span id="cb73-107"><a href="#cb73-107" tabindex="-1"></a>  <span class="co">// Se jÃ¡ existe, usa PUT, senÃ£o POST</span></span>
<span id="cb73-108"><a href="#cb73-108" tabindex="-1"></a>  <span class="kw">const</span> method <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;cpf&quot;</span>)<span class="op">.</span><span class="at">dataset</span><span class="op">.</span><span class="at">editing</span> <span class="op">?</span> <span class="st">&quot;PUT&quot;</span> <span class="op">:</span> <span class="st">&quot;POST&quot;</span><span class="op">;</span></span>
<span id="cb73-109"><a href="#cb73-109" tabindex="-1"></a>  <span class="kw">const</span> url <span class="op">=</span> method <span class="op">===</span> <span class="st">&quot;PUT&quot;</span> <span class="op">?</span> <span class="vs">`</span><span class="sc">${</span>API_URL<span class="sc">}</span><span class="vs">/</span><span class="sc">${</span>cpf<span class="sc">}</span><span class="vs">`</span> <span class="op">:</span> API_URL<span class="op">;</span></span>
<span id="cb73-110"><a href="#cb73-110" tabindex="-1"></a></span>
<span id="cb73-111"><a href="#cb73-111" tabindex="-1"></a>  <span class="kw">const</span> resp <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(url<span class="op">,</span> {</span>
<span id="cb73-112"><a href="#cb73-112" tabindex="-1"></a>    method<span class="op">,</span></span>
<span id="cb73-113"><a href="#cb73-113" tabindex="-1"></a>    <span class="dt">headers</span><span class="op">:</span> { <span class="st">&quot;Content-Type&quot;</span><span class="op">:</span> <span class="st">&quot;application/json&quot;</span> }<span class="op">,</span></span>
<span id="cb73-114"><a href="#cb73-114" tabindex="-1"></a>    <span class="dt">body</span><span class="op">:</span> <span class="bu">JSON</span><span class="op">.</span><span class="fu">stringify</span>({ cpf<span class="op">,</span> nome<span class="op">,</span> endereco<span class="op">,</span> dataNascimento<span class="op">,</span> <span class="dt">foto</span><span class="op">:</span> fotoBase64 })</span>
<span id="cb73-115"><a href="#cb73-115" tabindex="-1"></a>  })<span class="op">;</span></span>
<span id="cb73-116"><a href="#cb73-116" tabindex="-1"></a></span>
<span id="cb73-117"><a href="#cb73-117" tabindex="-1"></a>  <span class="cf">if</span> (resp<span class="op">.</span><span class="at">ok</span>) {</span>
<span id="cb73-118"><a href="#cb73-118" tabindex="-1"></a>    <span class="fu">alert</span>(<span class="st">&quot;Salvo com sucesso!&quot;</span>)<span class="op">;</span></span>
<span id="cb73-119"><a href="#cb73-119" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;pessoaForm&quot;</span>)<span class="op">.</span><span class="fu">reset</span>()<span class="op">;</span></span>
<span id="cb73-120"><a href="#cb73-120" tabindex="-1"></a>    <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;cpf&quot;</span>)<span class="op">.</span><span class="at">dataset</span><span class="op">.</span><span class="at">editing</span> <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span></span>
<span id="cb73-121"><a href="#cb73-121" tabindex="-1"></a>    <span class="fu">carregarPessoas</span>()<span class="op">;</span></span>
<span id="cb73-122"><a href="#cb73-122" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb73-123"><a href="#cb73-123" tabindex="-1"></a>    <span class="fu">alert</span>(<span class="st">&quot;Erro: &quot;</span> <span class="op">+</span> <span class="cf">await</span> resp<span class="op">.</span><span class="fu">text</span>())<span class="op">;</span></span>
<span id="cb73-124"><a href="#cb73-124" tabindex="-1"></a>  }</span>
<span id="cb73-125"><a href="#cb73-125" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb73-126"><a href="#cb73-126" tabindex="-1"></a></span>
<span id="cb73-127"><a href="#cb73-127" tabindex="-1"></a><span class="kw">function</span> <span class="fu">editar</span>(cpf) {</span>
<span id="cb73-128"><a href="#cb73-128" tabindex="-1"></a>  <span class="kw">const</span> row <span class="op">=</span> [<span class="op">...</span><span class="bu">document</span><span class="op">.</span><span class="fu">querySelectorAll</span>(<span class="st">&quot;#tabelaPessoas tbody tr&quot;</span>)]</span>
<span id="cb73-129"><a href="#cb73-129" tabindex="-1"></a>    <span class="op">.</span><span class="fu">find</span>(tr <span class="kw">=&gt;</span> tr<span class="op">.</span><span class="at">children</span>[<span class="dv">0</span>]<span class="op">.</span><span class="at">textContent</span> <span class="op">===</span> cpf)<span class="op">;</span></span>
<span id="cb73-130"><a href="#cb73-130" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span>row) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb73-131"><a href="#cb73-131" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;cpf&quot;</span>)<span class="op">.</span><span class="at">value</span> <span class="op">=</span> cpf<span class="op">;</span></span>
<span id="cb73-132"><a href="#cb73-132" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;nome&quot;</span>)<span class="op">.</span><span class="at">value</span> <span class="op">=</span> row<span class="op">.</span><span class="at">children</span>[<span class="dv">1</span>]<span class="op">.</span><span class="at">textContent</span><span class="op">;</span></span>
<span id="cb73-133"><a href="#cb73-133" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;endereco&quot;</span>)<span class="op">.</span><span class="at">value</span> <span class="op">=</span> row<span class="op">.</span><span class="at">children</span>[<span class="dv">2</span>]<span class="op">.</span><span class="at">textContent</span><span class="op">;</span></span>
<span id="cb73-134"><a href="#cb73-134" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;dataNascimento&quot;</span>)<span class="op">.</span><span class="at">value</span> <span class="op">=</span> row<span class="op">.</span><span class="at">children</span>[<span class="dv">3</span>]<span class="op">.</span><span class="at">textContent</span><span class="op">;</span></span>
<span id="cb73-135"><a href="#cb73-135" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;cpf&quot;</span>)<span class="op">.</span><span class="at">dataset</span><span class="op">.</span><span class="at">editing</span> <span class="op">=</span> <span class="st">&quot;true&quot;</span><span class="op">;</span></span>
<span id="cb73-136"><a href="#cb73-136" tabindex="-1"></a>  <span class="bu">window</span><span class="op">.</span><span class="fu">scrollTo</span>({ <span class="dt">top</span><span class="op">:</span> <span class="dv">0</span><span class="op">,</span> <span class="dt">behavior</span><span class="op">:</span> <span class="st">&#39;smooth&#39;</span> })<span class="op">;</span></span>
<span id="cb73-137"><a href="#cb73-137" tabindex="-1"></a>}</span>
<span id="cb73-138"><a href="#cb73-138" tabindex="-1"></a></span>
<span id="cb73-139"><a href="#cb73-139" tabindex="-1"></a><span class="kw">async</span> <span class="kw">function</span> <span class="fu">excluir</span>(cpf) {</span>
<span id="cb73-140"><a href="#cb73-140" tabindex="-1"></a>  <span class="cf">if</span> (<span class="op">!</span><span class="fu">confirm</span>(<span class="vs">`Excluir CPF </span><span class="sc">${</span>cpf<span class="sc">}</span><span class="vs">?`</span>)) <span class="cf">return</span><span class="op">;</span></span>
<span id="cb73-141"><a href="#cb73-141" tabindex="-1"></a>  <span class="kw">const</span> resp <span class="op">=</span> <span class="cf">await</span> <span class="fu">fetch</span>(<span class="vs">`</span><span class="sc">${</span>API_URL<span class="sc">}</span><span class="vs">/</span><span class="sc">${</span>cpf<span class="sc">}</span><span class="vs">`</span><span class="op">,</span> { <span class="dt">method</span><span class="op">:</span> <span class="st">&quot;DELETE&quot;</span> })<span class="op">;</span></span>
<span id="cb73-142"><a href="#cb73-142" tabindex="-1"></a>  <span class="cf">if</span> (resp<span class="op">.</span><span class="at">ok</span>) {</span>
<span id="cb73-143"><a href="#cb73-143" tabindex="-1"></a>    <span class="fu">carregarPessoas</span>()<span class="op">;</span></span>
<span id="cb73-144"><a href="#cb73-144" tabindex="-1"></a>  } <span class="cf">else</span> {</span>
<span id="cb73-145"><a href="#cb73-145" tabindex="-1"></a>    <span class="fu">alert</span>(<span class="st">&quot;Erro: &quot;</span> <span class="op">+</span> <span class="cf">await</span> resp<span class="op">.</span><span class="fu">text</span>())<span class="op">;</span></span>
<span id="cb73-146"><a href="#cb73-146" tabindex="-1"></a>  }</span>
<span id="cb73-147"><a href="#cb73-147" tabindex="-1"></a>}</span>
<span id="cb73-148"><a href="#cb73-148" tabindex="-1"></a></span>
<span id="cb73-149"><a href="#cb73-149" tabindex="-1"></a><span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;btnBuscar&quot;</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb73-150"><a href="#cb73-150" tabindex="-1"></a>  <span class="kw">const</span> q <span class="op">=</span> <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;search&quot;</span>)<span class="op">.</span><span class="at">value</span><span class="op">.</span><span class="fu">trim</span>()<span class="op">;</span></span>
<span id="cb73-151"><a href="#cb73-151" tabindex="-1"></a>  <span class="fu">carregarPessoas</span>(q)<span class="op">;</span></span>
<span id="cb73-152"><a href="#cb73-152" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb73-153"><a href="#cb73-153" tabindex="-1"></a></span>
<span id="cb73-154"><a href="#cb73-154" tabindex="-1"></a><span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;btnListar&quot;</span>)<span class="op">.</span><span class="fu">addEventListener</span>(<span class="st">&quot;click&quot;</span><span class="op">,</span> () <span class="kw">=&gt;</span> {</span>
<span id="cb73-155"><a href="#cb73-155" tabindex="-1"></a>  <span class="bu">document</span><span class="op">.</span><span class="fu">getElementById</span>(<span class="st">&quot;search&quot;</span>)<span class="op">.</span><span class="at">value</span> <span class="op">=</span> <span class="st">&quot;&quot;</span><span class="op">;</span></span>
<span id="cb73-156"><a href="#cb73-156" tabindex="-1"></a>  <span class="fu">carregarPessoas</span>()<span class="op">;</span></span>
<span id="cb73-157"><a href="#cb73-157" tabindex="-1"></a>})<span class="op">;</span></span>
<span id="cb73-158"><a href="#cb73-158" tabindex="-1"></a></span>
<span id="cb73-159"><a href="#cb73-159" tabindex="-1"></a><span class="co">// Carregar lista inicial</span></span>
<span id="cb73-160"><a href="#cb73-160" tabindex="-1"></a><span class="fu">carregarPessoas</span>()<span class="op">;</span></span>
<span id="cb73-161"><a href="#cb73-161" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">script</span><span class="dt">&gt;</span></span>
<span id="cb73-162"><a href="#cb73-162" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">body</span><span class="dt">&gt;</span></span>
<span id="cb73-163"><a href="#cb73-163" tabindex="-1"></a><span class="dt">&lt;/</span><span class="kw">html</span><span class="dt">&gt;</span></span></code></pre></div>
<!--chapter:end:05-2026-03-17_Aplicacao_CRUD-exercicio.Rmd-->
</div>
</div>
</div>
<div id="banco-de-dados-mysql-mariadb" class="section level1 hasAnchor" number="8">
<h1 class="hasAnchor"><span class="header-section-number">8</span> Banco de Dados: MySQL (MariaDB)<a href="#banco-de-dados-mysql-mariadb" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="section-7" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">08/09/2025<a href="#section-7" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="professor-miguÃ©l-suares-7" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">Professor MiguÃ©l Suares<a href="#professor-migu%C3%A9l-suares-7" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<!--chapter:end:06-2026-03-24_MySQL-aula.Rmd-->
</div>
</div>
<div id="banco-de-dados-mysql-mariadb-1" class="section level1 hasAnchor" number="9">
<h1 class="hasAnchor"><span class="header-section-number">9</span> Banco de Dados: MySQL (MariaDB)<a href="#banco-de-dados-mysql-mariadb-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="section-8" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">08/09/2025<a href="#section-8" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="professor-miguÃ©l-suares-8" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">Professor MiguÃ©l Suares<a href="#professor-migu%C3%A9l-suares-8" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<!--chapter:end:06-2026-03-24_MySQL-exercicio.Rmd-->
</div>
</div>
<div id="banco-de-dados-postgres" class="section level1 hasAnchor" number="10">
<h1 class="hasAnchor"><span class="header-section-number">10</span> Banco de Dados: Postgres<a href="#banco-de-dados-postgres" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="section-9" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">22/09/2025<a href="#section-9" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="professor-miguÃ©l-suares-9" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">Professor MiguÃ©l Suares<a href="#professor-migu%C3%A9l-suares-9" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<!--chapter:end:07-2026-04-07_Postgres-aula.Rmd-->
</div>
</div>
<div id="banco-de-dados-postgres-1" class="section level1 hasAnchor" number="11">
<h1 class="hasAnchor"><span class="header-section-number">11</span> Banco de Dados: Postgres<a href="#banco-de-dados-postgres-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="section-10" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">22/09/2025<a href="#section-10" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="professor-miguÃ©l-suares-10" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">Professor MiguÃ©l Suares<a href="#professor-migu%C3%A9l-suares-10" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<!--chapter:end:07-2026-04-07_Postgres-exercicio.Rmd-->
</div>
</div>
<div id="banco-de-dados-espaciais---cliente-qgis" class="section level1 hasAnchor" number="12">
<h1 class="hasAnchor"><span class="header-section-number">12</span> Banco de Dados Espaciais - Cliente QGIS<a href="#banco-de-dados-espaciais---cliente-qgis" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="section-11" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">29/09/2025<a href="#section-11" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="professor-miguÃ©l-suares-11" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">Professor MiguÃ©l Suares<a href="#professor-migu%C3%A9l-suares-11" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<!--chapter:end:08-2026-04-14_QGIS-aula.Rmd-->
</div>
</div>
<div id="banco-de-dados-espaciais---cliente-qgis-1" class="section level1 hasAnchor" number="13">
<h1 class="hasAnchor"><span class="header-section-number">13</span> Banco de Dados Espaciais - Cliente QGIS<a href="#banco-de-dados-espaciais---cliente-qgis-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="section-12" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">29/09/2025<a href="#section-12" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="professor-miguÃ©l-suares-12" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">Professor MiguÃ©l Suares<a href="#professor-migu%C3%A9l-suares-12" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<!--chapter:end:08-2026-04-14_QGIS-exercicio.Rmd-->
</div>
</div>
<div id="banco-de-dados-estatÃ­stico---cliente-rstudio" class="section level1 hasAnchor" number="14">
<h1 class="hasAnchor"><span class="header-section-number">14</span> Banco de Dados EstatÃ­stico - Cliente Rstudio<a href="#banco-de-dados-estat%C3%ADstico---cliente-rstudio" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="section-13" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">06/10/2025<a href="#section-13" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="professor-miguÃ©l-suares-13" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">Professor MiguÃ©l Suares<a href="#professor-migu%C3%A9l-suares-13" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<!--chapter:end:09-2026-04-21_Rstudio-aula.Rmd-->
</div>
</div>
<div id="banco-de-dados-estatÃ­stico---cliente-rstudio-1" class="section level1 hasAnchor" number="15">
<h1 class="hasAnchor"><span class="header-section-number">15</span> Banco de Dados EstatÃ­stico - Cliente Rstudio<a href="#banco-de-dados-estat%C3%ADstico---cliente-rstudio-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="section-14" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">06/10/2025<a href="#section-14" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="professor-miguÃ©l-suares-14" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">Professor MiguÃ©l Suares<a href="#professor-migu%C3%A9l-suares-14" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<!--chapter:end:09-2026-04-21_Rstudio-exercicio.Rmd-->
</div>
</div>
<div id="banco-de-dados---anÃ¡lise-de-dados-parte-01" class="section level1 hasAnchor" number="16">
<h1 class="hasAnchor"><span class="header-section-number">16</span> Banco de Dados - AnÃ¡lise de Dados Parte 01<a href="#banco-de-dados---an%C3%A1lise-de-dados-parte-01" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="section-15" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">13/10/2025<a href="#section-15" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="professor-miguÃ©l-suares-15" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">Professor MiguÃ©l Suares<a href="#professor-migu%C3%A9l-suares-15" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<!--chapter:end:10-2026-04-28_Analise_01-aula.Rmd-->
</div>
</div>
<div id="banco-de-dados---anÃ¡lise-de-dados-parte-01-1" class="section level1 hasAnchor" number="17">
<h1 class="hasAnchor"><span class="header-section-number">17</span> Banco de Dados - AnÃ¡lise de Dados Parte 01<a href="#banco-de-dados---an%C3%A1lise-de-dados-parte-01-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="section-16" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">13/10/2025<a href="#section-16" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="professor-miguÃ©l-suares-16" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">Professor MiguÃ©l Suares<a href="#professor-migu%C3%A9l-suares-16" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<!--chapter:end:10-2026-04-28_Analise_01-exercicio.Rmd-->
</div>
</div>
<div id="banco-de-dados---anÃ¡lise-de-dados-parte-02" class="section level1 hasAnchor" number="18">
<h1 class="hasAnchor"><span class="header-section-number">18</span> Banco de Dados - AnÃ¡lise de Dados Parte 02<a href="#banco-de-dados---an%C3%A1lise-de-dados-parte-02" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="section-17" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">20/10/2025<a href="#section-17" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="professor-miguÃ©l-suares-17" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">Professor MiguÃ©l Suares<a href="#professor-migu%C3%A9l-suares-17" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<!--chapter:end:11-2026-05-05_Analise_02-aula.Rmd-->
</div>
</div>
<div id="banco-de-dados---anÃ¡lise-de-dados-parte-02-1" class="section level1 hasAnchor" number="19">
<h1 class="hasAnchor"><span class="header-section-number">19</span> Banco de Dados - AnÃ¡lise de Dados Parte 02<a href="#banco-de-dados---an%C3%A1lise-de-dados-parte-02-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="section-18" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">20/10/2025<a href="#section-18" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="professor-miguÃ©l-suares-18" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">Professor MiguÃ©l Suares<a href="#professor-migu%C3%A9l-suares-18" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<!--chapter:end:11-2026-05-05_Analise_02-exercicio.Rmd-->
</div>
</div>
<div id="banco-de-dados---anÃ¡lise-de-dados-parte-03" class="section level1 hasAnchor" number="20">
<h1 class="hasAnchor"><span class="header-section-number">20</span> Banco de Dados - AnÃ¡lise de Dados Parte 03<a href="#banco-de-dados---an%C3%A1lise-de-dados-parte-03" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="section-19" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">27/10/2025<a href="#section-19" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="professor-miguÃ©l-suares-19" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">Professor MiguÃ©l Suares<a href="#professor-migu%C3%A9l-suares-19" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<!--chapter:end:12-2026-05-12_Analise_03-aula.Rmd-->
</div>
</div>
<div id="banco-de-dados---anÃ¡lise-de-dados-parte-03-1" class="section level1 hasAnchor" number="21">
<h1 class="hasAnchor"><span class="header-section-number">21</span> Banco de Dados - AnÃ¡lise de Dados Parte 03<a href="#banco-de-dados---an%C3%A1lise-de-dados-parte-03-1" class="anchor-section" aria-label="Anchor link to header"></a></h1>
<div id="section-20" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">27/10/2025<a href="#section-20" class="anchor-section" aria-label="Anchor link to header"></a></h4>
</div>
<div id="professor-miguÃ©l-suares-20" class="section level4 unnumbered hasAnchor">
<h4 class="unnumbered hasAnchor">Professor MiguÃ©l Suares<a href="#professor-migu%C3%A9l-suares-20" class="anchor-section" aria-label="Anchor link to header"></a></h4>
<!--chapter:end:12-2026-05-12_Analise_03-exercicio.Rmd-->
</div>
</div>
<!--bookdown:body:end-->
            </section>

          </div>
        </div>
      </div>
<!--bookdown:link_prev-->
<!--bookdown:link_next-->
    </div>
  </div>
<!--bookdown:config-->

<!-- dynamically load mathjax for compatibility with self-contained -->
<script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script>
</body>

</html>
